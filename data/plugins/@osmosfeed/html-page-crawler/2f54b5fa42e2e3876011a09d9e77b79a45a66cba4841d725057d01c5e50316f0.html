<!doctype html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">

	<title>Now THAT&#8217;S What I Call Service Worker! &#8211; A List Apart</title>
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//secure.gravatar.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='dns-prefetch' href='//v0.wordpress.com' />
<link rel='dns-prefetch' href='//i0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="A List Apart &raquo; Feed" href="https://alistapart.com/main/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/alistapart.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.3"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='https://149572954.v2.pressablecdn.com/wp-includes/css/dist/block-library/style.min.css?ver=5.8.3' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<link rel='stylesheet' id='mediaelement-css'  href='https://149572954.v2.pressablecdn.com/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.16' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='https://149572954.v2.pressablecdn.com/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=5.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='coil-monetize-css-css'  href='https://149572954.v2.pressablecdn.com/wp-content/plugins/coil-web-monetization/assets/css/frontend/coil.min.css?ver=1.9.0' type='text/css' media='all' />
<link rel='stylesheet' id='coil-messaging-css'  href='https://149572954.v2.pressablecdn.com/wp-content/plugins/coil-web-monetization/assets/css/messages/coil.min.css?ver=1.9.0' type='text/css' media='all' />
<link rel='stylesheet' id='ala-style-css'  href='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/style.css?ver=1636974319' type='text/css' media='all' />
<link rel='stylesheet' id='ala-prism-style-css'  href='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/prism/prism.css?ver=1.0' type='text/css' media='all' />
<!-- `sharedaddy` is included in the concatenated jetpack.css -->
<link rel='stylesheet' id='social-logos-css'  href='https://149572954.v2.pressablecdn.com/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=10.5-beta' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://149572954.v2.pressablecdn.com/wp-content/plugins/jetpack/css/jetpack.css?ver=10.5-beta' type='text/css' media='all' />
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<link rel="https://api.w.org/" href="https://alistapart.com/wp-json/" /><link rel="alternate" type="application/json" href="https://alistapart.com/wp-json/wp/v2/article/7172789" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://alistapart.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://alistapart.com/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://alistapart.com/article/now-thats-what-i-call-service-worker/" />
<link rel="alternate" type="application/json+oembed" href="https://alistapart.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Falistapart.com%2Farticle%2Fnow-thats-what-i-call-service-worker%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://alistapart.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Falistapart.com%2Farticle%2Fnow-thats-what-i-call-service-worker%2F&#038;format=xml" />
<meta name="monetization" content="$ilp.uphold.com/Kh7NgDU9kqp3" />
<link rel="monetization" href="https://ilp.uphold.com/Kh7NgDU9kqp3" />
<style type='text/css'>img#wpstats{display:none}</style>
			<style type="text/css">
						.site-title,
			.site-description {
				position: absolute;
				clip: rect(1px, 1px, 1px, 1px);
			}

						</style>
		
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Now THAT&#8217;S What I Call Service Worker!" />
<meta property="og:url" content="https://alistapart.com/article/now-thats-what-i-call-service-worker/" />
<meta property="og:description" content="If you’re looking to achieve the single-page app level performance without the overhead (and boot time) of a huge JavaScript library or having to completely rewrite your website in a new technology…" />
<meta property="article:published_time" content="2021-03-18T14:00:00+00:00" />
<meta property="article:modified_time" content="2021-03-18T22:26:20+00:00" />
<meta property="og:site_name" content="A List Apart" />
<meta property="og:image" content="https://149572954.v2.pressablecdn.com/wp-content/uploads/2021/03/fig-1.png" />
<meta property="og:image:width" content="4214" />
<meta property="og:image:height" content="2194" />
<meta property="og:image:alt" content="" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@alistapart" />
<meta name="twitter:text:title" content="Now THAT&#8217;S What I Call Service Worker!" />
<meta name="twitter:image" content="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/cropped-icon_navigation-laurel-512.jpg?fit=240%2C240&amp;ssl=1" />
<meta name="twitter:card" content="summary" />

<!-- End Jetpack Open Graph Tags -->
<link rel="icon" href="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/cropped-icon_navigation-laurel-512.jpg?fit=32%2C32&#038;ssl=1" sizes="32x32" />
<link rel="icon" href="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/cropped-icon_navigation-laurel-512.jpg?fit=192%2C192&#038;ssl=1" sizes="192x192" />
<link rel="apple-touch-icon" href="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/cropped-icon_navigation-laurel-512.jpg?fit=180%2C180&#038;ssl=1" />
<meta name="msapplication-TileImage" content="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/cropped-icon_navigation-laurel-512.jpg?fit=270%2C270&#038;ssl=1" />
<link rel="stylesheet" type="text/css" id="wp-custom-css" href="https://alistapart.com/?custom-css=2a4ef18516" /></head>

<body class="article-template-default single single-article postid-7172789 wp-custom-logo monetization-not-initialized coil-no-gating coil-hide-excerpt article-now-thats-what-i-call-service-worker" itemscope itemtype="http://schema.org/Article">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
			<a href="https://alistapart.com/" class="custom-logo-link" rel="home"><img width="960" height="98" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/ala-logo-big.png?fit=960%2C98&amp;ssl=1" class="custom-logo" alt="A List Apart" srcset="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/ala-logo-big.png?w=960&amp;ssl=1 960w, https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/ala-logo-big.png?resize=300%2C31&amp;ssl=1 300w, https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/ala-logo-big.png?resize=768%2C78&amp;ssl=1 768w" sizes="(max-width: 960px) 100vw, 960px" /></a>				<p class="site-title"><a href="https://alistapart.com/" rel="home"  itemscope itemtype="http://schema.org/ImageObject">A List Apart</a></p>
								<p class="site-description">For people who make websites</p>
					</div><!-- .site-branding -->

		<nav id="site-navigation" class="main-navigation" itemscope="" itemtype="http://schema.org/SiteNavigationElement">
			<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false"><span class="screen-reader-text">Primary Menu</span></button>
			<div class="menu-site-header-container"><ul id="primary-menu" class="menu"><li id="menu-item-6000493" class="ala-home-url menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-6000493"><a href="https://alistapart.com" itemprop="url"><span itemprop="name">Home</span></a></li>
<li id="menu-item-6000494" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-6000494"><a href="https://alistapart.com/articles/" itemprop="url"><span itemprop="name">Articles</span></a></li>
<li id="menu-item-6000495" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000495"><a href="https://alistapart.com/events/" itemprop="url"><span itemprop="name">Events</span></a></li>
<li id="menu-item-6000496" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000496"><a href="https://alistapart.com/topics/" itemprop="url"><span itemprop="name">Topics</span></a></li>
<li id="menu-item-6000497" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000497"><a href="https://alistapart.com/about/contribute/" itemprop="url"><span itemprop="name">Write for Us</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><a href="#" class="mlp-language-nav"><span itemprop="name">Language (English) <i class="arrow-down"></i></span></a><ul class="sub-menu mlp-languages"><li class="site-id-"2" mlp-language-nav-item menu-item menu-item-type-mlp_language menu-item-object-mlp_language"><a rel="alternate" href="https://alistapart.com/it" itemprop="url"><span itemprop="name">Italian</span></a></li></ul></li></ul></div>
			<form role="search" method="get" class="search-form" action="https://alistapart.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>		</nav><!-- #site-navigation -->

	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main">

			
<article id="post-7172789" class="post-7172789 article type-article status-publish hentry category-browsers category-code category-javascript category-user-experience">

	<figure class="hero-wide" itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject">
		
	</figure>

	<header class="entry-header">
		
		<h1 class="entry-title" itemprop="headline">Now THAT&#8217;S What I Call Service Worker!</h1>		<div class="entry-meta">
			<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/jeremy-wagner/" itemprop="url"> <span itemprop="name">Jeremy Wagner</span></a></span></span><span class="posted-on"><time class="entry-date published" datetime="2021-03-18T10:00:00-04:00">March 18, 2021</time><time class="updated" datetime="2021-03-18T18:26:20-04:00">March 18, 2021</time></span>			<div class="entry-topic">
				<span class="cat-links">Published in <a href="https://alistapart.com/blog/topic/browsers/" rel="category tag">Browsers</a>, <a href="https://alistapart.com/blog/topic/code/" rel="category tag">Code</a>, <a href="https://alistapart.com/blog/topic/javascript/" rel="category tag">JavaScript</a>, <a href="https://alistapart.com/blog/topic/user-experience/" rel="category tag">User Experience</a></span>			</div>
		</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

	
	
	
	<div class="entry-content">
		
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Worker</a> API is the <a href="https://en.wikipedia.org/wiki/Dremel">Dremel</a> of the web platform. It offers incredibly broad utility while also yielding resiliency and better performance. If you’ve not used Service Worker yet—and you couldn’t be blamed if so, as <a href="https://almanac.httparchive.org/en/2020/pwa#service-workers">it hasn’t seen wide adoption as of 2020</a>—it goes something like this:</p>		<div class="aside-breaker"><span>Article Continues Below</span></div>
		<div class="ala-single-sidebar-wrapper">
			<span class="screen-reader-text">Article Continues Below</span>
			<aside class="ala-single-sidebar-minutiae">
				<span class="ala-comment-bubble"></span>					<div class="ala-share">
					<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 id="section1" class="sd-title">Share this:<a class="subhead-anchor" href="#section1">#section1</a></h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-7172789" class="share-facebook sd-button share-icon no-text" href="https://alistapart.com/article/now-thats-what-i-call-service-worker/?share=facebook" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-7172789" class="share-twitter sd-button share-icon no-text" href="https://alistapart.com/article/now-thats-what-i-call-service-worker/?share=twitter" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div>					</div>
										<section id="custom_html-6" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><a href="https://www.patreon.com/alistapart" class="patreon-bubble">Become a patron</a></div></section>					
							</aside>

			<aside class="ala-single-sidebar-1">
				<section id="custom_html-2" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><div class="banner">
	<a href="https://sps.northwestern.edu/ala">
	<img class="banner-logo" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2020/09/IDS_700x200_Logo-copy.gif?w=960&#038;ssl=1" alt="Northwestern Logo" data-recalc-dims="1">
	<p>Northwestern’s Online MS in Information Design and Strategy. Choose from tracks in content strategy, data science and analytics, and learning design.</p>
	</a>
</div>

<div class="banner ala-banner">
	<a href="https://abookapart.com/">				<img src="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/03/logo_a-book-apart-color.png?w=960&#038;ssl=1" alt="A Book Apart Logo" class="banner-logo" data-recalc-dims="1" />
		<p>A Book Apart:<br> Brief books for people who make websites.</p>		
		</a>
</div>

<div class="banner">
	<a href="https://aneventapart.com/">				<img src="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/04/AEA_2017_80x80_2.png?w=960&#038;ssl=1" alt="An Event Apart Logo" class="banner-logo" data-recalc-dims="1" />
		<p>An Event Apart:<br> 3 days of design, code, and content for web &amp; UX designers &amp; devs.</p>		
		</a>
</div></div></section>			</aside>

		</div>
		



<ol><li>On the initial visit to a website, the browser <a href="https://developers.google.com/web/fundamentals/primers/service-workers#register_a_service_worker">registers</a> what amounts to a client-side proxy powered by <a href="https://www.weeklytimber.com/sw.js">a comparably paltry amount of JavaScript</a> that—like a Web Worker—runs on its own thread.</li><li>After the Service Worker’s registration, you can intercept requests and decide how to respond to them in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent">Service Worker’s <code>fetch()</code> event</a>.</li></ol>



<p>What you decide to do with requests you intercept is a) your call and b) depends on your website. You can <a href="https://alistapart.com/article/request-with-intent-caching-strategies-in-the-age-of-pwas/#section8">rewrite requests</a>, <a href="https://web.dev/offline-cookbook/#on-install-as-dependency">precache static assets</a> during install, <a href="https://www.madebymike.com.au/writing/service-workers/#a-better-offline-page-deeper-down-the-rabbit-hole">provide offline functionality</a>, and—as will be our eventual focus—<a href="https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/">deliver smaller HTML payloads and better performance</a> for repeat visitors.</p>



<h2 id="section2">Getting out of the woods<a class="subhead-anchor" href="#section2">#section2</a></h2>



<p>Weekly Timber is a client of mine that provides logging services in central Wisconsin. For them, a fast website is vital. Their business is located in <a href="https://en.wikipedia.org/wiki/Waushara_County,_Wisconsin">Waushara County</a>, and like many rural stretches in the United States, <a href="https://maps.psc.wi.gov/apps/WisconsinBroadbandMap/">network quality and reliability isn’t great</a>.</p>



<div class="wp-block-image"><figure id="figure1" class="aligncenter size-large"><img loading="lazy" width="960" height="500" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-1.png?resize=960%2C500&#038;ssl=1" alt="A screenshot of a wireless coverage map for Waushara County, Wisconsin with a color overlay. Most of the overlay is colored tan, which represents areas of the county which have downlink speeds between 3 and 9.99 megabits per second. There are sparse light blue and dark blue areas which indicate faster service, but are far from being the majority of the county." class="wp-image-7172790" data-recalc-dims="1" /><figcaption><em><strong>Figure 1. </strong>A wireless coverage map of Waushara County, Wisconsin. The tan areas of the map indicate downlink speeds between 3 and 9.99 Mbps. Red areas are even slower, while the pale and dark blue areas are faster.</em></figcaption></figure></div>



<p>Wisconsin has farmland for <em>days</em>, but it also has plenty of forests. When you need a company that cuts logs, Google is probably your first stop. How fast a given logging company’s website is might be enough to get you looking elsewhere if you’re left waiting too long on a crappy network connection.</p>



<p>I initially didn’t believe a Service Worker was necessary for Weekly Timber’s website. After all, if things were plenty fast to start with, why complicate things? On the other hand, knowing that my client services not just Waushara County, but much of central Wisconsin, even a barebones Service Worker could be the kind of progressive enhancement that adds resilience in the places it might be needed most.</p>



<p>The first Service Worker I wrote for my client’s website—which I’ll refer to henceforth as the “standard” Service Worker—used three <a href="https://web.dev/offline-cookbook/">well-documented caching strategies</a>:</p>



<ol><li>Precache CSS and JavaScript assets for all pages when the Service Worker is installed when the window’s load event fires.</li><li>Serve static assets out of <a href="https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage"><code>CacheStorage</code></a> if available. If a static asset isn’t in <code>CacheStorage</code>, retrieve it from the network, then cache it for future visits.</li><li>For HTML assets, hit the network first and place the HTML response into <code>CacheStorage</code>. If the network is unavailable the next time the visitor arrives, serve the cached markup from <code>CacheStorage</code>.</li></ol>



<p>These are neither new nor special strategies, but they provide two benefits:</p>



<ul><li>Offline capability, which is handy when network conditions are spotty.</li><li>A performance boost for loading static assets.</li></ul>



<p>That performance boost translated to a 42% and 48% decrease in the median time to <a href="https://web.dev/fcp/">First Contentful Paint (FCP)</a> and <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a>, respectively. Better yet, these insights are based on <a href="https://en.wikipedia.org/wiki/Real_user_monitoring">Real User Monitoring (RUM)</a>. That means these gains aren’t just theoretical, but a real improvement for real people.</p>



<div class="wp-block-image"><figure id="figure2" class="aligncenter size-large"><img loading="lazy" width="960" height="282" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-2.png?resize=960%2C282&#038;ssl=1" alt="A screenshot of request/response timings in Chrome's developer tools. It depicts a service worker on a page serving a static asset from CacheStorage in roughly 23 milliseconds." class="wp-image-7172791" data-recalc-dims="1" /><figcaption><em><strong>Figure 2.</strong> A breakdown of request/response timings depicted in Chrome’s developer tools. The request is for a static asset from <code>CacheStorage</code>. Because the Service Worker doesn’t need to access the network, it takes about 23 milliseconds to “download” the asset from <code>CacheStorage</code>.</em></figcaption></figure></div>



<p>This performance boost is from bypassing the network entirely for static assets already in <code>CacheStorage</code>—particularly render-blocking stylesheets. A similar benefit is realized when we rely on the HTTP cache, only the FCP and LCP improvements I just described are in comparison to pages with a primed HTTP cache without an installed Service Worker.</p>



<p>If you’re wondering why <a href="https://blog.yoav.ws/tale-of-four-caches/"><code>CacheStorage</code> and the HTTP cache aren’t equal</a>, it’s because the HTTP cache—at least in <a href="https://jakearchibald.com/2016/caching-best-practices/#pattern-2-mutable-content-always-server-revalidated">some cases</a>—may still involve a trip to the server to verify asset freshness. <a href="https://hacks.mozilla.org/2017/01/using-immutable-caching-to-speed-up-the-web/">Cache-Control’s <code>immutable</code> flag gets around this</a>, but <a href="https://caniuse.com/mdn-http_headers_cache-control_immutable"><code>immutable</code> doesn’t have great support</a> yet. A long max-age value works, too, but the combination of Service Worker API and <code>CacheStorage</code> gives you a lot more flexibility.</p>



<p>Details aside, the takeaway is that the simplest and most well-established Service Worker caching practices can improve performance. Potentially more than what well-configured <code>Cache-Control</code> headers can provide. Even so, Service Worker is an incredible technology with far more possibilities. It’s possible to go farther, and I’ll show you how.</p>



<h2 id="section3">A better, faster Service Worker<a class="subhead-anchor" href="#section3">#section3</a></h2>



<p>The web <em>loves</em> itself some “innovation,” which is a word we equally love to throw around. To me, true innovation isn’t when we create new frameworks or patterns solely for the benefit of developers, but whether those inventions benefit people who end up using whatever it is we slap up on the web. <a href="https://www.w3.org/TR/html-design-principles/#priority-of-constituencies">The priority of constituencies</a> is a thing we ought to respect. Users above all else, always.</p>



<p>The Service Worker API’s innovation space is considerable. How you work within that space can have a big effect on how the web is experienced. Things like <a href="https://developers.google.com/web/updates/2017/02/navigation-preload">navigation preload</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream#examples"><code>ReadableStream</code></a> have taken Service Worker from great to killer. We can do the following with these new capabilities, respectively:</p>



<ul><li>Reduce Service Worker latency by parallelizing Service Worker startup time and <a href="https://fetch.spec.whatwg.org/#navigation-request">navigation requests</a>.</li><li>Stream content in from <code>CacheStorage</code> and the network.</li></ul>



<p>Moreover, we’re going to combine these capabilities and pull out one more trick: precache header and footer partials, then combine them with content partials from the network. This not only reduces how much data we download from the network, but it also improves perceptual performance for repeat visits. That’s innovation that helps everyone.</p>



<p>Grizzled, I turn to you and say <em>“let’s do this.”</em></p>



<h3 id="section4">Laying the groundwork<a class="subhead-anchor" href="#section4">#section4</a></h3>



<p>If the idea of combining precached header and footer partials with network content on the fly seems like a Single Page Application (SPA), you’re not far off. Like an SPA, you’ll need to apply the “app shell” model to your website. Only instead of a client-side router plowing content into one piece of minimal markup, you have to think of your website as three separate parts:</p>



<ul><li>The header.</li><li>The content.</li><li>The footer.</li></ul>



<p>For my client’s website, that looks like this:</p>



<div class="wp-block-image"><figure id="figure3" class="aligncenter size-large"><img loading="lazy" width="960" height="2006" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-3.png?resize=960%2C2006&#038;ssl=1" alt="A screenshot of the Weekly Timber website color coded to delineate each partial that makes up the page. The header is color coded as blue, the footer as red, and the main content in between as yellow." class="wp-image-7172792" data-recalc-dims="1" /><figcaption><em><strong>Figure 3.</strong> A color coding of the Weekly Timber website’s different partials. The Footer and Header partials are stored in <code>CacheStorage</code>, while the Content partial is retrieved from the network unless the user is offline.</em></figcaption></figure></div>



<p>The thing to remember here is that the individual partials don’t have to be valid markup in the sense that all tags need to be closed within each partial. The only thing that counts in the final sense is that the combination of these partials must be valid markup.</p>



<p>To start, you’ll need to precache separate header and footer partials when the Service Worker is installed. For my client’s website, these partials are served from the <code>/partial-header</code> and <code>/partial-footer</code> pathnames:</p>



<pre id="snippet1" class="wp-block-code"><code>self.addEventListener("install", event =&gt; {
  const cacheName = "fancy_cache_name_here";
  const precachedAssets = &#091;
    "/partial-header",  // The header partial
    "/partial-footer",  // The footer partial
    // Other assets worth precaching
  ];

  event.waitUntil(caches.open(cacheName).then(cache =&gt; {
    return cache.addAll(precachedAssets);
  }).then(() =&gt; {
    return self.skipWaiting();
  }));
});</code></pre>



<p>Every page must be fetchable as a content partial minus the header and footer, as well as a full page with the header and footer. This is key because the initial visit to a page won’t be controlled by a Service Worker. Once the Service Worker takes over, then you serve content partials and assemble them into complete responses with the header and footer partials from <code>CacheStorage</code>.</p>



<p>If your site is static, this means generating a whole other mess of markup partials that you can rewrite requests to in the Service Worker’s <code>fetch()</code> event. If your website has a back end—as is the case with my client—you can use an HTTP request header to instruct the server to deliver full pages or content partials.</p>



<p>The hard part is putting all the pieces together—but we’ll do just that.</p>



<h3 id="section5">Putting it all together<a class="subhead-anchor" href="#section5">#section5</a></h3>



<p>Writing even a basic Service Worker can be challenging, but things get real complicated real fast when assembling multiple responses into one. One reason for this is that in order to avoid the Service Worker startup penalty, we’ll need to set up navigation preload.</p>



<h4 id="section6">Implementing navigation preload<a class="subhead-anchor" href="#section6">#section6</a></h4>



<p>Navigation preload addresses the problem of Service Worker startup time, which delays navigation requests to the network. The last thing you want to do with a Service Worker is hold up the show.</p>



<p>Navigation preload must be explicitly enabled. Once enabled, the Service Worker won’t hold up navigation requests during startup. Navigation preload is enabled in the Service Worker’s <code>activate</code> event:</p>



<pre id="snippet2" class="wp-block-code"><code>self.addEventListener("activate", event =&gt; {
  const cacheName = "fancy_cache_name_here";
  const preloadAvailable = "navigationPreload" in self.registration;

  event.waitUntil(caches.keys().then(keys =&gt; {
    return Promise.all(&#091;
      keys.filter(key =&gt; {
        return key !== cacheName;
      }).map(key =&gt; {
        return caches.delete(key);
      }),
      self.clients.claim(),
      preloadAvailable ? self.registration.navigationPreload.enable() : true
    ]);
  }));
});</code></pre>



<p><a href="https://caniuse.com/mdn-api_navigationpreloadmanager">Because navigation preload isn’t supported everywhere</a>, we have to do the usual feature check, which we store in the above example in the <code>preloadAvailable</code> variable.</p>



<p>Additionally, we need to use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all()</code></a> to resolve multiple asynchronous operations before the Service Worker activates. This includes pruning those old caches, as well as waiting for both <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clients/claim"><code>clients.claim()</code></a> (which tells the Service Worker to assert control immediately rather than waiting until the next navigation) and navigation preload to be enabled.</p>



<p>A ternary operator is used to enable navigation preload in supporting browsers and avoid throwing errors in browsers that don’t. If <code>preloadAvailable</code> is <code>true</code>, we enable navigation preload. If it isn’t, we pass a Boolean that won’t affect how <code>Promise.all()</code> resolves.</p>



<p>With navigation preload enabled, we need to write code in our Service Worker’s <code>fetch()</code> event handler to make use of the preloaded response:</p>



<pre id="snippet3" class="wp-block-code"><code>self.addEventListener("fetch", event =&gt; {
  const { request } = event;

  // Static asset handling code omitted for brevity
  // ...

  // Check if this is a request for a document
  if (request.mode === "navigate") {
    const networkContent = Promise.resolve(event.preloadResponse).then(response =&gt; {
      if (response) {
        addResponseToCache(request, response.clone());

        return response;
      }

      return fetch(request.url, {
        headers: {
          "X-Content-Mode": "partial"
        }
      }).then(response =&gt; {
        addResponseToCache(request, response.clone());

        return response;
      });
    }).catch(() =&gt; {
      return caches.match(request.url);
    });

    // More to come...
  }
});</code></pre>



<p>Though this isn’t the entirety of the Service Worker’s <code>fetch()</code> event code, there’s a lot that needs explaining:</p>



<ol><li>The preloaded response is available in <code>event.preloadResponse</code>. However, <a href="https://developers.google.com/web/updates/2017/02/navigation-preload">as Jake Archibald notes</a>, the value of <code>event.preloadResponse</code> will be <code>undefined</code> in browsers that don’t support navigation preload. Therefore, we must pass <code>event.preloadResponse</code> to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve"><code>Promise.resolve()</code></a> to avoid compatibility issues.</li><li>We adapt in the resulting <code>then</code> callback. If event.<code>preloadResponse</code> is supported, we use the preloaded response and add it to <code>CacheStorage</code> via an <code>addResponseToCache()</code> helper function. If not, we send a <code>fetch()</code> request to the network to get the content partial using a custom <code>X-Content-Mode</code> header with a value of <code>partial</code>.</li><li>Should the network be unavailable, we fall back to the most recently accessed content partial in <code>CacheStorage</code>.</li><li>The response—regardless of where it was procured from—is then returned to a variable named <code>networkContent</code> that we use later.</li></ol>



<p>How the content partial is retrieved is tricky. With navigation preload enabled, a special <code>Service-Worker-Navigation-Preload</code> header with a value of <code>true</code> is added to navigation requests. We then work with that header on the back end to ensure the response is a content partial rather than the full page markup.</p>



<p>However, because navigation preload isn’t available in all browsers, we send a different header in those scenarios. In Weekly Timber’s case, we fall back to a custom <code>X-Content-Mode</code> header. In my client’s PHP back end, I’ve created some handy constants:</p>



<pre id="snippet4" class="wp-block-code"><code>&lt;?php

// Is this a navigation preload request?
define("NAVIGATION_PRELOAD", isset($_SERVER&#091;"HTTP_SERVICE_WORKER_NAVIGATION_PRELOAD"]) &amp;&amp; stristr($_SERVER&#091;"HTTP_SERVICE_WORKER_NAVIGATION_PRELOAD"], "true") !== false);

// Is this an explicit request for a content partial?
define("PARTIAL_MODE", isset($_SERVER&#091;"HTTP_X_CONTENT_MODE"]) &amp;&amp; stristr($_SERVER&#091;"HTTP_X_CONTENT_MODE"], "partial") !== false);

// If either is true, this is a request for a content partial
define("USE_PARTIAL", NAVIGATION_PRELOAD === true || PARTIAL_MODE === true);

?&gt;</code></pre>



<p>From there, the <code>USE_PARTIAL</code> constant is used to adapt the response:</p>



<pre id="snippet5" class="wp-block-code"><code>&lt;?php

if (USE_PARTIAL === false) {
  require_once("partial-header.php");
}

require_once("includes/home.php");

if (USE_PARTIAL === false) {
  require_once("partial-footer.php");
}

?&gt;</code></pre>



<p>The thing to be hip to here is that you should specify <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Vary">a <code>Vary</code> header</a> for HTML responses to take the <code>Service-Worker-Navigation-Preload</code> (and in this case, the <code>X-Content-Mode</code> header) into account for HTTP caching purposes—assuming you’re caching HTML at all, which may not be the case for you.</p>



<p>With our handling of navigation preloads complete, we can then move onto the work of streaming content partials from the network and stitching them together with the header and footer partials from <code>CacheStorage</code> into a single response that the Service Worker will provide.</p>



<h4 id="section7">Streaming partial content and stitching together responses<a class="subhead-anchor" href="#section7">#section7</a></h4>



<p>While the header and footer partials will be available almost instantaneously because they’ve been in <code>CacheStorage</code> since the Service Worker’s installation, it’s the content partial we retrieve from the network that will be the bottleneck. It’s therefore vital that we <a href="https://developers.google.com/web/updates/2016/06/sw-readablestreams">stream responses</a> so we can start pushing markup to the browser as quickly as possible. <code>ReadableStream</code> can do this for us.</p>



<p>This <code>ReadableStream</code> business is a mind-bender. Anyone who tells you it’s “easy” is whispering sweet nothings to you. It’s <em>hard</em>. After I wrote my own function to merge streamed responses and messed up a critical step—which ended up not improving page performance, mind you—I modified <a href="https://gist.github.com/jakearchibald/d0b7e65496a8ec362f10739c3e28da6e">Jake Archibald’s <code>mergeResponses()</code> function</a> to suit my needs:</p>



<pre id="snippet6" class="wp-block-code"><code>async function mergeResponses (responsePromises) {
  const readers = responsePromises.map(responsePromise =&gt; {
    return Promise.resolve(responsePromise).then(response =&gt; {
      return response.body.getReader();
    });
  });

  let doneResolve,
      doneReject;

  const done = new Promise((resolve, reject) =&gt; {
    doneResolve = resolve;
    doneReject = reject;
  });

  const readable = new ReadableStream({
    async pull (controller) {
      const reader = await readers&#091;0];

      try {
        const { done, value } = await reader.read();

        if (done) {
          readers.shift();

          if (!readers&#091;0]) {
            controller.close();
            doneResolve();

            return;
          }

          return this.pull(controller);
        }

        controller.enqueue(value);
      } catch (err) {
        doneReject(err);
        throw err;
      }
    },
    cancel () {
      doneResolve();
    }
  });

  const headers = new Headers();
  headers.append("Content-Type", "text/html");

  return {
    done,
    response: new Response(readable, {
      headers
    })
  };
}</code></pre>



<p>As usual, there’s a lot going on:</p>



<ol><li><code>mergeResponses()</code> accepts an argument named <code>responsePromises</code>, which is an array of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a> objects returned from either a navigation preload, <code>fetch()</code>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage/match"><code>caches.match()</code></a>. Assuming the network is available, this will always contain three responses: two from <code>caches.match()</code> and (hopefully) one from the network.</li><li>Before we can stream the responses in the <code>responsePromises</code> array, we must map <code>responsePromises</code> to an array containing one reader for each response. Each reader is used later in a <code>ReadableStream()</code> constructor to stream each response’s contents.</li><li>A promise named <code>done</code> is created. In it, we assign the promise’s <code>resolve()</code> and <code>reject()</code> functions to the external variables <code>doneResolve</code> and <code>doneReject</code>, respectively. These will be used in the <code>ReadableStream()</code> to signal whether the stream is finished or has hit a snag.</li><li>The new <code>ReadableStream()</code> instance is created with a name of <code>readable</code>. As responses stream in from <code>CacheStorage</code> and the network, their contents will be appended to <code>readable</code>.</li><li>The stream’s <code>pull()</code> method streams the contents of the first response in the array. If the stream isn’t canceled somehow, the reader for each response is discarded by calling the readers array’s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/shift"><code>shift()</code> method</a> when the response is fully streamed. This repeats until there are no more readers to process.</li><li>When all is done, the merged stream of responses is returned as a single response, and we return it with a <code>Content-Type</code> header value of <code>text/html</code>.</li></ol>



<p>This is <a href="https://gist.github.com/jakearchibald/32b2155708a665e9c8e06642b7c09d86">much simpler</a> if you use <a href="https://developer.mozilla.org/en-US/docs/Web/API/TransformStream"><code>TransformStream</code></a>, but depending on when you read this, that may not be an option for every browser. For now, we’ll have to stick with this approach.</p>



<p>Now let’s revisit the Service Worker’s <code>fetch()</code> event from earlier, and apply the <code>mergeResponses()</code> function:</p>



<pre id="snippet7" class="wp-block-code"><code>self.addEventListener("fetch", event =&gt; {
  const { request } = event;

  // Static asset handling code omitted for brevity
  // ...

  // Check if this is a request for a document
  if (request.mode === "navigate") {
    // Navigation preload/fetch() fallback code omitted.
    // ...

    const { done, response } = await mergeResponses(&#091;
      caches.match("/partial-header"),
      networkContent,
      caches.match("/partial-footer")
    ]);

    event.waitUntil(done);
    event.respondWith(response);
  }
});</code></pre>



<p>At the end of the <code>fetch()</code> event handler, we pass the header and footer partials from <code>CacheStorage</code> to the <code>mergeResponses()</code> function, and pass the result to the <code>fetch()</code> event’s <a href="https://developer.mozilla.org/en-us/docs/Web/API/FetchEvent/respondWith"><code>respondWith()</code> method</a>, which serves the merged response on behalf of the Service Worker.</p>



<h2 id="section8">Are the results worth the hassle?<a class="subhead-anchor" href="#section8">#section8</a></h2>



<p>This is a lot of stuff to do, and it’s complicated! You might mess something up, or maybe your website’s architecture isn’t well-suited to this exact approach. So it’s important to ask: are the performance benefits worth the work? In my view? Yes! The synthetic performance gains aren’t bad at all:</p>



<div class="wp-block-image"><figure id="figure4" class="aligncenter size-large"><img loading="lazy" width="960" height="530" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-4.png?resize=960%2C530&#038;ssl=1" alt="A bar graph comparing First Contentful Paint and Largest Contentful Paint performance for the Weekly Timber website for scenarios in which there is no service worker, a &quot;standard&quot; service worker, and a streaming service worker that stitches together content partials from CacheStorage and the network. The first two scenarios are basically the same, while the streaming service worker delivers measurably better performance for both FCP and LCP—especially for FCP!" class="wp-image-7172793" data-recalc-dims="1" /><figcaption><em><strong>Figure 4.</strong> A bar chart of median FCP and LCP synthetic performance data across various Service Worker types for the Weekly Timber website.</em></figcaption></figure></div>



<p>Synthetic tests don’t measure performance for anything except the specific device and internet connection they’re performed on. Even so, these tests were conducted on a staging version of my client’s website with a low-end <a href="https://www.gsmarena.com/nokia_2-8513.php">Nokia 2 Android phone</a> on a throttled “Fast 3G” connection in Chrome’s developer tools. Each category was tested ten times on the homepage. The takeaways here are:</p>



<ul><li>No Service Worker at all is slightly faster than the “standard” Service Worker with simpler caching patterns than the streaming variant. Like, ever so slightly faster. This may be due to the delay introduced by Service Worker startup, however, the RUM data I’ll go over shows a different case.</li><li>Both LCP and FCP are tightly coupled in scenarios where there’s no Service Worker or when the “standard” Service Worker is used. This is because the content of the page is pretty simple and the CSS is fairly small. The Largest Contentful Paint is usually the opening paragraph on a page.</li><li>However, the streaming Service Worker decouples FCP and LCP because the header content partial streams in right away from <code>CacheStorage</code>.</li><li>Both FCP and LCP are lower in the streaming Service Worker than in other cases.</li></ul>



<div class="wp-block-image"><figure id="figure5" class="aligncenter size-large"><img loading="lazy" width="960" height="541" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-5.png?resize=960%2C541&#038;ssl=1" alt="A bar chart comparing the RUM median FCP and LCP performance of no service worker, a &quot;standard&quot; service worker, and a streaming service worker. Both the &quot;standard&quot; and streaming service worker offer better FCP and LCP performance over no service worker, but the streaming service worker excels at FCP performance, while only being slightly slower at LCP than the &quot;standard&quot; service worker." class="wp-image-7172794" data-recalc-dims="1" /><figcaption><em><strong>Figure 5.</strong> A bar chart of median FCP and LCP RUM performance data across various Service Worker types for the Weekly Timber website.</em></figcaption></figure></div>



<p>The benefits of the streaming Service Worker for real users is pronounced. For FCP, we receive an 79% improvement over no Service Worker at all, and a 63% improvement over the “standard” Service Worker. The benefits for LCP are more subtle. Compared to no Service Worker at all, we realize a 41% improvement in LCP—which is incredible! However, compared to the “standard” Service Worker, LCP is a touch slower.</p>



<p>Because <a href="https://timkadlec.com/remembers/2018-06-07-prioritizing-the-long-tail-of-performance/">the long tail of performance</a> is important, let’s look at the 95th percentile of FCP and LCP performance:</p>



<div class="wp-block-image"><figure id="figure6" class="aligncenter size-large"><img loading="lazy" width="960" height="534" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2021/03/fig-6.png?resize=960%2C534&#038;ssl=1" alt="A bar chart comparing the RUM median FCP and LCP performance of no service worker, a &quot;standard&quot; service worker, and a streaming service worker. Both the &quot;standard&quot; and streaming service workers are faster than no service worker at all, but the streaming service worker beats out the &quot;standard&quot; service worker for both FCP and LCP." class="wp-image-7172795" data-recalc-dims="1" /><figcaption><em><strong>Figure 6.</strong> A bar chart of 95th percentile FCP and LCP RUM performance data across various Service Worker types for the Weekly Timber website.</em></figcaption></figure></div>



<p>The 95th percentile of RUM data is a great place to assess the slowest experiences. In this case, we see that the streaming Service Worker confers a 40% and 51% improvement in FCP and LCP, respectively, over no Service Worker at all. Compared to the “standard” Service Worker, we see a reduction in FCP and LCP by 19% and 43%, respectively. If these results seem a bit squirrely compared to synthetic metrics, remember: that’s RUM data for you! You never know who’s going to visit your website on which device on what network.</p>



<p>While both FCP and LCP are boosted by the myriad benefits of streaming, navigation preload (in Chrome’s case), and sending less markup by stitching together partials from both <code>CacheStorage</code> and the network, FCP is the clear winner. Perceptually speaking, the benefit is pronounced, as this video would suggest:</p>



<figure id="figure7" class="wp-block-video aligncenter"><video controls muted src="https://alistapart.com/wp-content/uploads/2021/03/fig-7.mp4" playsinline></video><figcaption><em><strong>Figure 7.</strong> Three WebPageTest videos of a repeat view of the Weekly Timber homepage. On the left is the page not controlled by a Service Worker, with a primed HTTP cache. On the right is the same page controlled by a streaming Service Worker, with CacheStorage primed.</em></figcaption></figure>



<p>Now ask yourself this: If this is the kind of improvement we can expect on such a small and simple website, what might we expect on a website with larger header and footer markup payloads?</p>



<h2 id="section9">Caveats and conclusions<a class="subhead-anchor" href="#section9">#section9</a></h2>



<p>Are there trade-offs with this on the development side? <em>Oh</em> yeah.</p>



<p><a href="https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/#5)-set-the-correct-title">As Philip Walton has noted</a>, a cached header partial means the document title must be updated in JavaScript on each navigation by changing the value of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/title"><code>document.title</code></a>. It also means you’ll need to update the navigation state in JavaScript to reflect the current page if that’s something you do on your website. Note that this shouldn’t cause indexing issues, as Googlebot crawls pages with an unprimed cache.</p>



<p>There may also be some challenges on sites with authentication. For example, if your site’s header displays the current authenticated user on log in, you may have to update the header partial markup provided by <code>CacheStorage</code> in JavaScript on each navigation to reflect who is authenticated. You may be able to do this by storing basic user data in <code>localStorage</code> and updating the UI from there.</p>



<p>There are certainly other challenges, but it’ll be up to you to weigh the user-facing benefits versus the development costs. In my opinion, this approach has broad applicability in applications such as blogs, marketing websites, news websites, ecommerce, and other typical use cases.</p>



<p>All in all, though, it’s akin to the performance improvements and efficiency gains that you’d get from an SPA. Only the difference is that you’re not replacing time-tested navigation mechanisms and grappling with all the messiness that entails, but <em>enhancing </em>them. That’s the part I think is really important to consider in a world where client-side routing is all the rage.</p>



<p>“What about <a href="https://developers.google.com/web/tools/workbox">Workbox</a>?,” you might ask—and you’d be right to. Workbox simplifies a lot when it comes to using the Service Worker API, and you’re not wrong to reach for it. Personally, I prefer to work as close to the metal as I can so I can gain a better understanding of what lies beneath abstractions like Workbox. Even so, Service Worker is hard. Use Workbox if it suits you. As far as frameworks go, its abstraction cost is very low.</p>



<p>Regardless of this approach, I think there’s incredible utility and power in using the Service Worker API to reduce the amount of markup you send. It benefits my client and all the people that use their website. Because of Service Worker and the innovation around its use, my client’s website is faster in the far-flung parts of Wisconsin. That’s something I feel good about.</p>



<p><em>Special thanks to </em><a href="https://jakearchibald.com/"><em>Jake Archibald</em></a><em> for his valuable editorial advice, which, to put it mildly, considerably improved the quality of this article.</em></p>
		<div class="ala-single-sidebar-wrapper sidebar-related">
			<aside id="related" class="ala-single-sidebar-related">
									<section class="ala-sb-rel__latest">
						<h3 class="ala-sb-rel__latest__title">
							Recently by Jeremy Wagner						</h3>
						<article>
							<h3 class="ala-sb-rel__latest__entry-title">
								<a href="https://alistapart.com/article/responsible-javascript-part-3/">Responsible JavaScript: Part III								</a></h3>
							<div class="ala-sb-rel__latest__entry-content">Convenience always comes at a price. On the web, developer convenience often means third-party JavaScript—and we pass the hefty cost on to our users. Jeremy Wagner shows us how to get and keep third-party scripts under control through clean-up sprints and eternal vigilance in Part III of Responsible JavaScript.</php></div>
						</article>
					</section>
										<section class="ala-sb-rel__category">
						<h3 class="ala-sb-rel__cat__title">
							Further reading about							<a href="https://alistapart.com/blog/topic/browsers/">Browsers</a>
						</h3>
													<article>
								<h3 class="ala-sb-rel__cat__entry-title">
									<a href="https://alistapart.com/article/request-with-intent-caching-strategies-in-the-age-of-pwas/">Request with Intent: Caching Strategies in the Age of PWAs									</a></h3>
								<div class="ala-sb-rel__cat__entry-content">Caching media files, especially images, seems like an obvious way to improve performance, but should we? To provide a more performant UX without abusing users’s network connections or hard drives, Aaron Gustafson puts a spin on classic best practices, experiments with media caching strategies, and shares smart Cache API tricks.</div>
							</article>
														<article>
								<h3 class="ala-sb-rel__cat__entry-title">
									<a href="https://alistapart.com/article/responsible-javascript-part-2/">Responsible JavaScript: Part II									</a></h3>
								<div class="ala-sb-rel__cat__entry-content">Web development is hard. We don’t always get it right on the first try. Fortunately, we don’t have to get everything perfect from the start. Jeremy  Wagner provides some helpful ways to start recovering from our collective JavaScript hangover.</div>
							</article>
												</section>
								</aside>
		</div>
			</div><!-- .entry-content -->
	</article><!-- #post-7172789 -->

				<footer class="ala-author">
					<div class="ala-author__content clear">
						<a name="panelist0"></a>
													<h4 class="ala-author__about">About the Author</h4>
													<div class="ala-author__avatar">
							<img width="150" height="150" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2017/02/jlwagner-alt-2.jpg?fit=150%2C150&amp;ssl=1" class="avatar avatar-150 photo wp-post-image" alt="A photograph of A List Apart author Jeremy Wagner." loading="lazy" />						</div>

						<h3 class="ala-author__name">Jeremy Wagner</h3>
						<div class="ala-author__description">Jeremy Wagner is an independent web performance consultant, <a href="https://jeremy.codes/writing/" rel="noopener">author</a>, and <a href="https://speaking.jeremy.codes/" rel="noopener">speaker</a> from Minnesota doing his level best to make the web faster for everyone, everywhere.</div>
					</div>
											<aside class="ala-author__more">
							<h3 class="ala-author__more_title">More from this author</h3>
															<h4 class="ala-author__article">
									<a href="https://alistapart.com/article/responsible-javascript-part-3/">Responsible JavaScript: Part III									</a>
								</h4>
																<h4 class="ala-author__article">
									<a href="https://alistapart.com/article/responsible-javascript-part-2/">Responsible JavaScript: Part II									</a>
								</h4>
																<h4 class="ala-author__article">
									<a href="https://alistapart.com/article/responsible-javascript-part-1/">Responsible JavaScript: Part I									</a>
								</h4>
																<h4 class="ala-author__article">
									<a href="https://alistapart.com/article/designing-for-research/">Designing for Research									</a>
								</h4>
																<h4 class="ala-author__article">
									<a href="https://alistapart.com/article/gauging-the-perception-of-lossy-images-a-study/">How People Perceive Lossy Image Quality: A Study									</a>
								</h4>
														</aside>
										</footer>
									<aside class="widget-area pre-footer-widget-area pre-footer-single">
						<section id="custom_html-4" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><div class="pre-footer-email-signup">
	<strong>Get our latest articles in your inbox.</strong> <a href="https://alistapart.com/email-signup">Sign up for email alerts</a>.
</div>
</div></section>					</aside><!-- .pre-footer-widget-area -->
					
					<div class="comment-area-wrap two-column-layout">
						
<div id="comments" class="comments-area column-content">

	
		<h2 class="comments-title">No Comments</h2>
				<div class="comments-off">
			<h3 class="comments-off-title"> Got something to say?</h3>
			<p class="no-comments">We have turned off comments, but you can see what folks had to say before we did so.</p>
		</div>
		
</div><!-- #comments -->
	<div class="column-sidebar ala-posts">
		<h2 class="section-title">More from ALA</h2>
				<article id="post-7173224" class="home-post-content post-7173224 article type-article status-publish has-post-thumbnail hentry category-code category-css">

				<header class="entry-header">
					<h4 class="home-post-title"><a href="https://alistapart.com/article/breaking-out-of-the-box/" rel="bookmark">Breaking Out of the Box</a></h4>					<div class="entry-meta">
						<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/patrick-brosset/" itemprop="url"> <span itemprop="name">Patrick Brosset</span></a></span></span>					</div><!-- .entry-meta -->
				</header><!-- .entry-header -->

				<div class="entry-content">
					What can we do with thirty pixels? Windows Controls Overlay frees us from 40 years of history telling us how apps should look.				</div><!-- .entry-content -->
				<footer class="footer-meta entry-meta">
					<span class="cat-links"><a href="https://alistapart.com/blog/topic/code/" rel="category tag">Code</a></span><span class="posted-on"><time class="entry-date published" datetime="2021-12-09T10:00:00-05:00">December 09, 2021</time><time class="updated" datetime="2021-12-09T07:23:48-05:00">December 09, 2021</time></span>				</footer><!-- .entry-meta -->


			</article><!-- #post-## -->

						<article id="post-7173136" class="home-post-content post-7173136 article type-article status-publish has-post-thumbnail hentry category-user-experience category-user-research">

				<header class="entry-header">
					<h4 class="home-post-title"><a href="https://alistapart.com/article/how-to-sell-ux-research/" rel="bookmark">How to Sell UX Research with Two Simple Questions</a></h4>					<div class="entry-meta">
						<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/sophiavoychehovski/" itemprop="url"> <span itemprop="name">Sophia V. Prater</span></a></span></span>					</div><!-- .entry-meta -->
				</header><!-- .entry-header -->

				<div class="entry-content">
					Seriously, do not ever design screens again without first answering these questions: what are the objects and how do they relate?				</div><!-- .entry-content -->
				<footer class="footer-meta entry-meta">
					<span class="cat-links"><a href="https://alistapart.com/blog/topic/user-experience/" rel="category tag">User Experience</a></span><span class="posted-on"><time class="entry-date published" datetime="2021-10-21T10:00:00-04:00">October 21, 2021</time><time class="updated" datetime="2021-10-21T07:17:11-04:00">October 21, 2021</time></span>				</footer><!-- .entry-meta -->


			</article><!-- #post-## -->

						<article id="post-7173122" class="home-post-content post-7173122 article type-article status-publish has-post-thumbnail hentry category-content category-content-strategy">

				<header class="entry-header">
					<h4 class="home-post-title"><a href="https://alistapart.com/article/a-content-model-is-not-a-design-system/" rel="bookmark">A Content Model Is Not a Design System</a></h4>					<div class="entry-meta">
						<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/mike-wills/" itemprop="url"> <span itemprop="name">Mike Wills</span></a></span></span>					</div><!-- .entry-meta -->
				</header><!-- .entry-header -->

				<div class="entry-content">
					Why do so many content models still look more like design systems rather than reflecting structured data? Mike Wills takes us on a personal journey as he examines his own past experiences and invites us to conceive content models that articulate meaning and group related content together for use on any channel.				</div><!-- .entry-content -->
				<footer class="footer-meta entry-meta">
					<span class="cat-links"><a href="https://alistapart.com/blog/topic/content/" rel="category tag">Content</a></span><span class="posted-on"><time class="entry-date published" datetime="2021-09-23T10:00:00-04:00">September 23, 2021</time><time class="updated" datetime="2021-09-23T09:21:30-04:00">September 23, 2021</time></span>				</footer><!-- .entry-meta -->


			</article><!-- #post-## -->

						<article id="post-7173095" class="home-post-content post-7173095 article type-article status-publish has-post-thumbnail hentry category-process category-usability category-user-experience category-user-research">

				<header class="entry-header">
					<h4 class="home-post-title"><a href="https://alistapart.com/article/design-for-safety-excerpt/" rel="bookmark">Design for Safety, An Excerpt</a></h4>					<div class="entry-meta">
						<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/eva-penzeymoog/" itemprop="url"> <span itemprop="name">Eva PenzeyMoog</span></a></span></span>					</div><!-- .entry-meta -->
				</header><!-- .entry-header -->

				<div class="entry-content">
					In this excerpt from Design for Safety, Eva PenzeyMoog discusses concrete ways you can incorporate safety awareness into your design processes.				</div><!-- .entry-content -->
				<footer class="footer-meta entry-meta">
					<span class="cat-links"><a href="https://alistapart.com/blog/topic/process/" rel="category tag">Process</a></span><span class="posted-on"><time class="entry-date published" datetime="2021-08-26T11:01:43-04:00">August 26, 2021</time><time class="updated" datetime="2021-08-26T11:01:44-04:00">August 26, 2021</time></span>				</footer><!-- .entry-meta -->


			</article><!-- #post-## -->

						<article id="post-7173076" class="home-post-content post-7173076 article type-article status-publish has-post-thumbnail hentry category-design category-web-strategy">

				<header class="entry-header">
					<h4 class="home-post-title"><a href="https://alistapart.com/article/sustainable-web-design-excerpt/" rel="bookmark">Sustainable Web Design, An Excerpt</a></h4>					<div class="entry-meta">
						<span class="byline"> by <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><a class="url fn n" href="https://alistapart.com/author/tom-greenwood/" itemprop="url"> <span itemprop="name">Tom Greenwood</span></a></span></span>					</div><!-- .entry-meta -->
				</header><!-- .entry-header -->

				<div class="entry-content">
					In this excerpt from Sustainable Web Design, Tom Greenwood provides clear guidance on how to track and address the carbon footprint of our websites.				</div><!-- .entry-content -->
				<footer class="footer-meta entry-meta">
					<span class="cat-links"><a href="https://alistapart.com/blog/topic/design/" rel="category tag">Design</a></span><span class="posted-on"><time class="entry-date published" datetime="2021-08-05T10:00:00-04:00">August 05, 2021</time><time class="updated" datetime="2021-08-04T17:23:57-04:00">August 04, 2021</time></span>				</footer><!-- .entry-meta -->


			</article><!-- #post-## -->

			
	
</div><!-- .home-post-wrap clear -->

					</div>
					
		</main><!-- #main -->
	</div><!-- #primary -->


</div><!-- #content -->

	<div class="widget-area header-widget">
		<section id="custom_html-5" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><div class="banner">
	<a href="https://sps.northwestern.edu/ala">
	<img class="banner-logo" src="https://i0.wp.com/alistapart.com/wp-content/uploads/2020/09/IDS_700x200_Logo-copy.gif?w=960&#038;ssl=1" alt="Northwestern Logo" data-recalc-dims="1">
	<p>Northwestern’s Online MS in Information Design and Strategy. Choose from tracks in content strategy, data science and analytics, and learning design.</p>
	</a>
</div></div></section>	</div><!-- .header-widget -->
	
<footer id="colophon" class="site-footer" itemscope itemtype="https://schema.org/WebPage">
	<nav class="footer-navigation footer navigation-top"  itemscope itemtype="http://schema.org/SiteNavigationElement">
		<div class="menu-footer-pages-container"><ul id="footer-top-left-menu" class="footer-top-left-menu"><li id="menu-item-6000544" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000544"><a href="https://alistapart.com/about/" itemprop="url">About</a></li>
<li id="menu-item-6000545" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000545"><a href="https://alistapart.com/authors/" itemprop="url">Authors</a></li>
<li id="menu-item-6000546" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000546"><a href="https://alistapart.com/about/masthead/" itemprop="url">Masthead</a></li>
<li id="menu-item-6000547" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000547"><a href="https://alistapart.com/about/style-guide/" itemprop="url">Style Guide</a></li>
<li id="menu-item-6000548" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000548"><a href="https://alistapart.com/contact/" itemprop="url">Contact</a></li>
<li id="menu-item-6000549" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000549"><a href="https://alistapart.com/about/sponsor/" itemprop="url">Sponsorships</a></li>
</ul></div><div class="menu-footer-social-container"><ul id="footer-top-right-menu" class="footer-top-right-menu"><li id="menu-item-6000550" class="footer-menu-title menu-item menu-item-type-custom menu-item-object-custom menu-item-6000550"><a itemprop="url">Follow us:</a></li>
<li id="menu-item-7171602" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7171602"><a href="https://alistapart.com/about/rss-feed/" itemprop="url">RSS</a></li>
<li id="menu-item-6000552" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000552"><a href="https://alistapart.com/email-signup/" itemprop="url">Email</a></li>
<li id="menu-item-6000553" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6000553"><a href="https://www.facebook.com/alistapart" itemprop="url">Facebook</a></li>
<li id="menu-item-6000554" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6000554"><a href="https://www.twitter.com/alistapart" itemprop="url">Twitter</a></li>
</ul></div>	</nav>
			<div class="widget-area footer-widget-area-wrap">
			<div class="widget-area footer-widget-area">
				<section id="custom_html-7" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><div class="footer-promo">
	<a href="https://abookapart.com">
							<img src="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/04/promo_aba_2.jpg?w=960&#038;ssl=1" alt="A Book Apart. Brief books for people who design, write, and code." data-recalc-dims="1">
		<div class="footer-promo-copy">
				<p class="promo-title">A Book Apart</p>
				<p>Brief books for people who design, write, and code.</p>
				<p>Bundle books and save!</p>
				<p class="arrow">Shop now</p>
						</div>
			</a>
</div>

</div></section><section id="custom_html-8" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><div class="footer-promo">
		<a href="https://aneventapart.com">
			<img src="https://i0.wp.com/alistapart.com/wp-content/uploads/2019/04/promo_aea_v1_2.png?w=960&#038;ssl=1" alt="An Event Apart. Three days of design, code, and content for people who make websites." data-recalc-dims="1">
			<div class="footer-promo-copy">
					<p class="promo-title">An Event Apart</p>
						<p>Three days of design, code, and content for people who make websites.</p>
							<p class="arrow">See  this year’s schedule</p>
			</div>
						</a>
</div></div></section>			</div>
		</div>

		
	<div class="site-info-wrap">
		<div class="site-info">
			<p>
				ISSN 1534-0295 &middot; Copyright &copy; <span itemprop="copyrightYear"> 1998–2022</span> <span itemprop="copyrightHolder"> A List Apart &amp; Our Authors</span>			</p>
			<p>
				<a href="https://wordpress.com/">
					Proudly powered by WordPress				</a>
				<span class="sep"> · </span>
				<a href="https://pressable.com/?utm_source=Automattic&#038;utm_medium=rpc&#038;utm_campaign=Concierge%20Referral&#038;utm_term=concierge">
					Hosted by Pressable				</a>
			</p>
		</div><!-- .site-info -->
	</div><!-- .site-info-wrap -->

	<nav class="footer-navigation footer navigation-bottom">
		<ul id="footer-bottom-left-menu" class="footer-bottom-left-menu"><li id="menu-item-6000555" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6000555"><a href="https://alistapart.com/about/copyright/" itemprop="url">Permissions &#038; Copyright</a></li>
<li id="menu-item-6000556" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-6000556"><a href="https://alistapart.com/about/privacy-policy/" itemprop="url">Privacy Policy</a></li>
<li id="menu-item-6000558" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6000558"><a href="https://webtype.com/" itemprop="url">Fonts by Webtype</a></li>
</ul><ul id="footer-bottom-right-menu" class="footer-bottom-right-menu"><li id="menu-item-6000559" class="aea menu-item menu-item-type-custom menu-item-object-custom menu-item-6000559"><a href="http://aneventapart.com/" itemprop="url"><span class="screen-reader-text">An Event Apart</span></a></li>
<li id="menu-item-6000560" class="aba menu-item menu-item-type-custom menu-item-object-custom menu-item-6000560"><a href="http://abookapart.com/" itemprop="url"><span class="screen-reader-text">A Book Apart</span></a></li>
</ul>	</nav>
</footer><!-- #colophon -->
</div><!-- #page -->
<script type="text/template" id="tmpl-subscriber-only-message">
	<div class="coil-message-inner">
		<div class="coil-message-header">
			<# if ( data.headerLogo ) { #>
				{{{data.headerLogo}}}
			<# } #>
			<# if ( data.title ) { #>
				<p class="coil-message-title">{{data.title}}</p>
			<# } #>
			<# if ( data.content ) { #>
				<p class="coil-message-content">{{data.content}}</p>
			<# } #>
			<# if ( data.button.href ) { #>
				<a target="_blank" href="{{data.button.href}}" class="coil-message-button">{{data.button.text}}</a>
			<# } #>
		</div>
		<div class="coil-message-footer">
			<p class="coil-footer-content">Already a member? Check that you&#039;re using a supported browser, have the Coil extension installed, and are logged in to your Coil account.</p>
		</div>
	</div>
</script>
<script type="text/template" id="tmpl-split-content-message">
	<span class="coil-split-content-message">{{data}}</span>
</script>
<script type="text/template" id="tmpl-banner-message">
	<div class="banner-message-inner">
		<# if ( data.content ) { #>
			<p class="coil-banner-message-content">{{data.content}}</p>
		<# } #>
		<# if ( data.button.href ) { #>
			<a target="_blank" href="{{data.button.href}}" class="coil-banner-message-button">{{data.button.text}}</a>
		<# } #>
		<span class="coil-banner-message-dismiss" id="js-coil-banner-dismiss">&times;</span>
	</div>
</script>
	<!-- Google Analytics -->
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) 
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');  

	ga('create', 'UA-11757054-1', 'auto'); 
	ga('send', 'pageview');  
</script>
<!-- End Google Analytics -->
	
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/alistapart.com\/article\/now-thats-what-i-call-service-worker\/":7172789};
	</script>
				<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/plugins/jetpack/_inc/build/photon/photon.min.js?ver=20191001' id='jetpack-photon-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-includes/js/underscore.min.js?ver=1.13.1' id='underscore-js'></script>
<script type='text/javascript' id='wp-util-js-extra'>
/* <![CDATA[ */
var _wpUtilSettings = {"ajax":{"url":"\/wp-admin\/admin-ajax.php"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-includes/js/wp-util.min.js?ver=5.8.3' id='wp-util-js'></script>
<script type='text/javascript' id='coil-monetization-js-js-extra'>
/* <![CDATA[ */
var coilParams = {"content_container":".content-area .entry-content","promotion_bar":"This site is monetized using Coil. If you enjoy the content, consider supporting us by signing up for a Coil Membership. Here's how\u2026","loading_content":"Verifying Web Monetization status. Please wait...","fully_gated":"Unlock exclusive content with Coil. Need a Coil account?","partial_gating":"To keep reading, join Coil and install the browser extension. Visit coil.com for more information.","learn_more_button_text":"Get Coil to access","learn_more_button_link":"https:\/\/coil.com\/","show_promotion_bar":"1","post_excerpt":"If you\u2019re looking to achieve the single-page app level performance without the overhead (and boot time) of a huge JavaScript library or having to completely rewrite your website in a new technology, Jeremy Wagner shares a clever approach combining Service Worker and streamed web page partials you\u2019re sure to love.","site_logo":"<a href=\"https:\/\/alistapart.com\/\" class=\"custom-logo-link\" rel=\"home\"><img width=\"960\" height=\"98\" src=\"https:\/\/i0.wp.com\/alistapart.com\/wp-content\/uploads\/2019\/03\/ala-logo-big.png?fit=960%2C98&ssl=1\" class=\"custom-logo\" alt=\"A List Apart\" srcset=\"https:\/\/i0.wp.com\/alistapart.com\/wp-content\/uploads\/2019\/03\/ala-logo-big.png?w=960&ssl=1 960w, https:\/\/i0.wp.com\/alistapart.com\/wp-content\/uploads\/2019\/03\/ala-logo-big.png?resize=300%2C31&ssl=1 300w, https:\/\/i0.wp.com\/alistapart.com\/wp-content\/uploads\/2019\/03\/ala-logo-big.png?resize=768%2C78&ssl=1 768w\" sizes=\"(max-width: 960px) 100vw, 960px\" \/><\/a>","admin_missing_id_notice":"This post is monetized but you have not set your payment pointer ID in the <a href=\"https:\/\/alistapart.com\/wp-admin\/admin.php?page=coil\">Coil settings page<\/a>. Only content set to show for all visitors will show."};
/* ]]> */
</script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/plugins/coil-web-monetization/assets/js/initialize-monetization.min.js?ver=1.9.0' id='coil-monetization-js-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/plugins/coil-web-monetization/assets/js/js-cookie.3.0.0.min.js?ver=1.9.0' id='messaging-cookies-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/navigation.js?ver=20151215' id='ala-navigation-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/prism/prism.js?ver=1.0' id='ala-prism-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/skip-link-focus-fix.js?ver=20151215' id='ala-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/adchecka.js?ver=1.0' id='ala-adchecka-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/themes/ala/js/loadadchecka.js?ver=1.0' id='ala-loadadchecka-js'></script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-includes/js/wp-embed.min.js?ver=5.8.3' id='wp-embed-js'></script>
<script type='text/javascript' id='sharing-js-js-extra'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149572954.v2.pressablecdn.com/wp-content/plugins/jetpack/_inc/build/sharedaddy/sharing.min.js?ver=10.5-beta' id='sharing-js-js'></script>
<script type='text/javascript' id='sharing-js-js-after'>
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-facebook' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-facebook' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-twitter' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-twitter' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
						return false;
					}
				} );
			} )();
</script>
		<script type="text/javascript">
			(function() {
			var t   = document.createElement( 'script' );
			t.type  = 'text/javascript';
			t.async = true;
			t.id    = 'gauges-tracker';
			t.setAttribute( 'data-site-id', '606492000b21314ec4b22148' );
			t.src = '//secure.gaug.es/track.js';
			var s = document.getElementsByTagName( 'script' )[0];
			s.parentNode.insertBefore( t, s );
			})();
		</script>
		<script src='https://stats.wp.com/e-202202.js' defer></script>
<script>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:10.5-beta',blog:'158094726',post:'7172789',tz:'-5',srv:'alistapart.com'} ]);
	_stq.push([ 'clickTrackerInit', '158094726', '7172789' ]);
</script>
</body>
</html>
<!--
	generated in 0.270 seconds
	82149 bytes batcached for 300 seconds
-->
