<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/assets/favicon-32x32.png" />
  <title>
    CSS Container Query Units -
    Ahmad Shadeed
  </title>

  
  <meta name="description" content="Using units that are relative to the container size" />
   
  <meta name="keywords" content="container, query, units, css" />
  

  <meta name="author" content="iShadeed" />
  <meta property="og:title" content="CSS Container Query Units - Ahmad Shadeed" />
  
  <meta property="og:url" content="http://ishadeed.com/article/container-query-units/" />
  
  <meta property="og:type" content="website" />

  
  <meta property="og:image" content="https://ishadeed.com/assets/query-units/twitter-card.jpg" />
  

  <meta property="og:description" content="Using units that are relative to the container size" />
  <meta property="og:site_name" content="Ahmad Shadeed Blog" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@shadeed9" />
  <meta name="twitter:title" content="CSS Container Query Units - Ahmad Shadeed" />

  
  <meta name="twitter:url" content="http://ishadeed.com/article/container-query-units/" />
  

  <meta name="twitter:description" content="Using units that are relative to the container size" />

  
  <meta name="twitter:image" content="https://ishadeed.com/assets/query-units/twitter-card.jpg" />
   <link rel="stylesheet" href="/css/main.css?v=1.0.7">
  <link href="//plus.google.com/+AhmadShadeed" rel="author" />
  <link
    href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <link rel="alternate" type="application/rss+xml" title="Ahmad Shadeed Blog"
  href="http://ishadeed.com/feed.xml" />
</head>


  <body>
    <div class="c-banner">
      <p>
        <span aria-hidden="true">🎉</span>I published a book about debugging
        CSS.
        <a class="c-link" href="https://debuggingcss.com/"
          >Buy now<svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            style="margin-right: 3px"
          >
            <use xlink:href="#arrow-right"></use></svg
        ></a>
      </p>
    </div>
    <svg style="display: none">
      <symbol
        id="arrow-right"
        width="23.114"
        height="23.114"
        viewBox="0 0 23.114 23.114"
      >
        <g id="np_arrow_1921082_000000" transform="translate(-2.5 -2.5)">
          <path
            id="Path_18"
            data-name="Path 18"
            d="M25.614,14.057A11.557,11.557,0,1,0,14.057,25.614,11.568,11.568,0,0,0,25.614,14.057Zm-21.46,0a9.9,9.9,0,1,1,9.9,9.9,9.927,9.927,0,0,1-9.9-9.9Z"
          />
          <path
            id="Path_19"
            data-name="Path 19"
            d="M45.262,34.182a.821.821,0,0,0,0-1.167L40.81,28.562a.826.826,0,0,0-1.168,1.168L43.486,33.6l-3.845,3.845a.791.791,0,0,0-.243.584.754.754,0,0,0,.243.584.837.837,0,0,0,1.168,0Z"
            transform="translate(-27.921 -19.541)"
          />
        </g>
      </symbol>
      <symbol
        id="link-external"
        width="16.067"
        height="16.078"
        viewBox="0 0 16.067 16.078"
      >
        <g fill="#3863d9">
          <path
            data-name="Path 20"
            d="M14.137 1.15h-3.159a.774.774 0 0 1-.093-.013.551.551 0 0 1-.2-.09.565.565 0 0 1-.235-.488.531.531 0 0 1 .031-.153.543.543 0 0 1 .091-.164.552.552 0 0 1 .167-.141.572.572 0 0 1 .177-.062c.028 0 .035 0 .063-.007q2.262-.063 4.524 0h.049a.491.491 0 0 1 .082.016l.035.01h.011l.019.007h.006a.523.523 0 0 1 .078.041.563.563 0 0 1 .175.174.512.512 0 0 1 .044.084.553.553 0 0 1 .032.108v.075c.042 1.5 0 3.006 0 4.51a.459.459 0 0 1 0 .063.579.579 0 0 1-.052.18.56.56 0 0 1-.131.174.531.531 0 0 1-.131.087.565.565 0 0 1-.567-.048.558.558 0 0 1-.228-.363.517.517 0 0 1-.007-.093V1.943L7.663 9.198a.5.5 0 0 1-.063.054.56.56 0 0 1-.147.078.549.549 0 0 1-.205.031.566.566 0 0 1-.453-.261.574.574 0 0 1-.067-.153.554.554 0 0 1-.019-.166.562.562 0 0 1 .086-.277.656.656 0 0 1 .078-.1l7.255-7.255z"
            fill-rule="evenodd"
          />
          <path
            data-name="Path 21"
            d="M7.331 1.526a.505.505 0 0 1 .1.021.557.557 0 0 1 .265.17.522.522 0 0 1 .086.134.554.554 0 0 1 .045.153.565.565 0 0 1-.131.446.548.548 0 0 1-.166.131.556.556 0 0 1-.2.06H6.1c-.634 0-1.269.008-1.9.043a10.457 10.457 0 0 0-1.052.1q-.141.022-.283.05-.1.02-.19.045a1.954 1.954 0 0 0-.816.389 1.26 1.26 0 0 0-.121.123 1.6 1.6 0 0 0-.263.452 3.281 3.281 0 0 0-.17.607 7.787 7.787 0 0 0-.112.883c-.04.5-.053 1-.062 1.5-.007.45-.008.9-.008 1.35v1.224c0 .569 0 1.139.017 1.709.013.5.033 1 .09 1.495a8.5 8.5 0 0 0 .054.39 3.713 3.713 0 0 0 .179.7 1.646 1.646 0 0 0 .3.516 1.9 1.9 0 0 0 1.021.522 6.066 6.066 0 0 0 .534.096 14.66 14.66 0 0 0 1.54.1c.606.017 1.214.019 1.82.019H7.89c.49 0 .979 0 1.469-.011s.982-.024 1.47-.068a7.177 7.177 0 0 0 .857-.119 2.844 2.844 0 0 0 .7-.228 1.445 1.445 0 0 0 .355-.247 1.921 1.921 0 0 0 .474-.95 6.313 6.313 0 0 0 .092-.491 9.4 9.4 0 0 0 .049-.411c.043-.439.061-.881.072-1.323.02-.771.017-1.542.017-2.314v-.053c0-.018 0-.035.007-.053a.547.547 0 0 1 .079-.2.536.536 0 0 1 .1-.12.563.563 0 0 1 .446-.131.545.545 0 0 1 .153.045.561.561 0 0 1 .317.4.579.579 0 0 1 .01.106v1.18c0 .387-.006.774-.015 1.161-.007.264-.016.528-.031.792q-.017.305-.046.61a9.298 9.298 0 0 1-.083.639 3.761 3.761 0 0 1-.581 1.571 2.38 2.38 0 0 1-.451.48 2.633 2.633 0 0 1-.5.315 4.49 4.49 0 0 1-1.275.368c-.315.049-.634.079-.952.1s-.668.035-1 .043c-.481.012-.961.015-1.442.017H6.675c-.577 0-1.154 0-1.732-.017a18.4 18.4 0 0 1-1.592-.094 8.742 8.742 0 0 1-.362-.049 3.862 3.862 0 0 1-1.658-.592 2.552 2.552 0 0 1-.2-.159 2.431 2.431 0 0 1-.256-.263 2.234 2.234 0 0 1-.154-.206 3.836 3.836 0 0 1-.539-1.51 8.474 8.474 0 0 1-.092-.737 14.337 14.337 0 0 1-.042-.62c-.016-.31-.024-.62-.031-.929-.007-.4-.01-.8-.011-1.2v-1.51c0-.538 0-1.077.013-1.614.007-.3.016-.609.033-.913a14.246 14.246 0 0 1 .099-1.075c.012-.088.026-.174.042-.261a3.673 3.673 0 0 1 .562-1.485 2.38 2.38 0 0 1 .451-.48 2.664 2.664 0 0 1 .534-.33 4.435 4.435 0 0 1 1.153-.336c.277-.047.557-.077.837-.1s.57-.037.857-.047c.413-.015.828-.021 1.241-.023h1.509z"
          />
        </g>
      </symbol>
      <symbol
        id="send"
        width="36.258"
        height="35.835"
        viewBox="0 0 36.258 35.835"
      >
        <path
          d="M25.339 13.557a.836.836 0 0 0-1.2-1.153L9.151 25.155l-7.915-3.062a1.925 1.925 0 0 1-.223-3.492L33.871.194a1.619 1.619 0 0 1 2.38 1.579l-2.882 30.045a1.989 1.989 0 0 1-2.72 1.66l-9.633-3.729-6.048 5.665a1.561 1.561 0 0 1-2.628-1.153v-4.45z"
        />
      </symbol>
      <symbol
        id="arrow-up"
        width="24.737"
        height="23.502"
        viewBox="0 0 24.737 23.502"
      >
        <path
          data-name="Path 25"
          d="M13.244.362a1.236 1.236 0 0 0-1.749 0L.363 11.494a1.237 1.237 0 1 0 1.749 1.749l9.019-9.019v18.041a1.237 1.237 0 1 0 2.474 0V4.224l9.019 9.019a1.237 1.237 0 1 0 1.751-1.747z"
          fill="#fff"
        />
      </symbol>
    </svg>

    <header id="header" class="c-header" role="banner">
    <a href="/" class="c-logo">
        <img src="../../assets/shadeed.jpg" alt="Photo of Ahmad Shadeed">
        <span>Ahmad <strong>Shadeed</strong></span>
        <div class="c-lamp"></div>
    </a>
    <nav class="c-nav">
        <div class="c-nav__wrapper">
            <ul>
                
                
                <li class="c-nav__item">
                    <a href="/">Home</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/articles">Articles</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/snippets">Snippets</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/journal">Journal</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/about">About</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/hire-me">Hire me</a>
                </li>
                
                

                <button class="c-nav__close">
                    <svg width="17" height="17" viewBox="0 0 17 17">
                        <path d="M16.91 2.663a1.487 1.487 0 0 0 0-2.1l-.131-.131a1.483 1.483 0 0 0-2.1 0L8.936 6.179a.371.371 0 0 1-.528 0L2.663.434a1.487 1.487 0 0 0-2.1 0L.432.565a1.483 1.483 0 0 0 0 2.1L6.177 8.41a.371.371 0 0 1 0 .528L.432 14.683a1.487 1.487 0 0 0 0 2.1l.131.131a1.483 1.483 0 0 0 2.1 0l5.745-5.745a.371.371 0 0 1 .528 0l5.745 5.745a1.487 1.487 0 0 0 2.1 0l.131-.131a1.483 1.483 0 0 0 0-2.1l-5.747-5.747a.371.371 0 0 1 0-.528z" fill="#60c46f"/>
                    </svg>
                </button>
            </ul>
            <div class="c-nav__overlay"></div>
        </div>
        <button class="c-nav__toggle">
            <span></span>
        </button>
    </nav>
    <a class="c-header__follow" target="_blank" href="https://twitter.com/shadeed9">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="22.75" viewBox="0 0 28 22.75">
            <g data-name="Group 1">
                <path data-name="Path 1" d="M28 2.693a11.968 11.968 0 0 1-3.307.907A5.708 5.708 0 0 0 27.218.427a11.472 11.472 0 0 1-3.64 1.389 5.74 5.74 0 0 0-9.93 3.925 5.911 5.911 0 0 0 .133 1.309 16.248 16.248 0 0 1-11.832-6 5.742 5.742 0 0 0 1.764 7.672 5.669 5.669 0 0 1-2.594-.707v.063a5.767 5.767 0 0 0 4.6 5.64 5.729 5.729 0 0 1-1.5.189 5.075 5.075 0 0 1-1.087-.1 5.8 5.8 0 0 0 5.364 4 11.534 11.534 0 0 1-7.117 2.448A10.755 10.755 0 0 1 0 20.174a16.16 16.16 0 0 0 8.806 2.576c10.563 0 16.338-8.75 16.338-16.335 0-.254-.009-.5-.021-.742A11.451 11.451 0 0 0 28 2.693z"/>
            </g>
        </svg>
        <span>@shadeed9</span>
    </a>
</header>
 <div class="c-section c-section--article">
	<header class="post-header">
		<h1 class="post-header__title">CSS Container Query Units</h1>
		<div class="post-header__date">18 Sep 2021</div>
		<div class="post-header__reading-time" style="display: none;">
			

			
			Reading time: ~ 9 mins
		</div>
	</header>

	<div class="post-content">
		<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DV277&placement=wwwishadeedcom" id="_carbonads_js"></script>
		<p>A few days ago, I saw a <a href="https://twitter.com/TerribleMia/status/1436087037040414720">tweet</a> by Miriam Suzanne about CSS query units being supported. This was originally proposed by <a href="https://github.com/w3c/csswg-drafts/issues/5888">Una Kravets</a> on Github. I couldn’t resist experimenting with them and see how we can get even more benefit from CSS container queries.</p>

<p>I will try my best to explain how each unit works, and where we can use a unit(s) to enhance how a component should react to its parent width. If you don’t know about CSS container queries yet, I wrote an <a href="https://ishadeed.com/article/say-hello-to-css-container-queries/">intro with lots of examples</a> and also how <a href="https://ishadeed.com/article/container-queries-for-designers/">container queries</a> can affect a designer work. I recommend reading them before reading this article.</p>

<blockquote>
  <p>A kind reminder: CSS container queries are only supported in Chrome Canary under an experiment flag. To play with it, go to <code class="highlighter-rouge">chrome://flags</code> and search for “Enable CSS Container Queries” and enable the feature.</p>
</blockquote>

<p>Let’s dive in.</p>

<h2 id="introduction">Introduction</h2>
<p>In CSS, we have a lot of units that can be used for different purposes. The most used ones are <code class="highlighter-rouge">px</code>, <code class="highlighter-rouge">rem</code>, and <code class="highlighter-rouge">em</code>. If there is something close to how CSS container query units work, then I would say viewport units.</p>

<p>CSS viewport units work in a way that responds to the browser viewport size (width or/and height). That’s great, but we don’t always want to use a unit that is related to the viewport size. What if we want to query against a container width? That’s what query units are for.</p>

<p>To make it more clear, I want to highlight the difference between the viewport units and query units. Consider the following figure:</p>

<figure>
    
        <img src="../../assets/query-units/intro.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>On the left, the <code class="highlighter-rouge">font-size</code> is being controlled by <code class="highlighter-rouge">rem</code> and <code class="highlighter-rouge">vw</code> and that will be relative to the viewport width. In some cases, this might work, but it can cause unexpected issues because it’s relative to the <strong>viewport size</strong>.</p>

<p>Query units can save us effort and time when dealing with things like <code class="highlighter-rouge">font-size</code>, <code class="highlighter-rouge">padding</code>, and <code class="highlighter-rouge">margin</code> within a component. Instead of manually increasing the font size, we can use query units instead.</p>

<p>Consider the following example.</p>

<figure>
    
        <img src="../../assets/query-units/intro-2-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>We have a card component that starts with a stacked style, all the way to the hero-like style when the container is large. For such a component, we might need to alter these things:</p>
<ul>
  <li>Thumbnail size</li>
  <li>Font size</li>
  <li>Spacing between the elements</li>
</ul>

<p>Without CSS query units, we need to manually alter the above.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card</span> <span class="p">{</span>
    <span class="c">/* The stacked, base style */</span>
<span class="p">}</span>

<span class="nc">.card__title</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* The horizontal style, v1 */</span>
<span class="k">@container</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">400px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.card__title</span> <span class="p">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.15rem</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c">/* The horizontal style, v2 */</span>
<span class="k">@container</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">600px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.card__title</span> <span class="p">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.25rem</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c">/* The hero style */</span>
<span class="k">@container</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">800px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.card__title</span> <span class="p">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">2rem</span><span class="p">;</span>    
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Notice how the <code class="highlighter-rouge">.card__title</code> font size is being changed with different container queries. We can enhance that and avoid duplicating <code class="highlighter-rouge">font-size</code> by using query units along with CSS <code class="highlighter-rouge">clamp()</code> function.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card__title</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">1rem</span><span class="p">,</span> <span class="m">3</span><span class="n">qw</span><span class="p">,</span> <span class="m">2rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With that, we need to define the <code class="highlighter-rouge">font-size</code> only once. If we want to compare this visually, here is how it looks:</p>

<figure>
    
        <img src="../../assets/query-units/intro-2-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you’re familiar with CSS viewport units, this isn’t new for you. It’s just like querying against the container rather than the browser’s viewport. Neat, no?</p>

<p><a href="https://codepen.io/shadeed/pen/ZEyxzRQ?editors=0100">Demo</a></p>

<h2 id="the-query-units">The query units</h2>
<p>Now that we have an idea about the problems query units are supposed to solve, let’s get the units. According to the <a href="https://drafts.csswg.org/css-contain-3/#container-lengths">CSS spec</a>:</p>

<ul>
  <li>Query Width (qw): 1% of the container width. For example, 5qw will resolve to 5% of the container’s width.</li>
  <li>Query Height (qh): 1% of the container height. For example, 5qh will resolve to 5% of the container’s height.</li>
  <li>Query Minimum (qmin): the smaller value of Query Width <code class="highlighter-rouge">qw</code> or Query Height <code class="highlighter-rouge">qh</code>.</li>
  <li>Query Maximum (qmax): the larger value of <code class="highlighter-rouge">qw</code> or <code class="highlighter-rouge">qh</code>.</li>
</ul>

<p>We also have two other units: <code class="highlighter-rouge">qi</code> and <code class="highlighter-rouge">qb</code> and they mean Query Inline and Query Block, respectively. They can be used for cases where we have different writing modes.</p>

<h2 id="use-cases-and-examples">Use cases and examples</h2>

<h3 id="card-component">Card component</h3>
<p>In addition to the previously explained example about cards, we can use query units for a stacked card where we want the font size to be slightly bigger based on the container width.</p>

<figure>
    
        <img src="../../assets/query-units/eg-0.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice that the font size is slighter getting bigger based on the container size. This can be useful for creating a stacked card component that works no matter where it’s placed.</p>

<p><a href="https://codepen.io/shadeed/pen/yLXKBqN?editors=0100">Demo</a></p>

<h3 id="change-font-size-based-on-the-importance">Change <code class="highlighter-rouge">font-size</code> based on the importance</h3>
<p>When an element is bigger than another, it’s more likely an indicator that it’s more important. A good example of this is aside and main. The headline size in an <code class="highlighter-rouge">&lt;aside&gt;</code> should be smaller than the headline in a <code class="highlighter-rouge">&lt;main&gt;</code> section.</p>

<figure>
    
        <img src="../../assets/query-units/eg-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice how the headline in the <code class="highlighter-rouge">&lt;aside&gt;</code> is smaller than the one in <code class="highlighter-rouge">&lt;main&gt;</code>. We can easily do that thanks to query units.</p>

<p>First, we need to define <code class="highlighter-rouge">&lt;aside&gt;</code> and <code class="highlighter-rouge">&lt;main&gt;</code> as inline-size containers.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">aside</span><span class="o">,</span>
<span class="nt">main</span> <span class="p">{</span>
    <span class="py">container</span><span class="p">:</span> <span class="n">inline-size</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then, we will use a query unit for the section title. We can also use query units for the bottom margin.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.section-title</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">1.25rem</span><span class="p">,</span> <span class="m">3</span><span class="n">qw</span><span class="p">,</span> <span class="m">2rem</span><span class="p">);</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0.5rem</span><span class="p">,</span> <span class="m">1.5</span><span class="n">qw</span><span class="p">,</span> <span class="m">1rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://codepen.io/shadeed/pen/oNwqvap?editors=0100">Demo</a></p>

<h3 id="bio-component">Bio Component</h3>

<figure>
    
        <img src="../../assets/query-units/eg-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>A bio can live within a smaller container (e.g: sidebar) or be shown on a mobile viewport, or a large container like a page header.</p>

<p>We can build a component that can adapt to <strong>its container width</strong>. In the example, the user avatar and font sizes change based on their container width.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.bio</span> <span class="p">{</span>
    <span class="py">container</span><span class="p">:</span> <span class="n">inline-size</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.c-avatar</span> <span class="p">{</span>
    <span class="py">--size</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">60px</span> <span class="err">+</span> <span class="m">10</span><span class="n">qw</span><span class="p">);</span>
    <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--size</span><span class="p">,</span> <span class="m">100px</span><span class="p">);</span>
    <span class="nl">height</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--size</span><span class="p">,</span> <span class="m">100px</span><span class="p">);</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0.5rem</span><span class="p">,</span> <span class="m">3</span><span class="n">qmin</span><span class="p">,</span> <span class="m">2rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://codepen.io/shadeed/pen/wvemwNb?editors=0100">Demo</a></p>

<h3 id="headings-with-counters">Headings with counters</h3>
<p>In some cases, we need to show a counter next to a heading with an article body. This is a perfect use case for query units.</p>

<figure>
    
        <img src="../../assets/query-units/eg-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.article-body</span> <span class="p">{</span>
    <span class="nl">counter-reset</span><span class="p">:</span> <span class="n">heading</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
    <span class="py">container</span><span class="p">:</span> <span class="n">inline-size</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">1.25rem</span><span class="p">,</span> <span class="m">3</span><span class="n">qw</span><span class="p">,</span> <span class="m">2rem</span><span class="p">);</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">0.5rem</span><span class="p">,</span> <span class="m">1.5</span><span class="n">qw</span><span class="p">,</span> <span class="m">1rem</span><span class="p">);</span>
<span class="p">}</span>

<span class="nt">h2</span><span class="nd">:before</span> <span class="p">{</span>
    <span class="py">--size</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">1.25rem</span> <span class="err">+</span> <span class="m">3</span><span class="n">qw</span><span class="p">);</span>
    <span class="nl">content</span><span class="p">:</span> <span class="n">counter</span><span class="p">(</span><span class="n">heading</span><span class="p">);</span>
    <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">heading</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--size</span><span class="p">);</span>
    <span class="nl">height</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--size</span><span class="p">);</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">0.85rem</span> <span class="err">+</span> <span class="m">1</span><span class="n">qw</span><span class="p">);</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--size</span><span class="p">)</span> <span class="p">/</span> <span class="m">4</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://codepen.io/shadeed/pen/xxrWxxp?editors=0100">Demo</a></p>

<h3 id="dynamic-gaps">Dynamic Gaps</h3>

<p>We’ve been using viewport units to create dynamic gaps with CSS grid. It’s something like:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="py">gap</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">1rem</span> <span class="err">+</span> <span class="m">2vw</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That’s cool, but what about components within specific wrappers? Using viewport units won’t work. That’s why using query units is a good solution for such a case.</p>

<figure>
    
        <img src="../../assets/query-units/eg-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">column</span><span class="p">;</span>
    <span class="py">gap</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">0.5rem</span> <span class="err">+</span> <span class="m">1</span><span class="n">qmin</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The gap will be a bit bigger when the component switch to the horizontal style.</p>

<h2 id="what-happens-if-we-use-query-units-without-defining-containers">What happens if we use query units without defining containers?</h2>
<p>According to the <a href="https://drafts.csswg.org/css-contain-3/#container-lengths">spec</a>:</p>

<blockquote>
  <p>If no eligible query container is available, then use <strong>the small viewport size</strong> for that axis.</p>
</blockquote>

<p>The browser will deal with query units as if they were viewport units. Consider the following example:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">h2</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="n">clamp</span><span class="p">(</span><span class="m">1.25rem</span><span class="p">,</span> <span class="m">3</span><span class="n">qw</span><span class="p">,</span> <span class="m">2rem</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If there is no container that is defined for the <code class="highlighter-rouge">&lt;h2&gt;</code>, the browser will consider <code class="highlighter-rouge">3qw</code> as if it was <code class="highlighter-rouge">3%</code> of the viewport width. That means, using query units without defining containers can lead to unexpected results.</p>

<p>I hope you enjoyed the article. Thanks for reading!</p>

	</div>

	<div class="o-wrapper o-wrapper--small">
		<div class="coffee" style="padding: 2rem;
		background: #f7f7f7;
		margin-bottom: 2rem;
		border-radius: 5px;
		line-height: 1.4;">
			Do you like my content? You can support and <a href="https://www.buymeacoffee.com/EmbDfQoF6" style="color: #3863d9;">buy me a coffee</a>. Thank you so much!
		</div>
	</div>

	<div class="o-wrapper o-wrapper--small">
		<section class="c-section--more">
			<h2 class="visually-hidden">More articles</h2>
			<div class="c-section--more__content">
				<div class="c-section--more__item prev">
					
					<h3>Previous Article</h3>
					<a class="c-block--more__link prev" href="/article/less-absolute-positioning-modern-css/"> Less Absolute Positioning With Modern CSS</a>
					
				</div>
				<div class="c-section--more__item next">
					
					<h3>Next Article</h3>
					<a class="c-block--more__link next" href="/article/conditional-border-radius/"> Conditional Border Radius In CSS </a>
					
				</div>
			</div>
		</section>

		<p class="rss-feed">Subscribe to my <a class="u-link" href="https://ishadeed.com/feed.xml">RSS feed</a></p>

		<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://ishadeed.us8.list-manage.com/subscribe/post?u=30743dd25d7a680eed0b535d3&amp;id=38d30cb86b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2 class="mc-title">Subscribe to the newsletter</h2>
	<p class="mc-desc">Get the latest CSS articles published by Ahmad Shadeed, a UX Designer and Front End Developer.</p>
	<div class="mc-input-group">
		<div class="mc-field-group">
			<label for="mce-EMAIL">Email Address</label>
			<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
		</div>
		<div class="mc-field-group">
			<label for="mce-FNAME">First Name </label>
			<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
		</div>
	</div>
	<div id="mce-responses">
		<div class="response" id="mce-error-response" style="display:none">erorr</div>
		<div class="response" id="mce-success-response" style="display:none">success</div>
	</div>
	<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_30743dd25d7a680eed0b535d3_38d30cb86b" tabindex="-1" value=""></div>
	<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
	
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->

	
	</div>

	

	<footer class="post-footer">
  <div class="post-author">
    <img src="../../assets/shadeed.jpg" alt="Avatar: Ahmad Shadeed" class="post-author__avatar">
    <div>
      <h2 class="post-author__name">Ahmad Shadeed</h2>
      <p class="post-author__bio">UI, UX Designer &amp; Front-End Developer. <strong>You can <a href="/hire-me">hire me</a></strong>. I Write about web accessibility on <a href="https://twitter.com/weba11ymatters">@weba11ymatters</a> and share articles on my blog.</p>
    </div>
  </div>
</footer>

</div>

<footer class="c-section c-section--footer full footer-simple">
  <div class="footer-row">
    <h3 class="c-section__title footer-copyrights">
      The online studio of Ahmad Shadeed.
      <span>© 2012–2021 Copyright Ahmad Shadeed. All rights reserved.</span>
    </h3>

    <div>
      <h3 class="social-title">Find me online</h3>
      <ul>
        <li>
          <a
            href="https://www.instagram.com/ishadeed"
            class="instagram"
            target="_blank"
            >Instagram</a
          >
        </li>
        <li>
          <a href="https://twitter.com/shadeed9" class="twitter">Twitter</a>
        </li>
        <li>
          <a href="https://www.behance.net/ishadeed" class="behance">Behance</a>
        </li>
        <li>
          <a href="https://codepen.io/shadeed/" class="linkedin">CodePen</a>
        </li>
        <li>
          <a href="https://github.com/shadeed" class="instagram">Github</a>
        </li>
        <li><a href="https://ishadeed.com/feed.xml">RSS Feed</a></li>
      </ul>
    </div>
  </div>

  <a href="#header" class="go-up" aria-label="Go up">
    <svg width="20" height="20" viewBox="0 0 24 24">
      <use xlink:href="#arrow-up"></use>
    </svg>
  </a>
</footer>


    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-42479265-2", "auto");
      ga("send", "pageview");
    </script>
    <script>
      var menuToggle = document.querySelector(".c-nav__toggle");
      var navWrapper = document.querySelector(".c-nav__wrapper");
      var closeNav = document.querySelector(".c-nav__close");

      menuToggle.addEventListener("click", function () {
        navWrapper.classList.add("is-active");
      });

      closeNav.addEventListener("click", function () {
        navWrapper.classList.remove("is-active");
      });

      /*let targetElement = document.querySelector('.c-section--footer');
    let cricketsAudio = document.querySelector('#crickets');

    const options = {
        root: null,
        rootMargin: '0px',
        threshold: 0
    };

    function callback (entries, observer) {
        //console.log(observer);
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                cricketsAudio.play();
            } else {
                cricketsAudio.pause();
            }
        });
    }

    let observer = new IntersectionObserver(callback, options);
    observer.observe(targetElement);*/
    </script>
  </body>
</html>
