<!doctype html>
<html lang="en" class="">
  <head>

    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      
        <title>A Guide To Audio Visualization With JavaScript And GSAP (Part 1) — Smashing Magazine</title>
      
      


<link rel="preconnect" href="https://cloud.netlifyusercontent.com"/>
<link rel="preconnect" href="https://smashingcomments.netlify.app"/>
<link rel="preconnect" href="https://res.cloudinary.com"/>
<link rel="preconnect" href="https://www.google-analytics.com/"/>
<link rel="preconnect" href="https://storage.googleapis.com"/>

      






    

    
      

<style>
  @font-face{font-family:Elena;src:url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegular/ElenaWebRegular.woff) format("woff")}@font-face{font-family:Elena;src:url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic.woff) format("woff");font-style:italic}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebBold/ElenaWebBold.woff) format("woff");font-weight:700}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic-subset.woff2) format("woff2"),url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic.woff) format("woff");font-weight:700;font-style:italic}@font-face{font-family:Mija;src:url(/fonts/MijaRegular/Mija_Regular-webfont-subset.woff2) format("woff2"),url(/fonts/MijaRegular/Mija_Regular-webfont.woff) format("woff")}@font-face{font-family:Mija;src:url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format("woff2"),url(/fonts/MijaBold/Mija_Bold-webfont.woff) format("woff");font-weight:700}
</style>

<script>

  var fontsInServiceWorker = sessionStorage.foutFontsStage1Loaded && sessionStorage.foutFontsStage2Loaded || ('serviceWorker' in navigator && navigator.serviceWorker.controller !== null && navigator.serviceWorker.controller.state === 'activated')
  if (!fontsInServiceWorker && 'fonts' in document) {
    function fetchFonts(fonts) {
      return Promise.all(fonts.map(function (font) {
        return document
          .fonts
          .load(font);
      }));
    }

    if( sessionStorage.foutFontsStage2Loaded ) {
			document.documentElement.className += " wf-loaded-stage2";
		} else {
      sessionStorage.foutFontsStage1Loaded = true;
    };
  }



  if ("fonts" in document && !("connection" in navigator && navigator.connection.saveData)) {
		
		let font = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format('woff2')"
		);
		let fontBold = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format('woff2')",
			{ weight: "700" }
		);
		let fontItalic = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format('woff2')",
			{ style: "italic" }
		);
		
		
		
		
		let font2Bold = new FontFace(
			"Mija",
			"url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format('woff2')",
			{ weight: "700" }
		);

		
		let loadedFonts = Promise.all([
			font.load(),
			
			fontBold.load(),
			font2Bold.load(),
			fontItalic.load()
		]).then(result => {
			result.forEach(font => document.fonts.add(font));
			document.documentElement.classList.add('wf-loaded-stage2');
			sessionStorage.foutFontsStage2Loaded = true;
		}).catch(error => {
			throw new Error(`Error caught: ${error}`);
		});

  }

  if (
    (sessionStorage.foutFontsStage1Loaded &&
      sessionStorage.foutFontsStage2Loaded) ||
    ('serviceWorker' in navigator &&
      navigator.serviceWorker.controller !== null &&
      navigator.serviceWorker.controller.state === 'activated')
  ) {
    var docEl = document.documentElement
    
    docEl.classList.add('wf-loaded-stage2')
  }

  if (
    !'querySelector' in document &&
    'addEventListener' in window &&
    'getComputedStyle' in window
  ) {
    window.document.documentElement.className += ' no-js'
  }
  window.document.documentElement.className += ' enhanced js'
</script>



<style>
  @charset "UTF-8";@media (prefers-color-scheme:dark){:root{--article-background-color:linear-gradient(-45deg, #162c35 70%, #0c252f 100%)}}*,::after,::before{box-sizing:border-box}html{font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;overflow-y:scroll}body{margin:0;display:flex;flex-direction:column;background-color:#fff;font-feature-settings:"onum" 1;color:#333;overflow:hidden;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:-apple-system,BlinkMacSystemFont,Roboto,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif;font-size:1.125em}body,html{min-height:100%;overflow-x:hidden}img{max-width:100%;position:relative;border-style:none}article,aside,figcaption,figure,footer,header,main,nav,section{display:block}:focus{outline:3px dotted var(--THEME_COLOR_HOVER,#d33a2c)!important;outline-offset:2px}article,figure,header,main,nav,section{display:block}@media (prefers-reduced-data:reduce){.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 body,.wf-loaded-stage2 h1,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 tbody td,.wf-loaded-stage2 th,.wf-loaded-stage2 time{font-family:-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif!important}}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 h1,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 th{font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 body,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 tbody td,.wf-loaded-stage2 time{font-family:Elena,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif}@media all and (max-width:750px){.c-garfield-the-cat{display:flex;flex-direction:column}.c-garfield-the-cat>*{margin-bottom:0}.article__image,.c-garfield-the-cat>figure{margin:1em auto .25em auto}.c-garfield-aside--meta{margin-bottom:1em}.c-garfield-the-cat>pre{margin-top:1em}.c-garfield-the-cat .code-toolbar{margin-top:1em}.c-garfield-the-cat .code-toolbar>pre{margin-top:0}.c-garfield-the-cat>pre{margin-bottom:.5rem}.c-garfield-the-cat>table{margin-top:1em;margin-bottom:1em}.c-garfield-the-cat .pull-quote__quotation{margin-top:1em}.drop-caps{display:none}}.js-show-secondary .menu-text--sm,.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}.js-show-secondary .menu-text--sm--close{display:block}@media all and (min-width:800px){.js-show-secondary .main-nav__secondary{display:block;top:50px}.js-show-secondary .menu-text--lg--close,.menu-text--lg{display:block}.js-show-secondary .menu-text--lg,.js-show-secondary .menu-text--sm--close,.menu-text--sm{display:none}}.js-show-secondary .main-nav-more-item__button:before{content:"";display:block;margin-left:.35em;width:45px;height:30px;background-position:center center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50.21 35.05'%3E%3Cellipse cx='27.8' cy='32.92' fill='rgba(60,60,60,0.5)' rx='19.64' ry='1.2'/%3E%3Cpath fill='%23fff' d='M46.48 15.53a5.2 5.2 0 00-2-.31 7 7 0 00-1.43.19 7.66 7.66 0 001.19-1.52 7.12 7.12 0 011.12-.13 5.18 5.18 0 012 .31h.05a2.82 2.82 0 011.44 1.24 2.75 2.75 0 01.18 2 2.36 2.36 0 00-.74-.46 2 2 0 01.86 1c.11.45-.23 1-.67.92a1.86 1.86 0 00-.22-1 2.65 2.65 0 00-.29-1 2.74 2.74 0 00-1.49-1.24zM16.56 28.07c.06-.21.37-1.29.19-1.47 0 0 5.18 5.08 7.22-2.7a6 6 0 001.16.62c-.75 7-6.44 3.43-6.44 3.43.22.13.14 1.25.12 1.47-.16 2.2-3 1.63-3.74.11a2.44 2.44 0 01-.14-.34 1.4 1.4 0 001.63-1.12z' class='cls-2'/%3E%3Cpath fill='%23fff' d='M1.26 14.52c.08.23.18.45.28.67v.05c1.26 2.67 3.76 5 6.81 4.61a12 12 0 003.51-1.05 8.6 8.6 0 013.64-1 7.28 7.28 0 00.1 2.65A9.82 9.82 0 0117 18.5s-.77 2.34-.41 3a1 1 0 00-.15-.18 1.28 1.28 0 00-.8-.4 1 1 0 00-.89.7c-.23.45-.24.83-.63 1.17-1 .87-2.17 2-1.79 3.47a2.64 2.64 0 002.06 1.82A1.39 1.39 0 0016 27c.06-.21.36-1.28.18-1.46 0 0 5.19 5.07 7.23-2.7a5.65 5.65 0 001.16.61c1.43.56 3.94.91 6.11-2.07a20.36 20.36 0 005.68 1.13s-1.55-.55-1.61-1.28c0 0 3.84 1 6 0l-2.43-.32a3.69 3.69 0 001.68-.42 5.24 5.24 0 012.46 0c.73.08 1.06-.31 1.54-.78a1.17 1.17 0 00.09.33 2.06 2.06 0 00.12.35 3.21 3.21 0 00.37.65 1.35 1.35 0 001.27.53.92.92 0 00.53-.28 1.2 1.2 0 00.19-1.16 2 2 0 00-.77-.94 1.85 1.85 0 011 1.76c.44.08.78-.48.67-.93a1.13 1.13 0 00-.13-.32 2.4 2.4 0 00-.72-.7 2.26 2.26 0 01.74.45 2.67 2.67 0 00.1-.64v-.3a2.59 2.59 0 00-.28-1A2.65 2.65 0 0046 16.32l-.14-.06-.08-.05h-.06a10.1 10.1 0 00-3.9-.54 6.3 6.3 0 001.59-2.45 3 3 0 01-.12.73s1.61-.69.71-2.95a1 1 0 01.63.49 4.17 4.17 0 00-1.74-2.81 2.35 2.35 0 01.88.17 3.64 3.64 0 00-1.72-1.34l-.27-2.21.88.31s0-.35-.89-.86a7.17 7.17 0 00.36-3.37C39.32 1 38.27 2.48 38 2.94a12.73 12.73 0 00-2.56.26 2.83 2.83 0 011.29-.62 3.87 3.87 0 00-3.23.94s-2.73-2-5.37-1.29c0 0-.27 1.36 1.42 4.77a6.37 6.37 0 00-2.31 2.67 7.38 7.38 0 011.63-1.59s-2.44 2.6-1.46 4.67a3.77 3.77 0 01.35-1.55c0 .4-.24 3.2 1 4.61a9.92 9.92 0 01-.32-2s.37 2.53 3.84 3.6a4.35 4.35 0 01-1.49-1.54 11.65 11.65 0 002.47 1.23c-.61.18-1 .31-1 .31l-.81.38a6.56 6.56 0 01-2.34-1.49h-.07a.58.58 0 01-.31.08.64.64 0 01-.46-.21 5.47 5.47 0 01-1.14-2.91.66.66 0 01-.33-.31 3.48 3.48 0 01-.19-2.24 6.84 6.84 0 00-6.5-.26 18.29 18.29 0 012.43.43s-4.84.26-7.22 3.71c0 0 1.93-2 2.77-1.7a8.44 8.44 0 00-2.1 3A9.13 9.13 0 0012 16c-3.7.78-5.2-1.7-5.79-3.65 0-.13-.08-.25-.11-.37a.14.14 0 000-.07v-.16a.14.14 0 010-.06q-.1-.24-.1-.47v-.05a.68.68 0 000-.14 2.4 2.4 0 010-.24v-.09a.09.09 0 000-.05v-.08a.28.28 0 010-.09v-.12c-.09-2-1.43-2.88-3-1.92C.82 9.6.44 12.35 1.26 14.52zm26.58-3.41v.05z' class='cls-2'/%3E%3C/svg%3E");order:1}.js-show-secondary .main-nav-more-item__button:after{width:15px;height:15px;order:2;background-image:url(/images/icons/close.svg)}.js-show-secondary .main-nav__secondary{display:flex}strong{font-weight:bolder;letter-spacing:0}svg:not(:root){overflow:hidden}button{text-transform:none;cursor:pointer;font:inherit;margin:0}[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}.l-author-bio{display:flex;flex-wrap:wrap;align-items:center}.l-author-bio-content{flex-grow:1;flex-shrink:1;flex-basis:300px}.bio-image__large .bio-image{--bio-image-border-width:8px}.bio-image{padding:0;margin:0;display:block;width:100%;height:100%;border-radius:inherit;position:relative}.bio-image::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100% auto;background-repeat:no-repeat;top:89%;left:-30%;right:0;transform-origin:30% 50%;opacity:1;transition:opacity .3s ease-in-out}.bio-image:hover::before{opacity:0}a.bio-image-link{background:0 0;text-shadow:none;color:inherit;padding:0;display:block;border-radius:inherit;width:100%;height:100%}a.bio-image-link::before{display:block;content:'';height:120%;width:120%;position:absolute;top:-10%;left:-12%}.bio-image-wrapper{background:var(--bio-image-background-color,var(--bio-image-border-color,#d33a2c));border:solid var(--bio-image-border-width,8px) var(--bio-image-border-color,#d33a2c);border-radius:inherit;transform:scale(.84) translateX(15%) rotateZ(calc(-1 * (11 * 1deg)));transform-origin:0 100%;overflow:hidden;width:100%;height:100%;transition:transform .2s ease-out}.bio-image-image{width:100%;height:100%;object-fit:cover;display:block;transform:scale(1.2) rotateZ(calc(11 * 1deg));transition:transform .2s ease-out}.bio-image-link:active .bio-image-wrapper,.bio-image-link:focus .bio-image-wrapper,.bio-image:hover .bio-image-wrapper{transform:scale(.84) translateX(15%) rotateZ(0)}.bio-image-link:active .bio-image-image,.bio-image-link:focus .bio-image-image,.bio-image:hover .bio-image-image{transform:scale(1.2) rotateZ(0)}.article__content .author-post__author-title{color:#d33a2c;text-decoration-line:underline;font-weight:700;font-size:.9em}.light-grey{color:#767676!important}.rounded-3xl{border-radius:1.2em}.block{display:block}.h-48{height:12rem}.mr-3{margin-right:.75rem}.mb-5{margin-bottom:1.25rem}@media all and (max-width:600px){.mobw-40{width:8rem!important}.mobh-40{height:8rem!important}}.w-48{width:12rem}.mt-2{margin-top:.5rem}.mtn{margin-top:0!important}.mbn{margin-bottom:0!important}small{font-size:80%}.row{box-sizing:border-box;display:flex;flex:0 1 auto;flex-direction:row;flex-wrap:wrap;margin-right:-1rem;margin-left:-1rem}[class*=col-]{box-sizing:border-box;flex:0 0 auto;padding-right:1rem;padding-left:1rem}.row::after{clear:both}.col-12{flex-basis:100%;max-width:100%}@media screen and (min-width:48em){.col-12{flex-basis:100%;max-width:100%}}.container{width:calc(100% - .5em);max-width:1440px;margin:0 auto;z-index:1;position:relative}.container::after{content:"";display:table;clear:both}@media (min-width:40em){.container{width:92vw!important}}@media (min-width:48em){.container{width:85vw}}@media (min-width:64em){.container{width:68rem}}@media (min-width:75em){.container{width:79rem}}@media screen and (min-width:160em){.container{max-width:1650px}}@media (min-width:187.5em){.container{max-width:1860px}}.c-garfield-the-cat>p:first-of-type{font-size:1.1em;line-height:1.55em}.c-garfield-the-cat>p:empty{display:none}.c-felix-the-cat{background-color:#f3f3f3;border-left:11px solid #e6e4e1;padding:1em 1em 1em 1.5em;color:#424242;margin-left:0;margin-top:1em;font-size:1.05em;line-height:1.6em;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0 0,#fff 100%)}.c-felix-the-cat h4{margin-top:.5em}.sponsor-panel{display:flex;justify-content:center;align-items:center}.sponsor-panel-content{flex:3}.sponsor-panel-image{display:none}@media screen and (min-width:1100px){.sponsor-panel-image{display:block;background-image:none;margin-left:1.5em;flex:1}}@media (max-width:1024px){.col{width:100%!important;padding:0 1em}.row{margin-left:0;margin-right:0}.article__content{float:none}.article__content::before{display:none}}#main{position:relative;z-index:0;background-color:#fff}@supports (display:grid){.main-nav{display:grid;align-items:center}}.main-nav{position:relative;display:block;min-width:0;color:#fff;grid-column:span 2;font-size:1.05em}.main-nav__primary .nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav__secondary .nav-item--active{background-color:transparent;margin:0}.c-garfield-the-cat figcaption a{color:#666;text-decoration-line:underline;text-decoration-color:#666}.c-garfield-the-cat figcaption a.btn{color:#fff;text-decoration:none}@media all and (min-width:1100px){@supports (grid-row-gap:0){.c-garfield-the-cat{display:grid;grid-template-columns:0 minmax(0,.5fr) repeat(10,minmax(0,1fr)) .7fr .3fr 17rem;margin:0 auto}.c-garfield-the-cat ol,.c-garfield-the-cat ul,.c-garfield-the-cat>div,.c-garfield-the-cat>p,.c-garfield-the-cat>table{margin-bottom:1.4em}.c-garfield-the-cat>h2{margin-top:1.5em;margin-bottom:1em}.c-garfield-the-cat>h3,.c-garfield-the-cat>h4{margin-top:1.5em;margin-bottom:.65em}.c-garfield-the-cat>h5{margin-top:.65em;margin-bottom:.65em}.article__image,.c-garfield-the-cat>figure{margin:0 auto 1.4em auto;width:100%}.c-garfield-the-cat .code-toolbar pre,.c-garfield-the-cat blockquote,.c-garfield-the-cat pre,.c-garfield-the-cat>figure.video-embed-container{margin-bottom:1.7em;margin-top:.3em}.c-garfield-the-cat .code-toolbar{margin-bottom:0}.c-garfield-the-cat>*{grid-column:3/13;margin-top:0;margin-bottom:0}.c-garfield-the-cat .c-garfield-bio{grid-column:1/2;grid-row:1/4;align-self:start}.c-garfield-the-cat .c-garfield-header{grid-column-end:16}.c-garfield-the-cat .c-garfield-aside--meta{grid-column:15/16;grid-row:2/7;align-self:start;margin:0}.c-garfield-the-cat .toc-components li{margin-bottom:.75em}.c-garfield-the-cat>.break-out{grid-column:3/14;width:100%}.c-garfield-the-cat>.break-out img{margin:0 auto}.c-garfield-the-cat>.break-out figcaption{max-width:50em}.article__content .c-garfield-the-cat figcaption{margin:0 auto}.c-garfield-the-cat .c-garfield-native-panel{grid-column:15/16;grid-row:8/15;align-self:start;text-align:center;position:relative}.c-garfield-native-panel__right{grid-column:15/16;grid-row:15/22;align-self:start;text-align:center}.c-garfield-the-cat .c-garfield-native-panel__below{grid-row:19/25}.c-garfield-the-cat .c-garfield-native-panel__end{grid-row:26/33}.feature-panel-container{margin-top:6em;margin-bottom:1em}}}.no-ads .c-garfield-native-panel,.no-panels .feature-panel-container,.subscriber .c-garfield-native-panel,.subscriber .feature-panel-container{display:none!important}figcaption a{color:inherit}figcaption code,figcaption pre{font-style:normal}.article h1,.article h2,.article h3,.article h4,.article h5,.article h6{position:relative}.feature-panel-container{grid-column:1/15;margin-top:3em;margin-bottom:1em}.article__image img,.c-garfield-the-cat>figure img{display:block;width:auto;max-width:100%;margin:0 auto;height:auto}.article__image>a,.c-garfield-the-cat>figure>a{display:block;background:0 0;position:relative;z-index:99}.article__image figcaption,.c-garfield-the-cat>figure figcaption{color:#666;font-size:.95em;font-style:italic;padding:.75em 2em .75em 0;display:table}.article__image figcaption a,.c-garfield-the-cat>figure figcaption a{color:#666}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before,.internal__page__wrapper figure:not(.bio-image) figcaption::before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNyAxMy4wOSI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNjMmMyYzI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jYW1lcmE8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTguNSA1LjQ0YTIuMjEgMi4yMSAwIDEgMCAyLjIxIDIuMjEgMi4yMSAyLjIxIDAgMCAwLTIuMjEtMi4yMXpNMTQuNzkgMi4yMWgtMi41NWEyLjIxIDIuMjEgMCAwIDAtMi4yNC0yLjIxaC0zYTIuMjEgMi4yMSAwIDAgMC0yLjI0IDIuMjFoLTIuNTVhMi4yMSAyLjIxIDAgMCAwLTIuMjEgMi4yMXY2LjQ2YTIuMjEgMi4yMSAwIDAgMCAyLjIxIDIuMjFoMTIuNThhMi4yMSAyLjIxIDAgMCAwIDIuMjEtMi4yMXYtNi40NmEyLjIxIDIuMjEgMCAwIDAtMi4yMS0yLjIxem0tNi4yOSA5LjM1YTMuOTEgMy45MSAwIDEgMSAzLjkxLTMuOTEgMy45MSAzLjkxIDAgMCAxLTMuOTEgMy45MXoiLz48L3N2Zz4=);height:1em;width:1.5em;padding-right:.6em;display:table-cell;vertical-align:baseline;position:relative;top:.05em}.c-garfield-the-cat>figure.article__figure figcaption::before{content:'';display:none}.hidden{display:none!important}.c-garfield-header{clear:both}.c-promo-box{font-size:.9em;border-radius:11px}.c-promo-box a:not(.btn){color:#006fc6}.c-promo-box--ad::before{display:block;white-space:pre-wrap;padding:2em 0 3em 0;font-size:.85em;font-style:italic;color:#666}.c-promo-box--ad img{border-top-left-radius:11px;border-top-right-radius:11px}.c-garfield-the-cat .author__desc{font-size:.9em;color:#555}.summary__heading{font-style:normal;font-size:1rem;letter-spacing:2px;margin:0;font-weight:700;color:#d33a2c;text-transform:uppercase}.c-promo-box--ad ul{padding-left:0;margin:0}.bnnr-list{display:flex;text-align:center;justify-content:center;flex-direction:row}.sponsors.c-promo-box:not(.c-promo-box--wide) .bnnr-list{flex-direction:column}.c-garfield-the-cat{padding:0 1em}@media screen and (min-width:80em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr)) 1.4fr .6fr 21rem 1fr}}@media screen and (min-width:100em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr)) 1.9fr .4fr 21rem 1fr}}@media screen and (min-width:160em){.c-garfield-the-cat{display:grid;grid-template-columns:18.5rem repeat(11,minmax(0,1fr)) .7fr .3fr 18.5rem;grid-column-gap:1.75rem}}@media (min-width:187.5em){.c-garfield-the-cat{display:grid;grid-template-columns:20rem repeat(11,minmax(0,1fr)) .7fr .3fr 20rem;grid-column-gap:2.25rem}}.header{background:#d33a2c;background:var(--THEME_COLOR,#d33a2c);position:relative;display:grid;justify-content:flex-start;align-items:center;padding:.8em;z-index:2;grid-template-columns:min-content min-content 1fr;column-gap:5px}@media all and (min-width:31.25em){.header{grid-template-columns:-webkit-min-content -webkit-min-content 0 minmax(100px,100%);grid-template-columns:min-content min-content 0 minmax(100px,100%);column-gap:10px}}@media (min-width:700px){.header{grid-template-columns:-webkit-min-content minmax(140px,2fr) 0 minmax(100px,350px);grid-template-columns:min-content minmax(140px,2fr) 0 minmax(100px,350px)}}@media (min-width:740px){.header{padding:1rem 2em}}.search{flex-basis:100px;flex-shrink:1}@media screen and (min-width:48em){body{font-size:calc(.35842vw + .95296em)}}body .form__field__label,body li,body p{line-height:calc(1.5em + .2vw);word-break:break-word}body h1{line-height:1.2}.article--post__title a:focus,.article--post__title a:hover{color:#d33a2c}@supports (-ms-ime-align:auto){.article__image figcaption,.c-garfield-the-cat>figure figcaption{display:inline-block}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before{display:inline-block}body{font-feature-settings:normal}}::-webkit-input-placeholder{color:#666}::-moz-placeholder{color:#000}:-ms-input-placeholder{color:#666}.article-header--meta-item__date,time{color:#666;font-feature-settings:"smcp" 1,"c2sc" 1;letter-spacing:1px;text-transform:lowercase;background-position:center 72%}.article-header--meta-item__date{display:flex}.wf-loaded-stage2 time{font-variant:petite-caps}.kbd,kbd{font-size:.9em;padding:.0625rem .5rem;border-radius:.125rem;border:1px solid #d33a2c;box-shadow:1px 1px 0 #d33a2c,2px 2px 0 #d33a2c;margin:0 .25rem;color:#d33a2c;font-family:monospace}figure{margin:0;padding:0}figure:after,figure:before{content:" ";display:table;clear:both}a{padding:7px 0;background-color:transparent;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;text-decoration-line:underline;color:#006fc6}.h1,h1{font-size:calc(1.625rem + 1.6vw);margin:0}.h2,.h3,.h4,.h5,h2,h3,h4,h5{color:#333}.h2,h2{font-size:calc(1.5rem + .25vw);margin:2em 0 .75em;text-transform:capitalize}.h3,h3{font-size:calc(1.125rem + .25vw);text-transform:uppercase;letter-spacing:1px;margin-top:2em;margin-bottom:1em}h4{font-size:1.1em;margin-top:2em}h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{text-transform:none}@keyframes fadeOut-headings{0%{background:#ffde95;box-shadow:-10px 0 0 12px #ffde95}100%{background:#fff1d2;box-shadow:-10px 0 0 12px #fff1d2}}h2:target,h3:target,h4:target,h5:target,h6:target{border-radius:11px;animation:fadeOut-headings .4s;animation-fill-mode:forwards}.article__content h2:target a,.article__content h3:target a,.article__content h4:target a,.article__content h5:target a{color:#d33a2c}:target{scroll-margin-top:2rem}ol,ul{margin:1em 0;max-width:100%}ol{padding:0;list-style:none;counter-reset:listCounter}ol>li{padding-left:calc(1.65em + .7vw);position:relative;counter-increment:listCounter;margin-bottom:1em}ol>li::before{content:counter(listCounter,decimal-leading-zero);font-size:.7em;font-weight:700;color:#d33a2c;left:.8em;position:absolute;font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif}ul{list-style:disc}ul>li::marker{color:#d33a2c}ul>li{margin-bottom:.75em;padding-left:.15em}.rh{color:#d33a2c}.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}@media (min-width:800px){.search{flex-basis:500px}.main-nav{grid-column:auto}.menu-text--sm{display:none}.menu-text--lg{display:block}}.secondary-nav{position:relative;grid-row-start:2;grid-column:1/5}body:not(.enhanced) .main-nav{overflow-x:auto;-webkit-overflow-scrolling:touch}.main-nav__primary{display:flex;list-style:none;padding:.4em 0;margin:0;flex-wrap:nowrap;width:100%;height:100%;flex-shrink:1;min-width:0;justify-content:flex-start}.main-nav span:empty{display:none}@media all and (min-width:53.125em){.main-nav__primary{justify-content:space-between}}.nav-item{flex-grow:0;background:0 0;text-shadow:none;color:inherit;font-weight:700;display:flex;align-items:center;margin-bottom:0;padding-left:0}.nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav-more-item{position:relative;width:145px}@media (min-width:42.9375em){.main-nav-more-item{margin-left:.35em}}@media all and (max-width:52.5em){.main-nav-more-item{justify-content:center}}.main-nav-more-item__button{padding:.4em .5rem .4em 1rem;border:1px solid rgba(0,0,0,.05);color:inherit;display:flex;align-items:center;justify-content:space-around;line-height:1;position:relative;background-color:rgba(0,0,0,.2);border-radius:11px;box-shadow:0 13px 7px -15px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.main-nav-more-item__button,.nav-item-link{white-space:nowrap}.nav-item-link{padding:.35em .9rem;background:0 0;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);text-decoration:none}@media screen and (min-width:800px){.main-nav__secondary .nav-item-link{color:#d33a2c!important}}.nav-item-link:focus,.nav-item-link:hover{background-color:rgba(0,0,0,.15);border-radius:11px}.main-nav__secondary .nav-item-link:focus,.main-nav__secondary .nav-item-link:hover{background-color:transparent;box-shadow:none}.main-nav-more-item__button:active,.main-nav-more-item__button:focus,.nav-item-link:active,.nav-item-link:focus{outline-color:var(--THEME_COLOR_OUTLINE,#811d15)!important}.secondary-nav .nav-item-link:active,.secondary-nav .nav-item-link:focus{outline-color:#811d15!important}.main-nav__secondary .nav-item-link{text-shadow:none;width:100%;text-decoration:none;text-decoration-color:#d33a2c;padding:.25em .7rem}.main-nav-more-item__button:after{content:"";display:block;margin-left:9px;width:30px;height:30px;background-position:center center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 35.96 33.31'%3E%3Cellipse cx='17.98' cy='31.55' fill='rgba(60,60,60,0.3)' rx='14.75' ry='.57'/%3E%3Cpath fill='%23fff' d='M34.94 15v-.93c-.23-3-2.16-5.93-5.22-6.3-2.31-.28-3.39 1.45-2.4 3.84a.43.43 0 000 .05v.11a.14.14 0 010 .06.63.63 0 000 .09v.17c0 .08.06.18.09.29s0 0 0 .05a1 1 0 000 .17.64.64 0 010 .07c0 .18.1.38.14.6a.24.24 0 010 .08v.29c0 .03.06.33.08.5.37 2.58 0 6.27-4.73 7.37A12.74 12.74 0 0019.7 23c-.17-.65-.36-1.25-.55-1.77a5.16 5.16 0 002.05-2.56 11.26 11.26 0 01-.69 2.33c1.81-1.55 2-5.05 2-5.54a4.72 4.72 0 01.21 2c1.55-2.41-1.17-6-1.17-6a9.67 9.67 0 011.84 2.24C23 11.75 20.82 10 20.82 10c2.65-4 2.51-5.68 2.51-5.68-3.26-1.34-7 .73-7 .73a5.12 5.12 0 00-4-1.7 3.61 3.61 0 011.56 1 16.79 16.79 0 00-3.23-.74C10.41 3 9.4 1.16 6.22 1h-.58S5 3.64 5.61 5.19c-1.15.49-1.26.93-1.26.93l1.17-.25-.67 2.67a4.66 4.66 0 00-2.39 1.38 3 3 0 011.15-.07A5.11 5.11 0 001 13.05a1.32 1.32 0 01.87-.51c-1.47 2.69.49 3.76.49 3.76a3.8 3.8 0 010-.92 8.52 8.52 0 002.19 3.9 14.13 14.13 0 01-.24-1.59 5.46 5.46 0 001.93 2.7 6.25 6.25 0 01-.4-1.52 5.87 5.87 0 001.36 1.75c-.12.24-.24.47-.34.71a12 12 0 00-.7 2.13c0 .23-.09.45-.13.66a1.4 1.4 0 00-1-.31 1.4 1.4 0 00-1.09 1 3.1 3.1 0 000 1.57 9.48 9.48 0 001.8 3.92A2.92 2.92 0 004 30.06c-.56.16-1 .83-.72 1.34H22.6c.29-.51-.16-1.18-.72-1.34a2.92 2.92 0 00-1.71.24A9.48 9.48 0 0022 26.44 3.24 3.24 0 0022 25a15.89 15.89 0 012.87-.21 14.93 14.93 0 004.65-.69c3.72-1.24 5.38-5.25 5.38-9zm-12.49.42h-.05v-.07z'/%3E%3C/svg%3E")}.main-nav__secondary{display:none;color:#fff;padding:.2em 0;flex-wrap:wrap;flex-direction:column;justify-content:flex-start;align-items:flex-start;height:10em}@media all and (min-width:31.25em){.main-nav__secondary .nav-item-link{padding:.25em 1.1rem}.main-nav__secondary{padding:.2em .5em}}@media (-webkit-min-device-pixel-ratio:1.3),(min-resolution:124.8dpi){.main-nav__secondary{height:11em}}@media (min-width:800px){.secondary-nav{grid-row:auto;grid-column:auto}.main-nav__secondary{display:none;position:absolute;top:0;left:-80px;transform:translate(-50%,0);max-width:unset;background:#fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px;margin:0;padding:14px 20px 10px 10px;min-width:180px;color:#d33a2c;flex-direction:row;justify-content:space-between;align-items:center;height:auto}.main-nav__secondary:before{content:"";display:block;position:absolute;top:1px;left:50%;transform:translate(-50%,-100%);width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:15px solid #fff}}.nav-item-1,.nav-item-10,.nav-item-2,.nav-item-3,.nav-item-4,.nav-item-5,.nav-item-6,.nav-item-7,.nav-item-8,.nav-item-9{display:none}.main-nav__secondary .nav-item-1,.main-nav__secondary .nav-item-10,.main-nav__secondary .nav-item-2,.main-nav__secondary .nav-item-3,.main-nav__secondary .nav-item-4,.main-nav__secondary .nav-item-5,.main-nav__secondary .nav-item-6,.main-nav__secondary .nav-item-7,.main-nav__secondary .nav-item-8,.main-nav__secondary .nav-item-9{display:flex}@media (min-width:42.9375em){.nav-item-1{display:flex}.main-nav__secondary .nav-item-1{display:none}}@media (min-width:52.5em){.nav-item-2{display:flex}.main-nav__secondary .nav-item-2{display:none}}@media (min-width:56.5625em){.nav-item-3{display:flex}.main-nav__secondary .nav-item-3{display:none}}@media (min-width:70em){.nav-item-4{display:flex}.main-nav__secondary .nav-item-4{display:none}}@media (min-width:77.8125em){.nav-item-5{display:flex}.main-nav__secondary .nav-item-5{display:none}}@media (min-width:97.5em){.nav-item-6{display:flex}.main-nav__secondary .nav-item-6{display:none}}@media (min-width:108.4375em){.nav-item-7{display:flex}.main-nav__secondary .nav-item-7{display:none}}@media (min-width:120.625em){.nav-item-8{display:flex}.main-nav__secondary .nav-item-8{display:none}}@media (min-width:136.5625em){.nav-item-9{display:flex}.main-nav__secondary .nav-item-9{display:none}}@media (min-width:179.6875em){.nav-item-10{display:flex}.main-nav__secondary .nav-item-10{display:none}.main-nav-more-item{display:none}.main-nav__primary{justify-content:flex-start}.nav-item{padding:0 .65em}.header,.header.searchFocused{grid-template-columns:-webkit-min-content minmax(140px,-webkit-max-content) 0 minmax(250px,600px);grid-template-columns:min-content minmax(140px,max-content) 0 minmax(250px,600px)}}@media (max-width:480px){.header .search{grid-column:1/5;margin-top:.5em}.main-nav__primary{justify-content:flex-end}.main-nav-more-item{justify-content:flex-end}}.btn--text-shadow,a.btn.btn--text-shadow{text-shadow:1px 1px 1px rgba(0,0,0,.25)}.btn-wrapper{display:none}@media screen and (min-width:1100px){.btn-wrapper{display:block;padding:4px}}.btn,.toolbar-item{display:inline-block;border-radius:11px;text-align:center;color:#fff;text-decoration:none;border:none;font-weight:700;background:0 0;font-size:.9em;outline:0;background-color:#d33a2c;background-image:linear-gradient(to bottom,#f88040,#d33a2c)}.toolbar-item{transition:all .3s ease-in-out}.toolbar-item:active,.toolbar-item:focus{position:relative;top:3px}.btn{padding:.5em 1em}.btn.btn--green,.btn.btn--member{background-color:#41b14f;background-image:linear-gradient(#9ec14c,#41b14f);color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);transition:box-shadow .2s ease-in-out}.cta--green{display:block;padding:.5em;color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0;font-weight:700;text-decoration:none;border-radius:11px;text-align:center;font-size:.85em}.cta--green:hover{background-color:#c8f1e0;border:1px solid #a0dcc4}.cta--green:active,.cta--green:active:hover,.cta--green:focus,.cta--green:focus:hover{background-color:#137d54;color:#fff!important}a.btn--white{background:#fff;color:#267dcc;transition:color .1s ease-out}.btn--white--bordered:active,.btn--white--bordered:focus,.btn--white--bordered:hover,.toolbar-item,a.btn--white--bordered{border:1px solid #ddd}.btn span{color:#811d15;font-size:.8em;margin-left:5px;margin-top:.5em;line-height:1}.btn.btn--medium{font-size:calc(.9em + .1vw);padding:.75em 1em}@media (max-width:64em){pre{max-width:100%}}.input{border:none;display:block;color:#333;background-color:#fff;padding:.4em .75em;border-radius:5.5px;outline:0;font:inherit;margin:0;font-size:1.15rem;width:100%}.input::-webkit-input-placeholder{color:#666}.input:-ms-input-placeholder{color:#666}.input::-moz-placeholder{color:#000}.input::-ms-clear{display:none}.search .search-input{padding-left:calc(22px + 15px + 15px);background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgaGVpZ2h0PSIyNHB4IiB3aWR0aD0iMjRweCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIyMi4zMSIgeTE9IjIzLjYyIiB4Mj0iMy43MyIgeTI9IjMuMDUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNlOTM3MjIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmODZmMjUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+TWFnbmlmaWVyPC90aXRsZT48cGF0aCBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiIGQ9Ik0yMy4zMyAyMC4xbC00LjczLTQuNzRhMTAuMDYgMTAuMDYgMCAxIDAtMy4yMyAzLjIzbDQuNzQgNC43NGEyLjI5IDIuMjkgMCAxIDAgMy4yMi0zLjIzem0tMTcuNDgtNS44NGE1Ljk0IDUuOTQgMCAxIDEgOC40MiAwIDYgNiAwIDAgMS04LjQyIDB6Ii8+PC9zdmc+);background-repeat:no-repeat;background-size:22px auto;background-position:15px 45%;font-size:calc(1em + .1vw);border-radius:11px;padding-top:1rem;padding-bottom:1rem;font-weight:700;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}@media all and (max-width:550px){.search .search-input{min-height:54px}}.search-button{width:0;height:0;padding:0}.enhanced .search-button{display:none}.search-input-wrapper{position:relative}.search-clear-button{background:0 0;border:none;position:absolute;right:0;top:50%;transition:opacity .2s ease-out;transform:translate(-25%,-50%);opacity:0;padding:.5em}.search-clear-button.enabled{opacity:1}.search-results{background:var(--THEME_COLOR,#d33a2c);color:#fff}.search-results img{border-radius:11px;border:4px solid #fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}.search-results img:hover{box-shadow:0 0 3px -1px rgba(50,50,93,.25),0 4px 12px -6px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.search-results ol img{min-height:100px;height:auto}.logo{font-size:1em;line-height:0;width:3em;flex-basis:3em;flex-shrink:0;position:relative;z-index:0}@media all and (min-width:1450px){.logo{width:10.5em;flex-basis:10.5em}.logo img{transform:none}}.logo a{display:block;background:0 0;outline:0;padding:0;color:transparent;text-shadow:none}.logo a picture{display:block}.logo img{height:3.5em;transform:translate(0,15%)}.cart-active .back-to-top-wrapper{display:none}a.back-to-top{display:block;background:0 0;width:50px;height:50px;opacity:.7;text-shadow:none;border-radius:11px;padding:13px;transform-origin:bottom left;will-change:transform;transform:rotate(-11deg);transition:background-color .1s ease-out,transform .2s ease-out,opacity .1s ease-out;background-color:#666}@media all and (max-width:64em){a.back-to-top{opacity:.3}}a.back-to-top:focus,a.back-to-top:hover{background-color:#282634;opacity:1}a.back-to-top svg{display:block}.back-to-top-wrapper{width:50px;height:50px;display:none;position:fixed;bottom:20px;right:20px;z-index:9;will-change:transform;backface-visibility:hidden}.back-to-top-wrapper::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100% auto;background-repeat:no-repeat;top:89%;left:-30%;right:0;transition:all .1s ease-out;transform-origin:30% 50%;pointer-events:none}@media (min-height:600px){.back-to-top-wrapper{display:block}}label{max-width:100%}.form__field__input,input[type=email],input[type=password],input[type=text],textarea{background:#effaff;font-size:1em;border:1px solid #d2dfe4;transition:box-shadow .3s ease-in-out,color .3s ease-in-out;background-position:right 1.35em center;background-size:.25em .25em;background-repeat:no-repeat;margin-bottom:5px;border-radius:11px;padding:.9em 2em .7em 1.1rem;display:block;width:100%;outline:0;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.2)}.form__field__label{display:block;margin-bottom:.5em;cursor:pointer}input{border-color:#aaa}.sponsors ul{padding-left:0;text-align:center;list-style-image:none}.sponsors__native ul.bnnr-list li a{border-radius:11px;background-color:#fff;margin-bottom:3em;position:relative;top:0;padding:0;background-image:none;text-decoration-line:underline;text-decoration-color:#006fc6!important;text-decoration-thickness:1px;display:flex;flex-direction:column}.sponsors.sponsors-leaderboard ul li a,.sponsors.sponsors__lead ul li a,.sponsors__lead ul a,.sponsors__native ul.bnnr-list li a{box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03);transition:box-shadow .2s ease-in-out,top .1s ease-in-out;border-radius:11px}.sponsors.sponsors-leaderboard ul li a:hover,.sponsors.sponsors__lead ul li a:hover,.sponsors__native ul.bnnr-list li a:hover{box-shadow:0 1px 7px -5px rgba(50,50,93,.25),0 3px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03)}.sponsors.sponsors-leaderboard ul li a:active,.sponsors.sponsors-leaderboard ul li a:focus,.sponsors.sponsors__lead ul li a:active,.sponsors.sponsors__lead ul li a:focus,.sponsors__native ul.bnnr-list li a:active,.sponsors__native ul.bnnr-list li a:focus{box-shadow:inset 0 1px 7px -1px rgba(50,50,93,.25),inset 0 3px 6px -4px rgba(0,0,0,.3),inset 0 -6px 16px -6px rgba(0,0,0,.03);outline-offset:.75em;top:7px}.sponsors__native ul.bnnr-list li img{max-width:none;width:100%;height:auto;display:inherit}.sponsors.sponsors__lead a{box-shadow:none}.sponsors__lead ul a:active,.sponsors__lead ul a:focus{outline-offset:.75em;position:relative;top:7px;border-radius:11px}.sponsors__lead ul a:active img,.sponsors__lead ul a:focus img{border:2px solid #fff;box-shadow:0 1px 7px -1px rgba(50,50,93,.25),inset 0 3px 6px -4px rgba(0,0,0,.3),inset 0 -6px 16px -6px rgba(0,0,0,.03)}img::before{height:2.5em;display:block;top:2em;content:" ";width:100%;z-index:2;left:0}img::after{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij4KPHBhdGggZmlsbD0iIzc3NyIgZD0iTTI2IDI4aC0yMHYtNGw2LTEwIDguMjE5IDEwIDUuNzgxLTR2OHoiPjwvcGF0aD4KPHBhdGggZmlsbD0iIzc3NyIgZD0iTTI2IDE1YzAgMS42NTctMS4zNDMgMy0zIDNzLTMtMS4zNDMtMy0zIDEuMzQzLTMgMy0zYzEuNjU3IDAgMyAxLjM0MyAzIDN6Ij48L3BhdGg+CjxwYXRoIGZpbGw9IiM3NzciIGQ9Ik0yOC42ODEgNy4xNTljLTAuNjk0LTAuOTQ3LTEuNjYyLTIuMDUzLTIuNzI0LTMuMTE2cy0yLjE2OS0yLjAzMC0zLjExNi0yLjcyNGMtMS42MTItMS4xODItMi4zOTMtMS4zMTktMi44NDEtMS4zMTloLTE1LjVjLTEuMzc4IDAtMi41IDEuMTIxLTIuNSAyLjV2MjdjMCAxLjM3OCAxLjEyMiAyLjUgMi41IDIuNWgyM2MxLjM3OCAwIDIuNS0xLjEyMiAyLjUtMi41di0xOS41YzAtMC40NDgtMC4xMzctMS4yMy0xLjMxOS0yLjg0MXpNMjQuNTQzIDUuNDU3YzAuOTU5IDAuOTU5IDEuNzEyIDEuODI1IDIuMjY4IDIuNTQzaC00LjgxMXYtNC44MTFjMC43MTggMC41NTYgMS41ODQgMS4zMDkgMi41NDMgMi4yNjh6TTI4IDI5LjVjMCAwLjI3MS0wLjIyOSAwLjUtMC41IDAuNWgtMjNjLTAuMjcxIDAtMC41LTAuMjI5LTAuNS0wLjV2LTI3YzAtMC4yNzEgMC4yMjktMC41IDAuNS0wLjUgMCAwIDE1LjQ5OS0wIDE1LjUgMHY3YzAgMC41NTIgMC40NDggMSAxIDFoN3YxOS41eiI+PC9wYXRoPgo8L3N2Zz4K) " " attr(alt);font-size:.9em;display:block;color:#666;line-height:1.5;position:absolute;font-style:italic;z-index:2;top:calc(2em - 35px);text-align:center;width:104%;left:-2%;padding:2.25em 1em;text-shadow:none;background-color:#eee;border-radius:11px}@media screen and (min-width:40em){.author__desc{margin-left:1em}}.author__desc{font-size:.8em;position:relative;font-style:normal!important;color:#333;padding:0!important}.author__desc p{margin:1em 0}.author__desc .show-more-link{display:inline}.author__desc__title{color:#666;text-transform:uppercase;letter-spacing:2px;font-size:.9em;margin:0;font-weight:400}@media (max-width:40em){.author__desc{width:100%}}.article{padding-top:calc(.5em + 2vw)}.article__summary{font-size:1.05em}.c-garfield-the-cat .article__summary{position:initial}.author__desc p{font-size:.95em}.wf-loaded-stage2 .author__desc p{font-size:1em}.article__summary{align-self:center;margin-top:0;color:#666;position:relative;padding-bottom:1.5em;margin-bottom:.5em;border-bottom:3px solid #e5e5e5;font-size:1.05em;line-height:1.55em;font-style:italic}.wf-loaded-stage2 .article__summary{font-size:1.15em}@media all and (max-width:420px){.article__content{margin-top:0}}.article__content{line-height:1.5;padding:0!important}.article__content a{color:#006fc6}.article__content .btn{color:#fff}.drop-caps+p::first-line{font-weight:700;font-variant:all-petite-caps;text-transform:lowercase;letter-spacing:.5px;font-size:1.15em}.drop-caps{width:calc(96px + 1vw);height:calc(120px + 4vw);float:left;margin-right:1.5em;position:relative;left:calc(-1.3em - .5vw);top:.5vw}@media all and (min-width:500px){.drop-caps{width:150px;height:186px;min-width:100px;margin-left:0}}@media screen and (min-width:64em){.author__desc{margin-left:0}}.drop-caps img{max-width:100%}.drop-caps img:nth-of-type(2){position:absolute;bottom:0;right:-40px;width:75%}@media all and (min-height:700px){body.articlepage{overflow:initial}}.form__field__label--extra{display:inline}@media (max-width:64em){.form__field__label--extra{display:none}}.article-header{margin:0}@media all and (max-width:1099px){.article-header--meta{flex-wrap:nowrap;overflow-x:auto;scroll-snap-type:x;overflow-y:hidden}.article-header--meta::-webkit-scrollbar{display:none;width:0;background:0 0}.sponsors:not(.sponsors__lead):not(.sponsors-leaderboard):not(#sponsors-article-end):not(.sponsors__mobile){display:none}.c-garfield-aside--meta{display:none}.sponsors__mobile{display:block}.meta-box{margin:1.5em 0}.comment-count{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.article-header--comments a{color:#d33a2c;text-decoration:none;font-weight:700}.article-header--meta .article-header--meta-comments{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3EArtboard 29%3C/title%3E%3Cpath class='cls-1' d='M3.29,2.73a66.7,66.7,0,0,0,3.21,9.52l6.29,1.08L8.1,15.53c2.91,5.28,7,9.09,12.14,4.55L25,24.52l.57-.52-3.83-5.48c3.6-4.32,1.74-7.76-1.93-10.36L17,13.29l-.1-6.85A43.83,43.83,0,0,0,11,4L9,7.7,9,3.39c-2.2-.65-4.07-1.08-5.08-1.3A.52.52,0,0,0,3.29,2.73Z'/%3E%3C/svg%3E");background-size:auto .75em;background-repeat:no-repeat;background-position:left 45%;padding-left:1em}}.c-garfield-the-cat .article-header--meta{display:flex;align-items:flex-end;list-style:none;padding:0;margin:0 0 .95em;height:30px}.article-header--meta li{padding:0;margin:0;min-width:max-content}.article-header--meta li::before{display:none}.article-header--meta li::after{content:"/";font-size:1em;color:#a7a7a7;display:inline-block;margin:0 .25em}.article-header--meta li:last-of-type::after{display:none}.article-header--date{color:#585858;font-family:inherit;font-size:.95em}.article-header--comments{font-size:.9em}.article-header--updated{padding:0 .8rem;color:#137d54;background-color:#d6f3e7;border:1px solid #c6f2e0;border-radius:11px;font-weight:700;text-transform:initial;font-feature-settings:normal;font-variant:none;font-size:.9em;letter-spacing:0;min-width:fit-content;margin-right:7px}.meta-box{background:#f6f6f6;padding:.6em 1em;list-style:none;width:max-content;max-width:100%;border-radius:11px;font-size:.9em;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;gap:.5em 2em}.c-garfield-the-cat .meta-box--item{line-height:1.4;padding-left:1.5em;background-size:auto 1em;background-repeat:no-repeat;background-position:left 2px;margin-bottom:0}.meta-box li:last-child,.meta-box--item:last-child{margin-bottom:0}.meta-box--tags{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cpath fill='%23e93e32' class='cls-1' d='M12.78 22.74l1.35 1.35a2.09 2.09 0 003 0l8.12-8.15a2.09 2.09 0 000-3l-1.34-1.33zM14.71 2.51a2.09 2.09 0 00-1.52-.61l-10 .22L3 12.1a2.09 2.09 0 00.61 1.52l7.14 7.12L21.87 9.65zm-4.64 9.88a3.17 3.17 0 113.44-2.86 3.17 3.17 0 01-3.44 2.86z'/%3E%3C/svg%3E")}.meta-box--share{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cpath d='M126.16 359.66c148 0 228.93-122.61 228.93-228.94 0-3.48 0-6.94-.23-10.4A163.83 163.83 0 00395 78.68a160.93 160.93 0 01-46.21 12.66 80.82 80.82 0 0035.37-44.51 161.17 161.17 0 01-51.09 19.53A80.54 80.54 0 00196 139.74 228.42 228.42 0 0130.13 55.68 80.52 80.52 0 0055 163.09 80 80 0 0118.52 153v1a80.49 80.49 0 0064.55 78.87 80.37 80.37 0 01-36.33 1.38 80.55 80.55 0 0075.17 55.87A161.38 161.38 0 0122 324.67a163.54 163.54 0 01-19.16-1.16 227.73 227.73 0 00123.33 36.08' fill='%231da1f2'/%3E%3C/svg%3E")}.meta-box--published{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32%7D%3C/style%3E%3C/defs%3E%3Crect class='cls-1' x='8.25' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Crect class='cls-1' x='17.53' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Cpath class='cls-1' d='M24.1 5.39h-2.56a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59h-4.28a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59H4.75a2.07 2.07 0 00-2.08 2.07v14.75a2.07 2.07 0 002.07 2.07H24.1a2.07 2.07 0 002.07-2.07V7.46a2.07 2.07 0 00-2.07-2.07zm-.29 16.15H5.23V8.45h18.58z'/%3E%3Cpath class='cls-1' d='M7.18 11.71h2.5v2.5h-2.5zM11.27 11.71h2.5v2.5h-2.5zM15.26 11.71h2.5v2.5h-2.5zM19.35 11.71h2.5v2.5h-2.5zM7.18 15.78h2.5v2.5h-2.5zM11.27 15.78h2.5v2.5h-2.5zM15.26 15.78h2.5v2.5h-2.5zM19.35 15.78h2.5v2.5h-2.5z'/%3E%3C/svg%3E")}.meta-box--author{background-image:url(/images/icons/author.svg)}code,pre{font-feature-settings:normal;color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Fira Code,Menlo,Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-variant-ligatures:none;word-wrap:normal;tab-size:4;hyphens:none}pre{padding:1rem;margin:.5rem 0;resize:both;max-width:100vw;color:#666;background:#fafafa;border:1px solid #eee;font-size:1em;border-radius:11px;min-width:250px;overflow:auto;box-shadow:0 6px 12px -17px rgba(50,50,93,.25),0 7px 6px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03)}.code-toolbar{position:relative}li>.code-toolbar{margin-top:1em}.code-toolbar>.toolbar{position:absolute;top:.5em;right:.5em;opacity:0;transition:opacity .3s ease-in-out}.code-toolbar>.toolbar .toolbar-item{display:inline-block}code.diff-highlight{width:100%}a code{background:0;padding:0;text-decoration-line:underline}:not(pre)>code,code{background:#fff2ea;color:#333;font-size:calc(.75em + .1vw);line-height:calc(1.5em + .2vw);padding:0 .2725em;font-style:normal;display:inline-block}:not(pre)>code{white-space:normal}pre>code{line-height:calc(1.75rem + .2vw);background:0 0;white-space:break-spaces}pre[data-line]>code{white-space:pre}pre[data-line]>code>span{height:calc(1.75rem + .2vw);display:inline-block}.table,table{width:100%;border-collapse:collapse;margin-bottom:calc(2em + 2vw);clear:both}.tr,tr{border-bottom:4px solid #eee}.td,.th,td,th{padding:1em 1.5em;border:none;text-align:left}.scroll-pane{overflow-x:auto;scrollbar-color:#666 #201c29;-webkit-overflow-scrolling:touch}.scroll-pane::-webkit-scrollbar{height:.75em}.scroll-pane::-webkit-scrollbar-thumb{background:#b0b0b0;border-radius:11px}.scroll-pane table td{min-width:30vw}@media all and (min-width:650px){.scroll-pane table td{min-width:auto}}.layout-fixed{table-layout:fixed}.figure table{margin-bottom:0}.tablesaw td{line-height:165%;text-align:left;vertical-align:middle}.tablesaw td,.tablesaw th{padding:.8em 1em}tbody tr:nth-child(2n) td{background-color:#f7f7f7}.tablesaw th,table th{border-bottom:4px solid #ddd}@media screen and (max-width:767px){.tablesaw thead{display:none}.tablesaw tr{display:flex;flex-direction:column;margin-bottom:1.5em;width:100%;border-radius:11px;border:1px solid #eee}.tablesaw td:before{content:attr(data-label);display:table-cell;font-weight:700;padding:0 1em 0 0;text-align:right}.tablesaw td:last-child:after{content:'';position:absolute;left:0;right:0;bottom:0}}a.skip-main{left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999}a.skip-main:active,a.skip-main:focus{color:#d33a2c;background-color:#fff;left:auto;top:auto;width:auto;height:auto;overflow:auto;padding:.5em 1em;text-align:center;font-size:1.2em;z-index:999}.video-embed-container .video-embed-container--wrapper{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}.signature{margin:1.5em 0;font-size:.9em;color:silver;font-style:italic}.author .show-more-link{font-size:.9em;display:inline;color:#666;text-decoration-line:underline;text-decoration-color:currentColor;font-weight:400}.cookie-banner{background-color:#fff;border-radius:11px;position:fixed;width:calc(19em + 1vw);padding:1em 1.5em;font-size:1em;z-index:99;box-shadow:0 6px 40px rgba(0,0,0,.3);bottom:1.25em;right:1.25em}.cookie-banner p{font-size:.9em;margin-top:0}.cookie-banner__container{display:flex}.cookie-banner button{padding:.9em 1em}@media screen and (max-width:480px){.cookie-banner{right:0;left:0;width:100%;border-radius:0;bottom:0}.cookie-banner p{margin-top:1em}}@media screen and (max-width:380px){.cookie-banner p{margin-top:0}}.cookies--btn{width:100%}.mr5{margin-right:.5em}.mr0{margin-right:0!important}.btn--white{background:#fff;color:#267dcc;border:1px solid #fff}.btn--white--bordered{border:1px solid #ddd}.sponsors ul li{display:inline-block;margin-bottom:3em;font-size:.85em;padding:0;text-align:center;vertical-align:top;max-width:25rem;border-radius:11px;border:1px solid #eee;min-height:90px}.c-promo-box--ad.sponsors li{width:auto}.sponsors__native ul.bnnr-list li{border:0;width:100%;height:auto;max-width:85%;margin:0 0 2em auto}.sponsors__native ul.bnnr-list .ad__desc{padding:1em}.sponsors__native ul.bnnr-list li:only-child{padding-bottom:0}blockquote:not(.pull-quote){font-style:italic;border-left:11px solid #e6e4e1;padding:1em calc(1.5em + .5vw);color:#424242;margin-left:0;margin-right:0;font-size:1.05em;line-height:1.65em;letter-spacing:0;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0e3 0,#fff 100%)}blockquote:not(.pull-quote) p{margin:0}.btn--small.toolbar-item,.btn.btn--small{font-size:.9em;border-radius:6px;margin:0;padding:.4em 1em}.c-felix-the-cat a.btn{display:table;margin-top:1em;margin-bottom:1.5em}@media screen and (max-height:880px){.article__comments--notes{display:none}.article__comments__form__desc{margin-top:4em}}header.subnav__header{background-color:#fff;background-color:var(--headers-bg-color,#fff);padding:.2rem 0 0 0;z-index:1}.subnav__primary::-webkit-scrollbar{display:none;width:0;background:0 0}.subnav__tags li:first-child{padding-left:14px}.subnav__tags li:last-child{padding-right:.8em}.subnav__tags .subnav-item{margin-bottom:0}@media (min-width:740px){header.subnav__header{padding:.25rem 0 0 0;box-shadow:0 4px 20px 0 rgba(0,0,0,.12)}.subnav__tags li:first-child{padding-left:35px}}.subnav .nav-item-link{color:#d33a2c;text-shadow:none!important;font-weight:700;font-family:Mija;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;border-radius:11px;font-size:1rem;background-color:#ffe7e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #fee0e0}.subnav .nav-item-link:hover{text-shadow:none;font-weight:700;font-family:Mija;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.subnav-item a:active,.subnav-item a:active:hover,.subnav-item a:focus,.subnav-item a:focus:hover{box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.12);background-color:#d33a2c;color:#fff!important;outline:0}.subnav-item--active a.nav-item-link,.subnav-item--active a.nav-item-link:hover{background-color:#d33a2c;color:#fff!important;border:1px solid #d33a2c}.subnav-item{display:flex;margin-right:9px;padding-left:3px}.subnav-item .nav-item-link{padding:2px 12px}.subnav a{background:0 0;font-weight:700;display:flex;align-items:center;text-decoration:none}.subnav__primary{padding:.25em 0;margin-top:.25em;margin-bottom:.35em;display:flex;position:relative;scroll-snap-type:x;scroll-padding:1rem;overflow-x:auto;scrollbar-width:none}.subnav-more-item__button{padding:.2em 1em;color:#d33a2c;border:1px solid #ddd;border-radius:11px;background:0 0;display:flex;align-items:center;justify-content:space-around;position:relative;font-size:.85em;min-width:max-content;transition:none}.hidden{display:none!important}.c-garfield-the-cat .subnav-item--green .nav-item-link{color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0}.c-garfield-the-cat .subnav-item--green .nav-item-link:hover{color:#137d54;background-color:#c8f1e0;border:1px solid #a0dcc4}.subnav .nav-item-link:hover{color:#d33a2c;text-shadow:none;font-weight:700;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.feature-panel__desc,.sponsors__desc{font-size:.75em;color:#666;padding-bottom:10px;top:-15px;position:relative}.feature-panel::before{position:absolute;left:0;transform:translate(0,-100%);top:-5px;content:"";border-bottom:8px solid #eee;width:100%}@media (min-width:1000px){.feature-panel::before{width:73%}}.feature-panel{position:relative;border-radius:11px;padding:1.25em;display:flex;flex-wrap:wrap;background-color:#f6f6f6}@media (min-width:1000px){.feature-panel{padding:2.5em}}.feature-panel-left-col,.feature-panel-right-col{flex-basis:100%;position:relative;padding:0;flex-shrink:0}.feature-panel-right-col{order:-1;display:flex;align-items:flex-start;margin-bottom:1em;justify-content:flex-start;margin-top:2em}@media (min-width:800px){.feature-panel-left-col{flex-basis:65%}.feature-panel-right-col{order:0;flex-basis:35%;margin:0;justify-content:center}}.feature-panel-description>:first-child{margin-top:0}.feature-panel-description>:last-child{margin-bottom:0}.feature-panel-image-link{position:relative;text-decoration:none;width:100%;max-width:210px;transition:scale,opacity .2s ease-out;padding-left:2.5em;background-image:none}.feature-panel-image{width:100%;max-width:14.375rem;margin:0 auto;display:block;transition:all .2s ease-out;will-change:transform;transform-origin:0 100%;transform:rotate(-11deg)}@media (min-width:1000px){.feature-panel-image-link{position:absolute;max-width:14.375rem;top:-90px;right:0}}.feature-panel-image-img{height:auto}.btn--large.toolbar-item,.btn.btn--large{font-size:calc(1em + .25vw);padding:.75em 1em}.btn .sr-only,.sr-only{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.c-garfield__nl{display:none}@media all and (min-width:1100px){.drop-caps{display:none}.l-author-bio{display:flex}.c-garfield__nl{display:block}.nl-box__form{display:flex;padding-bottom:7px;text-align:center;letter-spacing:-.5px;color:#fff;font-size:1.15em}.nl-box__desc{margin-top:10px;color:#666;font-size:80%;line-height:1.5em;text-align:center}.nl-box__form .nl-box__form--button,.nl-box__form .nl-box__form--email{flex-grow:1;flex-shrink:0;box-sizing:border-box;width:auto;margin:0;padding:.75em 1em;border:0;border-radius:11px;background:#fff;font-size:.95em}.nl-box__form--button:active,.nl-box__form--button:focus,input.nl-box__form--email:active,input.nl-box__form--email:focus{box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form--button:-ms-input-placeholder,.nl-box__form--email:-ms-input-placeholder{color:#777;font-style:italic}.nl-box__form--button::placeholder,.nl-box__form--email::placeholder{color:#777;font-style:italic}.nl-box__form .nl-box__form--button{transition:all .2s ease-in-out;color:#fff;background-color:#0168b8;font-family:Mija,-apple-system,Arial,BlinkMacSystemFont,"Roboto Slab","Droid Serif","Segoe UI",Ubuntu,Cantarell,Georgia,serif;font-weight:700;box-shadow:0 1px 1px rgba(0,0,0,.3);width:100%;border:0;border-left:1px solid #ddd;flex:2;border-top-left-radius:0;border-bottom-left-radius:0}.nl-box__form .nl-box__form--email{border-top-right-radius:0;border-bottom-right-radius:0;width:100%;flex:4}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus,.nl-box__form .nl-box__form--button:hover{cursor:pointer;color:#fff;background-color:#0168b8;border-color:#dadada;box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus{outline:0!important;text-shadow:1px 1px 1px rgba(0,0,0,.3);box-shadow:inset 0 3px 3px rgba(0,0,0,.3)}.nl-box__group{display:flex;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px}.nl-box__wrapper{display:flex;flex-direction:column;justify-content:center}.nl-box__form form{width:100%}.nl-box__form .nl-box__group{margin:0}.nl-box{margin:1.5em 0;padding:1em 0;box-shadow:none;max-width:750px;justify-self:center}}.article__content a.anchor{color:#767676;text-decoration:none;transition:color .2s ease-in-out;padding:.35em .05em}.article__content a.anchor:active,.article__content a.anchor:focus,.article__content a.anchor:hover{color:#106fc6;background-image:linear-gradient(90deg,#006fc6 0,#2ca2d3 30%,#006fc6 85%,#006fc6 100%);background-size:100%;background-repeat:repeat;-webkit-background-clip:text;-webkit-text-fill-color:transparent;-moz-background-clip:text;-moz-text-fill-color:transparent;text-decoration:none}#promo-article-end,#sponsors-article-end,.article__comments,.main-footer{content-visibility:auto}.toc-components{box-shadow:0 9px 30px -5px rgba(50,50,83,.25),0 8px 8px -12px rgba(0,0,0,.2),0 -6px 16px -6px rgba(0,0,0,.03);border-radius:11px;padding:2em;background-color:#fff;margin:1.25em 0 3em 0;grid-column:3/13}@media screen and (min-width:500px){.toc-components{display:grid;grid-template-columns:1fr 1fr}}@media screen and (min-width:800px){.toc-components{padding:2em 3em}}.article__content .btn--white{background:#fff;color:#267dcc}
</style>


    

    
      <link rel="preload" href="/js/nav-v2.js" as="script" importance="high">
<link rel="preload" href="/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2" as="font" type="font/woff2" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">
<link rel="preload" href="/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2" as="font" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">

<link rel="preload" href="/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2"  as="font" type="font/woff2" media="(min-width: 800px)" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">

<link rel="preload" href="/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2" as="font" media="(min-width: 800px)" type="font/woff2" crossorigin importance="low" media="(prefers-reduced-data: no-preference)">








<link rel="preload" href="/js/app.js" media="(min-width: 800px)" as="script" importance="low">
    

    
      
  
  

  
  

  

  

  <link rel="alternate" type="application/rss+xml" title="Smashing Magazine &amp;raquo; Feed" href="https://www.smashingmagazine.com/feed/" />

    

    <meta name="description" content="What started as a case study turned into a guide to visualizing audio with JavaScript. Although the output demos are in React, Jhey Tompkins isn’t going to dwell on the React side of things too much. The underlying techniques work with or without React."/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://www.smashingmagazine.com/2022/03/audio-visualization-javascript-gsap-part1/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content='A Guide To Audio Visualization With JavaScript And GSAP (Part 1) — Smashing Magazine' />
<meta property="og:description" content="What started as a case study turned into a guide to visualizing audio with JavaScript. Although the output demos are in React, Jhey Tompkins isn’t going to dwell on the React side of things too much. The underlying techniques work with or without React." />
<meta property="og:url" content="https://www.smashingmagazine.com/2022/03/audio-visualization-javascript-gsap-part1/" />
<meta property="og:site_name" content="Smashing Magazine" />
<meta property="article:publisher" content="https://www.facebook.com/smashmag" />

	
	<meta property="article:author" content="https://www.smashingmagazine.com/author/jhey-tompkins/" />

<meta property="article:tag" content="React" /><meta property="article:tag" content="Coding" /><meta property="article:tag" content="JavaScript" /><meta property="article:tag" content="Techniques" />
<meta property="article:section" content="General" />
<meta property="article:published_time" content="2022-03-02 13:30:00 &#43;0000 UTC" />
<meta property="article:modified_time" content=" 2022-03-02 13:30:00 &#43;0000 UTC" />
<meta property="og:updated_time" content="2022-03-02 13:30:00 &#43;0000 UTC" />
<meta property="og:image" content='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d02916da-2e33-4aed-ac5e-f1107fa44e57/audio-visualization-javascript-gsap-part1.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="What started as a case study turned into a guide to visualizing audio with JavaScript. Although the output demos are in React, Jhey Tompkins isn’t going to dwell on the React side of things too much. The underlying techniques work with or without React." />
<meta name="twitter:title" content='A Guide To Audio Visualization With JavaScript And GSAP (Part 1) — Smashing Magazine' />
<meta name="twitter:site" content="@smashingmag" />
<meta name="twitter:image" content='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d02916da-2e33-4aed-ac5e-f1107fa44e57/audio-visualization-javascript-gsap-part1.jpg' />

	
	<meta name="twitter:creator" content="@jh3yy" />

<meta property="DC.date.issued" content="2022-03-02 13:30:00 &#43;0000 UTC" />


    <meta name="theme-color" content="#d33a2c">
    <meta property="fb:pages" content="45576747489"/>
    
    <meta name="google-site-verification" content="X5sd8PEDJqYLSR98RKgSozn-0RNpknXFlGoA-UXe5K0" />

    <link rel="icon" href="/images/favicon/favicon.ico" />
    <link rel="icon" href="/images/favicon/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/images/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">

  </head>

  <body data-instant-whitelist class='no-js    articlepage' >

		
			
				



<div data-handler="PreLoad" id="top"></div>
<a href="#main" class="skip-main">Skip to main content</a>
<a href="#all-topics" class="skip-main">Jump to all topics</a>

  
    <a href="#article__start" class="skip-main">Start reading the article</a>
  

<a href="/articles/" class="skip-main">Jump to list of all articles</a>

<header class="global-header header">
    <div class="logo">
	<a href="/" title="&larr; Back to the homepage">
		<picture>
			<source
				media="(max-width: 1450px)" srcset="/images/logo.svg">
			<source
				media="(min-width: 1450px)"
				srcset="/images/logo--full.svg">
			<img
				src="/images/logo/logo.svg"
				loading="eager" decoding="async"
				alt="Smashing Magazine" />
		</picture>
	</a>
</div>

    <nav class="main-nav">
  <ul class="main-nav__primary">
  









<li class="nav-item nav-item-1 nav-item--active"><a data-instant class="nav-item-link" href="/articles/">Articles</a></li>
<li class="nav-item nav-item-2 "><a data-instant class="nav-item-link" href="/guides/">Guides</a></li>
<li class="nav-item nav-item-3 "><a data-instant class="nav-item-link" href="/printed-books/">Books</a></li>
<li class="nav-item nav-item-4 "><a data-instant class="nav-item-link" href="/events/">Workshops</a></li>
<li class="nav-item nav-item-5 "><a data-instant class="nav-item-link" href="/membership/">Membership</a></li>
<li class="nav-item nav-item-6 "><a data-instant class="nav-item-link" href="/jobs/">Job Board</a></li>
<li class="nav-item nav-item-7 "><a data-instant class="nav-item-link" href="/the-smashing-newsletter/">Newsletter</a></li>

<li class="nav-item nav-item-8"><a class="nav-item-link" href="https://podcast.smashingmagazine.com">Podcasts</a></li>
<li class="nav-item nav-item-9 "><a class="nav-item-link" href="/write-for-us/">Write for us</a></li>
<li class="nav-item nav-item-10"><a class="nav-item-link" href="mailto:advertising@smashingmagazine.com">Advertise with us</a></li>

    <li role="none" class="nav-item main-nav-more-item">
      <button class="main-nav-more-item__button" type="button" aria-haspopup="true" aria-expanded="false">
        <span class="menu-text--lg">More</span>
        <span class="menu-text--lg--close">Less</span>
        <span class="menu-text--sm">Menu</span>
        <span class="menu-text--sm--close">Less</span>
      </button>
    </li>
  </ul>
</nav>
<nav class="secondary-nav">
  <ul class="main-nav__secondary">
    









<li class="nav-item nav-item-1 nav-item--active"><a data-instant class="nav-item-link" href="/articles/">Articles</a></li>
<li class="nav-item nav-item-2 "><a data-instant class="nav-item-link" href="/guides/">Guides</a></li>
<li class="nav-item nav-item-3 "><a data-instant class="nav-item-link" href="/printed-books/">Books</a></li>
<li class="nav-item nav-item-4 "><a data-instant class="nav-item-link" href="/events/">Workshops</a></li>
<li class="nav-item nav-item-5 "><a data-instant class="nav-item-link" href="/membership/">Membership</a></li>
<li class="nav-item nav-item-6 "><a data-instant class="nav-item-link" href="/jobs/">Job Board</a></li>
<li class="nav-item nav-item-7 "><a data-instant class="nav-item-link" href="/the-smashing-newsletter/">Newsletter</a></li>

<li class="nav-item nav-item-8"><a class="nav-item-link" href="https://podcast.smashingmagazine.com">Podcasts</a></li>
<li class="nav-item nav-item-9 "><a class="nav-item-link" href="/write-for-us/">Write for us</a></li>
<li class="nav-item nav-item-10"><a class="nav-item-link" href="mailto:advertising@smashingmagazine.com">Advertise with us</a></li>

  </ul>
</nav>
    <div class="search">
        <form data-handler="Search" id="js-search-form" class="search-form" method="get" action="https://www.google.com/webhp?q=site:smashingmagazine.com">
        <div class="search-input-wrapper">
            <input  class="input search-input" inputmode="search" type="search" name="q" id="js-search-input" autocomplete="off" placeholder="Search articles..." aria-label="Search articles" />
            <input type="hidden" name="sitesearch" value="smashingmagazine.com" />
            <a id="js-search-clear-button" class="search-clear-button" tabindex="-1" role="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.35 15.36" width="16px" height="16px" tabind="-1">
                    <title>Clear Search</title>
                    <path fill="#e33b2a" d="M8.38 11.41c-.5-.5-.78-.52-1.33 0l-3.05 3.08c-1.18 1.18-1.7 1.18-3-.16s-1.18-2-.18-3l3.18-3.19a.69.69 0 0 0-.07-1.14l-3-3c-1-1-1.13-1.81 0-3s1.9-1.21 3.13 0l2.94 3a.66.66 0 0 0 1.11 0c.63-.65 2.49-2.51 3.28-3.35a1.46 1.46 0 0 1 2.3-.15c.24.24.47.42.89.84.86.86.94 1.57.05 2.46l-3.27 3.26c-.36.34-.52.58-.16.94l3.27 3.27c1.1 1.1 1.23 1.7.05 2.88l-.58.58a1.59 1.59 0 0 1-2.46-.21z" />
                </svg>
            </a>
        </div>
        <input type="submit" class="search-button btn" name="submit" value="Search" id="js-search-submit">
    </form>
</div>

</header>
<script src="/js/nav-v2.js" importance="high" defer></script>
<div>
  <div data-component="SearchResults" class="search-results" data-lite="true"></div>

  
</div>





	<header class="subnav__header" id="all-topics">
		<nav class="subnav" role="navigation">
  <ul class="subnav__primary subnav__tags flex">
  	


	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/accessibility/">Accessibility</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/css/">CSS</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/javascript/">JavaScript</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/usability/">Usability</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/design/">Design</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/figma/">Figma</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/wallpapers/">Wallpapers</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/react/">React</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/vue/">Vue</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/round-ups/">Round-Ups</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/web-design/">Web Design</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/guides/">Guides</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/business/">Business</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/career/">Career</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/privacy/">Privacy</a></li>


    <li role="none" class="subnav-item subnav-more-item">
      <a class="subnav-more-item__button" href="/articles/">
        <span class="menu-text">Jump to all articles ↬</span>
      </a>
    </li>
  </ul>
</nav>
	</header>


			
		

    
    <main id="main" tabindex="-1">
      
  
  
  <script id="gotell" type="application/json">
    {"created_at":"2022-03-02T13:30:00Z"}
  </script>

  

  <article class="block article" role="main">
    <div class="container article-container">
      <div class="row">

        <div class="col-12 article__content" id="article__content">

          <div class="c-garfield-the-cat ">

            <div class="c-garfield-header">
              
              



<header class="article-header">
  <ul class="article-header--meta">
		
			<li class="article-header--meta-item article-header--meta-item__author">
				<a class="author-post__author-title" href="/author/jhey-tompkins/">Jhey Tompkins</a>
        
			</li>
		
    
			
			<li class="article-header--meta-item article-header--meta-item__date">
				
				<time class="article-header--date" datetime="2022-03-02">Mar 2, 2022</time></li>
    

    
    <li class="article-header--meta-item article-header--meta-comments">
      <span class="article-header--comments">
        <a href="#comments-audio-visualization-javascript-gsap-part1">
          
          <span data-component="CommentsCount" data-insert="true" data-thread="/2022/03/audio-visualization-javascript-gsap-part1/" data-article="articles/2022-03-02-voice-recorder-tutorial.md">0 <span class="comment-count">comments</span></span>
        </a>
      </span>
    </li>
    
  </ul>

  <h1 class="article-header--title">A Guide To Audio Visualization With JavaScript And GSAP (Part 1)</h1>

  
</header>

            </div>

              
              


<ul class="meta-box meta-box--article">

  
  <li class="meta-box--item meta-box--published">
    24 min read
     </li>




  <li class="meta-box--item meta-box--tags">
    
    
      
        <a href="/category/react">React</a>,
      
    
      
        <a href="/category/coding">Coding</a>,
      
    
      
        <a href="/category/javascript">JavaScript</a>,
      
    
      
        <a href="/category/techniques">Techniques</a>
      
    
  </li>





  <li class="meta-box--item meta-box--share">
    Share on <a rel="nofollow" href="https://&#084;&#119;&#073;&#116;&#084;&#101;&#082;&#046;&#067;&#111;&#077;/intent/tweet?text=A%20Guide%20To%20Audio%20Visualization%20With%20JavaScript%20And%20GSAP%20%28Part%201%29&url=https%3A%2F%2Fwww.smashingmagazine.com%2f2022%2f03%2faudio-visualization-javascript-gsap-part1%2f&via=smashingmag">Twitter</a>,&nbsp;<a rel="nofollow" href="/api/ball?uri=//www.linkedin.com/shareArticle?url=https://www.smashingmagazine.com%2f2022%2f03%2faudio-visualization-javascript-gsap-part1%2f&title=A%20Guide%20To%20Audio%20Visualization%20With%20JavaScript%20And%20GSAP%20%28Part%201%29">LinkedIn</a>

  </li>


</ul>


            <div class="c-garfield-aside--meta">

              <div class="l-author-bio">

  <div class="mobw-40 mobh-40 w-48 h-48 rounded-3xl bio-image__large mb-5 mr-3">
    
    



<figure role="presentation" class="bio-image ">
  
  <a href="/author/jhey-tompkins/" class="bio-image-link">
  
  <div class="bio-image-wrapper">
		<picture>
			<source type="image/avif" srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAADkkAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAMgAAADIAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAADlFtZGF0EgAKChgd8fH7IEBA0IAyuBxEhACByEBQQHgggILIOHIgl&#43;0rIZwloX/Vo5s/wMbG4oi7j/Xojbkv3D7dRSyRb31G0Em5SGpNSs3QsV7VL&#43;F0w9rvv3pffYUK0VOkTq3NJ7d57bZOllEiM3jRjP/hpUOIXrkySkKS6prsxb6x0Pr389eGjzT0rLVA1QjcrQ2I9gtzOZz36wUiZBbwXUCT&#43;borN104U/NznPmNcTR4GJYpD00atRabWgmpLHUZokWrAEW4GzQ6mtdQBcwFZER23M4/Pa7PpVyD3PADVYyS7xfK1a&#43;JnyitCziVRx1T9B5UqQHFIgY3wG9hkeKAGmCsR2v0ss0aLUhn2cA1Aw&#43;xuAk3VBkH&#43;hkkSMcOX75bf8AzppZ1kL9zOyRLg36OA81&#43;Nj7y4y8g6N4ReJVYXqHo0PnlY6SLML5K3OQCQu&#43;tqF7GA2nM5nCfpTqMy&#43;IGts8M6L/Yb37IMQpWdvHJzS&#43;FSTsWH1AWy&#43;r4GuGYx/iV0784JVj3wnb9SmcykK&#43;5Mp6yRCcBQLnm9cN9U17sNma61nTllxRgdXto6gRNOZzPWHhzUROzpcQXtNAzt5O5O&#43;7G71mRXIsf9t&#43;4E2Nb2YV1Nmi9dDxAf2YAzCJAfFMUjI3xodN9OKDyihtppMtaNvTE13xeBb81XyFEUai1LgEucAaonRMIoJG6JgQ2yFXZcVI1Cr1TdHqggjXC/D8Fonj78nvZUdlfuoYOcpmDeh93dGD9NcopXn2tBNu7V1naUOYQ31WoH&#43;CUtxGNeN4Y3JaiFJMaZo/nzt32xtqPj3BLY/RK5n5OhcN&#43;N3KPTPn1Vdg4sJgMCQkKtHHnRKNmpXne6/m7IKMH7bVASlupwUUZ&#43;UfmAiDy9sDkuzcvrYx6mh0acvoBWRpkkkZZl9SMJurqNRhRAFxxAiOEKFA2b0vgxH7VoRMeZWpQmpO2f/SW&#43;O/RRBM8A1nB8YmAEYzEx/XjgX2V9UA00EZdlR9OXFWQcFHHAbdDYGiqNEUzNHqSOQYYTQ&#43;aygM2WX75q7USPAEoD1oq6bICSWcc8uaZR3k2GC35T99H3bYbSzffor5LMyT/06&#43;WI652tS8nxPdQ/TWHUKZVwM1g&#43;TAw2pMcl&#43;86j17LysxbqwKJLGfkfhm6mkKSiCLjcR0PpKqdGHE9HWNlB4NCClFgMg3CE88vV4U46XChs&#43;KhBuBX3X/4DoOO/h6FxeH/Utny3XlMMokw&#43;bOA/09O2Qfs17nr2twuytKETA1BHvjC7Mzie3L&#43;Lz1ny3k8Dmtr2P2627suVXgNqhX8IiZxtBvUs9dSsCpQBZgP7cmYN&#43;hTuaEd843/3hPLLLd1YVwmSlnwYYRp4vRtvFcww8Ef0Xvfe9bd8IdONlh9PdvwDGLo3y3ozQl5HDDts4JOoWnm2NWgNAPh1gblWgoJJ/COg6JsYOHvly2OvJ0FBhPXwl9Tw&#43;N21WtsEQ0kEyqscfuoY1RjWmHiag5/u/bpFOFDSY4gqQkbMRd&#43;vfxNHm3hw3a3D2PEsdOQvv&#43;N1PH0NZzXoznZQG7BBFNfHz1wO9tH45r2ytZmNfEkn6qvgcW39AXW1jxBKr8nBqAXFOVuAo1WeiKWlfNZEXqnYwGfkFePEE0Zn1QGSBLKAttyL5INxHWqX8u4uuyvjrd/zcbmJo4KeWVh19XEj4VBeT&#43;SqU6VIt8ZOcOqmP6E5GUUb4&#43;1KvFaj0eLvOpRKmy89yMMovqLS5wA/sBB62KYXmGQBsFRosvgGRQfcJkB2cGKOpb6d9yS02EBVtDcjq8dVfn0gJl&#43;fRV44tPbG0PwuCuv5IZlhX1CuSOmwLW9B6Lmosr/KuMLQub1CcMoqI0hbUXeW3m38inoUnLPbLgtHvBnYy9HPZWPhmMK4OIhTnDwtoXrw&#43;l7sQ3bDuZcq0&#43;pv0QOfUxYGofxRjJXaZTvVnkGUNlw3Im77aVWXnj9P0E5dsO7YnnsiziYsGGiuFTgzLkHouxWL&#43;FTUaug55wwGAFPSRlniYUb3nlVNEZLw6Za&#43;3T0KNzw0rkzVUw1gBw53ezZexrCEX7kEzWJydOuCq3g5IX8z3c96RAPdHUjNazurRSquNMyePUdg6T&#43;YRsNPfMlGfsC5TEZEG&#43;g8TiGFDv14XR3DA&#43;jKJRcUieBBEIj1lGqtyyu8ZnKLsYCMEtnm3ye0PPgR&#43;lGqMAVS5wNobNup1GCDmNQflvmUY6&#43;T6sINS/G40cGvH5WBZVoWHCoWdHaWxz4Rkxlvmd/Q0A&#43;v8VFJQbpuBZEG8nGLz/CYFHpqcJ0UBYR7YWtfHFALJMyJhgZrmStIQYhoFBGXrSrE0L6HrSNYO18EspA742t3SGH/5lNN7fSaIpcyJpvV&#43;bwDn&#43;eHvCaZBeqRt0l42amzGZvi6HNdaYBgWktcDQF&#43;QzkNxWDMExta1O6sEU1Rj8yOCt&#43;nYghDwCSVdmbA5lQoXbMeO394noM4RW0QYdIcYNvuOGQ3eNIEewmp14mpXgew1Q8w0DSdqiad&#43;YIZEtX/zIGOlZZljcu5a63ZFzju7He6dBcvHpaM4cB/P2cna4w&#43;iGPjcZZN6fxhXLaIFdlBth9SEydqE6eAS0iF5a9SRKUgkjufYlKcbaZyO/UNa47Kz&#43;ElWMIUonAKfcN9pzif8T8OY00fhmIkAFOOr06jEA8d&#43;lMNm2BnyS3EIG7p/YODkwN2H6atyjd/7dST5hqzfq1p&#43;1IcXKvq3Gf7zk9MmBaSQTf66oe4q/7slvyW4jRAniG1MeUgHLZbYjEf5nzfDOCR3MNNH9qW8HSnTQy1tC9zZj6MlOPb7CD9Jn5OoC/Gvo9dGpBVDu0Gegy52eT0x0d8ZZlfII6sbXC3qYdfJ7DqsZVTNwdeHJ3UWjJsqawLcW/mlnq4NtMoL9my7St83A7OHu2&#43;BT1ztDS4LesPeypdXZwPg57YUZNF2z4m76isuAY5hX8JMc/dLavNBtDDkwWxQB3&#43;sRzSQmPE9ZtGXsvXDU5rb3t5zykkczK11fHzpQmmSA3eZrHk9qd6GGv&#43;rWwriYQyNfCId141266&#43;wiSfrxdjUUbYO35mfZpc4oo79XWalnp04ZfRfHJYWNkGUjlYMwRUp9zbVRmlsTpg/OwDBwX0ii17cCk8kOz8I0YQ9rthWHuMwWHGykJHB1/QqlWMQ3396j7d7iJhTn4GKyDLBLqqaOoF5odny/F&#43;fExAy&#43;TLMwkzCJ2urYAAk1J9d1XZgfbQEZLWsXD9v7JHss/UTrEomRb22bUAroyda5ajKAx3SMFzNf4F8uuJXxTmY6It&#43;B1XapZf2/662nAixqqKwQPAEYCDdUPIxcZUOWZoOasco&#43;nLTA1GBa7OdVe0Tjy0pCq0LpHSUagVL1d4hnZ9R4C5N5U/dTKPI&#43;gunnjd8&#43;M&#43;mi5RMqScaS2BAF7TCuFARdNfjGdfoURa14krd4AiTLCkz7tyN/e80zrY6hNgvpPJkMv3TOBqu0EOFYhtVsnCxcklS7zMT5iRPCFQmQbipBVk8x6jsQZ1HyPJ0q23KLd3SqIzvH4mUC4KF4uwJzEA/HKvyZIBTuZq2yXSW/JL/HF1MGYYiqZ0TmmnLRxrn9BF6&#43;G1X2ydyspC3YSeBEJ4yQxVLt5WuJR0NZjz3fLpRNie&#43;sQg5EjWkY3GSF4UxAUt30YEU2dAccQHeRxZOrQsJa0GbPqIJwVvfyVgzsfnawtfYyobD7kcna1U0CgSmLhrzi2c1D&#43;N5q24DxiYSh28Je15jO6VpaDQtnCJSBaBOY364&#43;3TlZNXfcI/aTroTSSWDR3sZeOAzfBe3yZGpP2c7cbhB8ZtB3bdSsdajz3XNsvBaGrmSb3AgxoLIohvGREd/3XYSmt6y7Ao&#43;jwlDJnj4XovctZsDYAeALDl1WdmRoYtBTp1f9sX6DHgsOHOdxB9B1QtIgYbGDWiEbmNPrEr4DA3nYVtMeXj7wn8XWIVek7iyhKUriHycUpjJtndP8pQ7eXiYhUvyfeBBI7FtLRyhRPjruCaJy64Jz4VMmrMKuJdWxf4VMgIYqcg5Xz3KHkf2ao1f3ZO5N17Dy5fRNzF8&#43;qMqZ74hAdGUEkSt&#43;BMgSPZdtnic8r5K08ALIcQ1cAPgmIiXCFODl2f8KxqJxaKZfDpQ0ts3x3soOF/4lmT0aXlwRLJC2vHQh71uka4RN6I42&#43;VNARJW1wpj36I6q/wqLQxMXyP5IGvsoTXJfOvWDtx0DlwfGKt0B8l3FJ6HXOdYvozrazph&#43;T4E6JUQjwKuCsX98TrAUUuEM6Qs9pUG1cbhEL3K7AaNMDqQXDxk&#43;sSdGUt26p7vYwZuC/5jwm26NFDxtay/OCNeiK7xKoo00jNmf8&#43;kdkAtHkBNZxGYuq49p9akLjfkIU72tM76WrIjyfsDSUciBjO1v5cGl7kJkHCIJuDm398QFSr0DsWu1zkF50bSvsANA5hYke1HHwZnyAZSUx2ymoQGz6aXx4bE8QznZPcUUv7gAEMmgFLv5dYB7fvZinPecC7L&#43;6a3ezOUtXXijZoG&#43;rz8eqZv1Cqo5hec&#43;eT6wJ0pkBYK&#43;j9wT6WxD7ELzZsr2U3w9Om1FmW8ErjRoFQEzKGiil5Z1SQ7htaOEIfBPkNRBxvQq4LckMKpLjfH7x&#43;SRm&#43;06CXMgJlhmk6XN&#43;waL1ATTI7lTSdhmG07FMSEr&#43;QEaQrCgJTSmoPKnGBj4EYWZNFkHmeJAHaIoD/C0&#43;Z8sWPB3UUIwoa3ovEU&#43;Ac4dhj6EzhN7a11KxtlhgQr0pk6PGF0wO/pooPxDchVlf8IOFiB72sTKEiw3opFivlmGeFOoM0OrIwubAt13QrVbKYSJM&#43;Ff62E/k2OoU78lSolt377d2vAIELW7KhlGG3G8F6Qhqq2e5Jq0a/jAM9JmjitVA">
			<img
				class="bio-image-image"
					src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/84dfa22c-afec-4220-a11f-49fe185c7236/jhey-tompkins-200x200-opt.jpg"
					loading="eager" decoding="async" importance="high" width="100" height="100"
					alt="Jhey Tompkins"
				/>
		</picture>
  </div>
  
  </a>
  
</figure>
  </div>

  <div class="l-author-bio-content author__desc" id="author__desc">
    <h4 class="author__desc__title">
    About The Author
    </h4>

    <p>
      
        Jhey makes awesome things for awesome people! He’s a web developer with almost 10 years of experience. Working with and for names such as Eurostar, Uber, …
      
      <a href="/author/jhey-tompkins/" class="show-more-link">More about
          Jhey&nbsp;↬</a>
    </p>
  </div>

</div>

              <div class="c-garfield__nl">
              <h4 class="h2">Email Newsletter</h4>
              <section class="nl-box__form"><form action="//smashingmagazine.us1.list-manage.com/subscribe/post?u=16b832d9ad4b28edf261f34df&amp;id=a1666656e0" method="post"><div class="nl-box__wrapper"><label for="mce-EMAIL-hp" class="sr-only">Your (smashing) email</label><div class="nl-box__group"><input type="email" name="EMAIL" class="nl-box__form--email" id="mce-EMAIL-hp" placeholder="Your email">
    <input type="submit" value="Meow!" name="subscribe" class="nl-box__form--button"></div></div></form></section><p class="nl-box__desc"><em><a href="https://www.smashingmagazine.com/the-smashing-newsletter/">Weekly tips on front-end &amp; UX</a>.<br />Trusted by 190.000 folks.</em></p>
              </div>

              



            </div>


            

							
							
								
							
								
							
								
							
								
							
								
									
								
							
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
							
							

							<div class="c-garfield-native-panel__right">
								
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
					

					<li>
						<a href="https://www.smashingmagazine.com/printed-books/checklist-cards/">
							
								<picture>
                  <source type="image/avif" srcset="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fb7308e3-a67a-49f0-a4e0-551fca543333/support-sidebar.avif" />
							
								<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/313e7eae-9d2a-4e1d-9f10-f408ad81a006/support-sidebar.png" loading="lazy" width="300" height="250" alt="Boost your skills online, with our friendly online workshops on front-end and design.">
							
								</picture>
							

            <em class="ad__desc">Smart Interface Design Checklists</em>
						
              </a>
					</li>

				
			
		</ul>
	</div>

							</div>
              <div class="c-garfield-native-panel">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
					

					<li>
						<a href="https://smashingconf.com/online-workshops/workshops/vitaly-friedman-complex-ui/">
							
								<picture>
                  <source type="image/avif" srcset="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/4943f99a-a211-4c03-b5fa-870ca9476a0d/sidebar8.avif" />
							
								<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c06575b7-f30d-45e7-910b-38f6e0b14858/sidebar8-1.png" loading="lazy" width="300" height="250" alt="Boost your skills online, with our friendly online workshops on front-end and design.">
							
								</picture>
							

            <em class="ad__desc">Designing For Complex UI Masterclass</em>
						
              </a>
					</li>

				
			
				
					

					<li>
						<a href="https://smart-interface-design-patterns.com">
							
								<picture>
                  <source type="image/avif" srcset="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c108c007-2de1-4eb6-b66d-ab0e05177c20/smart-interface-design-patterns-opt.avif" />
							
								<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/06044161-765b-4a9c-8521-b7a86eb1795f/smart-interface-design-patterns-opt.png" loading="lazy" width="300" height="250" alt="Boost your skills online, with our friendly online workshops on front-end and design.">
							
								</picture>
							

            <em class="ad__desc">Smart Interface Design Patterns, with Vitaly Friedman</em>
						
              </a>
					</li>

				
			
		</ul>
	</div>

              </div>

							<div class="c-garfield-native-panel c-garfield-native-panel__below">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
					

					<li>
						<a href="https://bit.ly/northwestern_uni_winter">
							
								<img src="https://res.cloudinary.com/indysigner/image/upload/v1601395101/ads/NWU_Oct.gif" loading="lazy" width="180" height="150" alt="In-demand skills with Northwestern online">
							

            <em class="ad__desc">Build in-demand skills like UX, UI and HCI — Northwestern online MS in Info. Design &amp; Strategy</em>
						
              </a>
					</li>

				
			
				
			
		</ul>
	</div>

              </div>

							<div class="c-garfield-native-panel c-garfield-native-panel__end">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
			
				
			
		</ul>
	</div>

              </div>
            

            <div class="c-garfield-summary" id="article__start">
              <section aria-label="quick summary" class="article__summary">
                <span class="summary__heading">Quick summary&nbsp;↬ </span>
                
                  What started as a case study turned into a guide to visualizing audio with JavaScript. Although the output demos are in React, Jhey Tompkins isn’t going to dwell on the React side of things too much. The underlying techniques work with or without React.
                
              </section>
            </div>

            

            
							



						

            

<p>A while back I got approached by friend Kent C Dodds to help out with his site rebuild. Besides adding a little whimsy here and there, there was one part, in particular, Kent wanted a hand with. And that was audio visualization. One feature of Kent’s site is being able to “<a href="https://kentcdodds.com/calls/01/49/handling-difficult-co-workers-and-or-leadership">record a call</a>” and then he’d respond via a podcast episode.</p>

<p>So today, we’re going to look at how you can visualize audio input with JavaScript. Although the output demos are in React, we aren’t going to dwell on the React side of things too much. The underlying techniques work with or without React. It’s the case that I needed to create this in React as Kent’s site uses <a href="https://remix.run/">Remix</a>. We’ll focus on how you capture audio from a user and what you can do with that data.</p>

<p><strong>Note</strong>: <em>To see the demos in action, you’ll need to open and test directly them on the CodePen website. Enjoy!</em></p>

<p>Where do we start? Well, Kent kindly had a starting point already up and running for me. You can try it out here in this CodePen example:</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="MWOZgWb"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [1. Kent’s Starting Point](https://codepen.io/smashingmag/pen/MWOZgWb) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/MWOZgWb">1. Kent’s Starting Point</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>You’re able to choose your input device and start recording your audio. And you’ll see a pretty cool audio wave visualization. You can pause and stop your recording and re-record. In fact, Kent set up a lot of the functionality here for me using <a href="https://xstate.js.org/">XState</a> (XState is another article in itself).</p>

<p>But, the part he wasn’t satisfied with was the visualization. He wanted an audio visualization like those on <a href="https://zencastr.com/">Zencastr</a> or <a href="https://recorder.withgoogle.com/">Google Recorder</a>. The side-scrolling audio bars style. To be honest, this is actually nicer to work with for reasons we will mention later.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png"
			
			sizes="100vw"
			alt="Google Recorder Audio Visualization"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Google Recorder Audio Visualization (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/02908e3a-eeed-4585-8892-e0204ec41ea4/google-recorder-audio-visualization.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>Before we begin to create that visualization, let’s break down that starting point.</p>

<p>Now, in the starting point, Kent uses XState to process the different states of the audio recorder. But, we can cherry-pick the important parts you need to know. The main API at play is the <code>MediaRecorder</code> API and using <code>navigator.mediaDevices</code>.</p>

<p>Let’s start with <code>navigator.mediaDevices</code>. This gives us access to any connected media devices like webcams and microphones. In the demo, we are filtering and returning the audio inputs returned from <code>enumerateDevices</code>. These are then stored in the demo state and shown as buttons if we choose to change from the default audio input. If we choose to use a different device from the default, this gets stored in the demo state.</p>

<pre><code class="language-javascript">getDevices: async () => {
  const devices = await navigator.mediaDevices.enumerateDevices();
  return devices.filter(({ kind }) => kind === "audioinput");
},
</code></pre>

<p>Once we have an audio input device, it’s time to set up a <code>MediaRecorder</code> so we can capture that audio. Setting up a new <code>MediaRecorder</code> requires a <code>MediaStream</code> which we can get using <code>navigator.mediaDevices</code>.</p>

<pre><code class="language-javascript">// deviceId is stored in state if we chose something other than default
// We got that list of devices from "enumerateDevices"
const audio = deviceId ? { deviceId: { exact: deviceId } } : true;
const stream = await navigator.mediaDevices.getUserMedia({ audio })
const recorder = new MediaRecorder(stream)
</code></pre>

<p>By passing <code>audio: true</code> to <code>getUserMedia</code>, we are falling back to using the “default” audio input device. But, we can pass a specific <code>deviceId</code> if we want to use a different device.</p>

<p>Once we’ve created a <code>MediaRecorder</code>, we’re good to go! We have a <code>MediaRecorder</code> instance and access to a few self-explanatory methods.</p>

<ul>
<li><code>start</code></li>
<li><code>stop</code></li>
<li><code>pause</code></li>
<li><code>resume</code></li>
</ul>

<p>That’s all good but we need to do something with the data that’s recorded. To handle this data, we are going to create an <code>Array</code> to store the &ldquo;chunks&rdquo; of audio data.</p>

<pre><code class="language-javascript">const chunks = []
</code></pre>

<p>And then we are going to push chunks to that Array when data is available. To hook into that event, we use <code>ondataavailable</code>. This event fires when the <code>MediaStream</code> gets stopped or ends.</p>

<pre><code class="language-javascript">recorder.ondataavailable = event => {
  chunks.push(event.data)
}
</code></pre>

<p><strong>Note</strong>: <em>The <code>MediaRecorder</code> can provide its current state with the <code>state</code> property. Where the state can be <code>paused</code>, <code>inactive</code>, or <code>paused</code>. This is useful for making interaction decisions in the UI.</em></p>

<p>There is one final thing we need to do. When we stop the recording, we need to create an audio Blob. This will be the mp3 of our audio recording. In our demo, the audio blob gets stored in the demo state handled with XState. But, the important part is this part.</p>

<pre><code class="language-javascript">new Blob(chunks, { type: 'audio/mp3' })
</code></pre>

<p>With this <code>Blob</code>, we are able to playback our audio recording using an <code>audio</code> element.</p>

<p>Check out this demo where all the React and XState code gets stripped out. This is all we need to record audio with the default audio input device.</p>

<pre><code class="language-javascript">const TOGGLE = document.querySelector('#toggle')
const AUDIO = document.querySelector('audio')

let recorder
const RECORD = () => {
  const toggleRecording = async () => {
    if (!recorder) {
      // Reset the audio tag
      AUDIO.removeAttribute('src')
      const CHUNKS = []
      const MEDIA_STREAM = await window.navigator.mediaDevices.getUserMedia({
        audio: true
      })
      recorder = new MediaRecorder(MEDIA_STREAM)
      recorder.ondataavailable = event => {
        // Update the UI
        TOGGLE.innerText = 'Start Recording'
        recorder = null
        // Create the blob and show an audio element
        CHUNKS.push(event.data)
        const AUDIO_BLOB = new Blob(CHUNKS, {type: "audio/mp3"})
        AUDIO.setAttribute('src', window.URL.createObjectURL(AUDIO_BLOB))
      }
      TOGGLE.innerText = 'Stop Recording'
      recorder.start()
    } else {
      recorder.stop()
    }
  }
  toggleRecording()
}

TOGGLE.addEventListener('click', RECORD)
</code></pre>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="rNYoNMQ"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [2. Barebones Audio Input](https://codepen.io/smashingmag/pen/rNYoNMQ) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/rNYoNMQ">2. Barebones Audio Input</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p><strong>Note</strong>: <em>For a more in-depth look at setting up the MediaRecorder and using it, check out this MDN article: “<a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API">Using the MediaStream Recording API</a>”.</em></p>

<div data-audience="non-subscriber" data-remove="true" class="feature-panel-container"><span class="feature-panel__desc">More after jump! Continue reading below&nbsp;&darr;</span>
<aside class="feature-panel">
<div class="feature-panel-left-col">
<div class="feature-panel-description"><p>Meet <strong><a data-instant href="https://www.smashingconf.com/online-workshops/">Smashing Online Workshops</a></strong> on <strong>front-end &amp; UX</strong>, with practical takeaways, live sessions, <strong>video recordings</strong> and a friendly Q&amp;A. On design systems, CSS/JS and UX. With Carie Fisher, Stefan Baumgartner and <a href="https://smashingconf.com/online-workshops/workshops">so many others</a>.</p>
<a data-instant href="https://smashed.by/smashing-workshops" class="btn btn--green btn--large">Jump to online workshops&nbsp;↬</a></div>
</div>
<div class="feature-panel-right-col"><a data-instant href="https://smashed.by/smashing-workshops" class="feature-panel-image-link">
<div class="feature-panel-image">
<img
    loading="lazy"
    decoding="async"
    class="feature-panel-image-img"
    src="/images/smashing-cat/cat-in-a-chair--tall.svg"
    alt="Feature Panel"
    width="257"
    height="355"
/>

</div>
</a>
</div>
</aside>
</div>

<h2 id="visualization">Visualization ✨</h2>

<p>Right. Now we have an idea about how to record audio input from our users, we can get onto the fun stuff! Without any visualization, our audio recording UI isn’t very engaging. Also, nothing indicates to the user that the recording is working. Even a pulsing red circle would be better than nothing! But, we can do better than that.</p>

<p>For our audio visualization, we are going to use HTML5 Canvas. But, before we get to that stage, we need to understand how to take the real-time audio data and make it usable. Once we create our <code>MediaRecorder</code>, we can access its <code>MediaStream</code> with the <code>stream</code> property.</p>

<p>Once we have a <code>MediaStream</code>, we want to analyze it using the <code>AudioContext</code> API.</p>

<pre><code class="language-javascript">const STREAM = recorder.stream
const CONTEXT = new AudioContext() // Close it later
const ANALYSER = CONTEXT.createAnalyser() // Disconnect the analyser
const SOURCE = CONTEXT.createMediaStreamSource(STREAM) // disconnect the source

SOURCE.connect(ANALYSER)
</code></pre>

<p>We start by creating a new <code>AudioContext</code>. Then, we create an <code>AnalyserNode</code>. This is what allows us to access audio time and frequency data. The last thing we need is a source to connect to. We can use <code>createMediaStreamSource</code> to create a <code>MediaStreamAudioSourceNode</code>. The last thing to do is connect this node to the analyzer making it the input for the analyzer.</p>

<p>Now we’ve got that boilerplate set up, we can start playing with real-time data. To do this we can use <code>window.requestAnimationFrame</code> to collect data from the analyzer. This means that we will be able to process the data generally in line with our display’s refresh rate.</p>

<p>On each analysis, we grab the analyzer data and use <code>getByteFrequencyData</code>. That method allows us to copy the data into a <code>Uint8Array</code> that’s the size of the <code>frequencyBinCount</code>. What’s the <code>frequencyBinCount</code>? It’s a read-only property that’s half the value of the analyzer’s <code>fftSize</code>. What’s the <code>fftSize</code>? I’m not a sound engineer by any means. But, think of this as the number of samples taken when obtaining the data. The <code>fftSize</code> must be a power of 2 and by default is 2048(Remember that game? Possible future article?). That means each time we call <code>getByteFrequencyData</code>, we get <code>2048</code> frequency data samples. And that means we get around <code>1024</code> values to play with for our visualization ✨</p>

<p><strong>Note</strong> :<em>You may have noticed in Kent’s starting point, we use <code>getByteTimeDomainData</code>. This is because the original demo uses a waveform visualization. <code>getByteTimeDomainData</code> will return waveform(time-domain) data. Whereas <code>getByteFrequencyData</code> returns the decibel values for frequencies in a sample. This is more appropriate for equalizer style visualizations where we visualize input volume.</em></p>

<p>OK. So what does the code look like for processing our frequency data? Let’s dig in. We can separate the concerns here by creating a function that takes a <code>MediaStream</code>.</p>

<pre><code class="language-javascript">const ANALYSE = stream => {
  // Create an AudioContext
  const CONTEXT = new AudioContext()
  // Create the Analyser
  const ANALYSER = CONTEXT.createAnalyser()
  // Connect a media stream source to connect to the analyser
  const SOURCE = CONTEXT.createMediaStreamSource(stream)
  // Create a Uint8Array based on the frequencyBinCount(fftSize / 2)
  const DATA_ARR = new Uint8Array(ANALYSER.frequencyBinCount)
  // Connect the analyser
  SOURCE.connect(ANALYSER)
  // REPORT is a function run on each animation frame until recording === false
  const REPORT = () => {
    // Copy the frequency data into DATA_ARR
    ANALYSER.getByteFrequencyData(DATA_ARR)
    // If we are still recording, run REPORT again in the next available frame
    if (recorder) requestAnimationFrame(REPORT)
    else {
      // Else, close the context and tear it down.
      CONTEXT.close()
    }
  }
  // Initiate reporting
  REPORT()
}
</code></pre>

<p>That’s the boilerplate we need to start playing with the audio data. But, this currently doesn’t do much apart from running in the background. You could throw a <code>console.info</code> or <code>debugger</code> in <code>REPORT</code> to see what’s happening.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="PoOXoWp"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [3. Sampling Input Data](https://codepen.io/smashingmag/pen/PoOXoWp) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/PoOXoWp">3. Sampling Input Data</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>The eagle-eyed may have noticed something. Even when we stop recording, the recording icon remains in our browser tab. This isn’t ideal. Even though the <code>MediaRecorder</code> gets stopped, the <code>MediaStream</code> is still active. We need to <code>stop</code> all available tracks on <code>stop</code>.</p>

<pre><code class="language-javascript">// Tear down after recording.
recorder.stream.getTracks().forEach(t => t.stop())
recorder = null
</code></pre>

<p>We can add this into the <code>ondataavailable</code> callback function we defined earlier.</p>

<p>Almost there. It’s time to convert our frequency data into a volume and visualize it. Let’s start by displaying the volume in a readable format to the user.</p>

<pre><code class="language-javascript">const REPORT = () => {
  ANALYSER.getByteFrequencyData(DATA_ARR)
  const VOLUME = Math.floor((Math.max(...DATA_ARR) / 255) * 100)
  LABEL.innerText = `${VOLUME}%`
  if (recorder) requestAnimationFrame(REPORT)
  else {
    CONTEXT.close()
    LABEL.innerText = '0%'
  }
}
</code></pre>

<p>Why do we divide the greatest value by <code>255</code>. Because that’s the scale of frequency data returned by <code>getByteFrequencyData</code>. Each value in our sample can be from <code>0</code> to <code>255</code>.</p>

<p>Well done! You’ve created your first audio visualization 🎉 Once you get past the boilerplate code, there isn’t much code required to start playing.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="LYOMYyY"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [4. Processing Data](https://codepen.io/smashingmag/pen/LYOMYyY) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/LYOMYyY">4. Processing Data</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>Let’s start making this more “fancy”. 💅</p>

<p>We’re going to bring GSAP into the mix. This brings with it a variety of benefits. The great thing with GSAP is that it’s much more than animating visual things. It’s about animating values and also provides so many great utilities. If you’ve not seen GSAP before, do not worry. We will walk through what it’s doing here.</p>

<p>Let’s update our demo by making our label <code>scale</code> in size based on the volume. At the same time, we can change the color by animating a CSS custom property value.</p>

<pre><code class="language-javascript">let recorder
let report
let audioContext

const CONFIG = {
  DURATION: 0.1,
}

const ANALYSE = stream => {
  audioContext = new AudioContext()
  const ANALYSER = audioContext.createAnalyser()
  const SOURCE = audioContext.createMediaStreamSource(stream)
  const DATA_ARR = new Uint8Array(ANALYSER.frequencyBinCount)
  SOURCE.connect(ANALYSER)
  report = () => {
    ANALYSER.getByteFrequencyData(DATA_ARR)
    const VOLUME = Math.floor((Math.max(...DATA_ARR) / 255) * 100)
    LABEL.innerText = `${VOLUME}%`
    gsap.to(LABEL, {
      scale: 1 + ((VOLUME * 2) / 100),
      '--hue': 100 - VOLUME,
      duration: CONFIG.DURATION,
    })
  }
  gsap.ticker.add(report)
}
</code></pre>

<p>On each frame of our GSAP code, is animating our <code>LABEL</code> element using <code>gsap.to</code>. We are telling GSAP to animate the <code>scale</code> and <code>--hue</code> of the element with a configured <code>duration</code>.</p>

<pre><code class="language-javascript">gsap.to(LABEL, {
  scale: 1 + ((VOLUME * 2) / 100),
  '--hue': 100 - VOLUME,
  duration: CONFIG.DURATION,
})
</code></pre>

<p>You’ll also notice <code>requestAnimationFrame</code> is gone. If you’re going to use GSAP for anything that uses animation frames. It’s worth switching to using GSAP’s own utility functions. This is applicable for HTML Canvas(We’ll get to this), Three JS, etc.</p>

<p>GSAP provides <code>ticker</code> which is a great wrapper for <code>requestAnimationFrame</code>. It runs in sync with the GSAP engine and has a nice concise API. It also provides neat features like being able to update the frame rate. That can get complex if you’re writing it yourself and if you’re using GSAP, you should use the tools it provides.</p>

<pre><code class="language-javascript">gsap.ticker.add(REPORT) // Adds the reporting function for each frame
gsap.ticker.remove(REPORT) // Stops running REPORT on each frame
gsap.ticker.fps(24) // Would update our frames to run at 24fps (Cinematic)
</code></pre>

<p>Now, we have a more interesting visualization demo and the code is cleaner with GSAP.</p>

<p>You may also be wondering where the teardown code has gone. We’ve moved that into <code>RECORD</code>’s <code>else</code>. This will make it easier later on if we choose to animate things after we finish a recording. For example, returning an element to its initial state. We could introduce state values to track if necessary.</p>

<pre><code class="language-javascript">const RECORD = () => {
  const toggleRecording = async () => {
    if (!recorder) {
      // Set up recording code...
    } else {
      recorder.stop()
      LABEL.innerText = '0%'
      gsap.to(LABEL, {
        duration: CONFIG.DURATION,
        scale: 1,
        hue: 100,
        onComplete: () => {
          gsap.ticker.remove(report)
          audioContext.close() 
        }
      })
    }
  }
  toggleRecording()
}
</code></pre>

<p>When we teardown, we animate our label to its original state. And using the <code>onComplete</code> method, we can remove our <code>report</code> function from the <code>ticker</code>. At the same time, we can <code>close</code> our <code>AudioContext</code>.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="yLPGLbq"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [5. Getting “fancy” with GSAP](https://codepen.io/smashingmag/pen/yLPGLbq) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/yLPGLbq">5. Getting “fancy” with GSAP</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>To make the EQ bars visualization we need to start using HTML Canvas. Do not fear if you have no Canvas experience. We’ll walk through <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">the basics of rendering shapes</a> and how to use GreenSock with our canvas. In fact, we’re going to build some basic visualizations first.</p>

<p>Let’s start with a <code>canvas</code> element.</p>

<pre><code class="language-javascript">&lt;canvas&gt;&lt;/canvas&gt;
</code></pre>

<p>To render things on a canvas, we need to grab a drawing context which is what we draw onto. We also need to define a size for our canvas. By default, they get a size of 300 by 150 pixels. The interesting thing is that the canvas has two sizes. It has its “physical” size and its &ldquo;canvas&rdquo; size. For example, we could have a canvas that has a physical size of 300 by 150 pixels. But, the drawing &ldquo;canvas&rdquo; size is 100 by 100 pixels. Have a play with this demo that draws a red square 40 by 40 pixels in the center of a canvas.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="QWOzWgm"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [6. Adjusting Physical and Canvas Sizing for Canvas](https://codepen.io/smashingmag/pen/QWOzWgm) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/QWOzWgm">6. Adjusting Physical and Canvas Sizing for Canvas</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>How do we draw things onto a canvas? Take the demo above and consider a <code>canvas</code> that’s 200 by 200 pixels.</p>

<pre><code class="language-javascript">// Grab our canvas
const CANVAS = document.querySelector('canvas')
// Set the canvas size
CANVAS.width = 200
CANVAS.height = 200
// Grab the canvas context
const CONTEXT = CANVAS.getContext('2d')
// Clear the entire canvas with a rectangle of size "CANVAS.width" by "CANVAS.height"
// starting at (0, 0)
CONTEXT.clearRect(0, 0, CANVAS.width, CANVAS.height)
// Set fill color to "red"
CONTEXT.fillStyle = 'red'
// Fill rectangle at (80, 80) with width and height of 40
CONTEXT.fillRect(80, 80, 40, 40) 
</code></pre>

<p>We start by setting the canvas size and getting the context. Then using the context we use <code>fillRect</code> to draw a square at the given coordinates. The coordinate system in canvas starts at the top left corner. So <code>[0, 0]</code> is the top left. For our canvas, <code>[200, 200]</code> would be the bottom right corner.</p>

<div class="sponsors__lead-place"></div>

<p>For our square, the coordinates are half the canvas width and height minus half of the square size.</p>

<pre><code class="language-javascript">// Canvas Width/Height = 200
// Square Size = 40
CONTEXT.fillRect((200 / 2) - (40 / 2), (200 / 2) - (40 / 2), 40, 40)
</code></pre>

<p>This will draw our square in the center.</p>

<pre><code class="language-javascript">context.fillRect(x, y, width, height)
</code></pre>

<p>As we start with a blank canvas, <code>clearRect</code> isn’t necessary. But, each time we draw to a canvas, it doesn’t clear for us. With animations, it’s likely things will move. So clearing the entire canvas before we draw to it again is a good way to approach things.</p>

<p>Consider this demo that animates a square from side to side. Try turning <code>clearRect</code> on and off to see what happens. Not clearing the canvas in some scenarios can produce some cool effects.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="MWOZWBL"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [7. Clearing a Canvas each frame](https://codepen.io/smashingmag/pen/MWOZWBL) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/MWOZWBL">7. Clearing a Canvas each frame</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>Now we have a basic idea of drawing things to <code>canvas</code>, let’s put it together with GSAP to visualize our audio data.  We’re going to visualize a square that changes color and size as our <code>label</code> did.</p>

<p>We can start by getting rid of our <code>label</code> and creating a <code>canvas</code>. Then in JavaScript land, we need to grab that <code>canvas</code> and its rendering context. Then we can set the size of the canvas to match its physical size.</p>

<pre><code class="language-javascript">const CANVAS = document.querySelector('canvas')
const CONTEXT = CANVAS.getContext('2d')
// Match canvas size to physical size
CANVAS.width = CANVAS.height = CANVAS.offsetHeight
</code></pre>

<p>We need an Object to represent our square. It’s going to define the size, hue, and scale of the square. Remember how we mentioned GSAP is great because it animates values? This is going to come into play very soon.</p>

<pre><code class="language-javascript">const SQUARE = {
  hue: 100,
  scale: 1,
  size: 40,
}
</code></pre>

<p>To draw our square, we’re going to define a function that keeps that code in one place. It clears the canvas and then renders the square in the center based on its current scale.</p>

<pre><code class="language-javascript">const drawSquare = () => {
  const SQUARE_SIZE = SQUARE.scale * SQUARE.size
  const SQUARE_POINT = CANVAS.width / 2 - SQUARE_SIZE / 2
  CONTEXT.clearRect(0, 0, CANVAS.width, CANVAS.height)
  CONTEXT.fillStyle = `hsl(${SQUARE.hue}, 80%, 50%)`
  CONTEXT.fillRect(SQUARE_POINT, SQUARE_POINT, SQUARE_SIZE, SQUARE_SIZE)  
}
</code></pre>

<p>We render the square initially so that the <code>canvas</code> isn’t blank at the start:</p>

<pre><code class="language-javascript">drawSquare()
</code></pre>

<p>Now. Here comes the magic part. We only need code to animate our square values. We can update our <code>report</code> function to the following:</p>

<pre><code class="language-javascript">report = () => {
  if (recorder) {
    ANALYSER.getByteFrequencyData(DATA_ARR)
    const VOLUME = Math.max(...DATA_ARR) / 255
    gsap.to(SQUARE, {
      duration: CONFIG.duration,
      hue: gsap.utils.mapRange(0, 1, 100, 0)(VOLUME),
      scale: gsap.utils.mapRange(0, 1, 1, 5)(VOLUME)
    })      
  }
  // render square
  drawSquare()
}
</code></pre>

<p>Regardless, <code>report</code> must render our square. But, if we are recording, we can visualize the calculated volume. Our volume value will be between <code>0</code> and <code>1</code>. And we can use GSAP utils to map that value to a desired hue and scale range with <code>mapRange</code>.</p>

<blockquote>There are different ways to process the volume in our audio data. For these demos, I’m using the largest value from the data Array for ease. An alternative could be to process the average reading by using <code>reduce</code>.<br /><br />For example:<br /><pre><code class="language-javascript">const VOLUME = Math.floor(((DATA_ARR.reduce((acc, a) => acc + a, 0) / DATA_ARR.length) / 255) * 100)
</code></pre>
</blockquote>

<p>Once we finish recording, we animate the square values back to their original values.</p>

<pre><code class="language-javascript">gsap.to(SQUARE, {
  duration: CONFIG.duration,
  scale: 1,
  hue: 100,
  onComplete: () => {
    audioContext.close() 
    gsap.ticker.remove(report)
  }
})
</code></pre>

<p>Make sure that you tear down <code>report</code> and the <code>audioContext</code> in your <code>onComplete</code> callback. Notice how the GSAP code is separate from the rendering code? That’s the awesome thing about using GSAP to animate Object values. Our function <code>drawSquare</code> runs every frame regardless. It doesn’t care what’s happening to the squares, it takes the values and renders the square. This means GSAP can adjust those values anywhere in our code. The updates will get rendered by <code>drawSquare</code>.</p>

<p>And here we have it! ✨ Our first GSAP visualization.</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="NWweWLM"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [8. First Canvas Visualization ✨](https://codepen.io/smashingmag/pen/NWweWLM) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/NWweWLM">8. First Canvas Visualization ✨</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>What if we extended that? How about creating a random square for each sample from our data? How might that look? It could look like this!</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="podqoOQ"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [9. Randomly generated audio visualization 🚀](https://codepen.io/smashingmag/pen/podqoOQ) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/podqoOQ">9. Randomly generated audio visualization 🚀</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>In this demo, we use a smaller <code>fftSize</code> and create a square for each sample. Each square gets random characteristics and updates after each recording. This demo takes it a little further and allows you to update the sample size. That means you can have as many or as few squares as you’d like!</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="mdqadzm"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [10. Random Audio Input Vizualisation w/ Configurable Sample Size ✨](https://codepen.io/smashingmag/pen/mdqadzm) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/mdqadzm">10. Random Audio Input Vizualisation w/ Configurable Sample Size ✨</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<blockquote><strong>Canvas Challenge</strong><br />Could you recreate this random visualization but display circles instead of squares? How about different colors? Fork the demos and have a play with them. Reach out if you get stuck!</blockquote>

<div class="sponsors__lead-place"></div>

<p>So now we know how to visualize our audio input with HTML canvas using GSAP. But, before we go off on a tangent making randomly generated visualization, we need to get back to our brief!</p>

<p>We want to make EQ bars that move from right to left. We already have our audio input set up. All we need to do is change the way the visualization works. Instead of squares, we will work with bars. Each bar has an &ldquo;x&rdquo; position and will get centered on the &ldquo;y&rdquo; axis. Each bar gets a &ldquo;size&rdquo; that will be the height. The starting &ldquo;x&rdquo; position is going to be the furthest right of the canvas.</p>

<pre><code class="language-javascript">// Array to hold our bars
const BARS = []
// Create a new bar
const NEW_BAR = {
  x: CANVAS.width,
  size: VOLUME, // Volume for that frame
}
</code></pre>

<p>The difference between our previous visualizations and this one is that we need to add a new bar on each frame. This happens inside the <code>ticker</code> function. At the same time, we need to create a new animation for the values of that bar. One feature of our brief is that we need to be able to “pause” and “resume” a recording. Creating a new animation for each bar isn’t going to work in the same way. We need to create a <code>timeline</code> we can reference and then add animations to. Then we can pause and resume the bar animations all at once. We can tackle pausing the animation once we’ve got it working. Let’s start by updating our visualization.</p>

<p>Here’s some boilerplate for drawing our bars and variables we use to keep reference.</p>

<pre><code class="language-javascript">// Keep reference to GSAP timeline
let timeline = gsap.timeline()
// Generate Array for BARS
const BARS = []
// Define a Bar width on the canvas
const BAR_WIDTH = 4
// We can declare a fill style outside of the loop.
// Let’s start with red!
DRAWING_CONTEXT.fillStyle = 'red'
// Update our drawing function to draw a bar at the correct "x" accounting for width
// Render bar vertically centered
const drawBar = ({ x, size }) => {
  const POINT_X = x - BAR_WIDTH / 2
  const POINT_Y = CANVAS.height / 2 - size / 2
  DRAWING_CONTEXT.fillRect(POINT_X, POINT_Y, BAR_WIDTH, size)  
}
// drawBars updated to iterate through new variables
const drawBars = () => {
  DRAWING_CONTEXT.clearRect(0, 0, CANVAS.width, CANVAS.height)
  for (const BAR of BARS) {
    drawBar(BAR)
  }
}
</code></pre>

<p>When we stop the recorder, we <em>can</em> clear our timeline for reuse. This depends on the desired behavior (More on this later):</p>

<pre><code class="language-javascript">timeline.clear()
</code></pre>

<p>The last thing to update is our reporting function:</p>

<pre><code class="language-javascript">REPORT = () => {
  if (recorder) {
    ANALYSER.getByteFrequencyData(DATA_ARR)
    const VOLUME = Math.floor((Math.max(...DATA_ARR) / 255) * 100)
    
    // At this point create a bar and have it added to the timeline
    const BAR = {
      x: CANVAS.width + BAR_WIDTH / 2,
      size: gsap.utils.mapRange(0, 100, 5, CANVAS.height * 0.8)(VOLUME)
    }
    // Add to bars Array       
    BARS.push(BAR)
    // Add the bar animation to the timeline
    timeline
      .to(BAR, {
        x: `-=${CANVAS.width + BAR_WIDTH}`,
        ease: 'none'
        duration: CONFIG.duration,
      })
  }
  if (recorder || visualizing) {
    drawBars()
  }
}
</code></pre>

<p>How does that look?</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="qBVLBQb"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [11. Attempting EQ Bars](https://codepen.io/smashingmag/pen/qBVLBQb) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/qBVLBQb">11. Attempting EQ Bars</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>Completely wrong&hellip; But why? Well. At the moment we are adding a new animation on each frame to our timeline. But, these animations run in sequence. One bar must finish before the next proceeds which isn’t what we want. Our issue is related to timing. And our timing needs to be relative to the size of our canvas. That way, if the size of our canvas changes, the animation will still look the same.</p>

<p><strong>Note</strong>: <em>Our visuals will get distorted if our canvas has a responsive size and gets resized. Although it is possible to update on resize, it’s quite complex. We won’t dig into that today.</em></p>

<p>Much like we defined a <code>BAR_WIDTH</code>, we can define some other config for our visualization. For example, the min and max height of a bar. We can base that on the height of the canvas.</p>

<pre><code class="language-javascript">const VIZ_CONFIG = {
  bar: {
    width: 4,
    min_height: 0.04,
    max_height: 0.8
  }
}
</code></pre>

<p>But, what we need is to decide how many pixels our bars will move per second. Let’s say we make a bar move of 100 pixels per second. That means our next bar can enter 4 pixels later. And in time, that’s <code>1 / 100 * 4</code> seconds.</p>

<pre><code class="language-javascript">const BAR_WIDTH = 4
const PIXELS_PER_SECOND = 100
const VIZ_CONFIG = {
  bar: {
    width: 4,
    min_height: 0.04,
    max_height: 0.8
  },
  pixelsPerSecond: PIXELS_PER_SECOND,
  barDelay: (1 / PIXELS_PER_SECOND) * BAR_WIDTH,
}
</code></pre>

<p>With GSAP, we can insert an animation into the timeline at a given timestamp. It’s an optional second parameter of <code>add</code>. If we know the index of the bar we are adding, that means we can calculate the timestamp for insertion.</p>

<pre><code class="language-javascript">timeline
  .to(BAR,
    {
      x: `-=${CANVAS.width + VIZ_CONFIG.bar.width}`,
      ease: 'none',
      // Duration will be the same for all bars
      duration: CANVAS.width / VIZ_CONFIG.pixelsPerSecond,
    },
    // Time to insert the animation. Based on the new BARS length.
    BARS.length * VIZ_CONFIG.barDelay
  )
</code></pre>

<p>How does that look?</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="KKybKrr"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [12. Getting Closer](https://codepen.io/smashingmag/pen/KKybKrr) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/KKybKrr">12. Getting Closer</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>It’s much better. But it’s still way off. It’s too delayed and not in sync enough with our input. And that’s because we need to be more precise with our calculations. We need to base the timing on the actual frame rate of our animation. This is where <code>gsap.ticker.fps</code> can play a part. Remember <code>gsap.ticker</code> is the heartbeat of what is happening in GSAP land.</p>

<pre><code class="language-javascript">gsap.ticker.fps(DESIRED_FPS)</code></pre>

<p>If we’ve defined the &ldquo;desired&rdquo; <code>fps</code>, the actual duration for a bar to move can get calculated. And we can base it on how much we want a bar to move before the next one enters. We calculate precise &ldquo;Pixels per second&rdquo;:</p>

<pre><code class="language-javascript">(Bar Width + Bar Gap) * Fps</code></pre>

<p>For example, if we have an <code>fps</code> of 50, a bar width of <code>4</code>, and a gap of <code>0</code>.</p>

<pre><code class="language-javascript">(4 + 0) * 50 === 200</code></pre>

<p>Our bars need to move at <code>200</code> pixels per second. The duration of the animation can then get calculated based on the canvas width.</p>

<p><strong>Note</strong>: <em>It’s worth picking an FPS that you know your users will be able to use. For example, some screens might only operate at 30 frames per second. A mere 24 frames per second gets considered as the &ldquo;cinematic&rdquo; feel.</em></p>

<p>An updated demo gives us the desired effect! 🚀</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="Vwrqwqm"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [13. Dialling the timing and gap](https://codepen.io/smashingmag/pen/Vwrqwqm) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/Vwrqwqm">13. Dialling the timing and gap</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>You can tinker with the timings and how your EQ bars move across the canvas to get the desired effect. For this particular project, we were looking for as close to real-time as possible. You could group bars and average them out for example if you wanted. There are so many possibilities.</p>

<p>You may have noticed that our bars have also changed color and we now have this gradient effect. This is because we’ve updated the <code>fillStyle</code> to use a <code>linearGradient</code>. The neat thing about fill styles in Canvas is that we can apply a blanket style to the canvas. Our gradient covers the entirety of the canvas. This means the bigger the bar (louder the input), the more the color will change.</p>

<pre><code class="language-javascript">const fillStyle = DRAWING_CONTEXT.createLinearGradient(
  CANVAS.width / 2,
  0,
  CANVAS.width / 2,
  CANVAS.height
)
// Color stop is two colors
fillStyle.addColorStop(0.2, 'hsl(10, 80%, 50%)')
fillStyle.addColorStop(0.8, 'hsl(10, 80%, 50%)')
fillStyle.addColorStop(0.5, 'hsl(120, 80%, 50%)')

DRAWING_CONTEXT.fillStyle = fillStyle
</code></pre>

<p>Now we’re getting somewhere with our EQ bars. This demo allows you to change the behavior of the visualization updating the bar width and gap:</p>

<figure >
	<p data-height="500"
	data-theme-id="light"
	data-slug-hash="BamvavY"
	data-user="smashingmag"
	data-default-tab="result"
	class="codepen">See the Pen [14. Configurable Timing](https://codepen.io/smashingmag/pen/BamvavY) by <a href="https://codepen.io/jh3y">jh3y</a>.</p>
	<figcaption>See the Pen <a href="https://codepen.io/smashingmag/pen/BamvavY">14. Configurable Timing</a> by <a href="https://codepen.io/jh3y">jh3y</a>.</figcaption>
</figure>

<p>If you play with this demo, you may find ways to break the animation. For example, if you choose a framerate higher than that on your device. It’s all about how accurate we can get our timing. Opting for a lower framerate tends to be more reliable.</p>

<p>At a high level, you now have the tools required to make audio visualizations from user input. In Part 2 of this series, I’ll explain how you can add features and any extra touches you like. Stay tuned for next week!</p>

<div class="signature">
  <img src="https://www.smashingmagazine.com/images/logo/logo--red.png" alt="Smashing Editorial" width="35" height="46" loading="lazy" decoding="async" />
  <span>(vf, il)</span>
</div>



						
							<div class="category__related--alt">
								<span class="italic grey mrs mbm block">Explore more on</span>
								<nav class="subnav ib" role="navigation">
									<ul class="subnav__primary subnav__subtags flex flex-wrap">
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/react">React</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/coding">Coding</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/javascript">JavaScript</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/techniques">Techniques</a></li>
									
									</ul>
								</nav>
							</div>
      			

          </div>

        </div>

      </div>


      <link href="/css/non-critical-article-manual-felix.css" media="print" onload="this.media='all'" rel="stylesheet">
      <link href="/css/article-dark-mode-v3.css" media="(prefers-color-scheme: dark)" rel="stylesheet">
      
  <div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience="non-subscriber" data-remove="true" data-amount="1"></div>


      
  <div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience="non-subscriber" data-remove="true" data-amount="1"></div>



      
        <div id="sponsors-article-end" data-impression="true" class="c-promo-box c-promo-box--ad c-promo-box--wide sponsors sponsors__row hidden sponsors__external" data-audience="non-subscriber" data-remove="true"></div>
      

			
				<div id="promo-article-end hidden">
					
						

<div class="book-grid">
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="/the-smashing-newsletter/"><img loading="lazy" width="202" height="266" src="/images/smashing-cat/cat-in-a-chair--tall.svg" alt="Smashing Newsletter"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="/the-smashing-newsletter/">
				Smashing Newsletter
			</a>
		</h4>
		<p class="book--featured__desc">
			Tips on front-end &amp; UX, delivered weekly in your inbox. Just the things you can actually use.
		</p>
	</figcaption>
</figure>



		
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="https://www.smashingconf.com/online-workshops/"><img loading="lazy" width="202" height="266" src="https://www.smashingmagazine.com/images/smashing-cat/cat-explorer.svg" alt="Front-End &amp; UX Workshops, Online"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="https://www.smashingconf.com/online-workshops/">
				Front-End &amp; UX Workshops, Online
			</a>
		</h4>
		<p class="book--featured__desc">
			With practical takeaways, live sessions, video recordings and a friendly Q&amp;A.
		</p>
	</figcaption>
</figure>



		
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="/printed-books/"><img loading="lazy" width="202" height="266" src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2f2c6d6-4e85-449a-99f5-58bd053bc846/typescript-shop-cover-opt.png" alt="TypeScript in 50 Lessons"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="/printed-books/">
				TypeScript in 50 Lessons
			</a>
		</h4>
		<p class="book--featured__desc">
			Everything TypeScript, with code walkthroughs and examples. And other printed books.
		</p>
	</figcaption>
</figure>



		
	
</div>



					
				</div>
			

      
        <div data-component="CommentsArea" id="comments-audio-visualization-javascript-gsap-part1" data-thread="/2022/03/audio-visualization-javascript-gsap-part1/" data-date="2022-03-02 13:30:00 &#43;0000 UTC"></div>

      

    </div>
  </article>

    </main>

		
			
				
				
				<div data-component="CookieBanner"></div>

  <div id="cart" class="cart-wrapper" data-component="MiniCart"></div>


<footer class="main-footer">
  <div class="container">

    <div class="col-12">
      <div class="footer__topics open">
    <h4 class="footer__topics__title" id="topics">Browse All Smashing Magazine Topics</h4>
    <ul class="footer__topics__list">
      
        <li class="footer__topics__item">
            <a href="/category/accessibility">Accessibility</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/android">Android</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/animation">Animation</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/apps">Apps</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/css">CSS</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design">Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design-patterns">Design Patterns</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design-systems">Design Systems</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/e-commerce">E-Commerce</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/freebies">Freebies</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/graphics">Graphics</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/html">HTML</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/illustrator">Illustrator</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/inspiration">Inspiration</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/ios">iOS</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/javascript">JavaScript</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/mobile">Mobile</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/pattern-libraries">Pattern Libraries</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/performance">Performance</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/photoshop">Photoshop</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/plugins">Plugins</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/react">React</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/responsive-design">Responsive Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/service-workers">Service Workers</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/sketch">Sketch</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/typography">Typography</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/ui">UI</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/usability">Usability</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/user-experience">User Experience</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/wallpapers">Wallpapers</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/web-design">Web Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/wordpress">WordPress</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/workflow">Workflow</a>
        </li>
      
    </ul>
</div>

    </div>

    <div class="col-12">
      <div class="footer__notes">
        <p>With a commitment to quality content for the design community.</p>
        <p>Founded by Vitaly Friedman and Sven Lennartz. <span class="lining-figures">2006–2022</span>.</p>
        <p>Smashing is proudly running on <a href="https://www.netlify.com/?utm_source=link&utm_medium=parter&utm_campaign=sm-footer">Netlify</a>.</p>
        <p>Fonts by <a href="http://latinotype.com/">Latinotype</a>.</p>
      </div>

      <ul class="footer__links">
        <li>&#9998; <a href="/write-for-us/">Write for us</a>
        </li>
        <li>
          <a href="/contact/">Contact us</a>
        </li>
        <li>
          <a href="/about/">About us (Impressum)</a>
        </li>
        <li>
          <a href="/privacy-policy/">Privacy policy</a>
        </li>
        <li>
          <a href="/auth/">Membership login</a>
        </li>
        <li>
            <a href="/delivery-times/">Delivery times</a>
          </li>
            <li>
          <a href="mailto:&#097;&#100;&#118;&#101;&#114;&#116;&#105;&#115;&#105;&#110;&#103;&#064;&#115;&#109;&#097;&#115;&#104;&#105;&#110;&#103;&#109;&#097;&#103;&#097;&#122;&#105;&#110;&#101;&#046;&#099;&#111;&#109;?subject=Let’s talk about advertising">Advertise</a>
        </li>
      </ul>
    </div>
  </div>

  
<div class="back-to-top-wrapper" id="back_top">
	<a href="#top" data-scroll="#top" class="back-to-top" title="Back to top">
		<svg viewBox="0 0 100 100" width="25px" height="25px" tabindex="-1" role="img" aria-labelledby="title">
			<title id="title">Back to top</title>
			<path d="M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z" transform="translate(0 0) rotate(90 50 50)" fill="#fff" stroke="#fff"></path>
			<image src="/images/back-to-top-arrow.png" alt="Back to top arrow" xlink:href="" width="100%" height="100%"></image>
		</svg>
	</a>
</div>


</footer>

<div data-handler="PostLoad"></div>

<script delay="/js/app.js" defer importance="low"></script>
<script>
  
  window.PRERELEASES = {}
  window.PAGE_TYPE = "articles"
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  

  if ('serviceWorker' in navigator && !localStorage.getItem('no_sw')) {
    window.addEventListener('load', function() {
      navigator.serviceWorker
        .register('/sw.js')
        .then(() => {
          window.caches
            .open('smashing-mag-offline-articles')
            .then(cache => cache.keys())
            .then(keys => {
              var savedOffline = document.querySelector('.meta-box--article')
              if (savedOffline && keys && keys.length) {
                var currentPageSaved = keys.find(key =>  key.url === window.location.href)
              }

              var list = document.querySelector('.offline-articles-list')
              if (list && keys && keys.length) {
                var listItem = document.createElement('li')

                var innerList = keys
                  .map(function(key) {
                    return (
                      '<li><a href="' + key.url + '">' + key.url + '</a></li>'
                    )
                  })
                  .join('')
                listItem.innerHTML =
                  'Recently viewed aritcles: <ul>' + innerList + '</ul>'
                list.appendChild(listItem)
              }
            })
        })
        .catch(function(err) {
          console.error('Failed to load service worker')
        })
    })
  }
</script>

<div hidden>


</div>

<link rel="stylesheet" href="/css/print.css" type="text/css" media="print" />



<script class="js-additional" importance="low" delay="/js/instantpage.js" type="module" defer></script>
<script class="js-additional" importance="low" delay="/js/ga.js" defer></script>
<script class="js-additional" importance="low" delay="https://www.google-analytics.com/analytics.js" defer></script>
<script class="js-additional" importance="low" type="module" delay="/js/web-vitals-tracking.js"></script>

<script>const autoLoadDuration=5,eventList=["keydown","mousemove","wheel","touchmove","touchstart","touchend"],autoLoadTimeout=setTimeout(runScripts,5e3);function triggerScripts(){runScripts(),clearTimeout(autoLoadTimeout),eventList.forEach(function(t){window.removeEventListener(t,triggerScripts,{passive:!0})})}function runScripts(){document.querySelectorAll("script[delay]").forEach(function(t){t.setAttribute("src",t.getAttribute("delay"))})}eventList.forEach(function(t){window.addEventListener(t,triggerScripts,{passive:!0})});</script>
			
		

  </body>
</html>