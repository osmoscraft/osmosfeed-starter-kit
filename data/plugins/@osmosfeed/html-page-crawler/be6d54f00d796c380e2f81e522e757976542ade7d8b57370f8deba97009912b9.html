

<!doctype html>
<html lang="en-US">
<head data-template-path="https://hacks.mozilla.org/wp-content/themes/Hax">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="w2ocEMd5yV9IsGCjhq-7ls67r4VH-Ob6oWdiZpqjN8U">

  
  <meta name="title" content="Introducing Firefox&#8217;s new Site Isolation Security Architecture – Mozilla Hacks - the Web developer blog">

    <meta property="og:site_name" content="Mozilla Hacks &#8211; the Web developer blog">
  <meta property="og:url" content="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture">
  <meta property="og:title" content="Introducing Firefox&#8217;s new Site Isolation Security Architecture – Mozilla Hacks - the Web developer blog">
  <meta property="og:description" content="With Site Isolation enabled on Firefox for Desktop, Mozilla takes its security guarantees to the next level.">
  <meta property="og:image" content="https://hacks.mozilla.org/files/2021/05/figure5.jpg">
  <meta property="og:image:width" content="1830">
  <meta property="og:image:height" content="1181">

    <meta property="twitter:title" content="Introducing Firefox&#8217;s new Site Isolation Security Architecture – Mozilla Hacks - the Web developer blog">
  <meta property="twitter:description" content="With Site Isolation enabled on Firefox for Desktop, Mozilla takes its security guarantees to the next level.">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="https://hacks.mozilla.org/files/2021/05/figure5.jpg">
  <meta name="twitter:site" content="@mozhacks">

  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/style.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.6.0/styles/solarized_light.min.css">

  <script type="text/javascript">
    window.hacks = {};
    // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
    var removeUtms  =   function(){
        var l = window.location;
        if( l.hash.indexOf( "utm" ) != -1 ){
            var anchor = l.hash.match(/#(?!utm)[^&]+/);
            anchor  =   anchor? anchor[0]: '';
            if(!anchor && window.history.replaceState){
                history.replaceState({},'', l.pathname + l.search);
            } else {
                l.hash = anchor;
            }
        };
    };

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35433268-8'],
              ['_setAllowAnchor', true]);
    _gaq.push (['_gat._anonymizeIp']);
    _gaq.push(['_trackPageview']);
    _gaq.push( removeUtms );
    (function(d, k) {
      var ga = d.createElement(k); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = d.getElementsByTagName(k)[0]; s.parentNode.insertBefore(ga, s);
    })(document, 'script');
  </script>

  <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />
<meta name="blog-name" content="Mozilla Hacks - the Web developer blog" />
<link rel="alternate" hreflang="en" href="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/" />
<link rel="alternate" hreflang="x-default" href="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/" />

	<!-- This site is optimized with the Yoast SEO plugin v17.5 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Introducing Firefox&#039;s new Site Isolation Security Architecture - Mozilla Hacks - the Web developer blog</title>
	<meta name="description" content="With Site Isolation enabled on Firefox for Desktop, Mozilla takes its security guarantees to the next level." />
	<link rel="canonical" href="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="Anny Gakhokidze" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="10 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://hacks.mozilla.org/#website","url":"https://hacks.mozilla.org/","name":"Mozilla Hacks - the Web developer blog","description":"hacks.mozilla.org","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://hacks.mozilla.org/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/#primaryimage","inLanguage":"en-US","url":"https://hacks.mozilla.org/files/2021/05/figure5.jpg","contentUrl":"https://hacks.mozilla.org/files/2021/05/figure5.jpg","width":1830,"height":1181,"caption":"With Site Isolation, Firefox loads subframes from different sites in their own processes."},{"@type":"WebPage","@id":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/#webpage","url":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/","name":"Introducing Firefox's new Site Isolation Security Architecture - Mozilla Hacks - the Web developer blog","isPartOf":{"@id":"https://hacks.mozilla.org/#website"},"primaryImageOfPage":{"@id":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/#primaryimage"},"datePublished":"2021-05-18T15:45:15+00:00","dateModified":"2021-05-19T18:58:12+00:00","author":{"@id":"https://hacks.mozilla.org/#/schema/person/888f50d49d2e4ada22d4108fc117b9d7"},"description":"With Site Isolation enabled on Firefox for Desktop, Mozilla takes its security guarantees to the next level.","breadcrumb":{"@id":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/"]}]},{"@type":"BreadcrumbList","@id":"https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://hacks.mozilla.org/"},{"@type":"ListItem","position":2,"name":"Articles","item":"https://hacks.mozilla.org/articles/"},{"@type":"ListItem","position":3,"name":"Introducing Firefox&#8217;s new Site Isolation Security Architecture"}]},{"@type":"Person","@id":"https://hacks.mozilla.org/#/schema/person/888f50d49d2e4ada22d4108fc117b9d7","name":"Anny Gakhokidze","image":{"@type":"ImageObject","@id":"https://hacks.mozilla.org/#personlogo","inLanguage":"en-US","url":"https://hacks.mozilla.org/files/2021/05/T170JCUN6-U0166451U4A-03636494f106-512-96x96.jpg","contentUrl":"https://hacks.mozilla.org/files/2021/05/T170JCUN6-U0166451U4A-03636494f106-512-96x96.jpg","caption":"Anny Gakhokidze"},"description":"Senior Platform Engineer who works on Firefox's Site Isolation and DOM-related features.","url":"https://hacks.mozilla.org/author/agakhokidzemozilla-com/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='//blog.mozilla.org' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Feed" href="https://hacks.mozilla.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Comments Feed" href="https://hacks.mozilla.org/comments/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/css/dist/block-library/style.min.css?ver=5.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='mediaelement-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.16' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=5.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='wpml-legacy-post-translations-0-css'  href='//blog.mozilla.org/hacks/wp-content/plugins/sitepress-multilingual-cms/templates/language-switchers/legacy-post-translations/style.min.css?ver=1' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/js/analytics.js?ver=5.8.2' id='analytics-js'></script>
<link rel="https://api.w.org/" href="https://hacks.mozilla.org/wp-json/" /><link rel="alternate" type="application/json" href="https://hacks.mozilla.org/wp-json/wp/v2/posts/47259" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hacks.mozilla.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hacks.mozilla.org/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://hacks.mozilla.org/?p=47259' />
<link rel="alternate" type="application/json+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2021%2F05%2Fintroducing-firefox-new-site-isolation-security-architecture%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2021%2F05%2Fintroducing-firefox-new-site-isolation-security-architecture%2F&#038;format=xml" />
<meta name="generator" content="WPML ver:4.5.1 stt:59,61,1,2;" />
<link rel="shortcut icon" type="image/x-icon" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" /><style>#wpadminbar #wp-admin-bar-site-name>.ab-item:before { content: none !important;}li#wp-admin-bar-site-name a { background: url( "https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" ) left center/20px no-repeat !important; padding-left: 21px !important; background-size: 20px !important; } li#wp-admin-bar-site-name { margin-left: 5px !important; } li#wp-admin-bar-site-name {} #wp-admin-bar-site-name div a { background: none !important; }
</style></head>
<body>
  <div class="outer-wrapper">
    <header class="section section--fullwidth header">
      <div class="masthead row">
        <div class="branding block block--3">
          <h1>
            <a href="https://hacks.mozilla.org">
              <img class="branding__logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/mdn-logo-mono.svg">
              <img class="branding__wordmark" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/wordmark.svg" alt="Mozilla">
              <span class="branding__title">Hac<span class="logo-askew">k</span>s</span>
            </a>
          </h1>
        </div>
        <div class="search block block--2">
          <form class="search__form" method="get" action="https://hacks.mozilla.org/">
            <input type="search" name="s" class="search__input" placeholder="Search Mozilla Hacks" value="">
            <i class="fa fa-search search__badge"></i>
          </form>
        </div>
        <nav class="social">
          <a class="social__link youtube" href="http://www.youtube.com/user/mozhacks" title="YouTube"><i class="fa fa-youtube" aria-hidden="true"></i><span>Hacks on YouTube</span></a>
          <a class="social__link twitter" href="https://twitter.com/mozhacks" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i><span>@mozhacks on Twitter</span></a>
          <a class="social__link rss" href="https://hacks.mozilla.org/feed/" title="RSS Feed"><i class="fa fa-rss" aria-hidden="true"></i><span>Hacks RSS Feed</span></a>
          <a class="fx-button" href="https://www.mozilla.org/firefox/download/thanks/?utm_source=hacks.mozilla.org&utm_medium=referral&utm_campaign=header-download-button&utm_content=header-download-button">Download Firefox</a>
        </nav>
      </div>
    </header>

  
<div id="content-head" class="section">
  <h1 class="post__title">Introducing Firefox&#8217;s new Site Isolation Security Architecture</h1>
  <div class="byline">
    <h3 class="post__author">
                      <img alt='' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/T170JCUN6-U0166451U4A-03636494f106-512-64x64.jpg' srcset='https://hacks.mozilla.org/files/2021/05/T170JCUN6-U0166451U4A-03636494f106-512-128x128.jpg 2x' class='avatar avatar-64 photo' height='64' width='64' loading='lazy'/>        By
                                        <a class="url" href="https://hacks.mozilla.org/author/agakhokidzemozilla-com/">Anny Gakhokidze</a>                            </h2>
    <div class="post__meta">
      Posted on
      <abbr class="published" title="2021-05-18T08:45:15-07:00">
        May 18, 2021      </abbr>
      <span class="entry-cat">in
        <a href="https://hacks.mozilla.org/category/featured/" rel="category tag" title="View all posts in Featured Article" >Featured Article</a> and <a href="https://hacks.mozilla.org/category/firefox/" rel="category tag" title="View all posts in Firefox" >Firefox</a>      </span>
            <div class="socialshare" data-type="bubbles"></div>
    </div>
  </div>
</div>

<main id="content-main" class="section article">
  <article class="post" role="article">
    <p>Like any web browser, Firefox loads code from untrusted and potentially hostile websites and runs it on your computer. To protect you against new types of attacks from malicious sites and to meet the security principles of Mozilla, we set out to redesign Firefox on desktop.</p>
<p>Site Isolation builds upon a new security architecture that extends current protection mechanisms by separating (web) content and loading each site in its own operating system process.</p>
<p>This new security architecture allows Firefox to completely separate code originating from different sites and, in turn, defend against malicious sites trying to access sensitive information from other sites you are visiting.</p>
<p>In more detail, whenever you open a website and enter a password, a credit card number, or any other sensitive information, you want to be sure that this information is kept secure and inaccessible to malicious actors.</p>
<p>As a first line of defence Firefox enforces a variety of security mechanisms, e.g. the <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">same-origin policy</a> which prevents adversaries from accessing such information when loaded into the same application.</p>
<p>Unfortunately, the web evolves and so do the techniques of malicious actors. To fully protect your private information, a modern web browser not only needs to provide protections on the application layer but also needs to entirely separate the memory space of different sites &#8211; the new Site Isolation security architecture in Firefox provides those security guarantees.</p>
<h2>Why separating memory space is crucial</h2>
<p>In early 2018, security researchers disclosed two major vulnerabilities, known as <a href="https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability)">Meltdown</a> and <a href="https://en.wikipedia.org/wiki/Spectre_(security_vulnerability)">Spectre</a>. The researchers exploited fundamental assumptions about modern hardware execution, and were able to demonstrate how untrusted code can access and read memory anywhere within a process’ address space, even in a language as high level as JavaScript (which powers almost every single website).</p>
<p>While band-aid countermeasures deployed by OS, CPU and major web browser vendors quickly neutralized the attacks, they came with a performance cost and were designed to be temporary. Back when the attacks were announced publicly, Firefox teams promptly <a href="https://blog.mozilla.org/security/2018/01/03/mitigations-landing-new-class-timing-attack/">reduced the precision of high-precision timers and disabled APIs that allowed such timers to be implemented</a> to keep our users safe.</p>
<p>Going forward, it was clear that we needed to fundamentally re-architecture the security design of Firefox to mitigate future variations of such vulnerabilities.</p>
<p>Let&#8217;s take a closer look at the following example which demonstrates how an attacker can access your private data when executing a Spectre-like attack.</p>
<p><img loading="lazy" class="aligncenter wp-image-47264" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/figure1-500x707.jpg" alt="Two hand-drawn diagrams, with the first labeled “Without Site Isolation, we might load both of these sites in the same process :( ”. Two browser windows with partially visible sites “attacker.com” and “my-bank” partial site, are loaded in the same process - process 16. On top of the banking window, there is a cartoon face that looks happy, personifying the browser. The attacker site window contains a face that is looking at the banking window, with a mischievous smile. In the second diagram, labeled “Attacker.com executes a sophisticated attack”, we see the same two browser windows loaded in process 16 and a 1 column table labelled “memory where my-bank’s data is stored in process 16” underneath the banking window. It has two entries: “credit card info” and “login password”. A hand extending from the malicious site reaches toward the table (aka memory of the second window), signifying that the malicious site is able to access sensitive data belonging to the banking window because it is in the same process. The personified browser character is looking towards the malicious site, and exhibits feelings of concern and worry, with exclamation marks floating around the face." width="700" height="990" srcset="https://hacks.mozilla.org/files/2021/05/figure1-500x707.jpg 500w, https://hacks.mozilla.org/files/2021/05/figure1-250x354.jpg 250w, https://hacks.mozilla.org/files/2021/05/figure1-768x1086.jpg 768w, https://hacks.mozilla.org/files/2021/05/figure1-1086x1536.jpg 1086w, https://hacks.mozilla.org/files/2021/05/figure1-1448x2048.jpg 1448w, https://hacks.mozilla.org/files/2021/05/figure1-scaled.jpg 1810w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>Without Site Isolation, Firefox might load a malicious site in the same process as a site that is handling sensitive information. In the worst case scenario, a malicious site might execute a Spectre-like attack to gain access to memory of the other site.</p>
<p>Suppose you have two websites open &#8211; www.my-bank.com and www.attacker.com. As illustrated in the diagram above, with current web browser architecture it’s possible that web content from both sites ends up being loaded into the same operating system process. To make things worse, using a Spectre-like attack would allow attacker.com to query and access data from the my-bank.com website.</p>
<p>Despite existing security mitigations, the only way to provide memory protections necessary to defend against Spectre-like attacks is to rely on the security guarantees that come with isolating content from different sites using the operating system’s process separation.</p>
<h2>Background on Current Browser Architecture</h2>
<p>Upon being launched, the Firefox web browser internally spawns one privileged process (also known as the parent process) which then launches and coordinates activities of multiple (web) content processes &#8211; the parent process is the most privileged one, as it is allowed to perform any action that the end-user can.</p>
<p>This multi-process architecture allows Firefox to separate more complicated or less trustworthy code into processes, most of which have reduced access to operating system resources or user files. As a consequence, less privileged code will need to ask more privileged code to perform operations which it itself cannot.</p>
<p>For example, a content process will have to ask the parent process to save a download because it does not have the permissions to write to disk. Put differently, if an attacker manages to compromise the content process it must additionally (ab)use one of the APIs to convince the parent process to act on its behalf.</p>
<p>In great detail, (as of April 2021) Firefox’s parent process launches a fixed number of processes: eight web content processes, up to two additional semi-privileged web content processes, and four utility processes for web extensions, GPU operations, networking, and media decoding.</p>
<p>While separating content into currently eight web content processes already provides a solid foundation, it does not meet the security standards of Mozilla because it allows two completely different sites to end up in the same operating system process and, therefore, share process memory. To counter this, we are targeting a Site Isolation architecture that loads every single site into its own process.</p>
<p><img loading="lazy" class="aligncenter wp-image-47268" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/figure2-500x707.jpg" alt="A hand drawn diagram titled “Loading Sites with Current Browser Architecture”. On the left hand-side, from top to bottom, there are four browser windows with different sites loaded. The first window, www.my-bank.com, is loaded in process 3. The second window is loaded in process 4. The third window is loaded in process 5. The last window with a url - “www.attacker.com” - is loaded in process 3, same as the first window. On the right hand-side of the drawing, there is a table titled “List of Content Processes”. The table contains two columns: “site” and “pid”, which stands for process id. In the table, the first window, my-bank.com, and the last attacker.com window have the same PID." width="700" height="990" srcset="https://hacks.mozilla.org/files/2021/05/figure2-500x707.jpg 500w, https://hacks.mozilla.org/files/2021/05/figure2-250x354.jpg 250w, https://hacks.mozilla.org/files/2021/05/figure2-768x1086.jpg 768w, https://hacks.mozilla.org/files/2021/05/figure2-1086x1536.jpg 1086w, https://hacks.mozilla.org/files/2021/05/figure2-1448x2048.jpg 1448w, https://hacks.mozilla.org/files/2021/05/figure2-scaled.jpg 1810w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>Without Site Isolation, Firefox does not separate web content into different processes and it’s possible for different sites to be loaded in the same process.</p>
<p>Imagine you open some websites in different tabs: www.my-bank.com, www.getpocket.com, www.mozilla.org and www.attacker.com. As illustrated in the diagram above, it&#8217;s entirely possible that my-bank.com and attacker.com end up being loaded in the same operating system process, which would result in them sharing process memory. As we saw in the previous example, with this separation model, an attacker could perform a Spectre-like attack to access my-bank.com’s data.</p>
<p><img loading="lazy" class="aligncenter wp-image-47272" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/figure3-500x366.jpg" alt="A hand drawn diagram titled “Loading Subframes With Current Browser Architecture”. There is one browser window drawn. The window, www.attacker.com, embeds a page from a different site, www.my-bank.com. The top level page and the subframe are loaded in the same process - process 3." width="700" height="513" srcset="https://hacks.mozilla.org/files/2021/05/figure3-500x366.jpg 500w, https://hacks.mozilla.org/files/2021/05/figure3-250x183.jpg 250w, https://hacks.mozilla.org/files/2021/05/figure3-768x562.jpg 768w, https://hacks.mozilla.org/files/2021/05/figure3-1536x1125.jpg 1536w, https://hacks.mozilla.org/files/2021/05/figure3.jpg 1830w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>Without Site Isolation, the browser will load embedded pages, such as a bank page or an ad, in the same process as the top level document.</p>
<p>While straightforward to understand sites being loaded into different tabs, it’s also possible that sites are embedded into other sites through so-called subframes &#8211; if you ever visited a website that had ads on it, those are probably subframes. If you ever had a personal website and you embedded a YouTube video with your favourite song within it, the YouTube video was embedded in a subframe.</p>
<p>In a more dangerous scenario, a malicious site could embed a legitimate site within a subframe and try to trick you into entering sensitive information. With the current architecture, if a page contains any subframes from a different site, they will generally be in the same process as the outer tab.</p>
<p>This results in both the page and all of its subframes sharing process memory, even if the subframes originate from different sites. In the case of a successful Spectre-like attack, a top-level site might access sensitive information it should not have access to from a subframe it embeds (and vice-versa) &#8211; the new Site Isolation security architecture within Firefox will effectively make it even harder for malicious sites to execute such attacks.</p>
<h2>How Site Isolation Works in Firefox</h2>
<p>When enabling Site Isolation in Firefox for desktop, each unique site is loaded in a separate process. In more detail, loading “https://mozilla.org” and also loading &#8220;http://getpocket.com&#8221; will cause Site Isolation to separate the two sites into their own operating system process because they are not considered “same-site”.</p>
<p>Similarly, &#8220;https://getpocket.com&#8221; (note the difference between http and https) will also be loaded into a separate process &#8211; so ultimately all three sites will load in different processes.</p>
<p>For the sake of completeness, there are some domains such as “.github.io” or “.blogspot.com” that would be too general to identify a “site”. This is why we use a <a href="https://github.com/publicsuffix/list">community-maintained</a> list of effective top level domains (eTLDs) to aid in differentiating between sites.</p>
<p>Since “github.io” is listed as an eTLD, “a.github.io”  and “b.github.io” would load in different processes. In our running examples, websites “www.my-bank.com” and “www.attacker.com” are not considered “same-site” with each other and will be isolated in separate processes.</p>
<p><img loading="lazy" class="aligncenter wp-image-47276" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/figure4-500x707.jpg" alt="Two hand-drawn diagrams, with the first labeled “With Site Isolation, we will load these sites in different processes”. It shows two browser windows, one www.attacker.com , loaded in process 5, and www.my-bank.com loaded in process 16. On top of the banking window, there is a cartoon face that looks happy, personifying the browser. In contrast, the webpage area of the www.attacker.com window, contains a face that is looking at the banking window, with a mischievous smile. In the second diagram, labeled “Attacker.com tries to execute a sophisticated attack”, we see the same two browser windows. There is a 1 column table labelled “memory where my-bank’s data is stored in process 16” underneath the banking window . It has two entries: “credit card info” and “login password”. A hand extending from the malicious site tries to reach towards the table (aka memory of the banking window), but is unable to reach it, due to the process boundary. The face of the malicious site is frowning and looks unhappy, while the face, representing the browser, continues to look happy and carefree. The second window’s data is safe from the malicious site." width="700" height="990" srcset="https://hacks.mozilla.org/files/2021/05/figure4-500x707.jpg 500w, https://hacks.mozilla.org/files/2021/05/figure4-250x354.jpg 250w, https://hacks.mozilla.org/files/2021/05/figure4-768x1086.jpg 768w, https://hacks.mozilla.org/files/2021/05/figure4-1086x1536.jpg 1086w, https://hacks.mozilla.org/files/2021/05/figure4-1448x2048.jpg 1448w, https://hacks.mozilla.org/files/2021/05/figure4-scaled.jpg 1810w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>With Site Isolation, Firefox loads each site in its own process, thereby isolating their memory from each other, and relies on security guarantees of the operating system.</p>
<p>Suppose now, you open the same two websites: www.attacker.com and www.my-bank.com, as seen in the diagram above. Site isolation recognizes that the two sites are not “same-site” and hence the site isolation architecture will completely separate content from attacker.com and my-bank.com into separate operating system processes.</p>
<p>This process separation of content from different sites provides the memory protections required to allow for a secure browsing experience, making it even harder for sites to execute Spectre-like attacks, and, ultimately, provide a secure browsing experience for our users.</p>
<p><img loading="lazy" class="aligncenter wp-image-47280" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2021/05/figure5-500x323.jpg" alt="The window, www.attacker.com, embeds a page from a different site, www.my-bank.com. The top level page is loaded in process 3 and the subframe corresponding to the bank site is loaded in process 5. The two sites are, thus, isolated from each other in different operating system processes." width="700" height="452" srcset="https://hacks.mozilla.org/files/2021/05/figure5-500x323.jpg 500w, https://hacks.mozilla.org/files/2021/05/figure5-250x161.jpg 250w, https://hacks.mozilla.org/files/2021/05/figure5-768x496.jpg 768w, https://hacks.mozilla.org/files/2021/05/figure5-1536x991.jpg 1536w, https://hacks.mozilla.org/files/2021/05/figure5.jpg 1830w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>With Site Isolation, Firefox loads subframes from different sites in their own processes.</p>
<p>Identical to loading sites into two different tabs is the separation of two different sites when loaded into subframes. Let’s revisit an earlier example where pages contained subframes, with Site Isolation, subframes that are not “same-site” with the top level page will load in a different process.</p>
<p>In the diagram above, we see that the page www.attacker.com embeds a page from www.my-bank.com and loads in a different process. Having a top level document and subframes from different sites loaded in their own processes ensures their memory is isolated from each other, yielding profound security guarantees.</p>
<h2>Additional Benefits of Site Isolation</h2>
<p>With Site Isolation architecture in place, we are able to bring additional security hardening to Firefox to keep you and your data safe. Besides providing an extra layer of defence against possible security threats, Site Isolation brings other wins:</p>
<ul>
<li aria-level="1">By placing more pages into separate processes, we can ensure that doing heavy computation or garbage collection on one page will not degrade the responsiveness of pages in other processes.</li>
<li aria-level="1">Using more processes to load websites allows us to spread work across many CPU cores and use the underlying hardware more efficiently.</li>
<li aria-level="1">Due to the finer-grained separation of sites, a subframe or a tab crashing will not affect websites loaded in different processes, resulting in an improved application stability and better user experience.</li>
</ul>
<h2>Going Forward</h2>
<p>We are currently testing Site Isolation on desktop browsers Nightly and Beta with a subset of users and will be rolling out to more desktop users soon. However, if you already want to benefit from the improved security architecture now, you can enable it by downloading the Nightly or Beta browser from <a href="https://www.mozilla.org/firefox/channel/desktop/">here</a> and following these steps:</p>
<p><b>To enable Site Isolation on Firefox Nightly:</b></p>
<ol>
<li aria-level="1">Navigate to about:preferences#experimental</li>
<li aria-level="1">Check the &#8220;Fission (Site Isolation)&#8221; checkbox to enable.</li>
<li aria-level="1">Restart Firefox.</li>
</ol>
<p><b>To enable Site Isolation on Firefox Beta or Release:</b></p>
<ol>
<li aria-level="1">Navigate to about:config.</li>
<li aria-level="1">Set `fission.autostart` pref to `true`.</li>
<li aria-level="1">Restart Firefox.</li>
</ol>
<p>For technical details on how we group sites and subframes together, you can check out our new process manager tool at “about:processes” (type it into the address bar) and follow the project at  <a href="https://wiki.mozilla.org/Project_Fission">https://wiki.mozilla.org/Project_Fission</a>.</p>
<p>With Site Isolation enabled on Firefox for Desktop, Mozilla takes its security guarantees to the next level and protects you against a new class of malicious attacks by relying on memory protections of OS-level process separation for each site. If you are interested in contributing to Mozilla’s open-source projects, you can help us by filing bugs <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Core&amp;bug_type=defect&amp;short_desc=%5bFission%5d&amp;blocked=fission-dogfooding">here</a> if you run into any problems with Site Isolation enabled.</p>
<h2>Acknowledgements</h2>
<p>Site Isolation (Project Fission), has been a massive multi-year project. Thank you to all of the talented and awesome colleagues who contributed to this work! It’s a privilege to work with people who are passionate about building the web we want: free, inclusive, independent and secure! In particular, I would like to thank Neha Kochar, Nika Layzell, Mike Conley, Melissa Thermidor, Chris Peterson, Kashav Madan, Andrew McCreight, Peter Van der Beken, Tantek Çelik and Christoph Kerschbaumer for their insightful comments and discussions.  Finally, thank you to Morgan Rae Reschenberg for helping me craft alt-text to meet the high standards of our web accessibility principles and allow everyone on the internet to easily gather the benefits provided by Site Isolation.</p>
    <section class="about">
                                <h2 class="about__header">About
                          Anny Gakhokidze                      </h3>
                      <p>Senior Platform Engineer who works on Firefox's Site Isolation and DOM-related features.</p>
                                <p><a class="url" href="https://hacks.mozilla.org/author/agakhokidzemozilla-com/">More articles by Anny Gakhokidze&hellip;</a></p>
                  </section>
  </article>
  <section class="promo">
    <form id="newsletterForm" name="newsletter-form" class="newsletter block block--1 block--polite" action="https://www.mozilla.org/en-US/newsletter/" method="post">
  <h2 class="heading">Discover great resources for web development</h2>
  <p class="newsletter__description">Sign up for the Mozilla Developer Newsletter:</p>
  <input id="fmt" name="fmt" value="H" type="hidden">
  <input id="newsletterNewslettersInput" name="newsletters" value="app-dev" type="hidden">

  <div id="newsletterErrors" class="newsletter__errors"></div>

  <div id="newsletterEmail" class="form__row">
    <label for="newsletterEmailInput" class="offscreen">E-mail</label>
    <input id="newsletterEmailInput" name="email" class="newsletter__input" required="" placeholder="you@example.com" size="30" type="email">
  </div>

  <div id="newsletterPrivacy" class="form__row form__fineprint">
    <input id="newsletterPrivacyInput" name="privacy" required="" type="checkbox">
    <label for="newsletterPrivacyInput">
      I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
    </label>
  </div>
  <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
</form>
<div id="newsletterThanks" class="newsletter newsletter--thanks block block--1 block--polite hidden">
  <h2 class="heading">Thanks! Please check your inbox to confirm your subscription.</h2>
  <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
  </p>
</div>
  </section>
  

</main><!-- /#content-main -->

  

    <footer class="footer section section--fullwidth">
      <div class="row">
        <p class="block block--1">
          Except where otherwise noted, content on this site is licensed
          under the
          <a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license external">Creative Commons Attribution Share-Alike License v3.0</a>
          or any later version.
        </p>
        <img class="footer__logo" alt="the Mozilla dino logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/dino.svg">
      </div>
    </footer>
  </div>
  <link rel='stylesheet' id='hljstheme-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/styles/solarized-light.css?ver=0.6.2' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/wp-embed.min.js?ver=5.8.2' id='wp-embed-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.common.pack.js?ver=0.6.2' id='hljs_preload-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.custom.pack.js?ver=0.6.2' id='hljs-js'></script>
    <style>pre.hljs {padding: 5px;}
pre.hljs code {}</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"    "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>
  <script>
    // External links should open in a new tab.
    (function () {
      var postLinks = document.querySelectorAll('#content-main a');

      var origin = location.origin;

      for (var i = 0; i < postLinks.length; i++) {
        var link = postLinks[i];
        if (link.origin !== origin && !link.getAttribute('target')) {
          link.setAttribute('target', '_blank');
        }
      }
    })();

    window.addEventListener('load', function () {
      if (document.querySelector('#newsletterForm')) {
        var script = document.createElement('script');
        var path = document.head.getAttribute('data-template-path');
        script.setAttribute('src', path + '/js/newsletter.js');
        document.head.appendChild(script);
      }
    });
  </script>
</body>
</html>
