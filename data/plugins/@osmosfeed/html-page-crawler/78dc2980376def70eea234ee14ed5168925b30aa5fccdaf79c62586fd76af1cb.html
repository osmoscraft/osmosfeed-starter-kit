<!doctype html>
<html lang="en" class="">
  <head>

    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      
        <title>Billing Management For Your Next SaaS Idea Using Stripe And Azure Functions — Smashing Magazine</title>
      
      


<link rel="preconnect" href="https://cloud.netlifyusercontent.com"/>
<link rel="preconnect" href="https://smashingcomments.netlify.app"/>
<link rel="preconnect" href="https://res.cloudinary.com"/>
<link rel="preconnect" href="https://www.google-analytics.com/"/>
<link rel="preconnect" href="https://storage.googleapis.com"/>

      






    

    
      

<style>
  @font-face{font-family:Elena;src:url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegular/ElenaWebRegular.woff) format("woff")}@font-face{font-family:ElenaLCP;src:url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegular/ElenaWebRegular.woff) format("woff");font-display:optional}@font-face{font-family:Elena;src:url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic.woff) format("woff");font-style:italic}@font-face{font-family:ElenaLCP;src:url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic.woff) format("woff");font-style:italic;font-display:optional}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebBold/ElenaWebBold.woff) format("woff");font-weight:700}@font-face{font-family:ElenaLCP;src:url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format("woff2"),url(/fonts/ElenaWebBold/ElenaWebBold.woff) format("woff");font-weight:700;font-display:optional}@font-face{font-family:Elena;src:url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic-subset.woff2) format("woff2"),url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic.woff) format("woff");font-weight:700;font-style:italic}@font-face{font-family:ElenaLCP;src:url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic-subset.woff2) format("woff2"),url(/fonts/ElenaWebBoldItalic/ElenaWebBoldItalic.woff) format("woff");font-weight:700;font-style:italic;font-display:optional}@font-face{font-family:Mija;src:url(/fonts/MijaRegular/Mija_Regular-webfont-subset.woff2) format("woff2"),url(/fonts/MijaRegular/Mija_Regular-webfont.woff) format("woff")}@font-face{font-family:MijaLCP;src:url(/fonts/MijaRegular/Mija_Regular-webfont-subset.woff2) format("woff2"),url(/fonts/MijaRegular/Mija_Regular-webfont.woff) format("woff");font-display:optional}@font-face{font-family:Mija;src:url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format("woff2"),url(/fonts/MijaBold/Mija_Bold-webfont.woff) format("woff");font-weight:700}@font-face{font-family:MijaLCP;src:url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format("woff2"),url(/fonts/MijaBold/Mija_Bold-webfont.woff) format("woff");font-weight:700;font-display:optional}
</style>

<script>

  var fontsInServiceWorker = sessionStorage.foutFontsStage1Loaded && sessionStorage.foutFontsStage2Loaded || ('serviceWorker' in navigator && navigator.serviceWorker.controller !== null && navigator.serviceWorker.controller.state === 'activated')
  if (!fontsInServiceWorker && 'fonts' in document) {
    function fetchFonts(fonts) {
      return Promise.all(fonts.map(function (font) {
        return document
          .fonts
          .load(font);
      }));
    }

    if( sessionStorage.foutFontsStage2Loaded ) {
			document.documentElement.className += " wf-loaded-stage2";
		} else {
      sessionStorage.foutFontsStage1Loaded = true;
    };
  }



  if ("fonts" in document && !("connection" in navigator && navigator.connection.saveData)) {
		
		let font = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2) format('woff2')"
		);
		let fontBold = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2) format('woff2')",
			{ weight: "700" }
		);
		let fontItalic = new FontFace(
			"Elena",
			"url(/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2) format('woff2')",
			{ style: "italic" }
		);
		
		
		
		
		let font2Bold = new FontFace(
			"Mija",
			"url(/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2) format('woff2')",
			{ weight: "700" }
		);

		
		let loadedFonts = Promise.all([
			font.load(),
			
			fontBold.load(),
			font2Bold.load(),
			fontItalic.load()
		]).then(result => {
			result.forEach(font => document.fonts.add(font));
			document.documentElement.classList.add('wf-loaded-stage2');
			sessionStorage.foutFontsStage2Loaded = true;
		}).catch(error => {
			throw new Error(`Error caught: ${error}`);
		});

  }

  if (
    (sessionStorage.foutFontsStage1Loaded &&
      sessionStorage.foutFontsStage2Loaded) ||
    ('serviceWorker' in navigator &&
      navigator.serviceWorker.controller !== null &&
      navigator.serviceWorker.controller.state === 'activated')
  ) {
    var docEl = document.documentElement
    
    docEl.classList.add('wf-loaded-stage2')
  }

  if (
    !'querySelector' in document &&
    'addEventListener' in window &&
    'getComputedStyle' in window
  ) {
    window.document.documentElement.className += ' no-js'
  }
  window.document.documentElement.className += ' enhanced js'
</script>



<style>
  @charset "UTF-8";@media (prefers-color-scheme:dark){:root{--article-background-color:linear-gradient(-45deg, #162c35 70%, #0c252f 100%)}}*,::after,::before{box-sizing:border-box}html{font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;overflow-y:scroll}body{margin:0;display:flex;flex-direction:column;background-color:#fff;font-feature-settings:"onum" 1;color:#333;overflow:hidden;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:-apple-system,BlinkMacSystemFont,Roboto,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif;font-size:1.125em}body,html{min-height:100%;overflow-x:hidden}img{max-width:100%;position:relative;border-style:none}article,aside,figcaption,figure,footer,header,main,nav,section{display:block}:focus{outline:3px dotted var(--THEME_COLOR_HOVER,#811d15)!important}article,figure,header,main,nav,section{display:block}@media (prefers-reduced-data:reduce){.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 body,.wf-loaded-stage2 h1,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 tbody td,.wf-loaded-stage2 th,.wf-loaded-stage2 time{font-family:-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif!important}}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--updated,.wf-loaded-stage2 .author-post__author-title,.wf-loaded-stage2 .btn,.wf-loaded-stage2 .cta--green,.wf-loaded-stage2 .feature-panel::before,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 .form__field__input,.wf-loaded-stage2 .h1,.wf-loaded-stage2 .h4,.wf-loaded-stage2 .header__search-results .h2,.wf-loaded-stage2 .header__search-results h2,.wf-loaded-stage2 .nav-item,.wf-loaded-stage2 .search .search-input,.wf-loaded-stage2 .subnav a,.wf-loaded-stage2 .tablesaw td:before,.wf-loaded-stage2 h1,.wf-loaded-stage2 h4,.wf-loaded-stage2 input[type=email],.wf-loaded-stage2 th{font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif}.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 .h2,.wf-loaded-stage2 .h3,.wf-loaded-stage2 .meta-box--item,.wf-loaded-stage2 .nl-box__group input[type=email],.wf-loaded-stage2 .sponsors ul li a,.wf-loaded-stage2 body,.wf-loaded-stage2 h2,.wf-loaded-stage2 h3,.wf-loaded-stage2 tbody td,.wf-loaded-stage2 time{font-family:Elena,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif}@media all and (max-width:750px){.c-garfield-the-cat{display:flex;flex-direction:column}.c-garfield-the-cat>*{margin-bottom:0}.article__image,.c-garfield-the-cat>figure{margin:1em auto .25em auto}.c-garfield-aside--meta{margin-bottom:1em}.c-garfield-the-cat>pre{margin-top:1em}.c-garfield-the-cat .code-toolbar{margin-top:1em}.c-garfield-the-cat .code-toolbar>pre{margin-top:0}.c-garfield-the-cat>pre{margin-bottom:.5rem}.c-garfield-the-cat>table{margin-top:1em;margin-bottom:1em}.c-garfield-the-cat .pull-quote__quotation{margin-top:1em}.drop-caps{display:none}}@media all and (max-width:1000px){.article-header--meta,.article-header--meta-item__date,.article__summary,.article__summary::before,.author__desc,.author__desc__title,.drop-caps+p::first-line,.wf-loaded-stage2 .article-header--meta,.wf-loaded-stage2 .article-header--meta-item__date,.wf-loaded-stage2 .article__summary,.wf-loaded-stage2 .article__summary::before,.wf-loaded-stage2 .author__desc,.wf-loaded-stage2 .author__desc__title,.wf-loaded-stage2 .drop-caps+p::first-line,.wf-loaded-stage2 body,.wf-loaded-stage2 time,body,time{font-family:ElenaLCP,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif}.feature-panel__desc,.wf-loaded-stage2 .feature-panel__desc,.wf-loaded-stage2 h1,h1{font-family:MijaLCP,-apple-system,BlinkMacSystemFont,Roboto,"Roboto Slab","Droid Serif","Segoe UI",system-ui,Arial,sans-serif;font-weight:700}}.js-show-secondary .menu-text--sm,.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}.js-show-secondary .menu-text--sm--close{display:block}@media all and (min-width:800px){.js-show-secondary .main-nav__secondary{display:block;top:50px}.js-show-secondary .menu-text--lg--close,.menu-text--lg{display:block}.js-show-secondary .menu-text--lg,.js-show-secondary .menu-text--sm--close,.menu-text--sm{display:none}}.js-show-secondary .main-nav-more-item__button:before{content:"";display:block;margin-left:.35em;width:45px;height:30px;background-position:center center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50.21 35.05'%3E%3Cellipse cx='27.8' cy='32.92' fill='rgba(60,60,60,0.5)' rx='19.64' ry='1.2'/%3E%3Cpath fill='%23fff' d='M46.48 15.53a5.2 5.2 0 00-2-.31 7 7 0 00-1.43.19 7.66 7.66 0 001.19-1.52 7.12 7.12 0 011.12-.13 5.18 5.18 0 012 .31h.05a2.82 2.82 0 011.44 1.24 2.75 2.75 0 01.18 2 2.36 2.36 0 00-.74-.46 2 2 0 01.86 1c.11.45-.23 1-.67.92a1.86 1.86 0 00-.22-1 2.65 2.65 0 00-.29-1 2.74 2.74 0 00-1.49-1.24zM16.56 28.07c.06-.21.37-1.29.19-1.47 0 0 5.18 5.08 7.22-2.7a6 6 0 001.16.62c-.75 7-6.44 3.43-6.44 3.43.22.13.14 1.25.12 1.47-.16 2.2-3 1.63-3.74.11a2.44 2.44 0 01-.14-.34 1.4 1.4 0 001.63-1.12z' class='cls-2'/%3E%3Cpath fill='%23fff' d='M1.26 14.52c.08.23.18.45.28.67v.05c1.26 2.67 3.76 5 6.81 4.61a12 12 0 003.51-1.05 8.6 8.6 0 013.64-1 7.28 7.28 0 00.1 2.65A9.82 9.82 0 0117 18.5s-.77 2.34-.41 3a1 1 0 00-.15-.18 1.28 1.28 0 00-.8-.4 1 1 0 00-.89.7c-.23.45-.24.83-.63 1.17-1 .87-2.17 2-1.79 3.47a2.64 2.64 0 002.06 1.82A1.39 1.39 0 0016 27c.06-.21.36-1.28.18-1.46 0 0 5.19 5.07 7.23-2.7a5.65 5.65 0 001.16.61c1.43.56 3.94.91 6.11-2.07a20.36 20.36 0 005.68 1.13s-1.55-.55-1.61-1.28c0 0 3.84 1 6 0l-2.43-.32a3.69 3.69 0 001.68-.42 5.24 5.24 0 012.46 0c.73.08 1.06-.31 1.54-.78a1.17 1.17 0 00.09.33 2.06 2.06 0 00.12.35 3.21 3.21 0 00.37.65 1.35 1.35 0 001.27.53.92.92 0 00.53-.28 1.2 1.2 0 00.19-1.16 2 2 0 00-.77-.94 1.85 1.85 0 011 1.76c.44.08.78-.48.67-.93a1.13 1.13 0 00-.13-.32 2.4 2.4 0 00-.72-.7 2.26 2.26 0 01.74.45 2.67 2.67 0 00.1-.64v-.3a2.59 2.59 0 00-.28-1A2.65 2.65 0 0046 16.32l-.14-.06-.08-.05h-.06a10.1 10.1 0 00-3.9-.54 6.3 6.3 0 001.59-2.45 3 3 0 01-.12.73s1.61-.69.71-2.95a1 1 0 01.63.49 4.17 4.17 0 00-1.74-2.81 2.35 2.35 0 01.88.17 3.64 3.64 0 00-1.72-1.34l-.27-2.21.88.31s0-.35-.89-.86a7.17 7.17 0 00.36-3.37C39.32 1 38.27 2.48 38 2.94a12.73 12.73 0 00-2.56.26 2.83 2.83 0 011.29-.62 3.87 3.87 0 00-3.23.94s-2.73-2-5.37-1.29c0 0-.27 1.36 1.42 4.77a6.37 6.37 0 00-2.31 2.67 7.38 7.38 0 011.63-1.59s-2.44 2.6-1.46 4.67a3.77 3.77 0 01.35-1.55c0 .4-.24 3.2 1 4.61a9.92 9.92 0 01-.32-2s.37 2.53 3.84 3.6a4.35 4.35 0 01-1.49-1.54 11.65 11.65 0 002.47 1.23c-.61.18-1 .31-1 .31l-.81.38a6.56 6.56 0 01-2.34-1.49h-.07a.58.58 0 01-.31.08.64.64 0 01-.46-.21 5.47 5.47 0 01-1.14-2.91.66.66 0 01-.33-.31 3.48 3.48 0 01-.19-2.24 6.84 6.84 0 00-6.5-.26 18.29 18.29 0 012.43.43s-4.84.26-7.22 3.71c0 0 1.93-2 2.77-1.7a8.44 8.44 0 00-2.1 3A9.13 9.13 0 0012 16c-3.7.78-5.2-1.7-5.79-3.65 0-.13-.08-.25-.11-.37a.14.14 0 000-.07v-.16a.14.14 0 010-.06q-.1-.24-.1-.47v-.05a.68.68 0 000-.14 2.4 2.4 0 010-.24v-.09a.09.09 0 000-.05v-.08a.28.28 0 010-.09v-.12c-.09-2-1.43-2.88-3-1.92C.82 9.6.44 12.35 1.26 14.52zm26.58-3.41v.05z' class='cls-2'/%3E%3C/svg%3E");order:1}.js-show-secondary .main-nav-more-item__button:after{width:15px;height:15px;order:2;background-image:url(/images/icons/close.svg)}.js-show-secondary .main-nav__secondary{display:flex}strong{font-weight:bolder;letter-spacing:0}svg:not(:root){overflow:hidden}button{text-transform:none;cursor:pointer;font:inherit;margin:0}[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}.l-author-bio{display:flex;flex-wrap:wrap;align-items:center}.l-author-bio-content{flex-grow:1;flex-shrink:1;flex-basis:300px}.bio-image__large .bio-image{--bio-image-border-width:8px}.bio-image{padding:0;margin:0;display:block;width:100%;height:100%;border-radius:inherit;position:relative}.bio-image::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100% auto;background-repeat:no-repeat;top:89%;left:-30%;right:0;transform-origin:30% 50%;opacity:1;transition:opacity .3s ease-in-out}.bio-image:hover::before{opacity:0}a.bio-image-link{background:0 0;text-shadow:none;color:inherit;padding:0;display:block;border-radius:inherit;width:100%;height:100%}a.bio-image-link::before{display:block;content:'';height:120%;width:120%;position:absolute;top:-10%;left:-12%}.bio-image-wrapper{background:var(--bio-image-background-color,var(--bio-image-border-color,#d33a2c));border:solid var(--bio-image-border-width,8px) var(--bio-image-border-color,#d33a2c);border-radius:inherit;transform:scale(.84) translateX(15%) rotateZ(calc(-1 * (11 * 1deg)));transform-origin:0 100%;overflow:hidden;width:100%;height:100%;transition:transform .2s ease-out}.bio-image-image{width:100%;height:100%;object-fit:cover;display:block;transform:scale(1.2) rotateZ(calc(11 * 1deg));transition:transform .2s ease-out}.bio-image-link:active .bio-image-wrapper,.bio-image-link:focus .bio-image-wrapper,.bio-image:hover .bio-image-wrapper{transform:scale(.84) translateX(15%) rotateZ(0)}.bio-image-link:active .bio-image-image,.bio-image-link:focus .bio-image-image,.bio-image:hover .bio-image-image{transform:scale(1.2) rotateZ(0)}.article__content .author-post__author-title{color:#d33a2c;text-decoration-line:underline;font-weight:700;font-size:.9em}.light-grey{color:#767676!important}.rounded-3xl{border-radius:1.2em}.block{display:block}.h-48{height:12rem}.mr-3{margin-right:.75rem}.mb-5{margin-bottom:1.25rem}@media all and (max-width:600px){.mobw-40{width:8rem!important}.mobh-40{height:8rem!important}}.w-48{width:12rem}.mt-2{margin-top:.5rem}.mtn{margin-top:0!important}.mbn{margin-bottom:0!important}small{font-size:80%}.row{box-sizing:border-box;display:flex;flex:0 1 auto;flex-direction:row;flex-wrap:wrap;margin-right:-1rem;margin-left:-1rem}[class*=col-]{box-sizing:border-box;flex:0 0 auto;padding-right:1rem;padding-left:1rem}.row::after{clear:both}.col-12{flex-basis:100%;max-width:100%}@media screen and (min-width:48em){.col-12{flex-basis:100%;max-width:100%}}.container{width:calc(100% - .5em);max-width:1440px;margin:0 auto;z-index:1;position:relative}.container::after{content:"";display:table;clear:both}@media (min-width:40em){.container{width:92vw!important}}@media (min-width:48em){.container{width:85vw}}@media (min-width:64em){.container{width:68rem}}@media (min-width:75em){.container{width:79rem}}@media screen and (min-width:160em){.container{max-width:1650px}}@media (min-width:187.5em){.container{max-width:1860px}}.c-garfield-the-cat>p:first-of-type{font-size:1.1em;line-height:1.55em}.c-garfield-the-cat>p:empty{display:none}.c-felix-the-cat{background-color:#f3f3f3;border-left:11px solid #e6e4e1;padding:1em 1em 1em 1.5em;color:#424242;margin-left:0;margin-top:1em;font-size:1.05em;line-height:1.6em;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0 0,#fff 100%)}.c-felix-the-cat h4{margin-top:.5em}.sponsor-panel{display:flex;justify-content:center;align-items:center}.sponsor-panel-content{flex:3}.sponsor-panel-image{display:none}@media screen and (min-width:1100px){.sponsor-panel-image{display:block;background-image:none;margin-left:1.5em;flex:1}}@media (max-width:1024px){.col{width:100%!important;padding:0 1em}.row{margin-left:0;margin-right:0}.article__content{float:none}.article__content::before{display:none}}#main{position:relative;z-index:0;background-color:#fff}@supports (display:grid){.main-nav{display:grid;align-items:center}}.main-nav{position:relative;display:block;min-width:0;color:#fff;grid-column:span 2;font-size:1.05em}.main-nav__primary .nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav__secondary .nav-item--active{background-color:transparent;margin:0}.c-garfield-the-cat figcaption a{color:#666;text-decoration-line:underline;text-decoration-color:#666}.c-garfield-the-cat figcaption a.btn{color:#fff;text-decoration:none}@media all and (min-width:1100px){@supports (grid-row-gap:0){.c-garfield-the-cat{display:grid;grid-template-columns:0 minmax(0,.5fr) repeat(10,minmax(0,1fr)) .7fr .3fr 17rem;margin:0 auto}.c-garfield-the-cat ol,.c-garfield-the-cat ul,.c-garfield-the-cat>div,.c-garfield-the-cat>p,.c-garfield-the-cat>table{margin-bottom:1.4em}.c-garfield-the-cat>h2{margin-top:1.5em;margin-bottom:1em}.c-garfield-the-cat>h3,.c-garfield-the-cat>h4{margin-top:1.5em;margin-bottom:.65em}.c-garfield-the-cat>h5{margin-top:.65em;margin-bottom:.65em}.article__image,.c-garfield-the-cat>figure{margin:0 auto 1.4em auto;width:100%}.c-garfield-the-cat .code-toolbar pre,.c-garfield-the-cat blockquote,.c-garfield-the-cat pre,.c-garfield-the-cat>figure.video-embed-container{margin-bottom:1.7em;margin-top:.3em}.c-garfield-the-cat .code-toolbar{margin-bottom:0}.c-garfield-the-cat>*{grid-column:3/13;margin-top:0;margin-bottom:0}.c-garfield-the-cat .c-garfield-bio{grid-column:1/2;grid-row:1/4;align-self:start}.c-garfield-the-cat .c-garfield-header{grid-column-end:16}.c-garfield-the-cat .c-garfield-aside--meta{grid-column:15/16;grid-row:2/7;align-self:start;margin:0}.c-garfield-the-cat .toc-components li{margin-bottom:.75em}.c-garfield-the-cat>.break-out{grid-column:3/14;width:100%}.c-garfield-the-cat>.break-out img{margin:0 auto}.c-garfield-the-cat>.break-out figcaption{max-width:50em}.article__content .c-garfield-the-cat figcaption{margin:0 auto}.c-garfield-the-cat .c-garfield-native-panel{grid-column:15/16;grid-row:8/15;align-self:start;text-align:center;position:relative}.c-garfield-native-panel__right{grid-column:15/16;grid-row:15/22;align-self:start;text-align:center}.c-garfield-the-cat .c-garfield-native-panel__below{grid-row:19/25}.c-garfield-the-cat .c-garfield-native-panel__end{grid-row:26/33}.feature-panel-container{margin-top:6em;margin-bottom:1em}}}.no-ads .c-garfield-native-panel,.no-panels .feature-panel-container,.subscriber .c-garfield-native-panel,.subscriber .feature-panel-container{display:none!important}figcaption a{color:inherit}figcaption code,figcaption pre{font-style:normal}.article h1,.article h2,.article h3,.article h4,.article h5,.article h6{position:relative}.feature-panel-container{grid-column:1/15;margin-top:3em;margin-bottom:1em}.article__image img,.c-garfield-the-cat>figure img{display:block;width:auto;max-width:100%;margin:0 auto;height:auto}.article__image>a,.c-garfield-the-cat>figure>a{display:block;background:0 0;position:relative;z-index:99}.article__image figcaption,.c-garfield-the-cat>figure figcaption{color:#666;font-size:.95em;font-style:italic;padding:.75em 2em .75em 0;display:table}.article__image figcaption a,.c-garfield-the-cat>figure figcaption a{color:#666}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before,.internal__page__wrapper figure:not(.bio-image) figcaption::before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNyAxMy4wOSI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNjMmMyYzI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jYW1lcmE8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTguNSA1LjQ0YTIuMjEgMi4yMSAwIDEgMCAyLjIxIDIuMjEgMi4yMSAyLjIxIDAgMCAwLTIuMjEtMi4yMXpNMTQuNzkgMi4yMWgtMi41NWEyLjIxIDIuMjEgMCAwIDAtMi4yNC0yLjIxaC0zYTIuMjEgMi4yMSAwIDAgMC0yLjI0IDIuMjFoLTIuNTVhMi4yMSAyLjIxIDAgMCAwLTIuMjEgMi4yMXY2LjQ2YTIuMjEgMi4yMSAwIDAgMCAyLjIxIDIuMjFoMTIuNThhMi4yMSAyLjIxIDAgMCAwIDIuMjEtMi4yMXYtNi40NmEyLjIxIDIuMjEgMCAwIDAtMi4yMS0yLjIxem0tNi4yOSA5LjM1YTMuOTEgMy45MSAwIDEgMSAzLjkxLTMuOTEgMy45MSAzLjkxIDAgMCAxLTMuOTEgMy45MXoiLz48L3N2Zz4=);height:1em;width:1.5em;padding-right:.6em;display:table-cell;vertical-align:baseline;position:relative;top:.05em}.c-garfield-the-cat>figure.article__figure figcaption::before{content:'';display:none}.hidden{display:none!important}.c-garfield-header{clear:both}.c-promo-box{font-size:.9em;border-radius:11px}.c-promo-box a:not(.btn){color:#006fc6}.c-promo-box--ad::before{display:block;white-space:pre-wrap;padding:2em 0 3em 0;font-size:.85em;font-style:italic;color:#666}.c-promo-box--ad img{border-top-left-radius:11px;border-top-right-radius:11px}.c-garfield-the-cat .author__desc{font-size:.9em;color:#555}.summary__heading{font-style:normal;font-size:1rem;letter-spacing:2px;margin:0;font-weight:700;color:#d33a2c;text-transform:uppercase}.c-promo-box--ad ul{padding-left:0;margin:0}.bnnr-list{display:flex;text-align:center;justify-content:center;flex-direction:row}.sponsors.c-promo-box:not(.c-promo-box--wide) .bnnr-list{flex-direction:column}.c-garfield-the-cat{padding:0 1em}@media screen and (min-width:80em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr)) 1.4fr .6fr 21rem 1fr}}@media screen and (min-width:100em){.c-garfield-the-cat{display:grid;grid-template-columns:0 repeat(11,minmax(0,1fr)) 1.9fr .4fr 21rem 1fr}}@media screen and (min-width:160em){.c-garfield-the-cat{display:grid;grid-template-columns:18.5rem repeat(11,minmax(0,1fr)) .7fr .3fr 18.5rem;grid-column-gap:1.75rem}}@media (min-width:187.5em){.c-garfield-the-cat{display:grid;grid-template-columns:20rem repeat(11,minmax(0,1fr)) .7fr .3fr 20rem;grid-column-gap:2.25rem}}.header{background:#d33a2c;background:var(--THEME_COLOR,#d33a2c);position:relative;display:grid;justify-content:flex-start;align-items:center;padding:.8em;z-index:2;grid-template-columns:min-content min-content 1fr;column-gap:5px}@media all and (min-width:31.25em){.header{grid-template-columns:-webkit-min-content -webkit-min-content 0 minmax(100px,100%);grid-template-columns:min-content min-content 0 minmax(100px,100%);column-gap:10px}}@media (min-width:700px){.header{grid-template-columns:-webkit-min-content minmax(140px,2fr) 0 minmax(100px,350px);grid-template-columns:min-content minmax(140px,2fr) 0 minmax(100px,350px)}}@media (min-width:740px){.header{padding:1rem 2em}}.search{flex-basis:100px;flex-shrink:1}@media screen and (min-width:48em){body{font-size:calc(.35842vw + .95296em)}}body .form__field__label,body li,body p{line-height:calc(1.5em + .2vw);word-break:break-word}body h1{line-height:1.2}.article--post__title a:focus,.article--post__title a:hover{color:#d33a2c}@supports (-ms-ime-align:auto){.article__image figcaption,.c-garfield-the-cat>figure figcaption{display:inline-block}.article__image figcaption::before,.c-garfield-the-cat>figure figcaption::before{display:inline-block}body{font-feature-settings:normal}}::-webkit-input-placeholder{color:#666}::-moz-placeholder{color:#000}:-ms-input-placeholder{color:#666}.article-header--meta-item__date,time{color:#666;font-feature-settings:"smcp" 1,"c2sc" 1;letter-spacing:1px;text-transform:lowercase;background-position:center 72%}.article-header--meta-item__date{display:flex}.wf-loaded-stage2 time{font-variant:petite-caps}.kbd,kbd{font-size:.9em;padding:.0625rem .5rem;border-radius:.125rem;border:1px solid #d33a2c;box-shadow:1px 1px 0 #d33a2c,2px 2px 0 #d33a2c;margin:0 .25rem;color:#d33a2c;font-family:monospace}figure{margin:0;padding:0}figure:after,figure:before{content:" ";display:table;clear:both}a{padding:7px 0;background-color:transparent;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;text-decoration-line:underline;color:#006fc6}.h1,h1{font-size:calc(1.625rem + 1.6vw);margin:0}.h2,.h3,.h4,.h5,h2,h3,h4,h5{color:#333}.h2,h2{font-size:calc(1.5rem + .25vw);margin:2em 0 .75em;text-transform:capitalize}.h3,h3{font-size:calc(1.125rem + .25vw);text-transform:uppercase;letter-spacing:1px;margin-top:2em;margin-bottom:1em}h4{font-size:1.1em;margin-top:2em}h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{text-transform:none}@keyframes fadeOut-headings{0%{background:#ffde95;box-shadow:-10px 0 0 12px #ffde95}100%{background:#fff1d2;box-shadow:-10px 0 0 12px #fff1d2}}h2:target,h3:target,h4:target,h5:target,h6:target{border-radius:11px;animation:fadeOut-headings .4s;animation-fill-mode:forwards}.article__content h2:target a,.article__content h3:target a,.article__content h4:target a,.article__content h5:target a{color:#d33a2c}:target{scroll-margin-top:2rem}ol,ul{margin:1em 0;max-width:100%}ol{padding:0;list-style:none;counter-reset:listCounter}ol>li{padding-left:calc(1.65em + .7vw);position:relative;counter-increment:listCounter;margin-bottom:1em}ol>li::before{content:counter(listCounter,decimal-leading-zero);font-size:.7em;font-weight:700;color:#d33a2c;left:.8em;position:absolute;font-family:Mija,-apple-system,BlinkMacSystemFont,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif}ul{list-style:disc}ul>li::marker{color:#d33a2c}ul>li{margin-bottom:.75em;padding-left:.15em}.rh{color:#d33a2c}.menu-text--lg,.menu-text--lg--close,.menu-text--sm--close{display:none}@media (min-width:800px){.search{flex-basis:500px}.main-nav{grid-column:auto}.menu-text--sm{display:none}.menu-text--lg{display:block}}.secondary-nav{position:relative;grid-row-start:2;grid-column:1/5}body:not(.enhanced) .main-nav{overflow-x:auto;-webkit-overflow-scrolling:touch}.main-nav__primary{display:flex;list-style:none;padding:.4em 0;margin:0;flex-wrap:nowrap;width:100%;height:100%;flex-shrink:1;min-width:0;justify-content:flex-start}.main-nav span:empty{display:none}@media all and (min-width:53.125em){.main-nav__primary{justify-content:space-between}}.nav-item{flex-grow:0;background:0 0;text-shadow:none;color:inherit;font-weight:700;display:flex;align-items:center;margin-bottom:0;padding-left:0}.nav-item--active{background:rgba(0,0,0,.1);border-radius:11px}.main-nav-more-item{position:relative;width:145px}@media (min-width:42.9375em){.main-nav-more-item{margin-left:.35em}}@media all and (max-width:52.5em){.main-nav-more-item{justify-content:center}}.main-nav-more-item__button{padding:.4em .5rem .4em 1rem;border:1px solid rgba(0,0,0,.05);color:inherit;display:flex;align-items:center;justify-content:space-around;line-height:1;position:relative;background-color:rgba(0,0,0,.2);border-radius:11px;box-shadow:0 13px 7px -15px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.main-nav-more-item__button,.nav-item-link{white-space:nowrap}.nav-item-link{padding:.35em .9rem;background:0 0;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);text-decoration:none}@media screen and (min-width:800px){.main-nav__secondary .nav-item-link{color:#d33a2c!important}}.nav-item-link:focus,.nav-item-link:hover{background-color:rgba(0,0,0,.15);border-radius:11px}.main-nav__secondary .nav-item-link:focus,.main-nav__secondary .nav-item-link:hover{background-color:transparent;box-shadow:none}.main-nav-more-item__button:active,.main-nav-more-item__button:focus,.nav-item-link:active,.nav-item-link:focus{outline-color:var(--THEME_COLOR_OUTLINE,#811d15)!important}.secondary-nav .nav-item-link:active,.secondary-nav .nav-item-link:focus{outline-color:#811d15!important}.main-nav__secondary .nav-item-link{text-shadow:none;width:100%;text-decoration:none;text-decoration-color:#d33a2c;padding:.25em .7rem}.main-nav-more-item__button:after{content:"";display:block;margin-left:9px;width:30px;height:30px;background-position:center center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 35.96 33.31'%3E%3Cellipse cx='17.98' cy='31.55' fill='rgba(60,60,60,0.3)' rx='14.75' ry='.57'/%3E%3Cpath fill='%23fff' d='M34.94 15v-.93c-.23-3-2.16-5.93-5.22-6.3-2.31-.28-3.39 1.45-2.4 3.84a.43.43 0 000 .05v.11a.14.14 0 010 .06.63.63 0 000 .09v.17c0 .08.06.18.09.29s0 0 0 .05a1 1 0 000 .17.64.64 0 010 .07c0 .18.1.38.14.6a.24.24 0 010 .08v.29c0 .03.06.33.08.5.37 2.58 0 6.27-4.73 7.37A12.74 12.74 0 0019.7 23c-.17-.65-.36-1.25-.55-1.77a5.16 5.16 0 002.05-2.56 11.26 11.26 0 01-.69 2.33c1.81-1.55 2-5.05 2-5.54a4.72 4.72 0 01.21 2c1.55-2.41-1.17-6-1.17-6a9.67 9.67 0 011.84 2.24C23 11.75 20.82 10 20.82 10c2.65-4 2.51-5.68 2.51-5.68-3.26-1.34-7 .73-7 .73a5.12 5.12 0 00-4-1.7 3.61 3.61 0 011.56 1 16.79 16.79 0 00-3.23-.74C10.41 3 9.4 1.16 6.22 1h-.58S5 3.64 5.61 5.19c-1.15.49-1.26.93-1.26.93l1.17-.25-.67 2.67a4.66 4.66 0 00-2.39 1.38 3 3 0 011.15-.07A5.11 5.11 0 001 13.05a1.32 1.32 0 01.87-.51c-1.47 2.69.49 3.76.49 3.76a3.8 3.8 0 010-.92 8.52 8.52 0 002.19 3.9 14.13 14.13 0 01-.24-1.59 5.46 5.46 0 001.93 2.7 6.25 6.25 0 01-.4-1.52 5.87 5.87 0 001.36 1.75c-.12.24-.24.47-.34.71a12 12 0 00-.7 2.13c0 .23-.09.45-.13.66a1.4 1.4 0 00-1-.31 1.4 1.4 0 00-1.09 1 3.1 3.1 0 000 1.57 9.48 9.48 0 001.8 3.92A2.92 2.92 0 004 30.06c-.56.16-1 .83-.72 1.34H22.6c.29-.51-.16-1.18-.72-1.34a2.92 2.92 0 00-1.71.24A9.48 9.48 0 0022 26.44 3.24 3.24 0 0022 25a15.89 15.89 0 012.87-.21 14.93 14.93 0 004.65-.69c3.72-1.24 5.38-5.25 5.38-9zm-12.49.42h-.05v-.07z'/%3E%3C/svg%3E")}.main-nav__secondary{display:none;color:#fff;padding:.2em 0;flex-wrap:wrap;flex-direction:column;justify-content:flex-start;align-items:flex-start;height:10em}@media all and (min-width:31.25em){.main-nav__secondary .nav-item-link{padding:.25em 1.1rem}.main-nav__secondary{padding:.2em .5em}}@media (-webkit-min-device-pixel-ratio:1.3),(min-resolution:124.8dpi){.main-nav__secondary{height:11em}}@media (min-width:800px){.secondary-nav{grid-row:auto;grid-column:auto}.main-nav__secondary{display:none;position:absolute;top:0;left:-80px;transform:translate(-50%,0);max-width:unset;background:#fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px;margin:0;padding:14px 20px 10px 10px;min-width:180px;color:#d33a2c;flex-direction:row;justify-content:space-between;align-items:center;height:auto}.main-nav__secondary:before{content:"";display:block;position:absolute;top:1px;left:50%;transform:translate(-50%,-100%);width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:15px solid #fff}}.nav-item-1,.nav-item-10,.nav-item-2,.nav-item-3,.nav-item-4,.nav-item-5,.nav-item-6,.nav-item-7,.nav-item-8,.nav-item-9{display:none}.main-nav__secondary .nav-item-1,.main-nav__secondary .nav-item-10,.main-nav__secondary .nav-item-2,.main-nav__secondary .nav-item-3,.main-nav__secondary .nav-item-4,.main-nav__secondary .nav-item-5,.main-nav__secondary .nav-item-6,.main-nav__secondary .nav-item-7,.main-nav__secondary .nav-item-8,.main-nav__secondary .nav-item-9{display:flex}@media (min-width:42.9375em){.nav-item-1{display:flex}.main-nav__secondary .nav-item-1{display:none}}@media (min-width:52.5em){.nav-item-2{display:flex}.main-nav__secondary .nav-item-2{display:none}}@media (min-width:56.5625em){.nav-item-3{display:flex}.main-nav__secondary .nav-item-3{display:none}}@media (min-width:70em){.nav-item-4{display:flex}.main-nav__secondary .nav-item-4{display:none}}@media (min-width:77.8125em){.nav-item-5{display:flex}.main-nav__secondary .nav-item-5{display:none}}@media (min-width:97.5em){.nav-item-6{display:flex}.main-nav__secondary .nav-item-6{display:none}}@media (min-width:108.4375em){.nav-item-7{display:flex}.main-nav__secondary .nav-item-7{display:none}}@media (min-width:120.625em){.nav-item-8{display:flex}.main-nav__secondary .nav-item-8{display:none}}@media (min-width:136.5625em){.nav-item-9{display:flex}.main-nav__secondary .nav-item-9{display:none}}@media (min-width:179.6875em){.nav-item-10{display:flex}.main-nav__secondary .nav-item-10{display:none}.main-nav-more-item{display:none}.main-nav__primary{justify-content:flex-start}.nav-item{padding:0 .65em}.header,.header.searchFocused{grid-template-columns:-webkit-min-content minmax(140px,-webkit-max-content) 0 minmax(250px,600px);grid-template-columns:min-content minmax(140px,max-content) 0 minmax(250px,600px)}}@media (max-width:480px){.header .search{grid-column:1/5;margin-top:.5em}.main-nav__primary{justify-content:flex-end}.main-nav-more-item{justify-content:flex-end}}.btn--text-shadow,a.btn.btn--text-shadow{text-shadow:1px 1px 1px rgba(0,0,0,.25)}.btn-wrapper{display:none}@media screen and (min-width:1100px){.btn-wrapper{display:block;padding:4px}}.btn,.toolbar-item{display:inline-block;border-radius:11px;text-align:center;color:#fff;text-decoration:none;border:none;font-weight:700;background:0 0;font-size:.9em;outline:0;background-color:#d33a2c;background-image:linear-gradient(to bottom,#f88040,#d33a2c)}.toolbar-item{transition:all .3s ease-in-out}.toolbar-item:active,.toolbar-item:focus{position:relative;top:3px}.btn{padding:.5em 1em}.btn.btn--green,.btn.btn--member{background-color:#41b14f;background-image:linear-gradient(#9ec14c,#41b14f);color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.25);transition:box-shadow .2s ease-in-out}.cta--green{display:block;padding:.5em;color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0;font-weight:700;text-decoration:none;border-radius:11px;text-align:center;font-size:.85em}.cta--green:hover{background-color:#c8f1e0;border:1px solid #a0dcc4}.cta--green:active,.cta--green:active:hover,.cta--green:focus,.cta--green:focus:hover{background-color:#137d54;color:#fff!important}a.btn--white{background:#fff;color:#267dcc;transition:color .1s ease-out}.btn--white--bordered:active,.btn--white--bordered:focus,.btn--white--bordered:hover,.toolbar-item,a.btn--white--bordered{border:1px solid #ddd}.btn span{color:#811d15;font-size:.8em;margin-left:5px;margin-top:.5em;line-height:1}.btn.btn--medium{font-size:calc(.9em + .1vw);padding:.75em 1em}@media (max-width:64em){pre{max-width:100%}}.input{border:none;display:block;color:#333;background-color:#fff;padding:.4em .75em;border-radius:5.5px;outline:0;font:inherit;margin:0;font-size:1.15rem;width:100%}.input::-webkit-input-placeholder{color:#666}.input:-ms-input-placeholder{color:#666}.input::-moz-placeholder{color:#000}.input::-ms-clear{display:none}.search .search-input{padding-left:calc(22px + 15px + 15px);background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgaGVpZ2h0PSIyNHB4IiB3aWR0aD0iMjRweCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIyMi4zMSIgeTE9IjIzLjYyIiB4Mj0iMy43MyIgeTI9IjMuMDUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNlOTM3MjIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmODZmMjUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+TWFnbmlmaWVyPC90aXRsZT48cGF0aCBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiIGQ9Ik0yMy4zMyAyMC4xbC00LjczLTQuNzRhMTAuMDYgMTAuMDYgMCAxIDAtMy4yMyAzLjIzbDQuNzQgNC43NGEyLjI5IDIuMjkgMCAxIDAgMy4yMi0zLjIzem0tMTcuNDgtNS44NGE1Ljk0IDUuOTQgMCAxIDEgOC40MiAwIDYgNiAwIDAgMS04LjQyIDB6Ii8+PC9zdmc+);background-repeat:no-repeat;background-size:22px auto;background-position:15px 45%;font-size:calc(1em + .1vw);border-radius:11px;padding-top:1rem;padding-bottom:1rem;font-weight:700;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}@media all and (max-width:550px){.search .search-input{min-height:54px}}.search-button{width:0;height:0;padding:0}.enhanced .search-button{display:none}.search-input-wrapper{position:relative}.search-clear-button{background:0 0;border:none;position:absolute;right:0;top:50%;transition:opacity .2s ease-out;transform:translate(-25%,-50%);opacity:0;padding:.5em}.search-clear-button.enabled{opacity:1}.search-results{background:var(--THEME_COLOR,#d33a2c);color:#fff}.search-results img{border-radius:11px;border:4px solid #fff;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);transition:all .2s ease-in-out}.search-results img:hover{box-shadow:0 0 3px -1px rgba(50,50,93,.25),0 4px 12px -6px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.search-results ol img{min-height:100px;height:auto}.logo{font-size:1em;line-height:0;width:3em;flex-basis:3em;flex-shrink:0;position:relative;z-index:0}@media all and (min-width:1450px){.logo{width:10.5em;flex-basis:10.5em}.logo img{transform:none}}.logo a{display:block;background:0 0;outline:0;padding:0;color:transparent;text-shadow:none}.logo a picture{display:block}.logo img{height:3.5em;transform:translate(0,15%)}.cart-active .back-to-top-wrapper{display:none}a.back-to-top{display:block;background:0 0;width:50px;height:50px;opacity:.7;text-shadow:none;border-radius:11px;padding:13px;transform-origin:bottom left;will-change:transform;transform:rotate(-11deg);transition:background-color .1s ease-out,transform .2s ease-out,opacity .1s ease-out;background-color:#666}@media all and (max-width:64em){a.back-to-top{opacity:.3}}a.back-to-top:focus,a.back-to-top:hover{background-color:#282634;opacity:1}a.back-to-top svg{display:block}.back-to-top-wrapper{width:50px;height:50px;display:none;position:fixed;bottom:20px;right:20px;z-index:9;will-change:transform;backface-visibility:hidden}.back-to-top-wrapper::before{display:block;content:"";height:90%;width:160%;position:absolute;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAASCAYAAABim40OAAACuElEQVRogc1XUZJjIQjEzN7/yMl8ucP0dkNjXrKh6pWAqERaICveR+vD96vo8cazOvoYX54NwOl6Z52ycc907E4C4a45DfKrwHH5vpPgd7aTYKNOyUvYKL7zRZG6WNRP5cne7pxrMwHLEbCqS3aDMglwpcvjMmTGVz4wejQ86lDfjZ0OeSY/az/VMaJ2XQZA/QQQChSKV99N8OpjvuHvUsGt+ErX2bI9q7Hy0dE580pnZ0R1uTi/eSVX2SLrbmKeAeQG34qIL2KDozo/kwosBv4Ouk5WOheMyrfK5t1Z8K++Ak9XVjK/ZRW8LnMgYDZQtpx5lBFoERxI//z40EFmQLgn2R27PZkP0fDVGmaj5thdoE7JEREPBR6nFJ1+CCAFgq9mVF91dhUcBRgGHMWjju0TZN7xi+nVGmaH8wG2IeaUHH+ibyqRTuxZCVGyAhgrZQi0KrtlYgHYAV1JXvET8IjfF7jnb4mPpMtg2TZbr0rpSnwQO9SzjLAauxV83Zj2j1FU9QtX0fQMfD1VM6zWn9D00agz3fOr866OwRF1mUe9EmaDL8d9HflF5jS/M8Yd1rHzsWzt87HMdr0D+sB6HixPXV/EyqH6QvCqBOE9qPXMTsmMqI3TMG9eNc7P9EJYYvK/KdUsZz0raZF06Hu+DCxBD+BZv1L1RKeAcXsZpnNtgtiEmEOeyRHx0zBvchtnHBWAUFa66q86ggltuj5HZU73pVdAcMHhAEX5xHys/Ge/j43IO/IvfZdxmM4FVDdOs1X1Twr3YWciTYPjZopXZILOxgWElVGIjs5V/Yw752QrxU/A1fGdL4yciz551U45qILa+fbsOmeutekud2I7BeJJhmPr3L07KlN0Y/eMzpmb2JzYntgfXfIr9nLWXgl0RuPLO1xzxdqPOPNK8FxJn+rXhP4HON5K31PHDhmjlm6fAAAAAElFTkSuQmCC);background-size:100% auto;background-repeat:no-repeat;top:89%;left:-30%;right:0;transition:all .1s ease-out;transform-origin:30% 50%;pointer-events:none}@media (min-height:600px){.back-to-top-wrapper{display:block}}label{max-width:100%}.form__field__input,input[type=email],input[type=password],input[type=text],textarea{background:#effaff;font-size:1em;border:1px solid #d2dfe4;transition:box-shadow .3s ease-in-out,color .3s ease-in-out;background-position:right 1.35em center;background-size:.25em .25em;background-repeat:no-repeat;margin-bottom:5px;border-radius:11px;padding:.9em 2em .7em 1.1rem;display:block;width:100%;outline:0;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.2)}.form__field__label{display:block;margin-bottom:.5em;cursor:pointer}input{border-color:#aaa}.sponsors ul{padding-left:0;text-align:center;list-style-image:none}.sponsors__native ul.bnnr-list li a{border-radius:11px;background-color:#fff;margin-bottom:3em;position:relative;top:0;padding:0;background-image:none;text-decoration-line:underline;text-decoration-color:#006fc6!important;text-decoration-thickness:1px;display:flex;flex-direction:column}.sponsors.sponsors-leaderboard ul li a,.sponsors.sponsors__lead ul li a,.sponsors__native ul.bnnr-list li a{box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03);transition:box-shadow .2s ease-in-out,top .1s ease-in-out;border-radius:11px}.sponsors.sponsors-leaderboard ul li a:hover,.sponsors.sponsors__lead ul li a:hover,.sponsors__native ul.bnnr-list li a:hover{box-shadow:0 1px 7px -5px rgba(50,50,93,.25),0 3px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03)}.sponsors.sponsors-leaderboard ul li a:active,.sponsors.sponsors-leaderboard ul li a:focus,.sponsors.sponsors__lead ul li a:active,.sponsors.sponsors__lead ul li a:focus,.sponsors__native ul.bnnr-list li a:active,.sponsors__native ul.bnnr-list li a:focus{box-shadow:inset 0 1px 7px -1px rgba(50,50,93,.25),inset 0 3px 6px -4px rgba(0,0,0,.3),inset 0 -6px 16px -6px rgba(0,0,0,.03);outline-offset:.75em;top:7px}.sponsors__native ul.bnnr-list li img{max-width:none;width:100%;height:auto;display:inherit}img::before{height:2.5em;display:block;top:2em;content:" ";width:100%;z-index:2;left:0}img::after{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij4KPHBhdGggZmlsbD0iIzc3NyIgZD0iTTI2IDI4aC0yMHYtNGw2LTEwIDguMjE5IDEwIDUuNzgxLTR2OHoiPjwvcGF0aD4KPHBhdGggZmlsbD0iIzc3NyIgZD0iTTI2IDE1YzAgMS42NTctMS4zNDMgMy0zIDNzLTMtMS4zNDMtMy0zIDEuMzQzLTMgMy0zYzEuNjU3IDAgMyAxLjM0MyAzIDN6Ij48L3BhdGg+CjxwYXRoIGZpbGw9IiM3NzciIGQ9Ik0yOC42ODEgNy4xNTljLTAuNjk0LTAuOTQ3LTEuNjYyLTIuMDUzLTIuNzI0LTMuMTE2cy0yLjE2OS0yLjAzMC0zLjExNi0yLjcyNGMtMS42MTItMS4xODItMi4zOTMtMS4zMTktMi44NDEtMS4zMTloLTE1LjVjLTEuMzc4IDAtMi41IDEuMTIxLTIuNSAyLjV2MjdjMCAxLjM3OCAxLjEyMiAyLjUgMi41IDIuNWgyM2MxLjM3OCAwIDIuNS0xLjEyMiAyLjUtMi41di0xOS41YzAtMC40NDgtMC4xMzctMS4yMy0xLjMxOS0yLjg0MXpNMjQuNTQzIDUuNDU3YzAuOTU5IDAuOTU5IDEuNzEyIDEuODI1IDIuMjY4IDIuNTQzaC00LjgxMXYtNC44MTFjMC43MTggMC41NTYgMS41ODQgMS4zMDkgMi41NDMgMi4yNjh6TTI4IDI5LjVjMCAwLjI3MS0wLjIyOSAwLjUtMC41IDAuNWgtMjNjLTAuMjcxIDAtMC41LTAuMjI5LTAuNS0wLjV2LTI3YzAtMC4yNzEgMC4yMjktMC41IDAuNS0wLjUgMCAwIDE1LjQ5OS0wIDE1LjUgMHY3YzAgMC41NTIgMC40NDggMSAxIDFoN3YxOS41eiI+PC9wYXRoPgo8L3N2Zz4K) " " attr(alt);font-size:.9em;display:block;color:#666;line-height:1.5;position:absolute;font-style:italic;z-index:2;top:calc(2em - 35px);text-align:center;width:104%;left:-2%;padding:2.25em 1em;text-shadow:none;background-color:#eee;border-radius:11px}@media screen and (min-width:40em){.author__desc{margin-left:1em}}.author__desc{font-size:.8em;position:relative;font-style:normal!important;color:#333;padding:0!important}.author__desc p{margin:1em 0}.author__desc .show-more-link{display:inline}.author__desc__title{color:#666;text-transform:uppercase;letter-spacing:2px;font-size:.9em;margin:0;font-weight:400}@media (max-width:40em){.author__desc{width:100%}}.article{padding-top:calc(.5em + 2vw)}.article__summary{font-size:1.05em}.c-garfield-the-cat .article__summary{position:initial}.author__desc p{font-size:.95em}.wf-loaded-stage2 .author__desc p{font-size:1em}.article__summary{align-self:center;margin-top:0;color:#666;position:relative;padding-bottom:1.5em;margin-bottom:.5em;border-bottom:3px solid #e5e5e5;font-size:1.05em;line-height:1.55em;font-style:italic}.wf-loaded-stage2 .article__summary{font-size:1.15em}@media all and (max-width:420px){.article__content{margin-top:0}}.article__content{line-height:1.5;padding:0!important}.article__content a{color:#006fc6}.article__content .btn{color:#fff}.drop-caps+p::first-line{font-weight:700;font-variant:all-petite-caps;text-transform:lowercase;letter-spacing:.5px;font-size:1.15em}.drop-caps{width:calc(96px + 1vw);height:calc(120px + 4vw);float:left;margin-right:1.5em;position:relative;left:calc(-1.3em - .5vw);top:.5vw}@media all and (min-width:500px){.drop-caps{width:150px;height:186px;min-width:100px;margin-left:0}}@media screen and (min-width:64em){.author__desc{margin-left:0}}.drop-caps img{max-width:100%}.drop-caps img:nth-of-type(2){position:absolute;bottom:0;right:-40px;width:75%}@media all and (min-height:700px){body.articlepage{overflow:initial}}.form__field__label--extra{display:inline}@media (max-width:64em){.form__field__label--extra{display:none}}.article-header{margin:0}@media all and (max-width:1099px){.article-header--meta{flex-wrap:nowrap;overflow-x:auto;scroll-snap-type:x;overflow-y:hidden}.article-header--meta::-webkit-scrollbar{display:none;width:0;background:0 0}.sponsors:not(.sponsors__lead):not(.sponsors-leaderboard):not(#sponsors-article-end):not(.sponsors__mobile){display:none}.c-garfield-aside--meta{display:none}.sponsors__mobile{display:block}.meta-box{margin:1.5em 0}.comment-count{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.article-header--comments a{color:#d33a2c;text-decoration:none;font-weight:700}.article-header--meta .article-header--meta-comments{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3EArtboard 29%3C/title%3E%3Cpath class='cls-1' d='M3.29,2.73a66.7,66.7,0,0,0,3.21,9.52l6.29,1.08L8.1,15.53c2.91,5.28,7,9.09,12.14,4.55L25,24.52l.57-.52-3.83-5.48c3.6-4.32,1.74-7.76-1.93-10.36L17,13.29l-.1-6.85A43.83,43.83,0,0,0,11,4L9,7.7,9,3.39c-2.2-.65-4.07-1.08-5.08-1.3A.52.52,0,0,0,3.29,2.73Z'/%3E%3C/svg%3E");background-size:auto .75em;background-repeat:no-repeat;background-position:left 45%;padding-left:1em}}.c-garfield-the-cat .article-header--meta{display:flex;align-items:flex-end;list-style:none;padding:0;margin:0 0 .95em;height:30px}.article-header--meta li{padding:0;margin:0;min-width:max-content}.article-header--meta li::before{display:none}.article-header--meta li::after{content:"/";font-size:1em;color:#a7a7a7;display:inline-block;margin:0 .25em}.article-header--meta li:last-of-type::after{display:none}.article-header--date{color:#585858;font-family:inherit;font-size:.95em}.article-header--comments{font-size:.9em}.article-header--updated{padding:0 .8rem;color:#137d54;background-color:#d6f3e7;border:1px solid #c6f2e0;border-radius:11px;font-weight:700;text-transform:initial;font-feature-settings:normal;font-variant:none;font-size:.9em;letter-spacing:0;min-width:fit-content;margin-right:7px}.meta-box{background:#f6f6f6;padding:.6em 1em;list-style:none;width:max-content;max-width:100%;border-radius:11px;font-size:.9em;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;gap:.5em 2em}.c-garfield-the-cat .meta-box--item{line-height:1.4;padding-left:1.5em;background-size:auto 1em;background-repeat:no-repeat;background-position:left 2px;margin-bottom:0}.meta-box li:last-child,.meta-box--item:last-child{margin-bottom:0}.meta-box--tags{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cpath fill='%23e93e32' class='cls-1' d='M12.78 22.74l1.35 1.35a2.09 2.09 0 003 0l8.12-8.15a2.09 2.09 0 000-3l-1.34-1.33zM14.71 2.51a2.09 2.09 0 00-1.52-.61l-10 .22L3 12.1a2.09 2.09 0 00.61 1.52l7.14 7.12L21.87 9.65zm-4.64 9.88a3.17 3.17 0 113.44-2.86 3.17 3.17 0 01-3.44 2.86z'/%3E%3C/svg%3E")}.meta-box--share{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cpath d='M126.16 359.66c148 0 228.93-122.61 228.93-228.94 0-3.48 0-6.94-.23-10.4A163.83 163.83 0 00395 78.68a160.93 160.93 0 01-46.21 12.66 80.82 80.82 0 0035.37-44.51 161.17 161.17 0 01-51.09 19.53A80.54 80.54 0 00196 139.74 228.42 228.42 0 0130.13 55.68 80.52 80.52 0 0055 163.09 80 80 0 0118.52 153v1a80.49 80.49 0 0064.55 78.87 80.37 80.37 0 01-36.33 1.38 80.55 80.55 0 0075.17 55.87A161.38 161.38 0 0122 324.67a163.54 163.54 0 01-19.16-1.16 227.73 227.73 0 00123.33 36.08' fill='%231da1f2'/%3E%3C/svg%3E")}.meta-box--published{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 28.84 26.6'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23e93e32%7D%3C/style%3E%3C/defs%3E%3Crect class='cls-1' x='8.25' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Crect class='cls-1' x='17.53' y='2.31' width='3.06' height='3.66' rx='1.03' ry='1.03'/%3E%3Cpath class='cls-1' d='M24.1 5.39h-2.56a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59h-4.28a2 2 0 01-2 1.59h-1a2 2 0 01-2-1.59H4.75a2.07 2.07 0 00-2.08 2.07v14.75a2.07 2.07 0 002.07 2.07H24.1a2.07 2.07 0 002.07-2.07V7.46a2.07 2.07 0 00-2.07-2.07zm-.29 16.15H5.23V8.45h18.58z'/%3E%3Cpath class='cls-1' d='M7.18 11.71h2.5v2.5h-2.5zM11.27 11.71h2.5v2.5h-2.5zM15.26 11.71h2.5v2.5h-2.5zM19.35 11.71h2.5v2.5h-2.5zM7.18 15.78h2.5v2.5h-2.5zM11.27 15.78h2.5v2.5h-2.5zM15.26 15.78h2.5v2.5h-2.5zM19.35 15.78h2.5v2.5h-2.5z'/%3E%3C/svg%3E")}.meta-box--author{background-image:url(/images/icons/author.svg)}code,pre{font-feature-settings:normal;color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Fira Code,Menlo,Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-variant-ligatures:none;word-wrap:normal;tab-size:4;hyphens:none}pre{padding:1rem;margin:.5rem 0;resize:both;max-width:100vw;color:#666;background:#fafafa;border:1px solid #eee;font-size:1em;border-radius:11px;min-width:250px;overflow:auto;box-shadow:0 6px 12px -17px rgba(50,50,93,.25),0 7px 6px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.03)}.code-toolbar{position:relative}li>.code-toolbar{margin-top:1em}.code-toolbar>.toolbar{position:absolute;top:.5em;right:.5em;opacity:0;transition:opacity .3s ease-in-out}.code-toolbar>.toolbar .toolbar-item{display:inline-block}code.diff-highlight{width:100%}a code{background:0;padding:0;text-decoration-line:underline}:not(pre)>code,code{background:#fff2ea;color:#333;font-size:calc(.75em + .1vw);line-height:calc(1.5em + .2vw);padding:0 .2725em;font-style:normal;display:inline-block}:not(pre)>code{white-space:normal}pre>code{line-height:calc(1.75rem + .2vw);background:0 0;white-space:break-spaces}pre[data-line]>code{white-space:pre}pre[data-line]>code>span{height:calc(1.75rem + .2vw);display:inline-block}.table,table{width:100%;border-collapse:collapse;margin-bottom:calc(2em + 2vw);clear:both}.tr,tr{border-bottom:4px solid #eee}.td,.th,td,th{padding:1em 1.5em;border:none;text-align:left}.scroll-pane{overflow-x:auto;scrollbar-color:#666 #201c29;-webkit-overflow-scrolling:touch}.scroll-pane::-webkit-scrollbar{height:.75em}.scroll-pane::-webkit-scrollbar-thumb{background:#b0b0b0;border-radius:11px}.scroll-pane table td{min-width:30vw}@media all and (min-width:650px){.scroll-pane table td{min-width:auto}}.layout-fixed{table-layout:fixed}.figure table{margin-bottom:0}.tablesaw td{line-height:165%;text-align:left;vertical-align:middle}.tablesaw td,.tablesaw th{padding:.8em 1em}tbody tr:nth-child(2n) td{background-color:#f7f7f7}.tablesaw th,table th{border-bottom:4px solid #ddd}@media screen and (max-width:767px){.tablesaw thead{display:none}.tablesaw tr{display:flex;flex-direction:column;margin-bottom:1.5em;width:100%;border-radius:11px;border:1px solid #eee}.tablesaw td:before{content:attr(data-label);display:table-cell;font-weight:700;padding:0 1em 0 0;text-align:right}.tablesaw td:last-child:after{content:'';position:absolute;left:0;right:0;bottom:0}}a.skip-main{left:-999px;position:absolute;top:auto;width:1px;height:1px;overflow:hidden;z-index:-999}a.skip-main:active,a.skip-main:focus{color:#d33a2c;background-color:#fff;left:auto;top:auto;width:auto;height:auto;overflow:auto;padding:.5em 1em;text-align:center;font-size:1.2em;z-index:999}.video-embed-container .video-embed-container--wrapper{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}.signature{margin:1.5em 0;font-size:.9em;color:silver;font-style:italic}.author .show-more-link{font-size:.9em;display:inline;color:#666;text-decoration-line:underline;text-decoration-color:currentColor;font-weight:400}.cookie-banner{background-color:#fff;border-radius:11px;position:fixed;width:calc(19em + 1vw);padding:1em 1.5em;font-size:1em;z-index:99;box-shadow:0 6px 40px rgba(0,0,0,.3);bottom:1em;left:1em}.cookie-banner p{font-size:.9em;margin-top:0}.cookie-banner__container{display:flex}.cookie-banner button{padding:.9em 1em}@media screen and (max-width:480px){.cookie-banner{right:0;left:0;width:100%;border-radius:0;bottom:0}.cookie-banner p{margin-top:1em}}@media screen and (max-width:380px){.cookie-banner p{margin-top:0}}.cookies--btn{width:100%}.mr5{margin-right:.5em}.mr0{margin-right:0!important}.btn--white{background:#fff;color:#267dcc;border:1px solid #fff}.btn--white--bordered{border:1px solid #ddd}.sponsors ul li{display:inline-block;margin-bottom:3em;font-size:.85em;padding:0;text-align:center;vertical-align:top;max-width:25rem;border-radius:11px;border:1px solid #eee;min-height:90px}.c-promo-box--ad.sponsors li{width:auto}.sponsors__native ul.bnnr-list li{border:0;width:100%;height:auto;max-width:85%;margin:0 0 2em auto}.sponsors__native ul.bnnr-list .ad__desc{padding:1em}.sponsors__native ul.bnnr-list li:only-child{padding-bottom:0}blockquote:not(.pull-quote){font-style:italic;border-left:11px solid #e6e4e1;padding:1em calc(1.5em + .5vw);color:#424242;margin-left:0;margin-right:0;font-size:1.05em;line-height:1.65em;letter-spacing:0;border-radius:11px;background:linear-gradient(to bottom right,#f5f2f0e3 0,#fff 100%)}blockquote:not(.pull-quote) p{margin:0}.btn--small.toolbar-item,.btn.btn--small{font-size:.9em;border-radius:6px;margin:0;padding:.4em 1em}.c-felix-the-cat a.btn{display:table;margin-top:1em;margin-bottom:1.5em}@media screen and (max-height:880px){.article__comments--notes{display:none}.article__comments__form__desc{margin-top:4em}}header.subnav__header{background-color:#fff;background-color:var(--headers-bg-color,#fff);padding:.2rem 0 0 0;z-index:1}.subnav__primary::-webkit-scrollbar{display:none;width:0;background:0 0}.subnav__tags li:first-child{padding-left:14px}.subnav__tags li:last-child{padding-right:.8em}.subnav__tags .subnav-item{margin-bottom:0}@media (min-width:740px){header.subnav__header{padding:.25rem 0 0 0;box-shadow:0 4px 20px 0 rgba(0,0,0,.12)}.subnav__tags li:first-child{padding-left:35px}}.subnav .nav-item-link{color:#d33a2c;text-shadow:none!important;font-weight:700;font-family:Mija;text-decoration-skip-ink:auto;text-decoration-thickness:1px;text-underline-offset:1px;border-radius:11px;font-size:1rem;background-color:#ffe7e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #fee0e0}.subnav .nav-item-link:hover{text-shadow:none;font-weight:700;font-family:Mija;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.subnav-item a:active,.subnav-item a:active:hover,.subnav-item a:focus,.subnav-item a:focus:hover{box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.12);background-color:#d33a2c;color:#fff!important;outline:0}.subnav-item--active a.nav-item-link,.subnav-item--active a.nav-item-link:hover{background-color:#d33a2c;color:#fff!important;border:1px solid #d33a2c}.subnav-item{display:flex;margin-right:9px;padding-left:3px}.subnav-item .nav-item-link{padding:2px 12px}.subnav a{background:0 0;font-weight:700;display:flex;align-items:center;text-decoration:none}.subnav__primary{padding:.25em 0;margin-top:.25em;margin-bottom:.35em;display:flex;position:relative;scroll-snap-type:x;scroll-padding:1rem;overflow-x:auto;scrollbar-width:none}.subnav-more-item__button{padding:.2em 1em;color:#d33a2c;border:1px solid #ddd;border-radius:11px;background:0 0;display:flex;align-items:center;justify-content:space-around;position:relative;font-size:.85em;min-width:max-content;transition:none}.hidden{display:none!important}.c-garfield-the-cat .subnav-item--green .nav-item-link{color:#137d54!important;background-color:#d6f3e7;transition:.2s border ease-in-out,.2s box-shadow ease-in-out;border:1px solid #c6f2e0}.c-garfield-the-cat .subnav-item--green .nav-item-link:hover{color:#137d54;background-color:#c8f1e0;border:1px solid #a0dcc4}.subnav .nav-item-link:hover{color:#d33a2c;text-shadow:none;font-weight:700;border-radius:11px;background-color:#ffe3e3;border:1px solid #faa4a4}.feature-panel__desc,.sponsors__desc{font-size:.75em;color:#666;padding-bottom:10px;top:-15px;position:relative}.feature-panel::before{position:absolute;left:0;transform:translate(0,-100%);top:-5px;content:"";border-bottom:8px solid #eee;width:100%}@media (min-width:1000px){.feature-panel::before{width:73%}}.feature-panel{position:relative;border-radius:11px;padding:1.25em;display:flex;flex-wrap:wrap;background-color:#f6f6f6}@media (min-width:1000px){.feature-panel{padding:2.5em}}.feature-panel-left-col,.feature-panel-right-col{flex-basis:100%;position:relative;padding:0;flex-shrink:0}.feature-panel-right-col{order:-1;display:flex;align-items:flex-start;margin-bottom:1em;justify-content:flex-start;margin-top:2em}@media (min-width:800px){.feature-panel-left-col{flex-basis:65%}.feature-panel-right-col{order:0;flex-basis:35%;margin:0;justify-content:center}}.feature-panel-description>:first-child{margin-top:0}.feature-panel-description>:last-child{margin-bottom:0}.feature-panel-image-link{position:relative;text-decoration:none;width:100%;max-width:210px;transition:scale,opacity .2s ease-out;padding-left:2.5em;background-image:none}.feature-panel-image{width:100%;max-width:14.375rem;margin:0 auto;display:block;transition:all .2s ease-out;will-change:transform;transform-origin:0 100%;transform:rotate(-11deg)}@media (min-width:1000px){.feature-panel-image-link{position:absolute;max-width:14.375rem;top:-90px;right:0}}.feature-panel-image-img{height:auto}.btn--large.toolbar-item,.btn.btn--large{font-size:calc(1em + .25vw);padding:.75em 1em}.btn .sr-only,.sr-only{position:absolute;display:inline-block;height:0;width:0;line-height:0;overflow:hidden}.c-garfield__nl{display:none}@media all and (min-width:1100px){.drop-caps{display:none}.l-author-bio{display:flex}.c-garfield__nl{display:block}.nl-box__form{display:flex;padding-bottom:7px;text-align:center;letter-spacing:-.5px;color:#fff;font-size:1.15em}.nl-box__desc{margin-top:10px;color:#666;font-size:80%;line-height:1.5em;text-align:center}.nl-box__form .nl-box__form--button,.nl-box__form .nl-box__form--email{flex-grow:1;flex-shrink:0;box-sizing:border-box;width:auto;margin:0;padding:.75em 1em;border:0;border-radius:11px;background:#fff;font-size:.95em}.nl-box__form--button:active,.nl-box__form--button:focus,input.nl-box__form--email:active,input.nl-box__form--email:focus{box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form--button:-ms-input-placeholder,.nl-box__form--email:-ms-input-placeholder{color:#777;font-style:italic}.nl-box__form--button::placeholder,.nl-box__form--email::placeholder{color:#777;font-style:italic}.nl-box__form .nl-box__form--button{transition:all .2s ease-in-out;color:#fff;background-color:#0168b8;font-family:Mija,-apple-system,Arial,BlinkMacSystemFont,"Roboto Slab","Droid Serif","Segoe UI",Ubuntu,Cantarell,Georgia,serif;font-weight:700;box-shadow:0 1px 1px rgba(0,0,0,.3);width:100%;border:0;border-left:1px solid #ddd;flex:2;border-top-left-radius:0;border-bottom-left-radius:0}.nl-box__form .nl-box__form--email{border-top-right-radius:0;border-bottom-right-radius:0;width:100%;flex:4}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus,.nl-box__form .nl-box__form--button:hover{cursor:pointer;color:#fff;background-color:#0168b8;border-color:#dadada;box-shadow:0 1px 1px rgba(0,0,0,.3)}.nl-box__form .nl-box__form--button:active,.nl-box__form .nl-box__form--button:focus{outline:0!important;text-shadow:1px 1px 1px rgba(0,0,0,.3);box-shadow:inset 0 3px 3px rgba(0,0,0,.3)}.nl-box__group{display:flex;box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025);border-radius:11px}.nl-box__wrapper{display:flex;flex-direction:column;justify-content:center}.nl-box__form form{width:100%}.nl-box__form .nl-box__group{margin:0}.nl-box{margin:1.5em 0;padding:1em 0;box-shadow:none;max-width:750px;justify-self:center}}.article__content a.anchor{color:#767676;text-decoration:none;transition:color .2s ease-in-out;padding:.35em .05em}.article__content a.anchor:active,.article__content a.anchor:focus,.article__content a.anchor:hover{color:#106fc6;background-image:linear-gradient(90deg,#006fc6 0,#2ca2d3 30%,#006fc6 85%,#006fc6 100%);background-size:100%;background-repeat:repeat;-webkit-background-clip:text;-webkit-text-fill-color:transparent;-moz-background-clip:text;-moz-text-fill-color:transparent;text-decoration:none}#promo-article-end,#sponsors-article-end,.article__comments,.main-footer{content-visibility:auto}.toc-components{box-shadow:0 9px 30px -5px rgba(50,50,83,.25),0 8px 8px -12px rgba(0,0,0,.2),0 -6px 16px -6px rgba(0,0,0,.03);border-radius:11px;padding:2em;background-color:#fff;margin:1.25em 0 3em 0;grid-column:3/13}@media screen and (min-width:500px){.toc-components{display:grid;grid-template-columns:1fr 1fr}}@media screen and (min-width:800px){.toc-components{padding:2em 3em}}.article__content .btn--white{background:#fff;color:#267dcc}
</style>


    

    
      <link rel="preload" href="/js/nav-v2.js" as="script" importance="high">
<link rel="preload" href="/fonts/MijaBold/Mija_Bold-webfont-subset-v2.woff2" as="font" type="font/woff2" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">
<link rel="preload" href="/fonts/ElenaWebRegular/ElenaWebRegular-subset-v2.woff2" as="font" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">

<link rel="preload" href="/fonts/ElenaWebBold/ElenaWebBold-subset-v2.woff2"  as="font" type="font/woff2" media="(min-width: 800px)" crossorigin importance="high" media="(prefers-reduced-data: no-preference)">

<link rel="preload" href="/fonts/ElenaWebRegularItalic/ElenaWebRegularItalic-subset-v2.woff2" as="font" media="(min-width: 800px)" type="font/woff2" crossorigin importance="low" media="(prefers-reduced-data: no-preference)">








<link rel="preload" href="/js/app.js" media="(min-width: 800px)" as="script" importance="low">
    

    
      
  
  

  
  

  

  

  <link rel="alternate" type="application/rss+xml" title="Smashing Magazine &amp;raquo; Feed" href="https://www.smashingmagazine.com/feed/" />

    

    <meta name="description" content="In every software-as-a-service solution, user billing and payments are key aspects in the sale of services rendered. Let’s learn about Stripe and how the REST API can be programmatically used in serverless functions to manage the billing for an application."/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://www.smashingmagazine.com/2021/12/billing-management-saas-stripe-azure-functions/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content='Billing Management For Your Next SaaS Idea Using Stripe And Azure Functions — Smashing Magazine' />
<meta property="og:description" content="In every software-as-a-service solution, user billing and payments are key aspects in the sale of services rendered. Let’s learn about Stripe and how the REST API can be programmatically used in serverless functions to manage the billing for an application." />
<meta property="og:url" content="https://www.smashingmagazine.com/2021/12/billing-management-saas-stripe-azure-functions/" />
<meta property="og:site_name" content="Smashing Magazine" />
<meta property="article:publisher" content="https://www.facebook.com/smashmag" />

	
	<meta property="article:author" content="https://www.smashingmagazine.com/author/nwani-victory/" />

<meta property="article:tag" content="API" /><meta property="article:tag" content="Apps" /><meta property="article:tag" content="Auth0" /><meta property="article:tag" content="React" /><meta property="article:tag" content="Tutorials" /><meta property="article:tag" content="Serverless" />
<meta property="article:section" content="General" />
<meta property="article:published_time" content="2021-12-17 13:30:00 &#43;0000 UTC" />
<meta property="article:modified_time" content=" 2021-12-17 13:30:00 &#43;0000 UTC" />
<meta property="og:updated_time" content="2021-12-17 13:30:00 &#43;0000 UTC" />
<meta property="og:image" content='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/346f3641-b7be-486d-8ac9-327ffe00e232/billing-management-saas-stripe-azure-functions.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="In every software-as-a-service solution, user billing and payments are key aspects in the sale of services rendered. Let’s learn about Stripe and how the REST API can be programmatically used in serverless functions to manage the billing for an application." />
<meta name="twitter:title" content='Billing Management For Your Next SaaS Idea Using Stripe And Azure Functions — Smashing Magazine' />
<meta name="twitter:site" content="@smashingmag" />
<meta name="twitter:image" content='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/346f3641-b7be-486d-8ac9-327ffe00e232/billing-management-saas-stripe-azure-functions.jpg' />

	
	

<meta property="DC.date.issued" content="2021-12-17 13:30:00 &#43;0000 UTC" />


    <meta name="theme-color" content="#d33a2c">
    <meta property="fb:pages" content="45576747489"/>
    
    <meta name="google-site-verification" content="X5sd8PEDJqYLSR98RKgSozn-0RNpknXFlGoA-UXe5K0" />

    <link rel="icon" href="/images/favicon/favicon.ico" />
    <link rel="icon" href="/images/favicon/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/images/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">

  </head>

  <body data-instant-whitelist class='no-js    articlepage' >

		
			
				



<div data-handler="PreLoad" id="top"></div>
<a href="#main" class="skip-main">Skip to main content</a>
<a href="#all-topics" class="skip-main">Jump to all topics</a>

  
    <a href="#article__start" class="skip-main">Start reading the article</a>
  

<a href="/articles/" class="skip-main">Jump to list of all articles</a>

<header class="global-header header">
    <div class="logo">
	<a href="/" title="&larr; Back to the homepage">
		<picture>
			<source
				media="(max-width: 1450px)" srcset="/images/logo.svg">
			<source
				media="(min-width: 1450px)"
				srcset="/images/logo--full.svg">
			<img
				src="/images/logo/logo.svg"
				loading="eager" decoding="async"
				alt="Smashing Magazine" />
		</picture>
	</a>
</div>

    <nav class="main-nav">
  <ul class="main-nav__primary">
  









<li class="nav-item nav-item-1 nav-item--active"><a data-instant class="nav-item-link" href="/articles/">Articles</a></li>
<li class="nav-item nav-item-2 "><a data-instant class="nav-item-link" href="/guides/">Guides</a></li>
<li class="nav-item nav-item-3 "><a data-instant class="nav-item-link" href="/printed-books/">Books</a></li>
<li class="nav-item nav-item-4 "><a data-instant class="nav-item-link" href="/events/">Workshops</a></li>
<li class="nav-item nav-item-5 "><a data-instant class="nav-item-link" href="/membership/">Membership</a></li>
<li class="nav-item nav-item-6 "><a data-instant class="nav-item-link" href="/jobs/">Job Board</a></li>
<li class="nav-item nav-item-7 "><a data-instant class="nav-item-link" href="/the-smashing-newsletter/">Newsletter</a></li>

<li class="nav-item nav-item-8"><a class="nav-item-link" href="https://podcast.smashingmagazine.com">Podcasts</a></li>
<li class="nav-item nav-item-9 "><a class="nav-item-link" href="/write-for-us/">Write for us</a></li>
<li class="nav-item nav-item-10"><a class="nav-item-link" href="mailto:advertising@smashingmagazine.com">Advertise with us</a></li>

    <li role="none" class="nav-item main-nav-more-item">
      <button class="main-nav-more-item__button" type="button" aria-haspopup="true" aria-expanded="false">
        <span class="menu-text--lg">More</span>
        <span class="menu-text--lg--close">Less</span>
        <span class="menu-text--sm">Menu</span>
        <span class="menu-text--sm--close">Less</span>
      </button>
    </li>
  </ul>
</nav>
<nav class="secondary-nav">
  <ul class="main-nav__secondary">
    









<li class="nav-item nav-item-1 nav-item--active"><a data-instant class="nav-item-link" href="/articles/">Articles</a></li>
<li class="nav-item nav-item-2 "><a data-instant class="nav-item-link" href="/guides/">Guides</a></li>
<li class="nav-item nav-item-3 "><a data-instant class="nav-item-link" href="/printed-books/">Books</a></li>
<li class="nav-item nav-item-4 "><a data-instant class="nav-item-link" href="/events/">Workshops</a></li>
<li class="nav-item nav-item-5 "><a data-instant class="nav-item-link" href="/membership/">Membership</a></li>
<li class="nav-item nav-item-6 "><a data-instant class="nav-item-link" href="/jobs/">Job Board</a></li>
<li class="nav-item nav-item-7 "><a data-instant class="nav-item-link" href="/the-smashing-newsletter/">Newsletter</a></li>

<li class="nav-item nav-item-8"><a class="nav-item-link" href="https://podcast.smashingmagazine.com">Podcasts</a></li>
<li class="nav-item nav-item-9 "><a class="nav-item-link" href="/write-for-us/">Write for us</a></li>
<li class="nav-item nav-item-10"><a class="nav-item-link" href="mailto:advertising@smashingmagazine.com">Advertise with us</a></li>

  </ul>
</nav>
    <div class="search">
        <form data-handler="Search" id="js-search-form" class="search-form" method="get" action="https://www.google.com/webhp?q=site:smashingmagazine.com">
        <div class="search-input-wrapper">
            <input  class="input search-input" inputmode="search" type="search" name="q" id="js-search-input" autocomplete="off" placeholder="Search articles..." aria-label="Search articles" />
            <input type="hidden" name="sitesearch" value="smashingmagazine.com" />
            <a id="js-search-clear-button" class="search-clear-button" tabindex="-1" role="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.35 15.36" width="16px" height="16px" tabind="-1">
                    <title>Clear Search</title>
                    <path fill="#e33b2a" d="M8.38 11.41c-.5-.5-.78-.52-1.33 0l-3.05 3.08c-1.18 1.18-1.7 1.18-3-.16s-1.18-2-.18-3l3.18-3.19a.69.69 0 0 0-.07-1.14l-3-3c-1-1-1.13-1.81 0-3s1.9-1.21 3.13 0l2.94 3a.66.66 0 0 0 1.11 0c.63-.65 2.49-2.51 3.28-3.35a1.46 1.46 0 0 1 2.3-.15c.24.24.47.42.89.84.86.86.94 1.57.05 2.46l-3.27 3.26c-.36.34-.52.58-.16.94l3.27 3.27c1.1 1.1 1.23 1.7.05 2.88l-.58.58a1.59 1.59 0 0 1-2.46-.21z" />
                </svg>
            </a>
        </div>
        <input type="submit" class="search-button btn" name="submit" value="Search" id="js-search-submit">
    </form>
</div>

</header>
<script src="/js/nav-v2.js" importance="high" defer></script>
<div>
  <div data-component="SearchResults" class="search-results" data-lite="true"></div>

  
</div>





	<header class="subnav__header" id="all-topics">
		<nav class="subnav" role="navigation">
  <ul class="subnav__primary subnav__tags flex">
  	


	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/accessibility/">Accessibility</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/css/">CSS</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/javascript/">JavaScript</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/react/">React</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/vue/">Vue</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/round-ups/">Round-Ups</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/ux/">UX</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/design/">Design</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/web-design/">Web Design</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/figma/">Figma</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/wallpapers/">Wallpapers</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/guides/">Guides</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/business/">Business</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/career/">Career</a></li>

	



<li class="subnav-item  "><a data-instant class="nav-item-link" href="/category/privacy/">Privacy</a></li>


    <li role="none" class="subnav-item subnav-more-item">
      <a class="subnav-more-item__button" href="/articles/">
        <span class="menu-text">Jump to all articles ↬</span>
      </a>
    </li>
  </ul>
</nav>
	</header>


			
		

    
    <main id="main" tabindex="-1">
      
  
  
  <script id="gotell" type="application/json">
    {"created_at":"2021-12-17T13:30:00Z"}
  </script>

  

  <article class="block article" role="main">
    <div class="container article-container">
      <div class="row">

        <div class="col-12 article__content" id="article__content">

          <div class="c-garfield-the-cat ">

            <div class="c-garfield-header">
              
              



<header class="article-header">
  <ul class="article-header--meta">
		
			<li class="article-header--meta-item article-header--meta-item__author">
				<a class="author-post__author-title" href="/author/nwani-victory/">Nwani Victory</a>
        
			</li>
		
    
			
			<li class="article-header--meta-item article-header--meta-item__date">
				
				<time class="article-header--date" datetime="2021-12-17">Dec 17, 2021</time></li>
    

    
    <li class="article-header--meta-item article-header--meta-comments">
      <span class="article-header--comments">
        <a href="#comments-billing-management-saas-stripe-azure-functions">
          
          <span data-component="CommentsCount" data-insert="true" data-thread="/2021/12/billing-management-saas-stripe-azure-functions/" data-article="articles/2021-12-17-billing-management-saas-stripe-azure-functions.md">0 <span class="comment-count">comments</span></span>
        </a>
      </span>
    </li>
    
  </ul>

  <h1 class="article-header--title">Billing Management For Your Next SaaS Idea Using Stripe And Azure Functions</h1>

  
</header>

            </div>

              
              


<ul class="meta-box meta-box--article">

  
  <li class="meta-box--item meta-box--published">
    24 min read
     </li>




  <li class="meta-box--item meta-box--tags">
    
    
      
        <a href="/category/api">API</a>,
      
    
      
        <a href="/category/apps">Apps</a>,
      
    
      
        <a href="/category/auth0">Auth0</a>,
      
    
      
        <a href="/category/react">React</a>,
      
    
      
        <a href="/category/tutorials">Tutorials</a>,
      
    
      
        <a href="/category/serverless">Serverless</a>
      
    
  </li>





  <li class="meta-box--item meta-box--share">
    Share on <a rel="nofollow" href="https://&#084;&#119;&#073;&#116;&#084;&#101;&#082;&#046;&#067;&#111;&#077;/intent/tweet?text=Billing%20Management%20For%20Your%20Next%20SaaS%20Idea%20Using%20Stripe%20And%20Azure%20Functions&url=https%3A%2F%2Fwww.smashingmagazine.com%2f2021%2f12%2fbilling-management-saas-stripe-azure-functions%2f&via=smashingmag">Twitter</a>,&nbsp;<a rel="nofollow" href="/api/ball?uri=//www.linkedin.com/shareArticle?url=https://www.smashingmagazine.com%2f2021%2f12%2fbilling-management-saas-stripe-azure-functions%2f&title=Billing%20Management%20For%20Your%20Next%20SaaS%20Idea%20Using%20Stripe%20And%20Azure%20Functions">LinkedIn</a>

  </li>


</ul>


            <div class="c-garfield-aside--meta">

              <div class="l-author-bio">

  <div class="mobw-40 mobh-40 w-48 h-48 rounded-3xl bio-image__large mb-5 mr-3">
    
    



<figure role="presentation" class="bio-image ">
  
  <a href="/author/nwani-victory/" class="bio-image-link">
  
  <div class="bio-image-wrapper">
		<picture>
			<source type="image/avif" srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAABoMAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAMgAAADIAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAABottZGF0EgAKChgd8fH7IEBA0IAy8gxEhACByiRSKEaYEQDt5M0Pd42FAJGykWCfRcYJsRGajlBQ2aoNg4o43Og/1&#43;FKBBd&#43;UVdoBNS45tijej5JqeYr2iIR5Y8eRzEj7sgggf4S31iOiy2zQwK&#43;RACxbHJ4KfCmSvEX&#43;FOvPwwYacfpr2yM8dNb6ejtu242&#43;MVwd8P1qdBXkW&#43;GOqY6xvvnI47KAR3X/NdQuY1Kg3ZnhoGpVfLiSp4SjLO0bXEosK2y1o/UW196yTnPkswgLVGXlwqw6mS8&#43;8COqKi&#43;3aRQ/S0sBg78Enev4x2rTQsj2VnGI0mt0IrlD6IVYlCQH8/6qTJww7RNtYzNbq71nmJF/hzOl&#43;UNF/B26&#43;iy71zqVOrdXu4IdWxFKkBAMd0K5FHqzL9&#43;or55a9KT/cwYKNC/w5kFZjfLqS6mkQCv&#43;haKeEeuzI6Pblp49wC6ayODPkiMEEy&#43;8HIgASPRYOZBvIv7CDKO&#43;WL4yYTpUxojhm09KemFv2VOI317XwO00kpbAbkV1xcsHXDNELQsepkk5hkDqq1dXCGn9VJVJkeZ4BfsqkMM8a0KpPkjMDT58ZbI5JrZ/S&#43;4S3H5jYOZWMXu&#43;ncs657j4kUzAgzvvIPWn5VQzVjFebirZA3HRgZNPcbvXVO0xccE/K6e4qiNKhnTTAyqruyUJtEkYzbBV0aY/SUkRZXcjLIAIVj6ag5S6UGulmSnqBoz0coOHeYcLciwauHUwxdXbEKN2zDTd1aqMGLaXHuKTqTIZyeOKgClHCrwYxzZQmq6B3mAM/IXhvR33J5pkBKo&#43;C15zlOPU6i0zavmIqVlljs/TM85sAWUZdQ7erHpHAc3i4eAhpPLn5dgdCfDvYJWtFqq4tmgv60gtTDj9pLz&#43;Gpm7&#43;MeYsLMGOk071RCUgND7sL7&#43;CnMsdpHJaeA9S0VKsSZzFhDe&#43;haj3Pda4s7b3yxG1OGKgwKSaDH4KITk6d70Mu6wOG3irbyPcu24eoLJKrT0&#43;hoaJYotgnk9EpEbGU8Ixb&#43;7VzP54f8QqlHxa/ogCZVUNAvKYJtvAW3rrAnJmf/W4VWnxYOHp5DG7utSW6zbXB0X5clmtnPULxaQAEpaDykmuwOyweCKEIOEJAhxXbbs8jTPVJW6tdse9dWzOz7prD52u08OBHL2y0s&#43;HwOgzr1joz6hdz7Q8JAmoqFzeaqKkuWi4cqzKuxnFE1fjrxxQ4xHWU4wtB8OGxKwhblNLyvKZycKjoNivcG7xKGscyVJ&#43;DbevvkXwQ0F/260zh7UgzYwW9tprU357e5R7HlFMuNy5qE6zU7Ni5j0vhhb5o6rAX2JMrCtrOo3Ah9Z1mHcLs3djnM4zpWO3kISh9REYcEcna6UFoIA9j0/hheNM2Y5ZIm5dDDjNn2QrRyGPOH&#43;rwBCSL4K8AQSWXcAVQBK&#43;wQ53hSAmsjGTIFIy4tkEWhl2gcSwSs3xdCjQxiHnq8omdQV/etaPm3ufz30zkZ&#43;VFSl0OTiWUrM5p08YtfU1rGxQgHKEXl1pvou9OoNE/k&#43;BsQ3jUtCHVDhE4GzPTUqXSWz0XDUsufLTlqJ8cev37z11y4r99xKShCPKHNoiLq&#43;cjXgGkFsWCx0raDqi7VESZe8zuu4kNc41yrp0E2gU8jrCqUSthoiS8HGkHnrrhmepbAgRLzGNpa7vo0nPDIaroAR74eTB&#43;1xnJVxZCVe5DoeDVkpi0y3jsJQNRs/BPOKL7Ug&#43;Adew6TKzQFs1f0mHxVQ5yU0rEImbrLiRFlBd7O8KJdMsSeZNv8/bN3No8LeGeOFFu4fpypqaoyBHTApK&#43;o98EOgeAeUKT5/scBKQ5bV&#43;90xtSxTpdjOGBco8di2ybLxsfOgo2wyN6&#43;6GAXcN89qIzuffchMz0Kue5OfEW0OtrYh&#43;HzacoL60n1dNY79&#43;4t&#43;qbyV18HzKz7Jw3fEYE3oYeLtBsy8RjYi5BNe1dAgSBHGA2iurgHFJ2w/HEIM0GOPsd7bfXFmpGs2UpjdUDv1R6mICR54A8zVdI4OBke3DRmcEk4drTpu7vDHiflR/NWbLcrTZe9Okwo30wwM78A73Le&#43;3ewI0v7E2o9c1xzGxZDPvit0oKNY3fMTeUdzDOWCXb5VDJLw84TAjUaXGXbUk0BRfwTvkhzgPG6mDK9Wh4yx/gdL&#43;gwCXQcs6KCp15VYr7HvyzCpb70X09xthjaG58u9xO6UymyNDq9vKgqtEs=">
			<img
				class="bio-image-image"
					src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e3c287fd-c3a0-4ff0-ab4d-5c206061d0e4/nwani-victory-200x200.jpg"
					loading="eager" decoding="async" importance="high" width="100" height="100"
					alt="Nwani Victory"
				/>
		</picture>
  </div>
  
  </a>
  
</figure>
  </div>

  <div class="l-author-bio-content author__desc" id="author__desc">
    <h4 class="author__desc__title">
    About The Author
    </h4>

    <p>
      
        Nwani Victory works remotely as a Fullstack developer from Lagos, Nigeria. After office hours, he doubles as a Cloud Engineer seeking ways to make Cloud …
      
      <a href="/author/nwani-victory/" class="show-more-link">More about
          Nwani&nbsp;↬</a>
    </p>
  </div>

</div>

              <div class="c-garfield__nl">
              <h4 class="h2">Email Newsletter</h4>
              <section class="nl-box__form"><form action="//smashingmagazine.us1.list-manage.com/subscribe/post?u=16b832d9ad4b28edf261f34df&amp;id=a1666656e0" method="post"><div class="nl-box__wrapper"><label for="mce-EMAIL-hp" class="sr-only">Your (smashing) email</label><div class="nl-box__group"><input type="email" name="EMAIL" class="nl-box__form--email" id="mce-EMAIL-hp" placeholder="Your email">
    <input type="submit" value="Meow!" name="subscribe" class="nl-box__form--button"></div></div></form></section><p class="nl-box__desc"><em><a href="https://www.smashingmagazine.com/the-smashing-newsletter/">Weekly tips on front-end &amp; UX</a>.<br />Trusted by 190.000 folks.</em></p>
              </div>

              



            </div>


            

							
							
								
							
								
							
								
							
								
							
								
									
								
							
								
							
								
									
								
							
								
									
								
							
								
							
							

							<div class="c-garfield-native-panel__right">
								
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
					

					<li>
						<a href="https://www.smashingconf.com/online-workshops/">
							
								<picture>
                  <source type="image/avif" srcset="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/45ff367f-728d-4c8b-9bea-681b7fcbb97c/friendly-workshops-03.avif" />
							
								<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/78a518bb-565a-4124-a9f7-1816dd3c4959/block03.png" loading="lazy" width="300" height="250" alt="Boost your skills online, with our friendly online workshops on front-end and design.">
							
								</picture>
							

            <em class="ad__desc">Boost your front-end skills online</em>
						
              </a>
					</li>

				
			
		</ul>
	</div>

							</div>
              <div class="c-garfield-native-panel">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
					

					<li>
						<a href="https://bit.ly/northwestern_uni_winter">
							
								<img src="https://res.cloudinary.com/indysigner/image/upload/v1601395101/ads/NWU_Oct.gif" loading="lazy" width="180" height="150" alt="In-demand skills with Northwestern online">
							

            <em class="ad__desc">Build in-demand skills like UX, UI and HCI — Northwestern online MS in Info. Design &amp; Strategy</em>
						
              </a>
					</li>

				
			
				
					

					<li>
						<a href="https://smashingconf.com/online-workshops/workshops/trine-falbe">
							
								<picture>
                  <source type="image/avif" srcset="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/1c3e642b-a9dc-419b-8adb-0654c1ea34fc/workshop-trinefalbe.avif" />
							
								<img src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/4a9d4829-c011-4085-a3d2-f6e3601ac69d/workshop-trinefalbe.png" loading="lazy" width="300" height="250" alt="Boost your skills online, with our friendly online workshops on front-end and design.">
							
								</picture>
							

            <em class="ad__desc">Ethical Design Masterclass</em>
						
              </a>
					</li>

				
			
		</ul>
	</div>

              </div>

							<div class="c-garfield-native-panel c-garfield-native-panel__below">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
			
				
			
		</ul>
	</div>

              </div>

							<div class="c-garfield-native-panel c-garfield-native-panel__end">
                
	<div class="c-promo-box c-promo-box--ad sponsors sponsors__native hidden" data-audience="non-subscriber" data-remove="true" data-rendered="true" data-amount="3">
		<ul class="bnnr-list">
			
				
			
				
			
		</ul>
	</div>

              </div>
            

            <div class="c-garfield-summary" id="article__start">
              <section aria-label="quick summary" class="article__summary">
                <span class="summary__heading">Quick summary&nbsp;↬ </span>
                
                  In every software-as-a-service solution, user billing and payments are key aspects in the sale of services rendered. Let’s learn about Stripe and how the REST API can be programmatically used in serverless functions to manage the billing for an application.
                
              </section>
            </div>

            

            
							



						

            

<p>To follow the steps in this tutorial, you should have the following:</p>

<ul>
<li>a Stripe account (you can <a href="https://dashboard.stripe.com/register">create</a> one for free and use the test mode to avoid incurring any charges while following the steps in this article);</li>
<li>a basic understanding of JavaScript and React;</li>
<li>an Auth0 account (you can <a href="https://auth0.com/signup?place=header&amp;type=button&amp;text=sign%20up">sign up</a> for a free one).</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>Delivering a solution to users through <a href="https://www.salesforce.com/in/saas/">software as a service</a> (Saas) often entails making use of cloud providers to host and deliver your entire infrastructure, usually comprising a back end and a front-end client. To offset the charges incurred from your cloud providers, a proper billing model for your users is needed in certain cases. In other scenarios, you might have products or services that you want to sell.</p>

<p>The two applications in the aforementioned scenarios share a functional requirement, which is the <strong>ability to process the user’s payment</strong>. To achieve this, the developer could leverage an external payment infrastructure, such as <a href="https://stripe.com/">Stripe</a>, <a href="https://squareup.com/us/en">Square</a>, or <a href="https://pay.amazon.com/">Amazon Pay</a>, among many others.</p>

<p>In this article, we’ll look at Stripe and use its <a href="https://stripe.com/docs/api">REST API</a> through Stripe’s <a href="https://www.npmjs.com/package/stripe">Node.js package</a> to build an API layer comprising Azure Functions apps that can be executed by an HTTP trigger from a web, mobile, or desktop client. The API layer and the endpoints accessible through each of the functions are depicted in the diagram below.</p>

<p><strong>Note</strong>: An Azure Functions app is an individual serverless function deployed and managed using the Azure Functions service. As depicted in the diagram below, a single project can comprise several Azure Functions apps.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="211"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png"
			
			sizes="100vw"
			alt="High-level diagram of the API comprising Azure Functions"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      High-level diagram of the API comprising Azure Functions. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f767369a-7560-4333-a849-5b035e151c0a/azure-functions-api-architecture.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>After building the API, we will clone an existing web application, built using React to display art paintings for sale. The APIs above will be used to retrieve the paintings as individual products, and the other endpoints will be used to handle payments.</p>

<p><strong>Note</strong>: While this article makes use of <a href="https://docs.microsoft.com/en-us/azure/azure-functions/">Azure Functions</a> as a provider of serverless functions, you can reuse the logic in your preferred provider, such as AWS’ <a href="https://aws.amazon.com/lambda/">Lambda</a> or Google’s <a href="https://cloud.google.com/functions">Cloud Functions</a>.</p>

<h2 id="stripe-objects">Stripe Objects</h2>

<p>Before going further, we should understand the Stripe objects that we’ll be creating in this article and what they represent. Below is a list of the five objects we will be working with:</p>

<ol>
<li><p><a href="https://stripe.com/docs/api/subscriptions">subscription</a><br />
A <code>subscription</code> object is created to charge users at intervals specified by the <code>billing_period</code> in the <code>price</code> object attached to the product. In this tutorial, we will have a product with a recurring price type, and we will subscribe users to it using the <code>subscription</code> object.</p></li>

<li><p><a href="https://stripe.com/docs/api/products">product</a><br />
A <code>product</code> object is used to represent a single item or service being sold, and the price of the product is stored in the <code>price</code> object. In this article, we will create a product using Stripe’s admin dashboard, then retrieve it through the Stripe API.</p></li>

<li><p><a href="https://stripe.com/docs/api/prices">price</a><br />
The <code>price</code> object is used to hold the price-related details of a product, such as currency, price, and billing cycle. In this article, we will again create the <code>price</code> object using Stripe’s admin dashboard, then retrieve it through the Stripe API.</p></li>

<li><p><a href="https://stripe.com/docs/api/payment_methods">payment method</a><br />
A <code>payment_method</code> object on Stripe is used to hold a customer’s payment details. In this tutorial, we will create a payment method on each transaction and use it together with a <code>payment_intent</code> object.</p></li>

<li><p><a href="https://stripe.com/docs/api/payment_intents/object">payment intent</a><br />
A <code>payment_intent</code> object is created to track the payment for a product from when it was created to when the payment is finally received. Each <code>payment_intent</code> object contains a <code>status</code> field to record the stage at which the payment is. In this article, we will use a <code>payment_intent</code> when a user purchases a product with a one-time pricing type.</p></li>
</ol>

<div data-audience="non-subscriber" data-remove="true" class="feature-panel-container"><span class="feature-panel__desc">More after jump! Continue reading below&nbsp;&darr;</span>
<aside class="feature-panel">
<div class="feature-panel-left-col">
<div class="feature-panel-description"><p>Meet <strong><a href="https://www.smashingmagazine.com/printed-books/touch-design-for-mobile-interfaces/">“Touch Design for Mobile Interfaces”</a></strong>, our <strong>brand-new Smashing Book</strong> on designing for mobile with proven, universal, human-centric guidelines. 400 pages, jam-packed with <strong>in-depth user research and guidelines</strong> you can apply immediately. Shipping starts early January 2022.</p>
<a data-instant href="https://www.smashingmagazine.com/printed-books/touch-design-for-mobile-interfaces/" class="btn btn--green btn--large">Jump to table of contents&nbsp;↬</a></div>
</div>
<div class="feature-panel-right-col"><a data-instant href="https://www.smashingmagazine.com/printed-books/touch-design-for-mobile-interfaces/" class="feature-panel-image-link">
<div class="feature-panel-image"><picture><source type="image/avif" srcSet="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/15b0d42f-1e44-4f9b-a533-4a98854939c7/touch-design-book-shop-opt.avif" />
<img
    loading="lazy"
    decoding="async"
    class="feature-panel-image-img"
    src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b14658fc-bb2d-41a6-8d1a-70eaaf1b8ec8/touch-design-book-shop-opt.png"
    alt="Feature Panel"
    width="479"
    height="696"
/>
</picture>
</div>
</a>
</div>
</aside>
</div>

<h2 id="creating-a-stripe-profile-for-your-business-idea">Creating a Stripe Profile for Your Business Idea</h2>

<p>The first step to using Stripe is to create an account with your email address and a password, using Stripe’s online dashboard.</p>

<p>Creating a Stripe account will launch the new business in test mode. We can liken test mode to your local development mode, because it allows you to create Stripe objects and test them using test credit cards provided by Stripe, without incurring charges.</p>

<p>As shown in the Stripe dashboard for the sample application below, you can fill in an account name and other details to customize your service.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="384"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png"
			
			sizes="100vw"
			alt="Stripe business admin dashboard"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Stripe business admin dashboard for a new account. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/60334aa4-eec9-4348-a2fe-7be921b3b687/stripe-business-dashboard.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>The image above shows the dashboard for our newly created account. Note the highlighted box in the image above, because the section contains the keys that you would use when programmatically working with the Stripe account either through the API or a supported client library.</p>

<p><strong>Note</strong>: Store the secret key in a secure notepad, because we will be using them when working with Stripe through a Node.js package from an Azure function in the next section.</p>

<h2 id="creating-sample-products-on-stripe">Creating Sample Products on Stripe</h2>

<p>To create a <code>product</code> object in Stripe, we can either use the REST API or Stripe’s web admin dashboard. In our case, the application’s owner is the sole manager of the products being sold; hence, we will use Stripe’s admin dashboard to create some sample products to be displayed in the demo application.</p>

<p><strong>Note:</strong> When using <a href="https://stripe.com/docs/api">Stripe’s Node.js package</a>, the <a href="https://stripe.com/docs/api/products/object"><code>product</code> method</a> is used to perform CRUD operations on a <code>product</code> object.</p>

<p>Using the top navigation bar in the Stripe dashboard’s home page, click the “Products” tab to navigate to the “Products” page. On the “Products” page, click the “Create Product” button at the top to create your first product in this Stripe business account.</p>

<p>On the page for creating a product, write “Gallery Subscription” in the “Name” input field. Write some brief text in the “Description” input field, to be used as the product information. And put “150” in the “Price” input field, to be used as the price of the new product, as shown below.</p>

<p><strong>Note:</strong> You can also click the “Image” box on the “Create Product” page to pick an image from your device to use as the image of the product.</p>

<p>The image below shows the input fields on the “Create Product” page for the sample product we’re creating.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png"
			
			sizes="100vw"
			alt="Stripe will create a product with a recurring price type"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Stripe will create a product with a recurring price type. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6936f070-35c8-4753-968c-3a5318aa478c/stripe-create-recurring-product.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>From the image above, we can see that the “Recurring” option in the “Pricing details” is selected. This means that when a user is subscribed to this product, Stripe will automatically attempt to renew the subscription for the product at the end of the “billing period” specified in the “Pricing details” secton shown above. Click the “<a href="https://stripe.com/docs/issuing/testing">Save Product</a>” button to save and continue.</p>

<p>After saving the product, you will be redirected back to the “Products” page. Click the “Create Product” button again to create a product, specifying different information for the “Name”, “Description”, and “Pricing details”. This time, select the “One time” box in the “Pricing details” to enable a user to purchase this item once without being charged again for it.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png"
			
			sizes="100vw"
			alt="Stripe will create a product with a one-time price type"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Stripe will create a product with a one-time price type. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7b75d37f-f6c3-41de-9773-823a2a20d7ba/stripe-create-onetime-product.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>The image above shows a new product being created with a “one-time” price type. Notice that the “Billing period” dropdown menu is removed when the “One time” option is selected, unlike the first product that we created with a “Recurring” pricing type.</p>

<p><strong>Note</strong>: You can continue to create more products with different names, descriptions, and pricing details, to populate the products in your Stripe business account.</p>

<h2 id="creating-azure-functions">Creating Azure Functions</h2>

<p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/">Azure Functions</a> are functions provided by <a href="https://azure.microsoft.com/en-us/">Azure</a> for managing serverless event-driven code that can be executed through a defined <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings?tabs=csharp">event trigger</a>. All Azure functions that we’ll create in this article will use the <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook">HTTP trigger</a>, which enables a function to be triggered by making an HTTP request to the function’s URL endpoint.</p>

<p>All programmatic operations with Stripe in this article will be done using Stripe’s <a href="https://www.npmjs.com/package/stripe">npm library</a> for a Node.js environment. Serverless functions are used in this article to cover use cases for small applications, using a <a href="https://jamstack.org/">JAMstack</a> architecture without a back-end service.</p>

<p>Azure functions can be developed either through the <a href="https://azure.microsoft.com/en-us/features/azure-portal/">Azure portal</a> or locally on your computer. All Azure functions in this article will be developed and executed locally using Azure’s <a href="https://github.com/Azure/azure-functions-core-tools#linux">Core Tools</a> command-line interface (CLI). Execute the command below to install Azure’s Core Tools globally on your computer using npm.</p>

<pre><code class="language-bash">npm i -g azure-functions-core-tools@3 --unsafe-perm true</code></pre>

<p>Next, run the commands below to create a new project directory to store the Azure Functions files and to bootstrap the Azure Functions project using the Core Tools CLI.</p>

<pre><code class="language-bash">
# Create a new directory
mkdir stripe-serverless-api

# Change into new directory
cd stripe-serverless-api

# Bootstrap Azure Functions project
func new --language='javascript' --worker-runtime='node' --template="HTTP trigger"
--name="products"
</code></pre>

<p>The commands above will create a <code>stripe-serverless-api</code> project directory on your computer. Also, using the parameters passed to the Core Tools CLI, we created an Azure Functions app with an HTTP trigger template using a Node.js runtime with JavaScript.</p>

<p>We can start our new Azure function from the CLI to listen to HTTP requests through localhost on port <code>5050</code>.</p>

<p><strong>Note</strong>: When using the HTTP trigger for an Azure Functions app, the function can be invoked via the function app’s name appended to the endpoint. An example of the products function app created above is <code>&lt;FUNCTIONS_ENDPOINT&gt;/products</code>.</p>

<pre><code class="language-bash">func start -p 5050</code></pre>

<p>Before we begin implementing the Azure functions, let’s install the two dependencies below, to be used within the Azure functions.</p>

<pre><code class="language-bash">yarn add stripe dotenv</code></pre>

<p>Stripe’s Node.js package, installed above, will be used to interact with the Stripe API. And <a href="https://www.npmjs.com/package/dotenv">dotenv</a> will be used to load Stripe’s secret credentials, used in the Azure functions that will be created next.</p>

<p>Create a <code>.env</code> file to store the Stripe credentials copied from the Stripe dashboard in the format below, replacing the placeholder in angled brackets with the appropriate value.</p>

<pre><code class="language-bash">// .env

STRIPE_SECRET_KEY=&lt;STRIPE_SECRET_KEY&gt;
</code></pre>

<p>The Stripe credentials stored above will be used to authenticate the Stripe package with the Stripe API. These credentials are sensitive and should be privately stored. To prevent them from getting pushed when the entire project is pushed to a GitHub repository, create a <code>.gitignore</code> file and add the <code>.env</code> file name.</p>

<pre><code class="language-bash">// .gitignore
.env</code></pre>

<p>At this point, the Azure Functions project is fully set up, and we can now proceed to build the individual apps within the project. We will proceed with implementing the logic in the Azure Functions apps, starting with the products function app.</p>

<h3 id="products-function">Products Function</h3>

<p>The purpose of this Azure function is to accept a <code>GET</code> HTTP request, and then respond with JSON data containing all products in the Stripe account.</p>

<p>Using your code editor, open the <code>index.js</code> file in the <code>products</code> directory that was made when you created the Azure Functions project. Add the code block below to the <code>index.js</code> file to retrieve all products created in Stripe.</p>

<pre><code class="language-javascript">require("dotenv").config();

const stripe = require("stripe")(process.env.STRIPE_SECRET_KEY);
const headers = {
  "Access-Control-Allow-Methods": "*",
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Headers": "Content-Type",
  "Content-Type": "application/json",
};

module.exports = async function (context, req) {
  try {
    const { data } = await stripe.products.list({});
    context.res = {
      headers,
      body: {
        data,
      },
    };
  } catch (e) {
    context.res = {
      headers,
      body: e,
    };
  }
};
</code></pre>

<p>The exported function in the code block above uses the <a href="https://stripe.com/docs/api/products/list"><code>list</code></a> method to list all products created in the account belonging to the <code>STRIPE_SECRET_KEY</code> variable being used.</p>

<p>Once the promise from the asynchronous <code>list</code> method is resolved, the data array is destructured and sent back (alongside some request headers) as the response to the request, by setting the body within the <a href="https://stripe.com/docs/api/products/list"><code>context</code></a> object.</p>

<p>To test the function implemented above, open a new CLI and execute the command below, which makes a <code>GET</code> HTTP request, using <a href="https://curl.se">cURL</a>, to the Azure functions running in a separate terminal.</p>

<pre><code class="language-bash">curl http://localhost:4040/api/customer</code></pre>

<p>After executing the command above, a JSON response will be returned to your console containing the previously created products.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png"
			
			sizes="100vw"
			alt="JSON data response prints out the console from an HTTP request to the products function"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      JSON data response prints out the console from an HTTP request to the products function. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9684cd28-874a-4905-b9e7-058c35dd73dd/1-product-function-response.png'>Large preview</a>)
    </figcaption>
  
</figure>

<h3 id="price-function">Price Function</h3>

<p>As shown in the fields returned from the products function above, the price details of a product are not included in the <code>product</code> object. To get the price details of a product, we need to fetch the <code>price</code> object associated with the product. This will be the job of the price function, because each time it is executed, it will return the <code>price</code> object associated with a product.</p>

<p>To create a new Azure Functions app, copy the the existing <code>products</code> folder, and paste it in the same directory as a duplicate. Then, rename the duplicated folder to <code>price</code>.</p>

<p>Using your code editor, open the <code>index.js</code> file in the new <code>price</code> directory, and replace the existing function with the contents of the code block below, which implements the price function:</p>

<pre><code class="language-javascript">require("dotenv").config();

const stripe = require("stripe")(process.env.STRIPE_SECRET_KEY);
const headers = {
  "Access-Control-Allow-Methods": "*",
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Headers": "Content-Type",
  "Content-Type": "application/json",
};

module.exports = async function (context, req) {
  const { product } = req.query;

  try {
    const { data } = await stripe.prices.list({
      product,
    });
    context.res = {
      headers,
      body: {
        data : data[0],
      },
    };
  } catch (e) {
    context.res = {
      headers,
      body: e,
    };
  }
};
</code></pre>

<p>The <code>price</code> function app above accepts a <code>GET</code> HTTP request that contains a product in the <code>query</code> parameter with the value of a product’s ID. The <a href="https://stripe.com/docs/api/prices/list"><code>list</code></a> method on the <code>price</code> object is used to retrieve prices within a Stripe account. The <code>product</code> parameter passed to the <code>list</code> method restricts the prices retrieved to the ones associated with the <code>product</code> object whose ID has been passed to the <code>list</code> method.</p>

<p>Once the promise from the <code>list</code> method is resolved, the data array from the <code>list</code> method is destructured, and only the first object within the data array is sent back as the request response.</p>

<p><strong>Note:</strong> Only the first object from the data array is sent back because we want to display only one price entity. A product may have several <code>price</code> objects attached it, but for this application, we will use only one.</p>

<p>To test the function implemented above, execute the command below, which sends a <code>GET</code> HTTP request containing a product ID in a <code>request</code> parameter to the Azure functions running in a separate terminal.</p>

<p><strong>Note:</strong> You can find the ID of a product in the Stripe dashboard. Navigate to the “Products” page, and click a product to view its details. In the details displayed, you will find the ID of the product.</p>

<pre><code class="language-bash">curl http://localhost:4040/api/price?product="prod_JudY3VFuma4zj7"</code></pre>  

<p>Once you execute the command above, a JSON response will be returned to your console with an object containing the <code>price</code> object of a product.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png"
			
			sizes="100vw"
			alt="JSON data response prints out the console from an HTTP request to the price function"
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      JSON data response prints out the console from an HTTP request to the price function. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6ca10bc6-dc5c-401b-b757-a8867150f162/price-function-response.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>From the response shown in the sample above, we can see the price details of the product, including the currency, type, and recurring data.</p>

<h3 id="purchase-function">Purchase Function</h3>

<p>The purchase function app will be used either to make a one-time purchase of a product or to subscribe a user to a product. Either of these two operations involves charging a user via their bank card.</p>

<p>To create a new function app within the Azure Functions project, copy either the existing products or the <code>price</code> folder, and paste it in the same directory as a duplicate. Then, rename the duplicated folder to <code>purchase</code>.</p>

<p>In your code editor, add the contents of the code block below in the <code>index.js</code> file, which will handle a <code>POST</code> request to create either a subscription or a one-time purchase for a user.</p>

<pre><code class="language-javascript">// ./purchase/index.js
require("dotenv").config();

const stripe = require("stripe")(process.env.STRIPE_SECRET_KEY);
const headers = {
  "Access-Control-Allow-Methods": "*",
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Headers": "Content-Type",
  "Content-Type": "application/json",
};

module.exports = async function (context, req) {
  const {
    number,
    purchaseCurrency,
    cvc,
    exp_month,
    exp_year,
    purchaseAmount,
    email,
    purchaseType,
    priceEntityId,
  } = req.body;

  try {
    // Create a payment method for user using the card details
    const { id: paymentID } = await stripe.paymentMethods.create({
      type: "card",
      card: {
        number,
        cvc,
        exp_year,
        exp_month,
      },
    });

    const { id: customerID } = await stripe.customers.create({
      email,
      description: "Artwork gallery customer",
      payment_method: paymentID,
    });

    await stripe.paymentMethods.attach(paymentID, { customer: customerID });
    if (purchaseType === "recurring") {
      const subscriptionData = await stripe.subscriptions.create({
        customer: customerID,
        default_payment_method: paymentID,
        items: [
          {
            price: priceEntityId,
          },
        ],
      });
      context.res = {
        headers,
        body: {
          message: "SUBSCRIPTION CREATED",
          userStripeId: customerID,
          userSubscriptionId: subscriptionData.id,
        },
      };
    } else {
      const { id: paymentIntentId } = await stripe.paymentIntents.create({
        amount: purchaseAmount,
        currency: purchaseCurrency || "usd",
        customer: customerID,
        payment_method: paymentID,
      });
      const { amount_received } = await stripe.paymentIntents.confirm(
        paymentIntentId,
        {
          payment_method: paymentID,
        }
      );
      context.res = {
        headers,
        body: {
          message: `PAYMENT OF ${amount_received} RECIEVED`,
        },
      };
    }
  } catch (e) {
    context.res = {
      status: 500,
      body: e,
    };
  }
};
</code></pre>

<p>The function app in the code block above uses the Stripe package to create either a one-time payment or a subscription for a user based on the <code>purchaseType</code> value gotten from the request body. Here is a run down of what happened above:</p>

<ul>
<li>First, a <code>payment_method</code> entity is created using the credit card number, name, CVC, and expiration details, destructured from the data sent in the function’s request body.</li>
<li>Next, a customer is created in Stripe using the <code>email</code> value sent in the request body, a description, and the payment method previously created. The <code>customer</code> object is also attached to the <code>payment_method</code> entity by using the <code>attach</code> method and specifying the <code>payment_method</code> ID string that was returned when the payment method was created, and specifying a <code>customer</code> option with the customer ID that was returned when the <code>customer</code> entity was created.</li>
<li>The last part of the function handler has an <code>if</code> condition that evaluates the <code>purchaseType</code> value sent in the request body. If the <code>purchaseType</code> value is recurring, then the <code>subscription</code> entity would contain the customer ID returned from the <code>customer</code> entity, a <code>default_payment_method</code> with the value of the <code>payment_method</code> ID returned from the <code>payment</code> entity, and an <code>items</code> array with a single <code>item</code> object containing the ID of a <code>price</code> entity.</li>
</ul>

<div class="sponsors__lead-place"></div>

<h2 id="expanding-the-demo-web-application">Expanding the Demo Web Application</h2>

<p>A web application built using <a href="https://reactjs.org/">React</a> will serve as the web client that directly accesses the Azure Functions apps that we’ve built up to now. As explained earlier, the interface has already been built, and the data has been retrieved from a mock JSON file. We will only make some minimal changes and add the HTTP requests to use the Azure Functions endpoint.</p>

<p>Clone the web application from the <a href="https://github.com/vickywane/stripe-art-app.git">GitHub repository</a> by executing the Git command below from your local CLI:</p>

<pre><code class="language-bash">git clone https://github.com/vickywane/stripe-art-app.git</code></pre>

<p>Next, move into the cloned application’s directory and install the dependencies listed in the <code>package.json</code> file.</p>

<pre><code class="language-bash"># change directory
cd stripe-art-app

# install dependencies
yarn install</code></pre>

<p>Once the dependencies have been installed, run the <code>yarn start</code> command from your CLI to view the home page of the web application from your web browser at <code>http://localhost:3000</code>.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png"
			
			sizes="100vw"
			alt="Home page of the gallery application displaying artwork from local mock.json file."
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Home page of the gallery application displaying artwork from local mock.json file. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9469cf13-1a2d-413f-9a79-1f6fa17399cf/gallery-application-home-page.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>Before diving into the code base of the web application, let’s note a few things about the existing structure of the application.</p>

<p>First, user management, including authentication and the storing of a user’s personal data from the application, was implemented using <a href="https://auth0.com/">Auth0</a> through the use of the <a href="https://www.npmjs.com/package/@auth0/auth0-react">auth0-react</a> SDK for React applications.</p>

<p>To use Auth0 in the cloned application, we need to supply the credentials from an Auth0 <a href="https://auth0.com/docs/quickstart/spa">single-page application</a> type in the <code>.env</code> file within the web application folder in the format shown below.</p>

<p><strong>Note</strong>: See the <a href="https://auth0.com/docs/quickstart/spa/react">Auth0 quickstart guide</a> for more details on how to get started with a single-page application.</p>

<pre><code class="language-bash"># ./env

REACT_APP_AUTHO_DOMAIN=&lt;AUTH0_DOMAIN&gt;
REACT_APP_AUTHO_SECRET_KEY=&lt;AUTH0_SECRET&gt;
REACT_APP_FUNCTION_ENDPOINT="http://localhost:5050/api"</code></pre>

<p>The <code>REACT_APP_FUNCTION_ENDPOINT</code> defined in the <code>.env</code> file above will be accessed with the application components to make HTTP requests to the running function apps. Currently, the Azure Functions apps are being served locally on your computer’s localhost, but this will change to a live URL when the function apps are deployed to Azure Functions.</p>

<p>The second thing to note is that the data of art products displayed on the home page are static, retrieved from a JSON file in the <code>data</code> directory.</p>

<p>In this part of this article, we will extend the functionalities above as follows:</p>

<ul>
<li><strong>Home page</strong><br />
We will refactor the home page to fetch and display products created in Stripe using the <code>GET</code> products Azure function created previously, and we will discard the <code>mock.json</code> file containing the prototype art products.</li>
<li><strong>Checkout page</strong><br />
We will build a new checkout page for users who want to purchase either an art print or a subscription with their credit card.</li>
</ul>

<h2 id="home-page">Home Page</h2>

<p>The home page is displayed for all users, whether authenticated or unauthenticated, and it displays a list of all available artwork products, using a child <code>artworkCard</code> component exported from the <code>artworkCard.js</code> file.</p>

<p>We need to make a few changes to this component, because we want the button in the <code>artworkCard</code> component to prompt the user to purchase an artwork. Modify the existing <code>artworkCard.js</code> file in the <code>components</code> directory with the highlighted portions of the code block below.</p>

<div class="break-out">
 <pre data-line="7-19,36-54"><code class="language-javascript">// ./src/components/artworkCard.js

import { navigate } from "@reach/router";
import React, { useState, useEffect } from "react";

const ArtworkCard = ({ name, description, img_uri, productId }) =&gt; {
  const [priceData, setPriceData] = useState({});

  useEffect(() =&gt; {
    (async () =&gt; await fetchPrice())();
  }, []);

  const fetchPrice = async () =&gt; {
    const res = await fetch(
      '${process.env.REACT_APP_FUNCTION_ENDPOINT}/price?product=${productId}'
    );
    const { data } = await res.json();
    setPriceData(data);
  };

  return (
    &lt;div className="artwork-card"&gt;
      &lt;div
        className="card-top"
        style={{
          backgroundImage: 'url(${img_uri})',
        }}
      &gt;&lt;/div&gt;
      &lt;div className="artwork-details"&gt;
        &lt;div className={"align-center"}&gt;
          &lt;h5&gt; {name} &lt;/h5&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div style={{ justifyContent: "space-between" }} className="flex"&gt;
          &lt;div className="align-center"&gt;
          &lt;p&gt; {'$${priceData.unit_amount}'} &lt;/p&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;button
              className="btn"
              onClick={() =&gt;
                navigate('/checkout/${productId}', {
                  state: {
                    name,
                    productId,
                    priceEntityId: priceData.id,
                    price: priceData.unit_amount,
                    purchaseType: priceData.type,
                  },
                })
              }
            &gt;
              Purchase
            &lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;br /&gt;
        &lt;p&gt; {description} &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default ArtworkCard;</code></pre>
</div>

<p>In the highlighted parts of the file above, we introduced a <a href="https://reactjs.org/docs/hooks-effect.html"><code>useEffect</code></a> hook to make an HTTP request to the price function app to retrieve the <code>price</code> object attached to the product being displayed in the card. Once the promise from the <code>fetch</code> method is resolved, the data stream is further converted to JSON and stored in the component’s local state.</p>

<p>A button labelled <code>Purchase</code> was also added to the <code>artworkCard</code> component. When clicked, it navigates the user to the checkout page, where the user can input their bank card details to purchase the product.</p>

<p>In your code editor, open the <code>Home.js</code> file in the <code>pages</code> directory, and modify it with the highlighted portions of the code block below, which will fetch all available products in Stripe through the products function app and then display them.</p>

<div class="break-out">
 <pre data-line="11-20,43-52"><code class="language-javascript"># ./src/pages/home.js

import React, { useState, useEffect } from "react";
import Header from "../components/header";
import "../App.css";
import Banner from "../components/banner";
import ArtworkCard from "../components/artworkCard";

const Home = () =&gt; {

  const [artworks, setArtworks] = useState([]);
  useEffect(() =&gt; {
    (async () =&gt; await fetchArtworks())();
  }, []);

  const fetchArtworks = async () =&gt; {
    const res = await fetch(`${process.env.REACT_APP_FUNCTION_ENDPOINT}/products`);
    const { data } = await res.json();
    setArtworks(data);
  };

  return (
    &lt;div style={{ backgroundColor: "#F3F6FC", height: "100vh" }}&gt;
      &lt;Header /&gt;
      &lt;Banner /&gt;
      &lt;br /&gt;
      &lt;br /&gt;
      &lt;div className="page-padding"&gt;
        &lt;div style={{}}&gt;
          &lt;div className="flex"&gt;
            &lt;div className="align-center"&gt;
              &lt;h4&gt; My Rated Art Paints &lt;/h4&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p&gt;
            Every artist dips his brush in his own soul, &lt;br /&gt;
            and paints his own nature into his pictures.
          &lt;/p&gt;
        &lt;/div&gt;
        &lt;br /&gt;
        &lt;div&gt;
          &lt;ul className="artwork-list"&gt;
            {artworks.map(({ id, name, img_uri, images, description }) =&gt; (
              &lt;li key={id}&gt;
                &lt;ArtworkCard
                  productId={id}
                  description={description}
                  img_uri={images[0]}
                  name={name}
                /&gt;
              &lt;/li&gt;
            ))}
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Home;
</code></pre>
</div>

<p>In the code block above, a <code>GET</code> request is made as soon as the component is loaded in a <code>useEffect</code> hook using the browser’s fetch API. The stream response from the request made is further converted into JSON format, and the data is stored in the local component state for further use.</p>

<p>With this change, the <code>data.json</code> file is no longer being used. Also, when you view the web application in your browser, you will find the products created in Stripe displayed in a grid, as shown below:</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png"
			
			sizes="100vw"
			alt="Home page in gallery application displaying all products fetched from Stripe."
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Home page in gallery application displaying all products fetched from Stripe. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/09d59b9f-4892-41f4-9900-3d244e442456/store-app-home-page.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>From the details shown in the image above, you will notice that the products displayed on the home page were the ones created at the beginning of this article.</p>

<div class="sponsors__lead-place"></div>

<h2 id="checkout-page">Checkout Page</h2>

<p>Create a <code>checkout.js</code> file in the <code>pages</code> directory. This new file will contain the component that will be displayed to collect the user’s credit card details, after they are routed to <code>/checkout</code> upon clicking the “Purchase” button to purchase an art print.</p>

<p>Add the contents of the code block below to create the checkout component that contains the form elements to collect the credit card details:</p>

<pre><code class="language-javascript"># ./src/pages/checkout.js

import React, { useState } from "react";
import { useAuth0 } from "@auth0/auth0-react";
import Header from "../components/header";
import "../App.css";

const Checkout = (props) =&gt; {
  const { purchaseType, productId, priceEntityId, name, price } =
    props.location.state;

  const [cardNumber, setCardNumber] = useState("");
  const [cardName, setCardName] = useState("");
  const [cvc, setcvc] = useState("");
  const [cardExpiryMonth, setCardExpiryMonth] = useState("");
  const [cardExpiryYear, setCardExpiryYear] = useState("");
  const [loading, setLoading] = useState(false);
  const [paymentSuccess, setPaymentSuccess] = useState(false);
  const { user } = useAuth0();

  const makePayment = async () =&gt; {
    setLoading(true);
    try {
      const res = await fetch(
        `${process.env.REACT_APP_FUNCTION_ENDPOINT}/purchase`,
        {
          method: "POST",
          body: JSON.stringify({
            number: cardNumber,
            exp_month: cardExpiryMonth,
            exp_year: cardExpiryYear,
            purchaseAmount: price,
            purchaseType,
            priceEntityId,
            cvc,
            email: user.email,
          }),
        }
      );

      if (res.status === 200) {
        const { paymentId } = await res.json();
        await fetch(`${process.env.REACT_APP_FUNCTION_ENDPOINT}/billing-data`, {
          method: "POST",
          body: JSON.stringify({
            productId,
            userId: user.sub,
            paymentId,
          }),
        });
        setPaymentSuccess(true);
      }
    } catch (e) {
      console.log(e);
    } finally {
      setLoading(false);
    }
  };

  return (
    &lt;div
      style={{
        height: "100vh",
        background: "#F3F6FC",
      }}
    &gt;
      &lt;Header /&gt;
      &lt;div
        className="product-page-padding"
        style={{
          height: window.innerHeight,
          display: "flex",
          justifyContent: "center",
          alignItems: "center",
        }}
      &gt;
        &lt;div className="align-center"&gt;
          &lt;div className="payment-card"&gt;
            &lt;h5 className="align-center"&gt;
              &lt;b&gt;{name} Checkout &lt;/b&gt;
            &lt;/h5&gt;
            &lt;p&gt;
              &lt;b&gt;Total Price:&lt;/b&gt; {`$${price}`}
            &lt;/p&gt;
            &lt;p&gt;
              &lt;b&gt; Payment Type: &lt;/b&gt; {purchaseType.toUpperCase()}
            &lt;/p&gt;
            &lt;hr /&gt;
            {!paymentSuccess ? (
              &lt;form
                onSubmit={(e) =&gt; {
                  e.preventDefault();
                  makePayment();
                }}
              &gt;
                &lt;h5&gt; Payment Details &lt;/h5&gt;
                &lt;br /&gt;
                &lt;div className="input-container"&gt;
                  &lt;label id="name"&gt; Cardholder Name &lt;/label&gt;
                  &lt;input
                    value={cardName}
                    onChange={(e) =&gt; setCardName(e.target.value)}
                    className="payment-input"
                    placeholder="Bank Cardholder Name"
                    type="text"
                  /&gt;
                &lt;/div&gt;
                &lt;br /&gt;
                &lt;div className="input-container"&gt;
                  &lt;label id="name"&gt; Card Number &lt;/label&gt;
                  &lt;input
                    value={cardNumber}
                    onChange={(e) =&gt; setCardNumber(e.target.value)}
                    className="payment-input"
                    placeholder="Bank Card Numbers"
                    type="number"
                  /&gt;
                &lt;/div&gt;
                &lt;br /&gt;
                &lt;div className="input-container"&gt;
                  &lt;label id="name"&gt; Card CVC &lt;/label&gt;
                  &lt;input
                    value={cvc}
                    onChange={(e) =&gt; setcvc(e.target.value)}
                    className="payment-input"
                    placeholder="Bank Card CVC"
                    type="text"
                  /&gt;
                &lt;/div&gt;
                &lt;br /&gt;
                &lt;div className="input-container"&gt;
                  &lt;label id="name"&gt; Card Expiry Month &lt;/label&gt;
                  &lt;input
                    value={cardExpiryMonth}
                    onChange={(e) =&gt; setCardExpiryMonth(e.target.value)}
                    className="payment-input"
                    placeholder="Bank Card Expiry Month"
                    type="text"
                  /&gt;
                &lt;/div&gt;
                &lt;br /&gt;
                &lt;div className="input-container"&gt;
                  &lt;label id="name"&gt; Card Expiry Year &lt;/label&gt;
                  &lt;input
                    value={cardExpiryYear}
                    onChange={(e) =&gt; setCardExpiryYear(e.target.value)}
                    className="payment-input"
                    placeholder="Bank Card Expiry Year"
                    type="text"
                  /&gt;
                &lt;/div&gt;
                &lt;br /&gt;
                &lt;button
                  disabled={loading}
                  style={{ width: "100%" }}
                  onClick={(e) =&gt; {
                    e.preventDefault();
                    makePayment();
                  }}
                  className="btn"
                &gt;
                  {!loading ? "Confirm" : "Confirming"} My Payment
                &lt;/button&gt;
              &lt;/form&gt;
            ) : (
              &lt;div&gt;
                &lt;br /&gt;
                &lt;h5 className="align-center"&gt;
                  Your {`$${price}`} purchase of {name} was successfull{" "}
                &lt;/h5&gt;
                &lt;br /&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Checkout;
</code></pre>

<p>As described earlier, the form component above contains four input fields for the user to type in their name, number, expiration and CVC details. These details are further stored in the component’s local state, and, upon a click of the “Confirm my payment” button, the stored credit card details are used to purchase the product.</p>

<p>Of particular interest in the checkout component above is the <code>makePayment</code> function, because it handles the functionality of the checkout page. When executed, the <code>makePayment</code> function sends a <code>POST</code> request containing the credit card details in its request body using fetch to the <code>/purchase</code> cloud function. Once the first <code>POST</code> request is resolved successfully, with a <code>200</code> status code indicating a successful payment, a new <code>POST</code> request is made to the <code>/billing-data</code> cloud function to store the details of the purchased product.</p>

<p><strong>Note:</strong> As explained when we were designing the <code>productCard</code> component, the purchased product details stored in Auth0 will be used to identify products purchased by the user from the home page.</p>

<p>To test this component, we will fill the input fields with the details of one of the <a href="https://stripe.com/docs/testing#cards">basic test cards</a> provided by Stripe for applications still in test mode, and then click the “Confirm payment” button, as shown below:</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png"
			
			sizes="100vw"
			alt="Checkout page in the gallery application displaying fields for inputting a credit card to purchase the selected product."
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Checkout page in the gallery application displaying fields for inputting a credit card to purchase the selected product. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/9db6345e-71ac-4f14-a04b-5c3982f940a1/checkout-page.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p><strong>Note:</strong> The credit card used in the image above is one of the <a href="https://stripe.com/docs/testing#cards">basic test cards</a> provided by Stripe and not a real credit card. Stripe accounts in test mode must use one of the basic test cards.</p>

<p>Once the “Confirm my payment” button in the checkout card is clicked, a payment for the product is made from the credit card provided, and the checkout card interface is changed to reflect the successful response.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png"
			
			sizes="100vw"
			alt="Checkout page in the gallery application displaying a successful payment response."
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Checkout page in the gallery application displaying a successful payment response. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fbb7ad85-7bc1-4b43-85e7-679e1fe13322/payment-successful-response.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>Going to the “Reports” section of your Stripe admin dashboard, you will see a reflection of the last payment made when the gallery subscription was created on the checkout page above.</p>














<figure class="
  
  
  ">
  
    <a href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png">
    
    <img
      loading="lazy"
      decoding="async"
      importance="low"
			width="800"
			height="450"
			
			srcset="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png 400w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_800/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png 800w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1200/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png 1200w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_1600/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png 1600w,
			        https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_2000/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png 2000w"
			src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_80/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png"
			
			sizes="100vw"
			alt="Home page in Stripe admin dashboard displays $150 as gross volume for the day from last transaction."
		/>
    
    </a>
  

  
    <figcaption class="op-vertical-bottom">
      Home page in Stripe admin dashboard displays $150 as gross volume for the day from last transaction. (<a href='https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/069f5c27-d12b-40a2-80b2-886249640ac4/stripe-dashboard-statistics.png'>Large preview</a>)
    </figcaption>
  
</figure>

<p>From the charts shown in the image above, taken from the test Stripe card used in this tutorial, you will see that a gross volume of $150.00 was attained once the gallery subscription was created.</p>

<p><strong>Note</strong>: The image also shows statistics from test operations that were made on the Stripe account while this article was being developed.</p>

<p>At this point, we have fully set up the entire payment flow. You can repeat the process of creating a product through the Stripe dashboard and purchasing it using the React application or any other client that consumes Azure Functions.</p>

<h2 id="summary">Summary</h2>

<p>Congratulations on completing this hands-on tutorial.</p>

<p>By going through the steps in this tutorial, we have worked with Stripe, Azure Functions, and React. We started by building an API layer that uses the Stripe API through a Node.js package. Then, we moved on to consuming the Azure Functions app endpoints from a web application, using the function app to retrieve products and make payments for the products.</p>

<h3 id="references">References</h3>

<ul>
<li><a href="https://stripe.com/docs">Documentation</a>, Stripe</li>
<li><a href="https://www.npmjs.com/package/@auth0/auth0-react">auth0-react</a> (SDK for React single-page applications)</li>
<li><a href="https://auth0.com">Auth0</a></li>
</ul>

<div class="signature">
  <img src="https://www.smashingmagazine.com/images/logo/logo--red.png" alt="Smashing Editorial" width="35" height="46" loading="lazy" decoding="async" />
  <span>(ks, vf, yk, al, il)</span>
</div>



						
							<div class="category__related--alt">
								<span class="italic grey mrs mbm block">Explore more on</span>
								<nav class="subnav ib" role="navigation">
									<ul class="subnav__primary subnav__subtags flex flex-wrap">
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/api">API</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/apps">Apps</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/auth0">Auth0</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/react">React</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/tutorials">Tutorials</a></li>
									
											<li class="subnav-item subnav-item--green"><a class="nav-item-link" href="/category/serverless">Serverless</a></li>
									
									</ul>
								</nav>
							</div>
      			

          </div>

        </div>

      </div>


      <link href="/css/non-critical-article-manual-felix.css" media="print" onload="this.media='all'" rel="stylesheet">
      <link href="/css/article-dark-mode-v3.css" media="(prefers-color-scheme: dark)" rel="stylesheet">
      
  <div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience="non-subscriber" data-remove="true" data-amount="1"></div>


      
  <div class="c-promo-box sponsors sponsors__lead hidden sponsors__external" data-audience="non-subscriber" data-remove="true" data-amount="1"></div>



      
        <div id="sponsors-article-end" data-impression="true" class="c-promo-box c-promo-box--ad c-promo-box--wide sponsors sponsors__row hidden sponsors__external" data-audience="non-subscriber" data-remove="true"></div>
      

			
				<div id="promo-article-end hidden">
					
						

<div class="book-grid">
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="/the-smashing-newsletter/"><img loading="lazy" width="202" height="266" src="/images/smashing-cat/cat-in-a-chair--tall.svg" alt="Smashing Newsletter"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="/the-smashing-newsletter/">
				Smashing Newsletter
			</a>
		</h4>
		<p class="book--featured__desc">
			Tips on front-end &amp; UX, delivered weekly in your inbox. Just the things you can actually use.
		</p>
	</figcaption>
</figure>



		
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="https://www.smashingconf.com/online-workshops/"><img loading="lazy" width="202" height="266" src="https://www.smashingmagazine.com/images/smashing-cat/cat-explorer.svg" alt="Front-End &amp; UX Workshops, Online"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="https://www.smashingconf.com/online-workshops/">
				Front-End &amp; UX Workshops, Online
			</a>
		</h4>
		<p class="book--featured__desc">
			With practical takeaways, live sessions, video recordings and a friendly Q&amp;A.
		</p>
	</figcaption>
</figure>



		
	
		
			
<figure class="book--featured">
	<div class="book--featured__image">
		<a data-instant href="/printed-books/"><img loading="lazy" width="202" height="266" src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2f2c6d6-4e85-449a-99f5-58bd053bc846/typescript-shop-cover-opt.png" alt="TypeScript in 50 Lessons"/></a>
	</div>
	<figcaption>
		<h4 class="book--featured__title">
			<a href="/printed-books/">
				TypeScript in 50 Lessons
			</a>
		</h4>
		<p class="book--featured__desc">
			Everything TypeScript, with code walkthroughs and examples. And other printed books.
		</p>
	</figcaption>
</figure>



		
	
</div>



					
				</div>
			

      
        <div data-component="CommentsArea" id="comments-billing-management-saas-stripe-azure-functions" data-thread="/2021/12/billing-management-saas-stripe-azure-functions/" data-date="2021-12-17 13:30:00 &#43;0000 UTC"></div>

      

    </div>
  </article>

    </main>

		
			
				
				
				<div data-component="CookieBanner"></div>

  <div id="cart" class="cart-wrapper" data-component="MiniCart"></div>


<footer class="main-footer">
  <div class="container">

    <div class="col-12">
      <div class="footer__topics open">
    <h4 class="footer__topics__title" id="topics">Browse All Smashing Magazine Topics</h4>
    <ul class="footer__topics__list">
      
        <li class="footer__topics__item">
            <a href="/category/accessibility">Accessibility</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/android">Android</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/animation">Animation</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/apps">Apps</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/css">CSS</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design">Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design-patterns">Design Patterns</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/design-systems">Design Systems</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/e-commerce">E-Commerce</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/freebies">Freebies</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/graphics">Graphics</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/html">HTML</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/illustrator">Illustrator</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/inspiration">Inspiration</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/ios">iOS</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/javascript">JavaScript</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/mobile">Mobile</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/pattern-libraries">Pattern Libraries</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/performance">Performance</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/photoshop">Photoshop</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/plugins">Plugins</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/react">React</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/responsive-design">Responsive Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/service-workers">Service Workers</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/sketch">Sketch</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/typography">Typography</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/ui">UI</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/usability">Usability</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/user-experience">User Experience</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/wallpapers">Wallpapers</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/web-design">Web Design</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/wordpress">WordPress</a>
        </li>
      
        <li class="footer__topics__item">
            <a href="/category/workflow">Workflow</a>
        </li>
      
    </ul>
</div>

    </div>

    <div class="col-12">
      <div class="footer__notes">
        <p>With a commitment to quality content for the design community.</p>
        <p>Founded by Vitaly Friedman and Sven Lennartz. <span class="lining-figures">2006–2022</span>.</p>
        <p>Smashing is proudly running on <a href="https://www.netlify.com/?utm_source=link&utm_medium=parter&utm_campaign=sm-footer">Netlify</a>.</p>
        <p>Fonts by <a href="http://latinotype.com/">Latinotype</a>.</p>
      </div>

      <ul class="footer__links">
        <li>&#9998; <a href="/write-for-us/">Write for us</a>
        </li>
        <li>
          <a href="/contact/">Contact us</a>
        </li>
        <li>
          <a href="/about/">About us (Impressum)</a>
        </li>
        <li>
          <a href="/privacy-policy/">Privacy policy</a>
        </li>
        <li>
          <a href="/auth/">Membership login</a>
        </li>
        <li>
            <a href="/delivery-times/">Delivery times</a>
          </li>
            <li>
          <a href="mailto:&#097;&#100;&#118;&#101;&#114;&#116;&#105;&#115;&#105;&#110;&#103;&#064;&#115;&#109;&#097;&#115;&#104;&#105;&#110;&#103;&#109;&#097;&#103;&#097;&#122;&#105;&#110;&#101;&#046;&#099;&#111;&#109;?subject=Let’s talk about advertising">Advertise</a>
        </li>
      </ul>
    </div>
  </div>

  
<div class="back-to-top-wrapper" id="back_top">
	<a href="#top" data-scroll="#top" class="back-to-top" title="Back to top">
		<svg viewBox="0 0 100 100" width="25px" height="25px" tabindex="-1" role="img" aria-labelledby="title">
			<title id="title">Back to top</title>
			<path d="M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z" transform="translate(0 0) rotate(90 50 50)" fill="#fff" stroke="#fff"></path>
			<image src="/images/back-to-top-arrow.png" alt="Back to top arrow" xlink:href="" width="100%" height="100%"></image>
		</svg>
	</a>
</div>


</footer>

<div data-handler="PostLoad"></div>

<script src="/js/app.js" defer importance="low"></script>
<script>
  
  window.PRERELEASES = {}
  window.PAGE_TYPE = "articles"
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
    
  
    
			
			
      	window.PRERELEASES['touch-design-for-mobile-interfaces'] = '2022-01-11T13:00:00.000Z';
			
    
  

  if ('serviceWorker' in navigator && !localStorage.getItem('no_sw')) {
    window.addEventListener('load', function() {
      navigator.serviceWorker
        .register('/sw.js')
        .then(() => {
          window.caches
            .open('smashing-mag-offline-articles')
            .then(cache => cache.keys())
            .then(keys => {
              var savedOffline = document.querySelector('.meta-box--article')
              if (savedOffline && keys && keys.length) {
                var currentPageSaved = keys.find(key =>  key.url === window.location.href)
              }

              var list = document.querySelector('.offline-articles-list')
              if (list && keys && keys.length) {
                var listItem = document.createElement('li')

                var innerList = keys
                  .map(function(key) {
                    return (
                      '<li><a href="' + key.url + '">' + key.url + '</a></li>'
                    )
                  })
                  .join('')
                listItem.innerHTML =
                  'Recently viewed aritcles: <ul>' + innerList + '</ul>'
                list.appendChild(listItem)
              }
            })
        })
        .catch(function(err) {
          console.error('Failed to load service worker')
        })
    })
  }
</script>

<div hidden>


</div>

<link rel="stylesheet" href="/css/print.css" type="text/css" media="print" />



<script class="js-additional" importance="low" src="/js/instantpage.js" type="module" defer></script>
<script class="js-additional" importance="low" src="/js/ga.js" defer></script>
<script class="js-additional" importance="low" src="https://www.google-analytics.com/analytics.js" defer></script>
<script class="js-additional" importance="low" type="module" src="/js/web-vitals-tracking.js"></script>

			
		

  </body>
</html>