

<!doctype html>
<html lang="en-US">
<head data-template-path="https://hacks.mozilla.org/wp-content/themes/Hax">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="w2ocEMd5yV9IsGCjhq-7ls67r4VH-Ob6oWdiZpqjN8U">

  
  <meta name="title" content="Improving the Storage Access API in Firefox – Mozilla Hacks - the Web developer blog">

    <meta property="og:site_name" content="Mozilla Hacks &#8211; the Web developer blog">
  <meta property="og:url" content="https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox">
  <meta property="og:title" content="Improving the Storage Access API in Firefox – Mozilla Hacks - the Web developer blog">
  <meta property="og:description" content="Before we roll out State Partitioning for all Firefox users, we intend to make a few improvements to the Storage Access API.">
  <meta property="og:image" content="https://hacks.mozilla.org/files/2022/02/example-cross-site-state.png">
  <meta property="og:image:width" content="635">
  <meta property="og:image:height" content="440">

    <meta property="twitter:title" content="Improving the Storage Access API in Firefox – Mozilla Hacks - the Web developer blog">
  <meta property="twitter:description" content="Before we roll out State Partitioning for all Firefox users, we intend to make a few improvements to the Storage Access API.">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="https://hacks.mozilla.org/files/2022/02/example-cross-site-state.png">
  <meta name="twitter:site" content="@mozhacks">

  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/style.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.6.0/styles/solarized_light.min.css">

  <script type="text/javascript">
    window.hacks = {};
    // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
    var removeUtms  =   function(){
        var l = window.location;
        if( l.hash.indexOf( "utm" ) != -1 ){
            var anchor = l.hash.match(/#(?!utm)[^&]+/);
            anchor  =   anchor? anchor[0]: '';
            if(!anchor && window.history.replaceState){
                history.replaceState({},'', l.pathname + l.search);
            } else {
                l.hash = anchor;
            }
        };
    };

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35433268-8'],
              ['_setAllowAnchor', true]);
    _gaq.push (['_gat._anonymizeIp']);
    _gaq.push(['_trackPageview']);
    _gaq.push( removeUtms );
    (function(d, k) {
      var ga = d.createElement(k); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = d.getElementsByTagName(k)[0]; s.parentNode.insertBefore(ga, s);
    })(document, 'script');
  </script>

  <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />
<meta name="blog-name" content="Mozilla Hacks - the Web developer blog" />
<link rel="alternate" hreflang="en" href="https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/" />
<link rel="alternate" hreflang="x-default" href="https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/" />

	<!-- This site is optimized with the Yoast SEO plugin v17.5 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Improving the Storage Access API in Firefox - Mozilla Hacks - the Web developer blog</title>
	<meta name="description" content="Before we roll out State Partitioning for all Firefox users, we intend to make a few improvements to the Storage Access API." />
	<link rel="canonical" href="https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="Benjamin VanderSloot" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="6 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://hacks.mozilla.org/#website","url":"https://hacks.mozilla.org/","name":"Mozilla Hacks - the Web developer blog","description":"hacks.mozilla.org","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://hacks.mozilla.org/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/#primaryimage","inLanguage":"en-US","url":"https://hacks.mozilla.org/files/2022/02/example-cross-site-state.png","contentUrl":"https://hacks.mozilla.org/files/2022/02/example-cross-site-state.png","width":635,"height":440},{"@type":"WebPage","@id":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/#webpage","url":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/","name":"Improving the Storage Access API in Firefox - Mozilla Hacks - the Web developer blog","isPartOf":{"@id":"https://hacks.mozilla.org/#website"},"primaryImageOfPage":{"@id":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/#primaryimage"},"datePublished":"2022-02-08T16:59:21+00:00","dateModified":"2022-02-08T16:59:21+00:00","author":{"@id":"https://hacks.mozilla.org/#/schema/person/80f5a61c7f736316ce72fb10f8495389"},"description":"Before we roll out\u00a0State Partitioning\u00a0for all Firefox users, we intend to make a few improvements to the\u00a0Storage Access API.","breadcrumb":{"@id":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/"]}]},{"@type":"BreadcrumbList","@id":"https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://hacks.mozilla.org/"},{"@type":"ListItem","position":2,"name":"Articles","item":"https://hacks.mozilla.org/articles/"},{"@type":"ListItem","position":3,"name":"Improving the Storage Access API in Firefox"}]},{"@type":"Person","@id":"https://hacks.mozilla.org/#/schema/person/80f5a61c7f736316ce72fb10f8495389","name":"Benjamin VanderSloot","image":{"@type":"ImageObject","@id":"https://hacks.mozilla.org/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/903832f17a97919b41873befa924b21d?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/903832f17a97919b41873befa924b21d?s=96&d=mm&r=g","caption":"Benjamin VanderSloot"},"url":"https://hacks.mozilla.org/author/bvanderslootmozilla-com/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='//blog.mozilla.org' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Feed" href="https://hacks.mozilla.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Comments Feed" href="https://hacks.mozilla.org/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Improving the Storage Access API in Firefox Comments Feed" href="https://hacks.mozilla.org/2022/02/improving-the-storage-access-api-in-firefox/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/css/dist/block-library/style.min.css?ver=5.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='mediaelement-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.16' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=5.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='wpml-legacy-post-translations-0-css'  href='//blog.mozilla.org/hacks/wp-content/plugins/sitepress-multilingual-cms/templates/language-switchers/legacy-post-translations/style.min.css?ver=1' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/js/fc-checkcomment.js?ver=5.8.3' id='checkcomments-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/js/analytics.js?ver=5.8.3' id='analytics-js'></script>
<link rel="https://api.w.org/" href="https://hacks.mozilla.org/wp-json/" /><link rel="alternate" type="application/json" href="https://hacks.mozilla.org/wp-json/wp/v2/posts/47599" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hacks.mozilla.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hacks.mozilla.org/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://hacks.mozilla.org/?p=47599' />
<link rel="alternate" type="application/json+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2022%2F02%2Fimproving-the-storage-access-api-in-firefox%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2022%2F02%2Fimproving-the-storage-access-api-in-firefox%2F&#038;format=xml" />
<meta name="generator" content="WPML ver:4.5.1 stt:59,61,1,2;" />
<link rel="shortcut icon" type="image/x-icon" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" /><style>#wpadminbar #wp-admin-bar-site-name>.ab-item:before { content: none !important;}li#wp-admin-bar-site-name a { background: url( "https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" ) left center/20px no-repeat !important; padding-left: 21px !important; background-size: 20px !important; } li#wp-admin-bar-site-name { margin-left: 5px !important; } li#wp-admin-bar-site-name {} #wp-admin-bar-site-name div a { background: none !important; }
</style></head>
<body>
  <div class="outer-wrapper">
    <header class="section section--fullwidth header">
      <div class="masthead row">
        <div class="branding block block--3">
          <h1>
            <a href="https://hacks.mozilla.org">
              <img class="branding__logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/mdn-logo-mono.svg">
              <img class="branding__wordmark" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/wordmark.svg" alt="Mozilla">
              <span class="branding__title">Hac<span class="logo-askew">k</span>s</span>
            </a>
          </h1>
        </div>
        <div class="search block block--2">
          <form class="search__form" method="get" action="https://hacks.mozilla.org/">
            <input type="search" name="s" class="search__input" placeholder="Search Mozilla Hacks" value="">
            <i class="fa fa-search search__badge"></i>
          </form>
        </div>
        <nav class="social">
          <a class="social__link youtube" href="http://www.youtube.com/user/mozhacks" title="YouTube"><i class="fa fa-youtube" aria-hidden="true"></i><span>Hacks on YouTube</span></a>
          <a class="social__link twitter" href="https://twitter.com/mozhacks" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i><span>@mozhacks on Twitter</span></a>
          <a class="social__link rss" href="https://hacks.mozilla.org/feed/" title="RSS Feed"><i class="fa fa-rss" aria-hidden="true"></i><span>Hacks RSS Feed</span></a>
          <a class="fx-button" href="https://www.mozilla.org/firefox/download/thanks/?utm_source=hacks.mozilla.org&utm_medium=referral&utm_campaign=header-download-button&utm_content=header-download-button">Download Firefox</a>
        </nav>
      </div>
    </header>

  
<div id="content-head" class="section">
  <h1 class="post__title">Improving the Storage Access API in Firefox</h1>
  <div class="byline">
    <h3 class="post__author">
                      <img alt='' src='https://secure.gravatar.com/avatar/903832f17a97919b41873befa924b21d?s=64&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/903832f17a97919b41873befa924b21d?s=128&#038;d=mm&#038;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' loading='lazy'/>        By
                                        <a class="url" href="https://hacks.mozilla.org/author/bvanderslootmozilla-com/">Benjamin VanderSloot</a>                            </h2>
    <div class="post__meta">
      Posted on
      <abbr class="published" title="2022-02-08T08:59:21-08:00">
        February 8, 2022      </abbr>
      <span class="entry-cat">in
        <a href="https://hacks.mozilla.org/category/featured/" rel="category tag" title="View all posts in Featured Article" >Featured Article</a>, <a href="https://hacks.mozilla.org/category/firefox/" rel="category tag" title="View all posts in Firefox" >Firefox</a>,  and <a href="https://hacks.mozilla.org/category/privacy/" rel="category tag" title="View all posts in Privacy" >Privacy</a>      </span>
            <div class="socialshare" data-type="bubbles"></div>
    </div>
  </div>
</div>

<main id="content-main" class="section article">
  <article class="post" role="article">
    <p><span data-preserver-spaces="true">Before we roll out </span><a class="editor-rtfLink" href="https://hacks.mozilla.org/2021/02/introducing-state-partitioning/" target="_blank" rel="noopener"><span data-preserver-spaces="true">State Partitioning</span></a><span data-preserver-spaces="true"> for all Firefox users, we intend to make a few privacy and ergonomic improvements to the </span><a class="editor-rtfLink" href="https://privacycg.github.io/storage-access/" target="_blank" rel="noopener"><span data-preserver-spaces="true">Storage Access API</span></a><span data-preserver-spaces="true">. In this blog post, we’ll detail a few of the new changes we made.</span></p>
<p><span data-preserver-spaces="true">With State Partitioning, third parties can’t access the same cookie jar when they’re embedded in different sites. Instead, they get a fresh cookie jar for each site they’re embedded in. This isn&#8217;t just limited to cookies either—all storage is partitioned in this way.</span></p>
<p><span data-preserver-spaces="true">In an ideal world, this would stop trackers from keeping tabs on you wherever they’re embedded because they can&#8217;t keep a unique identifier for you across all of these sites. Unfortunately, the world isn&#8217;t so simple—trackers aren&#8217;t the only third parties that use storage. If you&#8217;ve ever used an authentication provider that requires an embedded resource, you know how important third-party storage can be.</span></p>
<p><span data-preserver-spaces="true">Enter the Storage Access API. This API lets third parties request storage access as if they were a first party. This is called “unpartitioning” and it gives browsers and users control over which third parties can maintain state across first-party origins as well as determine which origins they can access that state from. This is the preferred way for third parties to keep sharing storage across sites.</span></p>
<p><span data-preserver-spaces="true">The Storage Access API leaves a lot of room for the browser to decide when to allow a third party unrestricted storage access. This is a feature that gives the browser freedom to make decisions it feels are best for the user and decide when to present choices about storage permissions to users directly. </span></p>
<p><span data-preserver-spaces="true">On the other hand, this means the Storage Access API can vary from browser to browser and version to version. As a result, the developer experience will suffer unless we do two things: 1) Design with the developer experience in mind; and 2) communicate what we’re doing. </span></p>
<p><span data-preserver-spaces="true">So let’s dive in! Here are four changes we’re making to the Storage Access API that will improve user privacy and maintain a strong developer experience…</span></p>
<h2 style="text-align: left;"><span data-preserver-spaces="true">Requiring User Consent for Third-Parties the User Never Interacted With</span></h2>
<p><span data-preserver-spaces="true">With Storage API, the browser determines whether to involve the user in the decision to grant storage access to a third party. Previously, Firefox didn’t involve users until a third party already had access to its storage on five different sites. At that point, the third party&#8217;s storage access requests were presented to users to make a decision. </span></p>
<p><span data-preserver-spaces="true">We’re allowing third parties some leeway to unpartition their storage on a few sites because we’re worried about overwhelming users with popup permission requests. We feel that allowing only a few permission grants per third party would keep the permission frequency down while still preventing any one party from tracking the user on many sites.</span></p>
<p><span data-preserver-spaces="true">We also wanted to improve user privacy in our Storage Access API implementation by reducing the number of times third parties can automatically unpartition themselves without overwhelming the user with storage access requests. The improvement we settled on was requiring the user to have interacted with the third party recently to give them storage access without explicitly asking the user whether or not to allow it. We believe that removing automatic storage access grants for sites the user has never seen before captures the spirit of State Partitioning without having to bother the user too much more.</span></p>
<p><span data-preserver-spaces="true">Careful readers may now be concerned that any embed-only pages, like some authentication services, will be heavily impacted by this. To tip the scales even further toward low user touch, we expanded the definition of “interacting with a site” to support embed-only contexts. Now, whenever a user grants storage access via permission popups or interacts with an iframe with storage access, these both count as user interactions. This change is the result of a lot of careful balancing between preserving legitimate use cases, protecting user privacy, and not annoying users with endless permission prompts. We think we found the sweet spot.</span></p>
<h2><span data-preserver-spaces="true">Changing the Scope of First-Party Storage Access to Site</span></h2>
<p><span data-preserver-spaces="true">While rolling out State Partitioning, we’ve seen the emergence of a fair number of use cases for the Storage Access API. One common use is to enable authentication using a third party.</span></p>
<p><span data-preserver-spaces="true">We found on occasion the login portal that gave first-party storage access to the authentication service was a subdomain, like </span><strong><span data-preserver-spaces="true">https://login.example.com</span></strong><span data-preserver-spaces="true">. This caused problems when the user navigated to </span><strong><span data-preserver-spaces="true">https://example.com</span></strong><span data-preserver-spaces="true"> after logging in… they were no longer logged in! This is because the storage access permission was only granted to the login subdomain and not the rest of the site. The authentication provider had access to its cookies on </span><strong><span data-preserver-spaces="true">https://login.example.com</span></strong><span data-preserver-spaces="true">, but not on </span><strong><span data-preserver-spaces="true">https://example.com</span></strong><span data-preserver-spaces="true">. </span></p>
<p><span data-preserver-spaces="true">We fixed this by moving the storage access permission to the Site-scope. This means that when a third party gets storage access on a page, it has access to unpartitioned storage on all pages on that same Site. So in the example above, the authenticating third party would have access to the user&#8217;s login cookie on </span><strong><span data-preserver-spaces="true">https://login.example.com</span></strong><span data-preserver-spaces="true">, </span><strong><span data-preserver-spaces="true">https://example.com</span></strong><span data-preserver-spaces="true">, and </span><strong><span data-preserver-spaces="true">https://any.different.subdomain.example.com</span></strong><span data-preserver-spaces="true">! Yet they still wouldn&#8217;t have access to that login cookie on </span><strong><span data-preserver-spaces="true">http://example.com</span></strong><span data-preserver-spaces="true"> or </span><strong><span data-preserver-spaces="true">https://different-example.com</span></strong><span data-preserver-spaces="true">.</span></p>
<h2><span data-preserver-spaces="true">Cleaning Up User Interaction Requirements</span></h2>
<p><span data-preserver-spaces="true">Requiring user interaction when requesting storage access was one rough edge of the Storage Access API definition. Let’s talk about that requirement.</span></p>
<p><span data-preserver-spaces="true">If a third party calls requestStorageAccess as soon as a page loads, it should not get that storage access. It needs to wait until the user interacts with their iframe. Scrolling or clicking are good ways to get this user interaction and it will expire a few seconds after it’s granted. Unfortunately, there were some corner cases in this requirement that we needed to clean up. </span></p>
<p><span data-preserver-spaces="true">One corner case concerns what to do with the user’s interaction state when they click Accept or Deny on a permission prompt. We decided that when a user clicks Deny on a storage access permission prompt, the third party should lose their user interaction. This prevents the third party from immediately requesting storage access again, bothering the user until they accept. </span></p>
<p><span data-preserver-spaces="true">Conversely, we decided to reset the timer for user interaction if the user clicks Accept to reflect that the user did interact with the third party. This will allow the third party to use APIs that require both storage access and user interaction with only one user interaction in their iframe.</span></p>
<p><span data-preserver-spaces="true">Another corner case concerned how strict to be when requiring user interaction for storage access requests. As we’ve iterated on the Storage Access API, minor changes have been introduced. One of the changes has to do with the case of giving a third party storage access on a page, but then the page is reloaded. Does the third party have to get a user interaction before requesting storage access again? Initially, the answer was no, but now it is yes. We updated our implementation to reflect that change and align with other browsers.</span><span data-preserver-spaces="true"> </span></p>
<h2><span data-preserver-spaces="true">Integrating User Cookie Preferences</span></h2>
<p><span data-preserver-spaces="true">In the settings for Firefox </span><a class="editor-rtfLink" href="https://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop" target="_blank" rel="noopener"><span data-preserver-spaces="true">Enhanced Tracking Protection</span></a><span data-preserver-spaces="true">, users can specify how they want the browser to handle cookies. By default, Firefox blocks cookies from known trackers. But we have a few other possible selections, such as allowing all cookies or blocking all third-party cookies. Users can alter this preference to their liking.</span></p>
<p><span data-preserver-spaces="true">We have always respected this user choice when implementing the Storage Access API. However, this wasn&#8217;t clear to developers. For example, users that set Firefox to block all third-party cookies will be relieved to know the Storage Access API in no way weakens their protection; even a storage access permission doesn&#8217;t give a third party any access to storage. But this wasn’t clear to the third party&#8217;s developers. </span></p>
<p><span data-preserver-spaces="true">The returned promise from requestStorageAccess would resolve, indicating that the third party had access to its unpartitioned storage. We endeavored to fix this. In Firefox 98, when the user has disabled third-party cookies via the preferences, the function requestStorageAccess will always return a rejecting promise and hasStorageAccess will always return false.</span></p>
<p><span data-preserver-spaces="true"> </span></p>
<p><span data-preserver-spaces="true"> </span></p>
    <section class="about">
                                <h2 class="about__header">About
                          Benjamin VanderSloot                      </h3>
                                <p><a class="url" href="https://hacks.mozilla.org/author/bvanderslootmozilla-com/">More articles by Benjamin VanderSloot&hellip;</a></p>
                  </section>
  </article>
  <section class="promo">
    <form id="newsletterForm" name="newsletter-form" class="newsletter block block--1 block--polite" action="https://www.mozilla.org/en-US/newsletter/" method="post">
  <h2 class="heading">Discover great resources for web development</h2>
  <p class="newsletter__description">Sign up for the Mozilla Developer Newsletter:</p>
  <input id="fmt" name="fmt" value="H" type="hidden">
  <input id="newsletterNewslettersInput" name="newsletters" value="app-dev" type="hidden">

  <div id="newsletterErrors" class="newsletter__errors"></div>

  <div id="newsletterEmail" class="form__row">
    <label for="newsletterEmailInput" class="offscreen">E-mail</label>
    <input id="newsletterEmailInput" name="email" class="newsletter__input" required="" placeholder="you@example.com" size="30" type="email">
  </div>

  <div id="newsletterPrivacy" class="form__row form__fineprint">
    <input id="newsletterPrivacyInput" name="privacy" required="" type="checkbox">
    <label for="newsletterPrivacyInput">
      I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
    </label>
  </div>
  <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
</form>
<div id="newsletterThanks" class="newsletter newsletter--thanks block block--1 block--polite hidden">
  <h2 class="heading">Thanks! Please check your inbox to confirm your subscription.</h2>
  <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
  </p>
</div>
  </section>
  

<section class="discussion">
  <hr class="dino">
  <div class="comments">
    <header class="comments__head">
      <h3>No comments yet</h3>
    </header>

      </div>
  <div class="response" id="respond">
        <form id="comment-form" action="https://hacks.mozilla.org/wp-comments-post.php" method="post">
        <h3>Post Your Comment</h3>
        <p id="cancel-comment-reply"><a rel="nofollow" id="cancel-comment-reply-link" href="/2022/02/improving-the-storage-access-api-in-firefox/#respond" style="display:none;">Cancel Reply</a></p>
              <div class="field" id="cmt-name">
          <label for="author">Your name <abbr title="(required)">*</abbr></label>
          <input type="text" name="author" id="author" size="25" required aria-required='true'>
        </div>
        <div class="field" id="cmt-email">
          <label for="email">Your e-mail <abbr title="(required)">*</abbr></label>
          <input type="email" name="email" id="email" size="25" required aria-required='true'>
        </div>
        <div id="cmt-ackbar">
          <label for="age">Spam robots, please fill in this field. Humans should leave it blank.</label>
          <input type="text" name="age" id="age" size="4" tabindex="-1">
        </div>
            <div class="field" id="cmt-cmt">
        <label for="comment">Your comment</label> <textarea name="comment" id="comment" cols="50" rows="10" required="required" aria-required="true"></textarea>
      </div>
      <div class="field" id="comment-submit">
        <button name="submit" type="submit">Submit Comment</button>
      </div>
      <input type='hidden' name='comment_post_ID' value='47599' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
      <p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="9b26bcf927" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js" name="ak_js" value="53"/><script>document.getElementById( "ak_js" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></div>
    </form>
      </div></section><script>jQuery("#comment-form").submit(function() { return fc_checkform('req'); });</script>


</main><!-- /#content-main -->

  

    <footer class="footer section section--fullwidth">
      <div class="row">
        <p class="block block--1">
          Except where otherwise noted, content on this site is licensed
          under the
          <a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license external">Creative Commons Attribution Share-Alike License v3.0</a>
          or any later version.
        </p>
        <img class="footer__logo" alt="the Mozilla dino logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/dino.svg">
      </div>
    </footer>
  </div>
  <link rel='stylesheet' id='hljstheme-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/styles/solarized-light.css?ver=0.6.2' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/comment-reply.min.js?ver=5.8.3' id='comment-reply-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/wp-embed.min.js?ver=5.8.3' id='wp-embed-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.common.pack.js?ver=0.6.2' id='hljs_preload-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.custom.pack.js?ver=0.6.2' id='hljs-js'></script>
    <style>pre.hljs {padding: 5px;}
pre.hljs code {}</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"    "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>
  <script>
    // External links should open in a new tab.
    (function () {
      var postLinks = document.querySelectorAll('#content-main a');

      var origin = location.origin;

      for (var i = 0; i < postLinks.length; i++) {
        var link = postLinks[i];
        if (link.origin !== origin && !link.getAttribute('target')) {
          link.setAttribute('target', '_blank');
        }
      }
    })();

    window.addEventListener('load', function () {
      if (document.querySelector('#newsletterForm')) {
        var script = document.createElement('script');
        var path = document.head.getAttribute('data-template-path');
        script.setAttribute('src', path + '/js/newsletter.js');
        document.head.appendChild(script);
      }
    });
  </script>
</body>
</html>
