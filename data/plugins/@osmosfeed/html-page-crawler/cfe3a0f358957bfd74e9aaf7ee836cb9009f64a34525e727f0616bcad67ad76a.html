<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7c478c254378ac9279a9.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Roboto+Mono&display=swap);pre[class*=language-].line-numbers{padding-left:3.8em}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;left:-3.8em;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}:root{--primary:#fdb54a;--secondary:#ffd479;--link-color:#fff;--border-color:#111;--heading-font-color:var(--primary);--background-color:#282c34;--sidebar-color:#373d49;--navbar-color:#1c1e24;--navbar-color-hover:#272a33;--sidebar-color-hover:#464e5f;--sidebar-color-focus:#57637c;--category-background-color:#1c1e24;--category-background-color-hover:#24272e;--light-border-color:hsla(0,0%,100%,0.1);--toolbar-background-color:#181818;--toolbar-color:#eee;--font-color:#d0d5df;--dark-font-color:rgba(235,240,255,0.5);--bright-font-color:#eee;--input-background:rgba(0,0,0,0.3);--blockquote-background-color:rgba(0,0,0,0.3);--blockquote-color:#b3b9c5;--black:#111;--inline-code-background-color:#393e4b;--inline-code-color:#d0d5df;--dark-opacity:rgba(0,0,0,0.2);--dark-opacity-hover:rgba(0,0,0,0.3);--reverse:var(--background-color);--scrollbar:var(--navbar-color);--scrollbar-track:var(--sidebar-color-hover);--yellow:#ffd479;--button-color:#6b76f3;--button-font-color:#fff;--page-width:850px;--font-family:"Inter",-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",Roboto,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--heading-font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",Roboto,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--post-font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",Roboto,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font-family:Menlo,"Roboto Mono",Courier New,monospace}*,:after,:before{box-sizing:border-box}a:focus-visible,button:focus-visible{outline:3px solid var(--primary)}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:var(--navbar-color);color:var(--font-color);font-family:var(--font-family);font-size:1rem;line-height:1.65;margin:0}blockquote,ol,p,table,ul{color:var(--font-color);font-size:1.1rem;margin:0 0 2rem}button{appearance:none;-moz-appearance:none;-webkit-appearance:none;background:transparent;border:none;border-radius:8px;cursor:pointer;font-family:var(--post-font-family)}ol li,ul li{margin-bottom:.5rem}ol li p,ul li p{margin:0}ol li ol,ul li ul{margin:.3rem}h1,h2,h3,h4,h5{color:var(--heading-font-color);font-family:var(--heading-font-family);font-weight:500;line-height:1.2;margin:0 0 1.5rem;scroll-margin-top:80px}h3,h4,h5{color:var(--secondary);font-weight:400}h4{font-weight:600}a{text-decoration:none}a.button{border:1px solid var(--button-color)!important;border-radius:8px;display:block;font-family:var(--post-font-family);font-size:1.1rem;font-weight:600;line-height:1.2;padding:.75rem 1.25rem;text-align:center}a.button,a.button:hover{background:var(--button-color);color:var(--button-font-color)}a.button:hover{-webkit-filter:brightness(1.2);filter:brightness(1.2)}a.button:active{-webkit-transform:scale(.95);transform:scale(.95)}a.button.icon-button{align-items:center;display:flex}a.button.icon-button img{margin-right:.5rem;max-height:22px}table{-webkit-text-size-adjust:none;border-collapse:separate;border-radius:8px;border-spacing:0;display:block;font-family:var(--post-font-family);font-size:.95rem;max-width:100%;overflow-x:auto;width:100%}table :not(pre)>code[class*=language-]{font-size:.95rem!important}tbody,thead{white-space:nowrap}th{border-bottom:2px solid var(--light-border-color)}tfoot th{border-top:1px solid var(--light-border-color)}td{border-bottom:1px solid var(--light-border-color)}td,th{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding:.75rem!important;text-align:left;word-break:break-word}tbody tr:nth-child(odd){background-color:var(--dark-opacity)}tbody tr:last-child td:first-of-type{border-bottom-left-radius:8px}tbody tr:last-child td:last-of-type{border-bottom-right-radius:8px}@media screen and (min-width:800px){table{border:1px solid var(--light-border-color);display:table}table,tbody,thead{-webkit-text-size-adjust:none}tbody,thead{white-space:normal}td,th{-webkit-text-size-adjust:none}}.sidebar{background:var(--sidebar-color);border-right:1px solid var(--light-border-color);height:100vh;left:0;overflow-x:hidden;overflow-y:hidden;position:fixed;top:0;width:320px;z-index:9}.sidebar:hover{overflow-y:auto}.sidebar .categories{margin-top:60px}.sidebar .title{align-items:center;background:var(--toolbar-background-color);color:var(--font-color);display:flex;font-size:.85rem;font-weight:600;height:35px;justify-content:space-between;padding:0 .5rem 0 2.5rem;position:fixed;text-transform:uppercase;top:0;width:320px;z-index:8}.sidebar button.collapse-categories{height:35px;padding:0 .75rem}.sidebar button.collapse-categories:hover{background:var(--dark-opacity)}.sidebar button.collapse-categories div{border:1px solid var(--font-color);line-height:0;padding:1px 3px}.sidebar button.collapse-categories svg rect{fill:var(--font-color)}.sidebar button.category{align-items:center;background:var(--category-background-color);border:none;border-radius:0;color:var(--bright-font-color);cursor:pointer;display:grid;font-size:.8rem;font-weight:700;grid-template-columns:1.5rem auto;margin-bottom:1px;padding:.75rem 1rem;position:sticky;text-align:left;text-transform:uppercase;top:60px;width:100%;z-index:7}.sidebar button.category:hover{background:var(--category-background-color-hover);color:var(--bright-font-color)}.sidebar button.category:focus-visible{background:var(--primary);border-bottom:none;color:var(--reverse)!important;outline:none}.sidebar button.category:focus{color:var(--bright-font-color);outline:none}.sidebar button.category svg{margin-right:.5rem}.sidebar button.category:focus svg path,.sidebar button.category svg path{stroke:var(--bright-font-color)}.sidebar button.category:focus-visible svg path{stroke:var(--reverse)}.sidebar nav{width:320px}.sidebar nav.collapsed{display:none}.sidebar a{align-items:center;border-left:3px solid transparent;color:var(--font-color);display:grid;font-family:var(--post-font-family);font-size:.85rem;grid-template-columns:2rem auto;line-height:1.2;padding:.4rem 1rem}.sidebar a svg path{-webkit-filter:var(--icon-filter);filter:var(--icon-filter)}.sidebar a:hover{background:var(--sidebar-color-hover);color:var(--bright-font-color)}.sidebar a.active,.sidebar a:focus{background:var(--sidebar-color-focus);border-left:3px solid var(--primary);color:var(--bright-font-color);outline:none}.sidebar a.active svg path{fill:var(--primary)}.container{margin-left:auto;margin-right:auto;max-width:var(--page-width);padding:2rem}.container.large{max-width:1350px}.container.small,.small{max-width:550px}.navigation{background:var(--navbar-color);border-bottom:1px solid var(--light-border-color);height:60px;left:0;position:fixed;top:0;width:100%;z-index:9}.navigation-inner{font-family:var(--post-font-family);height:100%;margin:0 auto;max-width:var(--page-width);padding:.5rem 1.5rem}.navigation-inner,.navigation button{align-items:center;display:flex;justify-content:space-between}.navigation button{background:transparent;border:none;color:var(--font-color);cursor:pointer;font-weight:500;gap:.5rem;line-height:0;padding:.5rem;position:relative}.navigation button:hover{background:var(--navbar-color-hover);color:var(--bright-font-color)}.navigation button:focus{outline:none}.navigation button:focus-visible{outline:3px solid var(--primary)}.navigation button span{font-size:.9rem}.navigation button svg rect{fill:var(--font-color)}.navigation nav{gap:.6rem;height:100%}.navigation nav,.navigation nav a{align-items:center;display:flex;justify-content:center}.navigation nav a{border-radius:8px;color:var(--font-color);font-size:.9rem;font-weight:500;gap:.4rem;line-height:1.1;padding:.5rem}.navigation nav a.active{color:var(--bright-font-color)}.navigation nav a.brand{font-size:1rem;font-weight:600}.navigation nav a.brand span{white-space:nowrap}.navigation nav a:hover{background:var(--navbar-color-hover);color:var(--bright-font-color)}.navigation nav img{max-height:20px;max-width:25px}.theme-switcher{margin-left:.5rem}.theme-switcher img{max-width:20px}.toolbar-section{align-items:center;display:flex;flex:0 0 155px;justify-content:flex-end}.navigation nav .brand-section{flex:0 0 155px;justify-content:flex-start}.hero{padding:1rem 0}.hero .flex-content{align-items:center}.hero header{padding:2rem 0 0;text-align:left}.hero h1{font-size:3rem;margin-bottom:.75rem}.hero p.subtitle{font-size:1.2rem}.hero .hero-buttons{display:flex;gap:1.5rem}.hero-buttons a.hero-button{align-items:center;border:none;color:var(--dark-font-color);display:flex;font-size:.9rem;gap:.4rem;justify-content:space-between}.hero-buttons a.hero-button:hover{background:transparent;border:none;color:var(--font-color)}.hero-buttons a.hero-button img{display:block;max-height:18px}.bright{color:var(--bright-font-color)}article{padding-bottom:3rem}article header{padding-top:2rem;text-align:center}article h1{color:var(--bright-font-color);font-size:2.6rem;font-weight:600;margin-bottom:.75rem}article h2,article h3,article h4,article h5{margin:0 0 1rem}article h4{border-bottom:1px solid var(--light-border-color);margin-bottom:.75rem}article .description{color:var(--dark-font-color);font-size:1.4rem;line-height:1.4;margin-bottom:0}.post-image{margin-bottom:1rem}.post-details{color:var(--dark-font-color);font-family:var(--post-font-family);font-size:.9rem;margin:.5rem 0}.post-details a{border-bottom:none}.tags{align-items:center;display:flex;flex-wrap:wrap;font-family:var(--post-font-family);gap:.5rem;justify-content:center;margin:1.5rem 0}.tags a{border:1px solid var(--light-border-color);border-radius:8px;color:var(--bright-font-color);display:inline-block;font-size:.9rem;font-weight:600;line-height:normal;padding:.4rem .6rem;vertical-align:middle}.tags a,.tags a:hover{background:var(--reverse)}.tags a:hover{border:1px solid var(--primary);color:var(--primary)}article a{border-top:2px solid transparent;color:var(--link-color);font-weight:600}article a,article a:hover{border-bottom:2px solid var(--primary)}article a:hover{background:var(--primary);border-top:2px solid var(--primary);color:var(--background-color)}article li a,article li a:hover{border-bottom:none;border-top:none}article img{display:block;max-width:100%}article h2{border-bottom:1px solid var(--light-border-color);font-size:2rem;font-weight:600;padding-bottom:.25rem}article h2 code[class*=language-]{border-bottom:1px solid var(--border-color);font-size:1.8rem!important}article h3{font-size:1.8rem}article h3 code[class*=language-]{font-size:1.6rem!important}article h4{font-size:1.1rem;padding-bottom:.25rem;text-transform:uppercase}article h4 code[class*=language-]{font-size:1rem!important}article h5{font-size:1rem;text-transform:uppercase}h2:not(:first-child),h3:not(:first-child),h4:not(:first-child){margin-top:3rem}blockquote{background:var(--blockquote-background-color);border:1px solid var(--light-border-color);border-left:4px solid var(--primary);border-radius:8px;font-family:var(--post-font-family);padding:1.5rem}blockquote p{color:var(--blockquote-color)}blockquote ul{margin-top:1rem}blockquote p:last-of-type,blockquote ul:last-of-type{margin-bottom:0}.comments{padding-bottom:2rem}.comments h3{font-size:1.75rem}.comments.container{padding-top:0}.notes li,.notes ol,.notes p,.notes ul{font-family:Georgia;font-size:1.2rem}.blog-page h2{border-bottom:1px solid var(--light-border-color);margin-top:2.5rem}a.post{grid-gap:1rem;align-items:center;border:1px solid transparent;display:grid;grid-template-columns:auto 60px;margin-left:-1rem;margin-right:-1rem;padding:.4rem 1rem}a.post.new,a.post:hover{background:var(--dark-opacity);border:1px solid transparent;border-radius:8px;font-family:var(--post-font-family)}a.post.new{background:transparent;border:1px solid transparent}a.post.new:hover{background:var(--dark-opacity)}a.post.new time{color:var(--secondary)!important}a.post.new h3{color:var(--bright-font-color)}a.post.new .new-badge{color:var(--yellow);margin-left:.75rem}a.post h3{color:var(--font-color);-webkit-filter:brightness(1);filter:brightness(1);font-family:var(--post-font-family);font-size:1.1rem;font-weight:500;margin:0}a.post:hover h3{color:var(--bright-font-color)}a.post:hover time,a.post time{color:var(--dark-font-color)}a.post time{display:block;font-family:var(--code-font-family);font-size:.8rem;font-weight:400;text-align:center}.projects{display:flex;flex-direction:column}@media screen and (min-width:600px){.projects{grid-gap:2rem;display:grid;grid-template-columns:repeat(auto-fill,300px);justify-content:center}}.project{background:var(--dark-opacity);border:1px solid var(--border-color);border-radius:8px;color:var(--dark-font-color);display:flex;flex-direction:column;padding:1.5rem}.project h2{border-bottom:none;font-size:1.5rem;margin-bottom:0;text-align:center}.project img{height:auto;margin-top:.5rem;max-height:100px;max-width:100%;-o-object-fit:contain;object-fit:contain}.project .description{color:var(--font-color);font-family:var(--post-font-family);font-size:1.2rem;line-height:1.3;margin-bottom:1rem;text-align:center}.project .links{display:flex;gap:.5rem}.project .stars{align-items:center;display:flex;gap:.75rem;justify-content:center;margin-top:auto}.project .stars img{margin-top:0;max-width:20px}a.anchor.before{border:none}a.anchor.before:hover{background:transparent}a.anchor.before svg{fill:#fff}a.image-link,a.image-link:hover{border-bottom:none;border-top:none}a.image-link:hover{background:none}.primary-color{color:var(--primary)}.primary-underline{border-bottom:3px solid var(--primary)}.deemphasized{color:var(--dark-font-color)}.gatsby-resp-image-wrapper{margin-left:0!important}a.gatsby-resp-image-link{background:transparent!important;border-bottom:none!important;border-top:none!important}.highlighted{background:var(--primary);color:var(--reverse)}.not-found-image{margin:0 auto}.flex{display:flex}.flex-align-center{align-items:center}.flex-justify-between{justify-content:space-between}.flex-content{gap:1.5rem}.flex-content,.main-header{display:flex;justify-content:space-between}.main-header{align-items:center;border-bottom:1px solid var(--light-border-color)}.main-header a{font-size:1rem}.main-image{border:1px solid var(--light-border-color);border-radius:8px;height:auto;margin-left:2rem;width:250px}.search-bar{grid-gap:1rem;align-items:center;display:grid;grid-template-columns:auto 50px}.search-icon{cursor:pointer;max-width:30px}.search-input{-webkit-appearance:none;background:var(--input-background);border:1px solid var(--light-border-color);border-radius:8px;color:var(--bright-font-color);font-size:1.1rem;line-height:1.1;padding:.75rem 1rem;width:100%}.search-input:active,.search-input:focus,.search-input:hover{border-color:var(--primary)}.search-input:focus{box-shadow:1px 1px 1px var(--primary);-webkit-filter:brightness(1.1);filter:brightness(1.1);outline:none}::-webkit-scrollbar{background:var(--scrollbar);height:8px;width:8px}::-webkit-scrollbar-thumb{background:var(--scrollbar-track);border-radius:0}::selection{background:var(--primary);color:var(--reverse)}::-moz-selection{background:var(--primary);color:var(--reverse)}::marker{color:var(--primary)}.search-input::-webkit-search-cancel-button{color:var(--bright-font-color)}.collapsed .sidebar{display:none}.desktop-only{display:block!important}main{background:var(--background-color);margin-top:60px;min-height:calc(100vh - 215px)}.footer{background:var(--navbar-color);border-top:1px solid var(--light-border-color);font-family:var(--post-font-family);padding:3rem 0}.footer section{align-items:center;display:flex;flex-direction:column;gap:1.25rem}.footer img{display:inline-block;max-height:20px;width:auto}.footer nav{display:flex;gap:.25rem;margin:0 1rem}.footer a,.footer span{align-items:center;color:var(--dark-font-color);display:flex;font-size:.9rem;line-height:1.2;padding:0 .5rem}.footer span{color:var(--toolbar-color)}.footer a:hover{color:var(--link-color)}@media screen and (max-width:800px){blockquote,ol,p,table,ul{font-size:1rem;margin:0 0 1.5rem}.flex-content{flex-direction:column;gap:.5rem}main{margin-top:60px}ol,ul{padding-left:1rem}.navigation nav.social-nav,.sidebar{display:none}.navigation-inner{justify-content:space-between;padding-right:0}.navigation nav{gap:.5rem}.navigation nav a{flex-direction:column;font-size:.8rem;gap:.25rem;padding:0 .25rem}.navigation nav a:hover{background:transparent}.navigation button.theme-switcher{margin-left:0;margin-right:-.5rem;min-width:auto}.navigation nav a.brand{font-size:.9rem;margin-left:0;margin-right:0;padding:0}.navigation nav img{max-width:20px}.toolbar-section{flex:initial;margin-left:0}.navigation nav .brand-section{flex:initial}.navbar img{max-width:30px}.projects{grid-gap:1rem;grid-template-columns:repeat(2,50%)}.project .stars{justify-content:center}.desktop-only{display:none!important}.hero{padding:0}.hero h1{font-size:2.25rem}.hero header{padding:1rem 0 0}.hero .container{padding-bottom:1rem}.hero p.subtitle{font-size:1.2rem}.hero .flex-content,.hero .hero-buttons{align-items:flex-start}.hero .hero-buttons{flex-direction:column;gap:.5rem}.post-image{max-height:75px;max-width:75px}.main-image{margin:0 0 1rem;width:150px}.flex-content div{order:2}.flex-content img{order:1}.container{padding:1rem}.navigation-inner{padding:0 1rem}article{padding-bottom:0}article h1{font-size:2.3rem;line-height:1.2}article h2{font-size:1.8rem}article header{padding-top:1.5rem}article .description{font-size:1.25rem}a.post h3{font-size:1.05rem}.project img{max-height:50px}}#lists h2{margin-bottom:0;margin-top:1rem}#lists h3{margin-top:0}#lists img{float:left;height:200px;margin-right:1rem;width:200px}#lists p{border-bottom:1px solid var(--light-border-color);padding-bottom:2rem}#resume header{text-align:left}#resume .container{padding-top:0}#resume section h2,#resume section h3,#resume section h4,#resume section h5{margin-bottom:1rem;margin-top:0}#resume section h2{border-bottom:1px solid var(--light-border-color);font-size:1.1rem;font-weight:400;margin-top:2.5rem;text-transform:uppercase}#resume section h3{align-items:center;display:flex;font-size:1.5rem;font-weight:400;justify-content:space-between;margin-bottom:.5rem}#resume section h3 span{display:block;font-size:1rem;font-weight:400}#resume section li,#resume section p{font-size:1rem;line-height:1.3}#resume section li{margin-bottom:.5rem}:root{--code-font-color:#b3b9c5;--code-background-color:#373c47;--string:#92d192;--variable:#f2777a;--property:#abb2bf;--number:#fca369;--operator:#ac8d58;--punctuation:#d5d8df;--comment:#848991;--function:#62cfcf;--keyword:#ffeead;--attribute:#ffd479;--class:#e1a6f2;--tag:#6ab0f3;--error:#f2777a;--terminal-color:var(--code-font-color)}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:var(--code-font-color);font-family:var(--code-font-family);font-size:.9rem!important;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{-webkit-font-smoothing:subpixel-antialiased;background:var(--code-background-color);border:1px solid var(--light-border-color);border-radius:8px;font-family:Menlo,monospace;margin-bottom:2rem;margin-top:2rem;overflow:initial;padding:1rem}:not(pre)>code[class*=language-]{-webkit-font-smoothing:subpixel-antialiased;background:var(--inline-code-background-color)!important;border-radius:6px;color:var(--inline-code-color)!important;font-size:.95rem!important;font-weight:500;padding:2px 3px;white-space:pre-wrap}article a:hover code{background:transparent!important;color:var(--background-color)!important}pre.language-text{background:transparent;border:none;margin-left:0;padding-bottom:0;padding-left:0;padding-top:.5rem}.line-numbers-rows{display:none}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:1rem;position:relative}@media screen and (min-width:800px){.line-numbers-rows{display:block}pre.language-text.line-numbers{padding-left:1.5rem!important}pre[class*=language-].line-numbers{padding-left:4rem}pre.language-shell,pre.language-terminal{padding-left:1.5rem!important}pre.language-shell .line-numbers-rows,pre.language-terminal .line-numbers-rows,pre.language-text .line-numbers-rows{display:none}}code.language-text{background:var(--light-background)!important;box-shadow:none;color:var(--font-color)!important}pre.language-text code.language-text{border:none}code.language-shell:before{color:var(--comment);content:"$ "}pre.language-terminal{-webkit-text-size-adjust:none;background:var(--reverse);border:1px solid var(--light-border-color);border-top-left-radius:8px;border-top-right-radius:8px;color:var(--font-color);margin:2rem 0;padding-top:3rem;position:relative;white-space:normal}code.language-terminal{-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;color:var(--terminal-color)}pre.language-terminal:before{background:var(--category-background-color);border-bottom:1px solid var(--light-border-color);border-top-left-radius:8px;border-top-right-radius:8px;color:var(--dark-font-color);content:"\2022 \2022 \2022";font-size:2.5rem;left:0;letter-spacing:-5px;line-height:0;margin:0;padding:15px 0 12px;position:absolute;text-indent:6px;top:0;width:100%}.line-numbers .line-numbers-rows{border-right:1px solid rgba(245,250,255,.1);font-size:100%;left:-3.8rem;letter-spacing:-1px;padding-right:.5rem;pointer-events:none;position:absolute;top:1rem!important;width:3rem!important}.line-numbers-rows>span:before{color:rgba(245,250,255,.3)}.gatsby-highlight{-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;font-size:.9rem;margin-bottom:1.5rem;margin-top:1.5rem;max-width:999999px;overflow-x:auto;overflow-y:hidden}.gatsby-highlight pre[class*=language-]{float:left;margin-bottom:0;margin-top:0;min-width:100%}.gatsby-highlight-code-line{background-color:#24272e;border-left:.25rem solid #74cf74;display:block;margin-left:-1.25rem;margin-right:-1rem;padding-left:1rem;padding-right:1rem}.filename{align-items:center;background:#171717;border:1px solid var(--light-border-color);border-top-left-radius:8px;border-top-right-radius:8px;color:rgba(245,250,255,.8);display:flex;font-family:var(--post-font-family);font-size:.9rem;line-height:1;margin-bottom:-2rem;padding:.5rem 1.5rem .9rem}.token.cdata,.token.comment,.token.doctype,.token.important,.token.prolog{color:var(--comment)}.token.punctuation{color:var(--punctuation)}.token.namespace{opacity:.7}.token.property{color:var(--property)}.token.constant,.token.deleted,.token.symbol,.token.tag{color:var(--tag)}.token.number{color:var(--number)}.token.builtin,.token.char,.token.inserted,.token.url{color:var(--code-font-color)}.token.attr-name,.token.selector{color:var(--attribute)}.token.attr-value,.token.string{color:var(--string)}.token.operator{color:var(--operator)}.token.atrule,.token.keyword{color:var(--keyword)}.token.function{color:var(--function)}.language-css,.token.boolean,.token.class-name{color:var(--class)!important}.token.regex{color:var(--keyword)}.token.variable{color:var(--variable)}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.language-jsx .token.class-name{color:var(--tag)!important}code::selection,pre::selection{background:hsla(0,0%,59%,.3)!important;color:inherit;text-shadow:none}code[class*=language-] ::selection,pre[class*=language-]::selection{background:hsla(0,0%,59%,.3)!important;color:inherit;text-shadow:none}pre[class*=language-]{margin-bottom:1.5rem;margin-top:1.5rem}.filename{margin-bottom:-1.9rem}.light{--primary:#6b76f3;--secondary:#444;--heading-font-color:#222;--link-color:#111;--border-color:#bbb;--light-border-color:#e0e0e0;--background-color:#fff;--sidebar-color:#f0f0f0;--navbar-color:#f0f0f0;--navbar-color-hover:#ddd;--sidebar-color-hover:#dedede;--sidebar-color-focus:#fff;--category-background-color:#d5d5d5;--category-background-color-hover:silver;--toolbar-color:#333;--toolbar-background-color:#f0f0f0;--font-color:#343434;--dark-font-color:#777;--input-background:transparent;--bright-font-color:#222;--blockquote-background-color:rgba(0,0,0,0.02);--blockquote-color:#111;--inline-code-background-color:rgba(0,0,0,0.05);--inline-code-color:#111;--icon-filter:brightness(0.8);--dark-opacity:rgba(0,0,0,0.03);--dark-opacity-hover:rgba(0,0,0,0.1);--reverse:#fff;--terminal-color:var(--bright-font-color);--scrollbar:#888;--scrollbar-track:#bbb;--yellow:#e59e32;--button-color:var(--primary);--button-font-color:#fff}.light blockquote,.light ol,.light p,.light table,.light ul{-webkit-font-smoothing:auto}.light pre[class*=language-]{border-color:var(--heading-font-color)}.light pre.language-terminal,.light table{border-color:var(--border-color)}.light blockquote{border-left-color:var(--border-color);border-color:var(--border-color) var(--border-color) var(--border-color) var(--primary)}.light .filename{border:1px solid #171717}.light a.anchor.before svg{fill:var(--primary)}.sepia{--primary:#6c71c4;--secondary:#cb4b16;--heading-font-color:#211806;--link-color:#332810;--border-color:#332810;--light-border-color:#6b4a00;--background-color:#ebdbb2;--sidebar-color:#fef0cf;--navbar-color:#f0d69a;--navbar-color-hover:#e2c175;--sidebar-color-hover:#eed18e;--sidebar-color-focus:#fff6e3;--category-background-color:#d8ba76;--category-background-color-hover:#c8a961;--toolbar-color:#332810;--toolbar-background-color:#fdf6e3;--font-color:#372e19;--dark-font-color:#6b4a00;--input-background:transparent;--bright-font-color:#211806;--blockquote-background-color:rgba(0,0,0,0.02);--blockquote-color:#111;--inline-code-background-color:rgba(0,0,0,0.05);--inline-code-color:#111;--icon-filter:brightness(0.8);--dark-opacity:rgba(0,0,0,0.03);--dark-opacity-hover:rgba(0,0,0,0.1);--reverse:#fdf6e3;--terminal-color:var(--bright-font-color);--scrollbar:#a48337;--scrollbar-track:#c8a961;--yellow:#e59e32;--button-color:var(--primary);--button-font-color:#fff}.sepia blockquote,.sepia ol,.sepia p,.sepia table,.sepia ul{-webkit-font-smoothing:auto}.sepia pre[class*=language-]{border-color:var(--heading-font-color)}.sepia a.anchor.before svg{fill:var(--secondary)}</style><meta name="generator" content="Gatsby 3.12.1"/><title data-react-helmet="true">Building a Musical Instrument with the Web Audio API | Tania Rascia</title><meta data-react-helmet="true" name="description" content="It&#x27;s been a while since I&#x27;ve written anything due to some personal concerns that I might write about later, but don&#x27;t worry, I&#x27;m still…"/><meta data-react-helmet="true" name="image" content="https://www.taniarascia.com/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png"/><meta data-react-helmet="true" property="og:url" content="https://www.taniarascia.com/musical-instrument-web-audio-api/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Building a Musical Instrument with the Web Audio API"/><meta data-react-helmet="true" property="og:description" content="It&#x27;s been a while since I&#x27;ve written anything due to some personal concerns that I might write about later, but don&#x27;t worry, I&#x27;m still…"/><meta data-react-helmet="true" property="og:image" content="https://www.taniarascia.com/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Building a Musical Instrument with the Web Audio API"/><meta data-react-helmet="true" name="twitter:description" content="It&#x27;s been a while since I&#x27;ve written anything due to some personal concerns that I might write about later, but don&#x27;t worry, I&#x27;m still…"/><meta data-react-helmet="true" name="twitter:image" content="https://www.taniarascia.com/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://www.taniarascia.com","name":"Building a Musical Instrument with the Web Audio API","alternateName":"Building a Musical Instrument with the Web Audio API"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://www.taniarascia.com/musical-instrument-web-audio-api/","name":"Building a Musical Instrument with the Web Audio API","image":"https://www.taniarascia.com/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://www.taniarascia.com","name":"Building a Musical Instrument with the Web Audio API","alternateName":"Building a Musical Instrument with the Web Audio API","headline":"Building a Musical Instrument with the Web Audio API","image":{"@type":"ImageObject","url":"https://www.taniarascia.com/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png"},"description":"It's been a while since I've written anything due to some personal concerns that I might write about later, but don't worry, I'm still…"}]</script><link rel="icon" href="/favicon-32x32.png?v=07f5a193c5a1357203c0389b1002fb71" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#6b76f3"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=07f5a193c5a1357203c0389b1002fb71"/><link rel="alternate" type="application/rss+xml" title="Tania Rascia | RSS Feed" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-c72bbb2d32a2c625809f.js"/><link as="script" rel="preload" href="/framework-97155db9408cb0e3fcd4.js"/><link as="script" rel="preload" href="/app-bd479f5ee5e824ee2568.js"/><link as="script" rel="preload" href="/commons-4f2f8df78a9e94ab1764.js"/><link as="script" rel="preload" href="/97eaac26582eace9daa0da0f398b30c0d9444017-0d30954767bc70574d17.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-1c593929207a8b8a1c55.js"/><link as="fetch" rel="preload" href="/page-data/musical-instrument-web-audio-api/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/352937542.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><article><header><div class="container"><div class="post-details"><div><div class="post-image gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:150px;height:150px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD60lEQVQ4y42UWUhcdxSH59XZF3UWdx3H0arU1C1Wqdu4hhDHqmOjMsatVeNaZ6xoKONSu9AExFf1JUhAFJdnNwTFSl6aF30TXxtikhfx5Sv3P65pmnbgP5d74X73HL7fOTK73Y7ZbCYwMJDZ2Vl8Ph9qtZJgYzhlRVbGBw0M9+gZ6ZWOgVGPjqaH0YSF24iLiyU21n+ioqIICwtDFhERQV1dHQ0NDSwsLDA1NUVbWysFhWXkZluY+CHoCvikz4DPo6O+OgyzJRqbzUp0dDRWq/8qgEajkY2NDXZ2dkhISCA9PZ3Xr/9i4qffybijY3LYyPBFdd5OHQMdSirvh2AwWFAoAjAYDMjlciSOVJwsJiaG5ORkATs6OmJxcZG4OBvRMfE4ciMY9fpBPW1qOptV9H6r4EG5CbUmmOwvs9DpdGRkZBASEoLJZEIm/Umtrq6ukpeXR35+Pq9e/cnwyCgpyVq8XVraHynpbFYK4ECnGkeukpLSB0g/t9vN2dkZ3d3dKBQKZFLf/f399Pb2MjExgdfrZWxslAqni/Qvgvi+Q01nk5LHzSoB7G9Xcr80CKMxnObmR+j1euFAkisqjIyMpKKiAqfTydLSEk+fPsXlqiE7p4C7GaYbQH+F0n1RnoqCwnLev3+Ly+Xi5OSE1tZWtFotsuDgYLa2ttjd3RVfSU1N5fT0DT//8ozkz1R4HmtvAfvbVdwrNhAZZcfn+1HEZXBwkLS0NCTWLSmHh4esrKxgt8cRY00gJytUAD6ssKRAQ+bdXF6+PKC4uJjNzU1qampE+1dS1tbWcDgclJSUXEn5PEnDwEcqLHPoSExKZX7+uehoZmaGoqIiMRxCSl9fHx6Ph8nJSSFlfHwMZ2XthRTNvwJfvJgXrc7NzYlCBPCmlOXlZaanp6mtrSHnE1IuWz44+EO0vL6+ft2ylHBJyv7+PomJiWJS/q+UsVGfkDI0NCTeE1KkGUxKShKwT0m5GezifH9s3r07paqqiuPjY1paWq5j8zEpI0/GxKQMdGrpuAh2V4uKnjYlpYVBGE1SsJvE6N0KtjSD/yVFaleCNtcpaalXkX5HTvm9CjF6jY2NnJ+f09XVhVqt9gM/lHI5KVkZZvq+UwtQfZWCh5UK3C45BV8Fo9Mbyc7OEiIyMzPFcrBYLMikB9vb2+zt7V2tr7enb/j1t2fYY1W0Nmj4xqmg7mv/cbsCKM63EBhkQS73r6+AgAARGbEPQ0NDhZD4+HghRZpnmy2WWFsCqSkhuF3XMD9QjiPXREhoFFZrjLB8ua1FhVJsJLpUaXV1tUi8Rq1CbzCSkmz8B7DRJScvJxC9wYzZbBIiLo/E+hv+sgEB5bfq/AAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png 1x" /><img loading="lazy" width="150" height="150" srcset="/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png 1x" src="/static/91426c49def0a67c98c3b56d00f1fb3d/92ab1/keyboardaccordionlogo.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div>Written by <a href="/me">Tania Rascia</a> on<!-- --> <time>May 01, 2022</time></div><h1>Building a Musical Instrument with the Web Audio API</h1><div class="post-meta"><div class="tags"><a class="tag-svelte" href="/tags/svelte">svelte</a><a class="tag-web api" href="/tags/web-api">web api</a><a class="tag-projects" href="/tags/projects">projects</a></div></div></div></header><div id="/musical-instrument-web-audio-api/" class="container post-content"><p>It's been a while since I've written anything due to some personal concerns that I might write about later, but don't worry, I'm still around and I'm still coding. Recently, I went to Texas and bought a three-row diatonic button accordion. Diatonic accordions are popular for a lot of different types of folk music, which is generally learned by ear. This is good for me, because I don't really know how to read music anyway.</p>
<p>The accordion has 34 buttons on the treble side and 12 buttons on the bass side. Unlike a piano accordion, which has the same logical, chromatic layout as a piano, the diatonic accordion just has a bunch of buttons and I didn't really know where to start. Also, every note is different whether you're pulling the bellows out or pushing them in, so there are actually 68 notes on the treble side (albeit some are repeated). Also, as I'm sure you might be aware, accordions are loud. Very loud. In order to not piss off my neighbors too much, and to learn how the layout of this box works, I decided to make a little web app.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/e8950/kascreenshot.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADC0lEQVQ4y5WTy2sbVxSH7zwlocfMSJpoxrKkSJ7RM9OOJVUPpw7tphCZ1vixtGiwabvoJiQq9rh1wZbtRi3BNN0Eg1deGuN/wPLK4D+pQVHur8wokJq0oV18nPs4fNzLOYe0rEqtPTfrfPGw86TT+ar3sPNlz/qo2psxiz0zX+oZ5oeY5JQrHz8plS1Hn0qVSPZutm/mC8jczaFUqngxOZ2GpiWh6R9Gn5rG9HQGplnEvYqFdvvT7wnLcT8SQvBgfv7VYDAY1ev1ESFk5PMJI0HgPXj+fQRB8PLe8kqSJDx69PU3RBCEHVd4dHQ0vrm5oXt7faqqCm00LFqtlqhtF2k+n6emaXq4a8MwaCaToYFAgAaDQcpx3NgVrnW73xKe5z1hv98fX15e0s3NTUSjMiyrBMOYwczMhFwuB8MwYJomCoUC4vE46vU6Tk9P6eLi4lgURayvr78THhwcjIfDIXUcB4oiw7bvoVgsolwue9HFFWezWaTTaSiKglarhfPzc7qysjIWBAEbGxvvhIeHh55wa2vLS67VqrBtG7OzNizL8nCFqVTKQ5ZlNBoNnJ2d0eXl5X8WXl1dUcfZRiQSRC6bRiKRgK5r0HXdY2pK9/bJZBKRSOSW0P3yLaH75YnQQTAYRKGQQzyuIhpVoap3vBiLTdA0HaFQCM1mExcXF3R1dfX9F06EQ/r06RZqNRUvX36GnZ0G9vZaGDybw/b2J/jt1/v45bCNSiUFUQygWq3i+PiYdjqdsc/nu12U/f398XB4SR8//gFzcxr+ePE5dndbePH7A+zutj3Z8+fzGDy7D9tOIRxWEPD7oWl3qCgK40hEQtdtG0EQfnrbh6+vr69pv9+nLEtoIiHTaDRMFSVMVTVCZTlM4/EwjcXCNBQKef3H8xyVZT9lGPJakuSJkOf5n13h0tLSm5OTEywsLMDd/1c4jnHjG7fq3W73O8JxnMMw3uGfkiR5o8QwzIhl/x33/u+4o+cK19bWNgjDMAmWZdt+v79JCGn6fL4my7L/C4ZhmqIotjRNi/0FocubIDCukSgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="kascreenshot"
        title="kascreenshot"
        src="/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/5a190/kascreenshot.png"
        srcset="/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/772e8/kascreenshot.png 200w,
/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/e17e5/kascreenshot.png 400w,
/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/5a190/kascreenshot.png 800w,
/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/c1b63/kascreenshot.png 1200w,
/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/29007/kascreenshot.png 1600w,
/static/1cb6c0c7b2ca226db4ddbf8c55c2eaed/e8950/kascreenshot.png 2000w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>That web app is <a href="https://www.keyboardaccordion.com">KeyboardAccordion.com</a>, which like everything else I create in my free time is <a href="https://github.com/taniarascia/accordion">open source</a>. I noticed that there are just enough keys on a computer keyboard to correspond to the accordion layout, and they're arranged in a similar pattern. With this, I can keep track of the notes, scales, and chords and start figuring out how to put it all together.</p>
<p>Here's what one of the accordions looks like:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3533ecd2d3e9365184ac4116dab76538/41099/corona2.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQL/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAbdXqHLeQtK0AmqF/8QAHRAAAgIBBQAAAAAAAAAAAAAAAQMCBAARExQhM//aAAgBAQABBQKwXbp5JECTB3TtTlbxfXhNpqwOKgFr/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAARIg/9oACAECAQE/AWEf/8QAIRAAAgEDAwUAAAAAAAAAAAAAAAERAiExEhNBIjIzUZL/2gAIAQEABj8CW32pey0/QpzyV9cHlQryanMs5FTTg//EAB0QAAMAAgIDAAAAAAAAAAAAAAABETFBIXGBkaH/2gAIAQEAAT8hcgeRJ5LCRW96jj1ewrmW3Y+hgLNw275MIhzGKs/Ja6Fs/9oADAMBAAIAAwAAABDPB0D/xAAWEQADAAAAAAAAAAAAAAAAAAABESD/2gAIAQMBAT8QRj//xAAYEQEAAwEAAAAAAAAAAAAAAAABABARIf/aAAgBAgEBPxBByHb/AP/EAB8QAQACAgICAwAAAAAAAAAAAAEAESFBMWFxsaHB8P/aAAgBAQABPxACbR51v0e4Cj1FuUJIGaDdbF+ZRXGtWHfUo1T+8zLS6Lu1EqECAprHCOiIRKjkbeppUK1ucvyz/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="corona2"
        title="corona2"
        src="/static/3533ecd2d3e9365184ac4116dab76538/41099/corona2.jpg"
        srcset="/static/3533ecd2d3e9365184ac4116dab76538/e07e9/corona2.jpg 200w,
/static/3533ecd2d3e9365184ac4116dab76538/066f9/corona2.jpg 400w,
/static/3533ecd2d3e9365184ac4116dab76538/41099/corona2.jpg 500w"
        sizes="(max-width: 500px) 100vw, 500px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>I decided to make this app in Svelte, because I've used React and Vue professionally but have no experience with Svelte whatsoever and wanted to know what everyone loves about it.</p>
<h2 id="web-audio-api" style="position:relative;"><a href="#web-audio-api" aria-label="web audio api permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web Audio API</h2>
<p>KeyboardAccordion.com only has one dependency, and that's Svelte. Everything else is done using plain JavaScript and the built-in browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a>. I'd never really used the Web Audio API before, so I figured out what I needed to to get this working.</p>
<p>The first thing I did was create an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext"><code class="language-text">AudioContext</code></a> and attach a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">GainNode</a>, which controls the volume.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gainNode <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0.1</span>
gainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audio<span class="token punctuation">.</span>destination<span class="token punctuation">)</span></code></pre></div>
<p>As I was figuring everything out, I was experimenting with making new <code class="language-text">AudioContext</code> for every note because I was trying to fade out the sound, but then I kept realizing that after 50 notes, the app would stop working. Fifty is apparently the limit for the browser, so it's better to just make one <code class="language-text">AudioContext</code> for the entire app.</p>
<p>I'm using waves with the Audio API and not using any sort of audio sample, and I used the <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode"><code class="language-text">OscillatorNode</code></a> to make each note. There are various types of waves you can use - <code class="language-text">square</code>, <code class="language-text">triangle</code>, <code class="language-text">sine</code>, or <code class="language-text">sawtooth</code>, which all have a different type of sound. I went with the sawtooth for this app because it worked out the best. Square makes an extremely loud, chiptune-esque sound like an NES which is kind of nice in its own way. Sine and triangle were a bit more subdued but if you don't fade the sound out properly, it makes a really unpleasant kind of cutting sound due to how your ear reacts when a wave gets cut off.</p>
<h4 id="waveforms" style="position:relative;"><a href="#waveforms" aria-label="waveforms permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Waveforms</h4>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/67a19d699a335da20bfcbccd4cdc4c34/0a47e/waveform.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 85.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAE+0lEQVQ4yyWTa2xTdQDFT3v7uH39b9t729tu7eaI4GYQYS20exDnJrNu7sXa0q7d+th6u65rKQgExiYEcECYMc7BBCa6ETHGKUyIOGIwDOEDmpGRIG4hISozLiYkxsQQMLlm+uHkd/L7cL4d+NJpw1hlpWmkpoarFQRdLBxmujo6SEM8TnY1NxvOlZXx0WCQ8UWjZNlH2tvJ6/E4Ga+sNB/ZtIlt3blT80pVFVe1cSOXzWb1mFq3zioCGhFgFpfpduOH2lpMArKngFEE1H8BRgC4kkhAdLmwBOhFQPv3/1QAUAKgt+/apcbJqpc4scoDEcCvMor9USZTvaukpb/IKPM5HS1b9rNKuXqRkrLL/aFUyszLZctDwGq75IGMMok6IhcBycU1a/IRTG3XTmCzpKtqUJpc87J8Xq9nfyeEO1uwQo3AFcnEs60U2i9KvuUtZEmn4+6wrEFSm6VGS+KUq2JQ2l/iUjwyGoyiQmE4Ul/PItQTtHkzXptvOam2/EhC4LvjnZbWVNzqT7favVmfzd/TavelBD4djVkCqRTv7/bZfFmfzde72e7rac9rat5sb2xsKAin0xaU95dbcAqMaljN0CMKc0EmTyFChO6oipUfV3D0ezSRj8h5boBod+A6nunllYphuZUepnXyUTlHjyo4GjQHCnxnPMJga2irpuGjOuA2gA9AcBAUdUUBjIBgLyjF1zLgbdAYAk19owB2g8IJEPllCngLFMZAsANY6X0O2basBtHOOEN8nPQsvpJojms51RjNaU9rCX1CZVnxRrHyDD6UmPbnaej3abN2TEtUp1QsGdIbn+ApVm17QaEe1ZjIacJgHEzF/goeyWTUkhCifEqI8OFkMM+b9dv9Ob8tkArakkKYF4ROPiEEeV86YPfnfDZfJmCPCgGrIHTx3UKYb0sG8xuExsLGRGNhW2+7DeHwboOj9E9jWfkDtnptjaxPAcm2vGFp3AiJ2z1LXO4lc5n7S/UYgEThhPQWgPL1byrd7iWTu2zB8FoJLaUhNQOw5hKtGtTXT+UVFf0jd224r3I4Fk1r138s81AiSh33jQ7HIuN0XpA6HL+xpc4F4npRRKnzjsrheGh2Or+XORz3NQ7nQ1OpO0sBFklT0yc8otGQtn//ZaSOijDgC1lx8RNDSYlosNl+Uu87IOKdsw9wQxSxcsUf2pLnReOqVY8ZAJKBAz9j5zkRVuV38uKSx8aCAlHf1HSSRbIraY11d/KhTMS8JVdninX2WKKRvrzuri18Z5dg6eiNmr05ryne02KKtO+zCYkYn4hFLbFUF+/PhszBnIfLZfbzmcwgn0mHeQR72/R7qveoxovH2U8LP7NkmgVVyw6nYnVqg7ItEKSHncNk0jaZf3j9EGnaUyyv7qlROgQXvXfTXvXnRZPm0wVnrGqzslCrVxa86q3jMOIc4ecwpz+P8/QsZg3DGKX6cUg6hSkygxnjNVzTzWCGuYRLKrFZxAVcUE1j2nAd15kbuEFu4ZYBAOVBneZQ2SET+pr6mIGBAcxz81jAgv4u7rL3cI9MY1o9gQnJzaKbuI3byjnM/ednMaubwIT86tqrWH7UAhaMj/BII0LUDFUPGdGR7GBjoRgJJAK6wY2D5oNVB03NmWatJ+nRhSIhEolGSK4hZzjmPmbpDnYztVtrtS3RFhLviJNYKMYcrjjM99f2s55ejybUEzL+C7T4f0myirC/AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="waveform"
        title="waveform"
        src="/static/67a19d699a335da20bfcbccd4cdc4c34/0a47e/waveform.png"
        srcset="/static/67a19d699a335da20bfcbccd4cdc4c34/772e8/waveform.png 200w,
/static/67a19d699a335da20bfcbccd4cdc4c34/e17e5/waveform.png 400w,
/static/67a19d699a335da20bfcbccd4cdc4c34/0a47e/waveform.png 600w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>So for each note, I'd make an oscillator, set the wave type, set the frequency, and start it. Here's an example using <code class="language-text">440</code>, which is a standard tuning for "A".</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> oscillator <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
oscillator<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'sawtooth'</span>
oscillator<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span>
oscillator<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">440</span>
oscillator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>If you do that, the note will just play until infinity, so you have to make sure you stop the oscillator when you want the note to end.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">oscillator<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>For me, this meant event listeners on the DOM that would listen for a <code class="language-text">keypress</code> event to see if any button was pressed, and a <code class="language-text">keyup</code> event to determine when any button was no longer being pressed. In Svelte, that's handled by putting event listeners on <code class="language-text">svelte:body</code>.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">svelte:</span>body</span>
  <span class="token attr-name"><span class="token namespace">on:</span>keypress</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{handleKeyPressNote}<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">on:</span>keyup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{handleKeyUpNote}<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">on:</span>mouseup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{handleClearAllNotes}<span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span></code></pre></div>
<p>So that's really everything there is to the Web Audio API itself when it comes to setting up the app - creating an <code class="language-text">AudioContext</code>, adding a <code class="language-text">Gain</code>, and starting/stopping an <code class="language-text">Oscillator</code> for each note.</p>
<p>You could paste this into the console and it'll play a note. You'll have to either refresh or type <code class="language-text">oscillator.stop()</code> to make it stop.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gainNode <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0.1</span>
gainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audio<span class="token punctuation">.</span>destination<span class="token punctuation">)</span>

<span class="token keyword">const</span> oscillator <span class="token operator">=</span> audio<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
oscillator<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'sawtooth'</span>
oscillator<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span>
oscillator<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">440</span>
oscillator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<h2 id="data-structure" style="position:relative;"><a href="#data-structure" aria-label="data structure permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data Structure</h2>
<p>I had to figure out how I wanted to lay out the data structure for this application. First of all, if I'm going to be using the Web Audio API with frequencies directly, I had to collect all of them.</p>
<h3 id="frequencies" style="position:relative;"><a href="#frequencies" aria-label="frequencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Frequencies</h3>
<p>Here's a nice map of notes to frequencies with all 12 notes and 8-9 octaves for each note, so I can use <code class="language-text">A[4]</code> to get the <code class="language-text">440</code> frequency.</p>
<div class="filename">tone</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> tone <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">C</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">16.35</span><span class="token punctuation">,</span> <span class="token number">32.7</span><span class="token punctuation">,</span> <span class="token number">65.41</span><span class="token punctuation">,</span> <span class="token number">130.81</span><span class="token punctuation">,</span> <span class="token number">261.63</span><span class="token punctuation">,</span> <span class="token number">523.25</span><span class="token punctuation">,</span> <span class="token number">1046.5</span><span class="token punctuation">,</span> <span class="token number">2093.0</span><span class="token punctuation">,</span> <span class="token number">4186.01</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Db<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">17.32</span><span class="token punctuation">,</span> <span class="token number">34.65</span><span class="token punctuation">,</span> <span class="token number">69.3</span><span class="token punctuation">,</span> <span class="token number">138.59</span><span class="token punctuation">,</span> <span class="token number">277.18</span><span class="token punctuation">,</span> <span class="token number">554.37</span><span class="token punctuation">,</span> <span class="token number">1108.73</span><span class="token punctuation">,</span> <span class="token number">2217.46</span><span class="token punctuation">,</span> <span class="token number">4434.92</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">D</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">18.35</span><span class="token punctuation">,</span> <span class="token number">36.71</span><span class="token punctuation">,</span> <span class="token number">73.42</span><span class="token punctuation">,</span> <span class="token number">146.83</span><span class="token punctuation">,</span> <span class="token number">293.66</span><span class="token punctuation">,</span> <span class="token number">587.33</span><span class="token punctuation">,</span> <span class="token number">1174.66</span><span class="token punctuation">,</span> <span class="token number">2349.32</span><span class="token punctuation">,</span> <span class="token number">4698.64</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Eb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">19.45</span><span class="token punctuation">,</span> <span class="token number">38.89</span><span class="token punctuation">,</span> <span class="token number">77.78</span><span class="token punctuation">,</span> <span class="token number">155.56</span><span class="token punctuation">,</span> <span class="token number">311.13</span><span class="token punctuation">,</span> <span class="token number">622.25</span><span class="token punctuation">,</span> <span class="token number">1244.51</span><span class="token punctuation">,</span> <span class="token number">2489.02</span><span class="token punctuation">,</span> <span class="token number">4978.03</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">E</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">20.6</span><span class="token punctuation">,</span> <span class="token number">41.2</span><span class="token punctuation">,</span> <span class="token number">82.41</span><span class="token punctuation">,</span> <span class="token number">164.81</span><span class="token punctuation">,</span> <span class="token number">329.63</span><span class="token punctuation">,</span> <span class="token number">659.26</span><span class="token punctuation">,</span> <span class="token number">1318.51</span><span class="token punctuation">,</span> <span class="token number">2637.02</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">F</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">21.83</span><span class="token punctuation">,</span> <span class="token number">43.65</span><span class="token punctuation">,</span> <span class="token number">87.31</span><span class="token punctuation">,</span> <span class="token number">174.61</span><span class="token punctuation">,</span> <span class="token number">349.23</span><span class="token punctuation">,</span> <span class="token number">698.46</span><span class="token punctuation">,</span> <span class="token number">1396.91</span><span class="token punctuation">,</span> <span class="token number">2793.83</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Gb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">23.12</span><span class="token punctuation">,</span> <span class="token number">46.25</span><span class="token punctuation">,</span> <span class="token number">92.5</span><span class="token punctuation">,</span> <span class="token number">185.0</span><span class="token punctuation">,</span> <span class="token number">369.99</span><span class="token punctuation">,</span> <span class="token number">739.99</span><span class="token punctuation">,</span> <span class="token number">1479.98</span><span class="token punctuation">,</span> <span class="token number">2959.96</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">G</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">24.5</span><span class="token punctuation">,</span> <span class="token number">49.0</span><span class="token punctuation">,</span> <span class="token number">98.0</span><span class="token punctuation">,</span> <span class="token number">196.0</span><span class="token punctuation">,</span> <span class="token number">392.0</span><span class="token punctuation">,</span> <span class="token number">783.99</span><span class="token punctuation">,</span> <span class="token number">1567.98</span><span class="token punctuation">,</span> <span class="token number">3135.96</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Ab<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">25.96</span><span class="token punctuation">,</span> <span class="token number">51.91</span><span class="token punctuation">,</span> <span class="token number">103.83</span><span class="token punctuation">,</span> <span class="token number">207.65</span><span class="token punctuation">,</span> <span class="token number">415.3</span><span class="token punctuation">,</span> <span class="token number">830.61</span><span class="token punctuation">,</span> <span class="token number">1661.22</span><span class="token punctuation">,</span> <span class="token number">3322.44</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">A</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">27.5</span><span class="token punctuation">,</span> <span class="token number">55.0</span><span class="token punctuation">,</span> <span class="token number">110.0</span><span class="token punctuation">,</span> <span class="token number">220.0</span><span class="token punctuation">,</span> <span class="token number">440.0</span><span class="token punctuation">,</span> <span class="token number">880.0</span><span class="token punctuation">,</span> <span class="token number">1760.0</span><span class="token punctuation">,</span> <span class="token number">3520.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Bb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">29.14</span><span class="token punctuation">,</span> <span class="token number">58.27</span><span class="token punctuation">,</span> <span class="token number">116.54</span><span class="token punctuation">,</span> <span class="token number">233.08</span><span class="token punctuation">,</span> <span class="token number">466.16</span><span class="token punctuation">,</span> <span class="token number">932.33</span><span class="token punctuation">,</span> <span class="token number">1864.66</span><span class="token punctuation">,</span> <span class="token number">3729.31</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">B</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">30.87</span><span class="token punctuation">,</span> <span class="token number">61.74</span><span class="token punctuation">,</span> <span class="token number">123.47</span><span class="token punctuation">,</span> <span class="token number">246.94</span><span class="token punctuation">,</span> <span class="token number">493.88</span><span class="token punctuation">,</span> <span class="token number">987.77</span><span class="token punctuation">,</span> <span class="token number">1975.53</span><span class="token punctuation">,</span> <span class="token number">3951.07</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="button-layout" style="position:relative;"><a href="#button-layout" aria-label="button layout permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Button layout</h3>
<p>Figuring out exactly how to arrange all the buttons into a data stucture took a couple of tries for me. The data that had to be captured was:</p>
<ul>
<li>The row on the accordion</li>
<li>The column on the accordion</li>
<li>The direction of the bellows (push or pull)</li>
<li>The name and frequency of the note at that row, column, and direction</li>
</ul>
<p>This means that there are different combinations for all three sets of these things. I decided to make an <code class="language-text">id</code> that corresponds to each possible combination, such as <code class="language-text">1-1-pull</code> being row <code class="language-text">1</code>, column <code class="language-text">1</code>, direction <code class="language-text">pull</code>.</p>
<p>This way, I could create an array that holds the data for any note that is currently being played. If you press the button to reverse the bellows, it would take all the currently playing notes and reverse them, thus changing <code class="language-text">1-1-pull</code> and <code class="language-text">1-2-pull</code> to <code class="language-text">1-1-push</code> and <code class="language-text">1-2-push</code>.</p>
<p>So ultimately I had an object that contained the data for all three treble rows like so:</p>
<div class="filename">layout</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> layout <span class="token operator">=</span> <span class="token punctuation">{</span>
  one<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  two<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  three<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>My particular accordion is tuned to FB♭Eb, meaning the first row is tuned to F, the second row is tuned to B♭, and the third row is tuned to E♭. The example for the first row looks like this:</p>
<div class="filename">layout</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> layout <span class="token operator">=</span> <span class="token punctuation">{</span>
  one<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Pull</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-1-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'D♭'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span>Db<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-2-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'G'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">G</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-3-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'B♭'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span>Bb<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-4-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">D</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-5-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'E'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">E</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-6-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'G'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">G</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-7-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'B♭'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span>Bb<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-8-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'D'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">D</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-9-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'E'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">E</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-10-pull'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'G'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">G</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Push</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-1-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-2-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'F'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">F</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-3-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-4-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-5-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'F'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">F</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-6-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-7-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-8-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'F'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">F</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-9-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1-10-push'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span> frequency<span class="token operator">:</span> tone<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  two<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...etc</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>There are notes 1 through 10 in row one, and each one has a name and frequency associated with it. Repeating this for two and three, I now have all 68 notes on the treble side.</p>
<h3 id="keyboard-layout" style="position:relative;"><a href="#keyboard-layout" aria-label="keyboard layout permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keyboard layout</h3>
<p>Now I had to map each key on the keyboard to a row and column of the accordion. Direction doesn't matter here, since <code class="language-text">z</code> will correspond to both <code class="language-text">01-01-push</code> and <code class="language-text">01-01-pull</code>.</p>
<div class="filename">keyMap</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> keyMap <span class="token operator">=</span> <span class="token punctuation">{</span>
  z<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  x<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  v<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  n<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  m<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">','</span><span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'.'</span><span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  a<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  s<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  d<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  f<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  g<span class="token operator">:</span> <span class="token punctuation">{</span> row<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...etc</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now I have all the keys from <code class="language-text">z</code> to <code class="language-text">/</code>, <code class="language-text">a</code> to <code class="language-text">'</code>, and <code class="language-text">w</code> to <code class="language-text">[</code> mapped out. Very auspicious that the computer keyboard and accordion keyboard are so similar.</p>
<h3 id="pressing-keys-playing-notes" style="position:relative;"><a href="#pressing-keys-playing-notes" aria-label="pressing keys playing notes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pressing keys, playing notes</h3>
<p>As you might recall, I have an event listener on the entire page listening for the key press event. Any key press event that happens will go through this function.</p>
<p>First, it has to check both lowercase and uppercase keys in case shift or caps lock are pressed, otherwise the keys won't work at all. Then, if you're pressing the button to toggle the bellows (which I made <code class="language-text">q</code>), it has to handle that separately. Otherwise, it will check the keyMap, and if one exists, it will find the corresponding <code class="language-text">id</code> by checking the current direction and getting the <code class="language-text">row</code> and <code class="language-text">column</code> from the keymap.</p>
<div class="filename">handleKeyPressNote</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> activeButtonIdMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">handleKeyPressNote</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>key <span class="token comment">// handle caps lock</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> toggleBellows<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleToggleBellows</span><span class="token punctuation">(</span><span class="token string">'push'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> buttonMapData <span class="token operator">=</span> keyMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>buttonMapData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> row<span class="token punctuation">,</span> column <span class="token punctuation">}</span> <span class="token operator">=</span> buttonMapData
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>row<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>column<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>direction<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeButtonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> oscillator <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">playTone</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

      activeButtonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> oscillator<span class="token punctuation">,</span> <span class="token operator">...</span>buttonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The way I'm tracking each currently playing note is putting them in the <code class="language-text">activeButtonIdMap</code> object. In Svelte, in order to update a variable you just reassign it, so instead of what you might do in React with <code class="language-text">useState</code>:</p>
<div class="filename">React</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>activeButtonIdMap<span class="token punctuation">,</span> setActiveButtonIdMap<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleKeyPressNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setActiveButtonIdMap</span><span class="token punctuation">(</span>newButtonIdMap<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You have to declare it as a <code class="language-text">let</code> and reassign it:</p>
<div class="filename">Svelte</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> activeButtonIdMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">handleKeyPressNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  activeButtonIdMap <span class="token operator">=</span> newButtonIdMap
<span class="token punctuation">}</span></code></pre></div>
<p>This was mostly easier, except when all I wanted to do was delete a key from the object. As far as I could tell, Svelte only rerenders when a variable is reassigned, so just mutating some value within wasn't enough and I had to clone it, mutate it, the reassign it. This is what I did in the <code class="language-text">handleKeyUpNote</code> function.</p>
<div class="filename">handleKeyUpNote</div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">handleKeyUpNote</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>key

  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> toggleBellows<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleToggleBellows</span><span class="token punctuation">(</span><span class="token string">'pull'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> buttonMapData <span class="token operator">=</span> keyMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>buttonMapData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> row<span class="token punctuation">,</span> column <span class="token punctuation">}</span> <span class="token operator">=</span> buttonMapData
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>row<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>column<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>direction<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>activeButtonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> oscillator <span class="token punctuation">}</span> <span class="token operator">=</span> activeButtonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span>
      oscillator<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// Must be reassigned in Svelte</span>
      <span class="token keyword">const</span> newActiveButtonIdMap <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>activeButtonIdMap <span class="token punctuation">}</span>
      <span class="token keyword">delete</span> newActiveButtonIdMap<span class="token punctuation">[</span>id<span class="token punctuation">]</span>
      activeButtonIdMap <span class="token operator">=</span> newActiveButtonIdMap
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Maybe someone knows a better way to delete an item from an object in Svelte, but this is the best I could come up with.</p>
<p>I also made a few functions that will play through the scales, starting with <code class="language-text">F</code>, <code class="language-text">B♭</code> and <code class="language-text">E♭</code> being the main diatonic keys of the accordion, but there are more options. To play the scales, I simply looped through all the ids that correspond to the notes in the scale and used a JavaScript "sleep" command of 600ms between each note.</p>
<h2 id="rendering" style="position:relative;"><a href="#rendering" aria-label="rendering permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rendering</h2>
<p>Now that I have all the data structures set up and the JavaScript, I just need to render all the buttons. Svelte has <a href="https://svelte.dev/tutorial/each-blocks"><code class="language-text">#each</code></a> blocks for looping logic, so I just looped through the three rows of buttons and rendered a circle for each button.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accordion-layout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  {#each rows as row}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row {row}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      {#each layout[row].filter(({ id }) => id.includes(direction)) as button}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{`circle</span> <span class="token attr-name">${activeButtonIdMap[button.id]</span> <span class="token attr-name">?</span> <span class="token attr-name">'active'</span> <span class="token attr-name">:</span> <span class="token attr-name">''}</span> <span class="token attr-name">${direction}</span> <span class="token attr-name">`}</span>
          <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{button.id}</span>
          <span class="token attr-name"><span class="token namespace">on:</span>mousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{handleClickNote(button.id)}</span>
        <span class="token punctuation">></span></span>
          {button.name}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      {/each}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  {/each}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>
<p>Each circle has its own <code class="language-text">mousedown</code> event so you can click on them in addition to using the keyboard, but I didn't put the <code class="language-text">mouseup</code> event on the circle itself. This is because if you move your mouse somewhere else before lifting it up, it won't correctly determine the mouseup and the note will play forever.</p>
<p>And of course, I just used plain CSS because I don't usually feel like anything fancier is necessary for small projects.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.circle</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom<span class="token punctuation">,</span> white<span class="token punctuation">,</span> #e7e7e7<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 6px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.circle:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 6px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.circle.pull:active,
.circle.pull.active</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span><span class="token punctuation">,</span> #56ea7b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 6px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.circle.push:active,
.circle.push.active</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom<span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span><span class="token punctuation">,</span> #f15050<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 6px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="conclusion" style="position:relative;"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>I hope you liked my write-up for the <a href="https://www.keyboardaccordion.com">Keyboard Accordion</a> app! Of course, the full code is available <a href="https://github.com/taniarascia/accordion">on GitHub</a>.</p>
<p>There are a few little bugs here and there, such as if you use keyboard shortcuts while also pressing other keys, it will get stuck on a note forever. I'm sure if you try to find more bugs you'll be able to.</p>
<p>This app was fun to make, I learned how to use both Svelte and the Web Audio API, and it's helping me and hopefully some other afficionados to understand the squeezebox a little better. Maybe it'll inspire you to build your own little online instrument, or make an app for one of your hobbies. The best part about coding is that you can make anything you want!</p></div></article><section id="comments" class="comments container"><h3>Comments</h3><div></div></section></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/musical-instrument-web-audio-api/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-3d3abe80edde96e60783.js"],"app":["/app-bd479f5ee5e824ee2568.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4b08240e6855406f71bf.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-29b85190639a67483c27.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c695f5d3b5b7b3188676.js"],"component---src-pages-notes-js":["/component---src-pages-notes-js-67317cdb6f77b63c7ce2.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-b03c24b51779c8e70ec7.js"],"component---src-templates-category-js":["/component---src-templates-category-js-9b87d374afab7343c8bb.js"],"component---src-templates-note-js":["/component---src-templates-note-js-3a2ab0fe2ea456bda6dc.js"],"component---src-templates-page-js":["/component---src-templates-page-js-5ee84657293be93ed566.js"],"component---src-templates-post-js":["/component---src-templates-post-js-1c593929207a8b8a1c55.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-154ca7a56f1eb38659ae.js"]};/*]]>*/</script><script src="/polyfill-3d3abe80edde96e60783.js" nomodule=""></script><script src="/component---src-templates-post-js-1c593929207a8b8a1c55.js" async=""></script><script src="/97eaac26582eace9daa0da0f398b30c0d9444017-0d30954767bc70574d17.js" async=""></script><script src="/commons-4f2f8df78a9e94ab1764.js" async=""></script><script src="/app-bd479f5ee5e824ee2568.js" async=""></script><script src="/framework-97155db9408cb0e3fcd4.js" async=""></script><script src="/webpack-runtime-c72bbb2d32a2c625809f.js" async=""></script></body></html>