<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/assets/favicon-32x32.png" />
  <title>
    Building Real-life Components: Facebook Messenger's Chat Bubble -
    Ahmad Shadeed
  </title>

  
  <meta name="description" content="A deep dive into building Facebook Messenger‚Äôs Chat Bubble" />
   
  <meta name="keywords" content="chat, bubble, css" />
  

  <meta name="author" content="iShadeed" />
  <meta property="og:title" content="Building Real-life Components: Facebook Messenger's Chat Bubble - Ahmad Shadeed" />
  
  <meta property="og:url" content="http://ishadeed.com/article/facebook-messenger-chat-component/" />
  
  <meta property="og:type" content="website" />

  
  <meta property="og:image" content="https://ishadeed.com/assets/fb-msg/twitter-card.jpg" />
  

  <meta property="og:description" content="A deep dive into building Facebook Messenger‚Äôs Chat Bubble" />
  <meta property="og:site_name" content="Ahmad Shadeed Blog" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@shadeed9" />
  <meta name="twitter:title" content="Building Real-life Components: Facebook Messenger's Chat Bubble - Ahmad Shadeed" />

  
  <meta name="twitter:url" content="http://ishadeed.com/article/facebook-messenger-chat-component/" />
  

  <meta name="twitter:description" content="A deep dive into building Facebook Messenger‚Äôs Chat Bubble" />

  
  <meta name="twitter:image" content="https://ishadeed.com/assets/fb-msg/twitter-card.jpg" />
   <link rel="stylesheet" href="/css/main.css?v=1.0.7">
  <link href="//plus.google.com/+AhmadShadeed" rel="author" />
  <link
    href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <link rel="alternate" type="application/rss+xml" title="Ahmad Shadeed Blog"
  href="http://ishadeed.com/feed.xml" />
</head>


  <body>
    <div class="c-banner">
      <p>
        <span aria-hidden="true">üéâ</span>I published a book about debugging
        CSS.
        <a class="c-link" href="https://debuggingcss.com/"
          >Buy now<svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            style="margin-right: 3px"
          >
            <use xlink:href="#arrow-right"></use></svg
        ></a>
      </p>
    </div>
    <svg style="display: none">
      <symbol
        id="arrow-right"
        width="23.114"
        height="23.114"
        viewBox="0 0 23.114 23.114"
      >
        <g id="np_arrow_1921082_000000" transform="translate(-2.5 -2.5)">
          <path
            id="Path_18"
            data-name="Path 18"
            d="M25.614,14.057A11.557,11.557,0,1,0,14.057,25.614,11.568,11.568,0,0,0,25.614,14.057Zm-21.46,0a9.9,9.9,0,1,1,9.9,9.9,9.927,9.927,0,0,1-9.9-9.9Z"
          />
          <path
            id="Path_19"
            data-name="Path 19"
            d="M45.262,34.182a.821.821,0,0,0,0-1.167L40.81,28.562a.826.826,0,0,0-1.168,1.168L43.486,33.6l-3.845,3.845a.791.791,0,0,0-.243.584.754.754,0,0,0,.243.584.837.837,0,0,0,1.168,0Z"
            transform="translate(-27.921 -19.541)"
          />
        </g>
      </symbol>
      <symbol
        id="link-external"
        width="16.067"
        height="16.078"
        viewBox="0 0 16.067 16.078"
      >
        <g fill="#3863d9">
          <path
            data-name="Path 20"
            d="M14.137 1.15h-3.159a.774.774 0 0 1-.093-.013.551.551 0 0 1-.2-.09.565.565 0 0 1-.235-.488.531.531 0 0 1 .031-.153.543.543 0 0 1 .091-.164.552.552 0 0 1 .167-.141.572.572 0 0 1 .177-.062c.028 0 .035 0 .063-.007q2.262-.063 4.524 0h.049a.491.491 0 0 1 .082.016l.035.01h.011l.019.007h.006a.523.523 0 0 1 .078.041.563.563 0 0 1 .175.174.512.512 0 0 1 .044.084.553.553 0 0 1 .032.108v.075c.042 1.5 0 3.006 0 4.51a.459.459 0 0 1 0 .063.579.579 0 0 1-.052.18.56.56 0 0 1-.131.174.531.531 0 0 1-.131.087.565.565 0 0 1-.567-.048.558.558 0 0 1-.228-.363.517.517 0 0 1-.007-.093V1.943L7.663 9.198a.5.5 0 0 1-.063.054.56.56 0 0 1-.147.078.549.549 0 0 1-.205.031.566.566 0 0 1-.453-.261.574.574 0 0 1-.067-.153.554.554 0 0 1-.019-.166.562.562 0 0 1 .086-.277.656.656 0 0 1 .078-.1l7.255-7.255z"
            fill-rule="evenodd"
          />
          <path
            data-name="Path 21"
            d="M7.331 1.526a.505.505 0 0 1 .1.021.557.557 0 0 1 .265.17.522.522 0 0 1 .086.134.554.554 0 0 1 .045.153.565.565 0 0 1-.131.446.548.548 0 0 1-.166.131.556.556 0 0 1-.2.06H6.1c-.634 0-1.269.008-1.9.043a10.457 10.457 0 0 0-1.052.1q-.141.022-.283.05-.1.02-.19.045a1.954 1.954 0 0 0-.816.389 1.26 1.26 0 0 0-.121.123 1.6 1.6 0 0 0-.263.452 3.281 3.281 0 0 0-.17.607 7.787 7.787 0 0 0-.112.883c-.04.5-.053 1-.062 1.5-.007.45-.008.9-.008 1.35v1.224c0 .569 0 1.139.017 1.709.013.5.033 1 .09 1.495a8.5 8.5 0 0 0 .054.39 3.713 3.713 0 0 0 .179.7 1.646 1.646 0 0 0 .3.516 1.9 1.9 0 0 0 1.021.522 6.066 6.066 0 0 0 .534.096 14.66 14.66 0 0 0 1.54.1c.606.017 1.214.019 1.82.019H7.89c.49 0 .979 0 1.469-.011s.982-.024 1.47-.068a7.177 7.177 0 0 0 .857-.119 2.844 2.844 0 0 0 .7-.228 1.445 1.445 0 0 0 .355-.247 1.921 1.921 0 0 0 .474-.95 6.313 6.313 0 0 0 .092-.491 9.4 9.4 0 0 0 .049-.411c.043-.439.061-.881.072-1.323.02-.771.017-1.542.017-2.314v-.053c0-.018 0-.035.007-.053a.547.547 0 0 1 .079-.2.536.536 0 0 1 .1-.12.563.563 0 0 1 .446-.131.545.545 0 0 1 .153.045.561.561 0 0 1 .317.4.579.579 0 0 1 .01.106v1.18c0 .387-.006.774-.015 1.161-.007.264-.016.528-.031.792q-.017.305-.046.61a9.298 9.298 0 0 1-.083.639 3.761 3.761 0 0 1-.581 1.571 2.38 2.38 0 0 1-.451.48 2.633 2.633 0 0 1-.5.315 4.49 4.49 0 0 1-1.275.368c-.315.049-.634.079-.952.1s-.668.035-1 .043c-.481.012-.961.015-1.442.017H6.675c-.577 0-1.154 0-1.732-.017a18.4 18.4 0 0 1-1.592-.094 8.742 8.742 0 0 1-.362-.049 3.862 3.862 0 0 1-1.658-.592 2.552 2.552 0 0 1-.2-.159 2.431 2.431 0 0 1-.256-.263 2.234 2.234 0 0 1-.154-.206 3.836 3.836 0 0 1-.539-1.51 8.474 8.474 0 0 1-.092-.737 14.337 14.337 0 0 1-.042-.62c-.016-.31-.024-.62-.031-.929-.007-.4-.01-.8-.011-1.2v-1.51c0-.538 0-1.077.013-1.614.007-.3.016-.609.033-.913a14.246 14.246 0 0 1 .099-1.075c.012-.088.026-.174.042-.261a3.673 3.673 0 0 1 .562-1.485 2.38 2.38 0 0 1 .451-.48 2.664 2.664 0 0 1 .534-.33 4.435 4.435 0 0 1 1.153-.336c.277-.047.557-.077.837-.1s.57-.037.857-.047c.413-.015.828-.021 1.241-.023h1.509z"
          />
        </g>
      </symbol>
      <symbol
        id="send"
        width="36.258"
        height="35.835"
        viewBox="0 0 36.258 35.835"
      >
        <path
          d="M25.339 13.557a.836.836 0 0 0-1.2-1.153L9.151 25.155l-7.915-3.062a1.925 1.925 0 0 1-.223-3.492L33.871.194a1.619 1.619 0 0 1 2.38 1.579l-2.882 30.045a1.989 1.989 0 0 1-2.72 1.66l-9.633-3.729-6.048 5.665a1.561 1.561 0 0 1-2.628-1.153v-4.45z"
        />
      </symbol>
      <symbol
        id="arrow-up"
        width="24.737"
        height="23.502"
        viewBox="0 0 24.737 23.502"
      >
        <path
          data-name="Path 25"
          d="M13.244.362a1.236 1.236 0 0 0-1.749 0L.363 11.494a1.237 1.237 0 1 0 1.749 1.749l9.019-9.019v18.041a1.237 1.237 0 1 0 2.474 0V4.224l9.019 9.019a1.237 1.237 0 1 0 1.751-1.747z"
          fill="#fff"
        />
      </symbol>
    </svg>

    <header id="header" class="c-header" role="banner">
    <a href="/" class="c-logo">
        <img src="../../assets/shadeed.jpg" alt="Photo of Ahmad Shadeed">
        <span>Ahmad <strong>Shadeed</strong></span>
        <div class="c-lamp"></div>
    </a>
    <nav class="c-nav">
        <div class="c-nav__wrapper">
            <ul>
                
                
                <li class="c-nav__item">
                    <a href="/">Home</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/articles">Articles</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/snippets">Snippets</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/journal">Journal</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/about">About</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/hire-me">Hire me</a>
                </li>
                
                

                <button class="c-nav__close">
                    <svg width="17" height="17" viewBox="0 0 17 17">
                        <path d="M16.91 2.663a1.487 1.487 0 0 0 0-2.1l-.131-.131a1.483 1.483 0 0 0-2.1 0L8.936 6.179a.371.371 0 0 1-.528 0L2.663.434a1.487 1.487 0 0 0-2.1 0L.432.565a1.483 1.483 0 0 0 0 2.1L6.177 8.41a.371.371 0 0 1 0 .528L.432 14.683a1.487 1.487 0 0 0 0 2.1l.131.131a1.483 1.483 0 0 0 2.1 0l5.745-5.745a.371.371 0 0 1 .528 0l5.745 5.745a1.487 1.487 0 0 0 2.1 0l.131-.131a1.483 1.483 0 0 0 0-2.1l-5.747-5.747a.371.371 0 0 1 0-.528z" fill="#60c46f"/>
                    </svg>
                </button>
            </ul>
            <div class="c-nav__overlay"></div>
        </div>
        <button class="c-nav__toggle">
            <span></span>
        </button>
    </nav>
    <a class="c-header__follow" target="_blank" href="https://twitter.com/shadeed9">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="22.75" viewBox="0 0 28 22.75">
            <g data-name="Group 1">
                <path data-name="Path 1" d="M28 2.693a11.968 11.968 0 0 1-3.307.907A5.708 5.708 0 0 0 27.218.427a11.472 11.472 0 0 1-3.64 1.389 5.74 5.74 0 0 0-9.93 3.925 5.911 5.911 0 0 0 .133 1.309 16.248 16.248 0 0 1-11.832-6 5.742 5.742 0 0 0 1.764 7.672 5.669 5.669 0 0 1-2.594-.707v.063a5.767 5.767 0 0 0 4.6 5.64 5.729 5.729 0 0 1-1.5.189 5.075 5.075 0 0 1-1.087-.1 5.8 5.8 0 0 0 5.364 4 11.534 11.534 0 0 1-7.117 2.448A10.755 10.755 0 0 1 0 20.174a16.16 16.16 0 0 0 8.806 2.576c10.563 0 16.338-8.75 16.338-16.335 0-.254-.009-.5-.021-.742A11.451 11.451 0 0 0 28 2.693z"/>
            </g>
        </svg>
        <span>@shadeed9</span>
    </a>
</header>
 <div class="c-section c-section--article">
	<header class="post-header">
		<h1 class="post-header__title">Building Real-life Components: Facebook Messenger's Chat Bubble</h1>
		<div class="post-header__date">03 Nov 2021</div>
		<div class="post-header__reading-time" style="display: none;">
			

			
			Reading time: ~ 28 mins
		</div>
	</header>

	<div class="post-content">
		<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DV277&placement=wwwishadeedcom" id="_carbonads_js"></script>
		<p>I‚Äôm back again with some curiosity mixed with the discovery of Facebook messages. I got to see lots of work being done on the message bubbles only. If you ask a front-end developer about implementing a chat component, it might be tempting to quickly think that it‚Äôs simple and doesn‚Äôt have too many variations. This isn‚Äôt my first time digging into a component from Facebook, here is <a href="https://ishadeed.com/article/building-real-life-components/">an article about the messenger card</a> that I wrote earlier this year.</p>

<p>Once you dig deep into working with messages, you will need to tackle lots of details, especially for something large like Facebook. In this article, I will show you how the message bubble component was built with all of its variants, along with some interesting discoveries as well.</p>

<h2 id="introduction">Introduction</h2>
<p>To give you a better context, the chat bubble component looks like the below figure.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>At the first glance, it might look simple. However, you will discover the opposite when you dig in all its variations. I looked at all the variations and designed them in Figma to better understand the design choices.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Building the HTML and CSS for such a component is a challenging (and very interesting) job. In this case, the chat component should be dynamic to cope with the different content types, stats, bilingual support, and themes.</p>

<p>I won‚Äôt dig into all of them now to avoid confusion. Instead, I will show you the <strong>anatomy</strong> of a chat bubble.</p>

<h2 id="the-anatomy">The anatomy</h2>
<p>I called it ‚ÄúThe anatomy‚Äù because I enjoyed disassembling the UI. I literally imagined myself in a lab and looking at a microscope to see how it was built.</p>

<p>First, I want to point out an important thing. The structure differs between a message you sent and a message you receive.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you‚Äôre using an LTR (left-to-right) layout like English, then you are the blue bubble. The person you‚Äôre chatting with is the grey-ish one.</p>

<p>In case the layout is RTL (right-to-left) like Arabic, then it‚Äôs vice-versa. Consider the following figure:</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>With that being said, let‚Äôs get into the actual structure of the chat bubble component.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-5.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>A chat bubble consistent of the following:</p>
<ul>
  <li>An outer container that has three descendants: the status, the message, and the avatar.</li>
  <li>An inner container that has two descendants: the chat bubble itself, the action menu, and a spacer element.</li>
</ul>

<p>To make it even clearer, here is the same figure above but with separated containers.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-5-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>You might be wondering about the avatar, why it‚Äôs so small? And where is the avatar? That‚Äôs a good question.</p>

<p>The above anatomy is for a message <strong>viewed as you</strong>. If you receive a message, it will be flipped. To avoid building a different component for the flipped message, here is what I found.</p>

<p>The first and last items (The avatar and status) don‚Äôt flip based on who is sending the message. They only flip if the language direction changes (e.g: LTR vs RTL). Here are a few notes:</p>
<ul>
  <li>The avatar place is reserved, even if it‚Äôs not there. If <strong>you</strong> are sending a message, then the avatar place will be empty.</li>
  <li>However, when someone sends you a message, the avatar place will be filled with an image.</li>
  <li>The UI that <strong>flips</strong> is the middle element (The inner container) which contains the chat bubble, actions menu, and the spacer component.</li>
</ul>

<figure>
    
        <img src="../../assets/fb-msg/intro-6.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>What‚Äôs also powerful about this is that it works perfectly for RTL (right-to-left) layouts as well. Note that the outer container reverses automatically in RTL based on the page direction.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-6-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>With that, here is a figure that shows how the message outer and inner container look on LTR vs RTL layouts.</p>

<figure>
    
        <img src="../../assets/fb-msg/intro-6-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>I tried to explain the above without assuming that you know HTML &amp; CSS. In the following section, you will learn how to implement the structure explained above so we can explore the different variations along the way.</p>

<h2 id="the-basic-html--css">The basic HTML &amp; CSS</h2>
<p>Here is how the basic HTML looks like for the message.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__outer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__avatar"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__inner"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__bubble"</span><span class="nt">&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__actions"</span><span class="nt">&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__spacer"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__status"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>And the basic CSS:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__outer</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.message__inner</span> <span class="p">{</span>
    <span class="nl">flex</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">row-reverse</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With this basic structure, we have the following result (I added outlines to make it more clear.</p>

<figure>
    
        <img src="../../assets/fb-msg/basic-code-result.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>With that, we can move on to style the layout of the inner parts. We have the message, actions menu, and the spacer element.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__actions</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">67px</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.message__spacer</span> <span class="p">{</span>
    <span class="nl">flex</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/basic-code-result-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>I think the reasons for adding a fixed width to the actions menu are:</p>
<ul>
  <li>Reserving a space for it to avoid layout shift.</li>
  <li>To have better control over the inner layout. For example, the chat bubble should have a <code class="highlighter-rouge">max-width</code>. We might need to deduct the actions menu width from it.</li>
</ul>

<p>To make sure that things won‚Äôt break on smaller sizes, we need to take care of the following:</p>
<ul>
  <li>Accounting for the case when the spacer collapse due to the lack of space.</li>
  <li>Preventing the message actions from shrinking in smaller sizes.</li>
  <li>Avoid overflows by breaking very long words.</li>
</ul>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">100%</span> <span class="n">-</span> <span class="m">67px</span><span class="p">);</span>
    <span class="nl">overflow-wrap</span><span class="p">:</span> <span class="n">break-word</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.message__actions</span> <span class="p">{</span>
    <span class="nl">flex-shrink</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Next, I will dig into styling the status and the avatar areas (Those are direct descendants of the outer container).</p>

<h2 id="handling-mixed-content">Handling mixed content</h2>
<p>It‚Äôs worth mentioning that the message bubble can handle mixed content by using the <code class="highlighter-rouge">dir=auto</code> HTML attribute.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">dir=</span><span class="s">"auto"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>If the first text was written in RTL language (e.g: Arabic), the text will read from right to left, even if you enter LTR text after that.</p>

<p>If you enter text in LTR (e.g: English), then the text will read from left to right.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-mixed-content.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="styling-the-status-area">Styling the status area</h2>
<p>The message status element is a wrapper that might contain different status badges. Let‚Äôs take a zoomed-in look at it.</p>

<figure>
    
        <img src="../../assets/fb-msg/default-msg-status.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>That container can have different status elements like sent, delivered, and seen. See them below:</p>

<figure>
    
        <img src="../../assets/fb-msg/default-msg-status-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Here is a detailed look at the markup:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__status"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"avatar"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>The status container uses flexbox to align the child element to the bottom. Notice that the <code class="highlighter-rouge">flex-direction</code> value is <code class="highlighter-rouge">column</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__status</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">column</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">justify-content</span><span class="p">:</span> <span class="n">flex-end</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That way, the child element will always be at the bottom, even if the message height is too large. Having this is important in cases like writing a very long message, adding a new line, or sending an image.</p>

<figure>
    
        <img src="../../assets/fb-msg/default-msg-status-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you use Facebook, you might probably notice how the seen badge works per message. When you send a message and the person sees it, the seen avatar will be there. Once you send another message, the status will become empty but its place will stay reserved.</p>

<p>Here is a figure that shows the states in action:</p>

<figure>
    
        <img src="../../assets/fb-msg/default-msg-status-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="styling-the-sender-avatar">Styling the sender avatar</h2>
<p>By default, the avatar wrapper has horizontal padding to reserve a space for the avatar. It‚Äôs empty in case <strong>you</strong> are sending a message, while it will have the user avatar in case you get a message from someone.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__avatar"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"avatar"</span> <span class="na">src=</span><span class="s">"ahmad.jpg"</span> <span class="na">alt=</span><span class="s">"Photo of Ahmad Shadeed"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__avatar</span> <span class="p">{</span>
    <span class="nl">padding-left</span><span class="p">:</span> <span class="m">6px</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When the avatar wrapper is empty, the width will be <code class="highlighter-rouge">14px</code> (The sum of <code class="highlighter-rouge">6px</code> + <code class="highlighter-rouge">8px</code> padding values).</p>

<figure>
    
        <img src="../../assets/fb-msg/message-avatar.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In the case of viewing a message from someone, there will be an avatar with the size of 28*28.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-avatar-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To make it even clearer, here is a comparison between the avatar wrapper, viewed from the perspective of <strong>you</strong> and the <strong>sender</strong>.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-avatar-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="styling-message-actions">Styling message actions</h2>
<p>Each message can have a set of actions that appears on hover like:</p>
<ul>
  <li>React with an emoji</li>
  <li>Reply/Quote a message</li>
  <li>Share (For images and videos)</li>
  <li>More menu (With dots)</li>
</ul>

<p>Here are a few notes about that menu:</p>
<ul>
  <li>It has padding on the right, in case <strong>you</strong> are sending the message. Otherwise, the padding is on the left.</li>
  <li>It‚Äôs flipped for <strong>you</strong> with <code class="highlighter-rouge">flex-direction: row-reverse</code>, and the default ordering for the <strong>sender</strong> message.</li>
</ul>

<p>One particular thing that makes me happy is that the heavy usage of flexbox. I really, really like that!</p>

<p>Here is a figure that shows how the actions menu is flipped depending on the message direction (You vs Sender).</p>

<figure>
    
        <img src="../../assets/fb-msg/message-actions.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If the message is too long, or it‚Äôs an image or a video, then the actions menu should be vertically centered. That is possible by using flexbox alignment.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__actions"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"menu"</span><span class="nt">&gt;&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__actions</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">column</span><span class="p">;</span>
    <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">67px</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-actions-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Why that works? When the message has a long text or an image, the <code class="highlighter-rouge">.message__actions</code> element will stretch to fill its parent height. This is the default behavior of flexbox and we can get benefit from it to center the menu vertically.</p>

<p>Now that I explained the basic chat bubble, let‚Äôs get into the variations of it.</p>

<h2 id="multiple-bubbles">Multiple bubbles</h2>
<p>If we send multiple bubbles at once, we will have three different roundness states, and they differ for the <strong>you</strong> and the <strong>sender</strong> (the person you‚Äôre chatting with).</p>

<figure>
    
        <img src="../../assets/fb-msg/message-text-roundness.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Adding on that, they will flip based on the page direction (LTR vs RTL). I wish that the support for <code class="highlighter-rouge">border-radius</code> logical properties is good enough to be used. The logical values for <code class="highlighter-rouge">border-radius</code> got supported in Chrome v89 (Came out on 1 March 2021).</p>

<p>If the support was there, they will be used like the following.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* You, blue messages */</span>

<span class="c">/* First message */</span>
<span class="nc">.message--first</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="py">border-end-end-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Middle message */</span>
<span class="nc">.message--middle</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="py">border-start-end-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="py">border-end-end-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Last message */</span>
<span class="nc">.message--last</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="py">border-start-end-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I know, the double values like <code class="highlighter-rouge">end-end</code> might be confusing at first, but I will try to explain them in the next figure. We have two axes (Block and inline), each one has <code class="highlighter-rouge">start</code> and <code class="highlighter-rouge">end</code> values.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-text-roundness-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>When the layout is RTL (Right to left), the inline start and inline end will flip. That way, we don‚Äôt have to override the radius and change its direction. Notice how in the following figure, the <strong>Inline Start</strong> and <strong>Inline end</strong> are <strong>flipped</strong>.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-text-roundness-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you want to learn more about CSS logical properties, here is <a href="https://ishadeed.com/article/css-logical-properties/">an article</a> I wrote a while ago.</p>

<h2 id="handling-images">Handling Images</h2>

<figure>
    
        <img src="../../assets/fb-msg/message-image.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>At first glance, you might think that the work needed to handle different sizes and aspect ratio of images is an easy task. You might just need to add <code class="highlighter-rouge">max-width: 100%</code> and call it a day, right? That isn‚Äôt the case for Facebook.</p>

<p>When the user uploads an image, its width is added as an inline CSS, and there is also like <code class="highlighter-rouge">padding-bottom: 56.66%</code> to handle the responsivity of the image (The padding hack).</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"image"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image__main"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image__element"</span> <span class="na">style=</span><span class="s">"width: 348.259px; "</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image__aspectRatio"</span> <span class="na">style=</span><span class="s">"padding-bottom: 57.4286%"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image__wrapper"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"assets/thumb-1.png"</span> <span class="na">alt=</span><span class="s">""</span><span class="nt">&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.image</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">18px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#0006</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.image__main</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">480px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.image__element</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.image__aspectRatio</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.image__wrapper</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">bottom</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.image__wrapper</span> <span class="nt">img</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span> 
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span> 
    <span class="nl">max-height</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here are the rules that each image should follow:</p>
<ul>
  <li>The maximum width is <code class="highlighter-rouge">480px</code></li>
  <li>The maximum height is <code class="highlighter-rouge">200px</code></li>
  <li>An image should stay in the same aspect ratio when resized</li>
  <li>If the image is smaller than the maximum values, then we display it as it is</li>
</ul>

<p>What‚Äôs cool about how the team implemented this is that the aspect-ratio is generated on the fly, based on the image used.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-image-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Adding on that, it‚Äôs important to keep in mind that <a href="https://ishadeed.com/article/min-max-css/#setting-min-width-to-zero-with-flexbox">flexbox won‚Äôt shrink flex items</a> below their minimum content size. That means, if you resize the browser to a specific width, the flex item won‚Äôt shrink below its minimum content size. To fix that, we need to add <code class="highlighter-rouge">min-width: 0</code>.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-image-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In my demo code, the flex item is a direct child of <code class="highlighter-rouge">message__outer</code>, which is <code class="highlighter-rouge">message__row</code> in our case.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__row</span> <span class="p">{</span>
    <span class="nl">min-width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="c">/* other styles */</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here is how it should look when everything works as planned.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-image-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Finally, some might argue on why to get the fixed width of the image and add it as inline CSS? Every small decision has a valid reason. I guess this is related to an image being loaded. Otherwise, we will notice layout shifts if we don‚Äôt set a fixed size for the image.</p>

<h3 id="handling-multiple-images">Handling multiple images</h3>
<p>If you send multiple images, their aspect ratio won‚Äôt be respected. Instead, each image will be contained within a square and <code class="highlighter-rouge">object-fit</code> will do the magic to avoid distorting or stretching them.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-gallery.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.gallery</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
    <span class="nl">flex</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span>
    <span class="c">/* Revert the padding to make the gallery aligned
    with its siblings. */</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">-2px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.gallery__item</span> <span class="p">{</span>
    <span class="c">/* Add a 2px offset around each image, will result in 4
    for two adjacent images. */</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.gallery__item--third</span> <span class="p">{</span>
    <span class="nl">flex</span><span class="p">:</span> <span class="m">33.33%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.gallery__item--half</span> <span class="p">{</span>
    <span class="nl">flex</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here is what‚Äôs happening:</p>
<ul>
  <li>The image grid is built with CSS flexbox.</li>
  <li>Depending on the number of images, an image either get a width value equal to the <strong>third</strong> or <strong>half</strong> of its flexbox container.</li>
  <li>The spacing is handled via padding on each image parent.</li>
  <li>To avoid unnecessary spacing around the edges of the gallery, a negative margin value equal to the <code class="highlighter-rouge">padding</code> should be used on the flex container.</li>
</ul>

<p>I want to emphasize the use of <code class="highlighter-rouge">padding: 2px</code> for the spacing between each item. It‚Äôs even more useful in that case because it works in both LTR and RTL directions.</p>

<p>If you want to learn more about spacing in CSS, <a href="https://ishadeed.com/article/spacing-in-css/#spacing-in-grid-systems---flexbox">here is an article</a> that I wrote a while back.</p>

<h2 id="quoting-a-message">Quoting a message</h2>
<figure>
    
        <img src="../../assets/fb-msg/quote-text.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>A quote message consists of three main parts:</p>
<ul>
  <li>A header shows who replied to whom (E.g: You replied to Ahmad)</li>
  <li>The quoted message with a different style</li>
  <li>The quote itself</li>
</ul>

<p>Let‚Äôs take a closer look at the anatomy of the quoted message.</p>

<p>The first part is straightforward. For the quoted message, it‚Äôs very similar to the bubble chat component, but it doesn‚Äôt have elements like actions, status.. etc.</p>

<p>The message (in grey) has a large <code class="highlighter-rouge">padding-bottom</code> along with a negative <code class="highlighter-rouge">margin-bottom</code> value to move the quoted message up. Finally, it has a zero radius on the bottom-right corner.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message--washed</span> <span class="p">{</span>
    <span class="nl">border-bottom-right-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">8px</span> <span class="m">12px</span> <span class="m">9px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">-17px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And the part that has the padding is the text itself.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message--washed__text</span> <span class="p">{</span>
    <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-quote.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The same thing applies when an image is quoted. It looks like the following figure:</p>

<figure>
    
        <img src="../../assets/fb-msg/quote-image.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>And also quoting an attachment (Like a voice message or a video):</p>

<figure>
    
        <img src="../../assets/fb-msg/quote-attachment.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="reactions">Reactions</h2>
<p>A reaction is when a user reacts to a message with an emoji. The reaction is added as a row under the original message.</p>

<p>Consider the following figure.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-reaction.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__outer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__avatar"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__inner"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"msg-bubble-wrapper"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__bubble"</span><span class="nt">&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"reaction"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"reaction__content"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"assets/heart.png"</span> <span class="na">alt=</span><span class="s">""</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"assets/smile.png"</span> <span class="na">alt=</span><span class="s">""</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"count"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/span&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__actions"</span><span class="nt">&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__spacer"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__status"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>The element that is being pushed upwards is the reaction content, not the parent.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.reaction__content</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">3px</span><span class="p">;</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0px</span> <span class="m">2px</span> <span class="m">4px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.1</span><span class="p">);</span>
    <span class="nl">transform</span><span class="p">:</span> <span class="n">translateY</span><span class="p">(</span><span class="m">-7px</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Also, to position the elements at the start of its parent, we need to align them with flexbox from the parent level. This has to be the opposite for RTL (right-to-left) layouts.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.msg-bubble-wrapper.with-reaction</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-direction</span><span class="p">:</span> <span class="n">column</span><span class="p">;</span>
    <span class="nl">align-items</span><span class="p">:</span> <span class="n">flex-end</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To keep the avatar aligned with the bottom of the message, I noticed a div with a height of <code class="highlighter-rouge">18px</code> to act as a spacer element.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-reaction-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__status"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"avatar.jpg"</span> <span class="na">alt=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 18px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>or this, if it‚Äôs for the sender message.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message__avatar"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"avatar.jpg"</span> <span class="na">alt=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 18px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h2 id="messages-list-markup">Messages list markup</h2>
<p>The markup for the list of messages is interesting. There is a div with <code class="highlighter-rouge">role=grid</code> and <code class="highlighter-rouge">aria-label="Messages in conversation with Ahmad Shadeed"</code>.</p>

<p>Within that, each message has <code class="highlighter-rouge">role=row</code>, and inside each message row, there is the main element with <code class="highlighter-rouge">gridcell</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"mw_message_list"</span> <span class="na">role=</span><span class="s">"grid"</span> <span class="na">aria-label=</span><span class="s">"Messages in conversation with Ahmad Shadeed"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"gridcell"</span> <span class="na">tabindex=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"gridcell"</span> <span class="na">tabindex=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="c">&lt;!-- other messages --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>We aren‚Äôt done yet. In each message, there is a <strong>visually hidden</strong> element that says <strong>‚ÄúYou sent‚Äù</strong> or <strong>‚ÄúPerson sent‚Äù</strong>, depending on who sent the message.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"row"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">role=</span><span class="s">"gridcell"</span> <span class="na">tabindex=</span><span class="s">"0"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>You sent<span class="nt">&lt;/h4&gt;</span>
        <span class="c">&lt;!-- other elements --&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>What I noticed here is that one of the CSS properties used for hiding the text visually is <code class="highlighter-rouge">clip-path: inset(50%)</code>.</p>

<p>Here is the full properties used:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.sr-only</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">clip</span><span class="p">:</span> <span class="n">rect</span><span class="p">(</span><span class="m">0px</span><span class="p">,</span> <span class="m">0px</span><span class="p">,</span> <span class="m">0px</span><span class="p">,</span> <span class="m">0px</span><span class="p">);</span>
    <span class="nl">clip-path</span><span class="p">:</span> <span class="nb">inset</span><span class="p">(</span><span class="m">50%</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="spacing-between-messages">Spacing between messages</h2>
<p>Now that you know how the markup looks for each message row, let‚Äôs go into how the spacing is handled between messages. The spacing is handled via spacer components, not margins or anything else.</p>

<p>Each message row will have either a spacer with <code class="highlighter-rouge">2px</code> height, or <code class="highlighter-rouge">7px</code>, or both in some cases. In the following figure, the pink elements are <code class="highlighter-rouge">7px</code> spacers, and the yellow one is <code class="highlighter-rouge">2px</code> spacers.</p>

<figure>
    
        <img src="../../assets/fb-msg/spacing-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The top-level container of each message is a flex container with <code class="highlighter-rouge">column direction</code>.</p>

<p>For instance, here is a screenshot of a quoted message. It has both spacers. Also, the top-level parent is a flexbox container with <code class="highlighter-rouge">flex-direction: column</code>.</p>

<figure>
    
        <img src="../../assets/fb-msg/spacing-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="dividers--separators">Dividers / Separators</h2>
<p>A divider can either have a text or a time. I will focus on the time one for the article.</p>

<p>When you chat with someone after a while, you will notice that there is a centered element with a day and time.</p>

<figure>
    
        <img src="../../assets/fb-msg/divider.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The markup for the day and time is interesting. Here it is:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>October 28 at 6:12 PM<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>Thu 6:12 PM<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/h2&gt;</span>
</code></pre></div></div>

<p>The first one is for screen readers. You can tell that from the <code class="highlighter-rouge">sr-only</code> class (Hint: they are using utility classes and I added <code class="highlighter-rouge">sr-only</code> for clarity purposes). The second one is hidden from screen readers and is meant to be displayed visually. Interesting, no?</p>

<h3 id="custom-theming">Custom theming</h3>
<p>Even though I see this product feature unnecessary thing to do. In short, The user can customize the color of their messages to gradient colors.</p>

<figure>
    
        <img src="../../assets/fb-msg/message-theming.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>When the user browses the messages, the gradient will look like it‚Äôs being animated on scroll. Here is a video:</p>

<video controls="" style="width: initial;">
    <source src="../../assets/fb-msg/message-theming.mp4" type="video/mp4" />
</video>

<p>From the first glance, you might think that this is done via Javascript and each message has a custom background image that changes its position based on scrolling, but no. This is all in CSS, and I will tell you how.</p>

<p>The gradient you saw is added to the messages container background. That means, the whole white background you see between the messages will be colored. Consider the following figure:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.messages-parent</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#3a12ff</span><span class="p">;</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="m">#faaf00</span><span class="p">,</span> <span class="m">#ff2e2e</span><span class="p">,</span> <span class="m">#3a12ff</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The next step is to remove the background color and border-radius from each message bubble. (Yes, you read that right).</p>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-3.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Next step, we need to add a white background to literally everything in the UI except the chat bubbles. (Again, you read that right).</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__actions</span><span class="o">,</span>
<span class="nc">.message__status</span><span class="o">,</span>
<span class="nc">.spacer-xs</span><span class="o">,</span>
<span class="nc">.spacer-lg</span><span class="o">,</span>
<span class="nc">.message__spacer</span><span class="o">,</span>
<span class="nc">.message__avatar</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>        
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-4.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>And to prove that, here is me inspecting Facebook and breaking the theming. Notice that when I changed the background to a gradient, there are too many elements that got affected by that. All those elements should be in white, to cover the gradient.</p>

<video controls="" style="width: initial;">
    <source src="../../assets/fb-msg/message-theming-break.mp4" type="video/mp4" />
</video>

<p>Now that we‚Äôve isolated the chat bubbles, how can we add the rounded corners back? pseudo-elements to the rescue.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.custom-theming</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="nb">transparent</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.custom-theming</span> <span class="nc">.message__bubble</span><span class="nd">::after</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">right</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">bottom</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">36px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With the above, we‚Äôll have the following result:</p>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-5.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Next, we need to edit the corners. How we can create an inner rounded corner? Well, it turned out that the inner corner is based on the following formula:</p>

<blockquote>
  <p>Inner radius = border-radius - border-width</p>
</blockquote>

<p>That means, even if add <code class="highlighter-rouge">border-radius: 36px</code> to the above, the inner corner will still be zero. Without the custom theming, the border-radius is <code class="highlighter-rouge">18px</code>. To reflect that on the inner radius, we need to increase the <code class="highlighter-rouge">border-radius</code> for the pseudo-element.</p>

<blockquote>
  <p>Inner radius = 54px - 36px = 18px</p>
</blockquote>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.custom-theming</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="nb">transparent</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.custom-theming</span> <span class="nc">.message__bubble</span><span class="nd">::after</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">right</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">bottom</span><span class="p">:</span> <span class="m">-36px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">54px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">36px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-6.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Finally, we need to contain the pseudo-element within the message bubble wrapper.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.custom-theming</span> <span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="nb">transparent</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/fb-msg/message-theming-7.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The final step is to change the <code class="highlighter-rouge">border-color</code> to white, as nothing happens.</p>

<p>In case you‚Äôre still wondering how the on-scroll animation happens for the messages, it‚Äôs via <code class="highlighter-rouge">background-attachment: fixed</code>. Not only that but there is also a <code class="highlighter-rouge">2px</code> border on the sides with white color. I think this is on purpose to make it work with the custom theming background.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.messages-parent</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#3a12ff</span><span class="p">;</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="m">#faaf00</span><span class="p">,</span> <span class="m">#ff2e2e</span><span class="p">,</span> <span class="m">#3a12ff</span><span class="p">);</span>
    <span class="nl">background-attachment</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
    <span class="nl">border-left</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="py">borfer-right</span><span class="p">:</span> <span class="m">2px</span> <span class="nb">solid</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>
<p>It was an interesting journey to dig into how Facebook messages was built. I enjoyed the process very much. Here are some key takeaways:</p>
<ul>
  <li>CSS flexbox is the best thing that happened to UI design.</li>
  <li>Don‚Äôt underestimate if building a component is easy or not by only looking at one variation.</li>
  <li>Frankly, I didn‚Äôt expect to write that much about that topic. When I started, I thought like ‚ÄúHey, this is gonna be a quick write-up‚Äù. I was wrong, and I‚Äôm happy about that.</li>
  <li>In some way, you need to trade off some things. For example, the theming on scroll thingy can totally be done via Javascript, but the team opted-in for a CSS only solution, and I think it‚Äôs for performance reasons.</li>
  <li>Working on an international product means that we need to handle different language directions from the start, and I enjoyed seeing these things in their work, specially that I <a href="https://rtlstyling.com/">wrote a guide about RTL styling</a>.</li>
</ul>

<p>That‚Äôs the end. If you‚Äôve reached here, thank you very much.</p>

<p>Do you have feedback or a comment? Please feel free to ping me via Twitter <a href="https://twitter.com/shadeed9">@shadeed9</a>.</p>

	</div>

	<div class="o-wrapper o-wrapper--small">
		<div class="coffee" style="padding: 2rem;
		background: #f7f7f7;
		margin-bottom: 2rem;
		border-radius: 5px;
		line-height: 1.4;">
			Do you like my content? You can support and <a href="https://www.buymeacoffee.com/EmbDfQoF6" style="color: #3863d9;">buy me a coffee</a>. Thank you so much!
		</div>
	</div>

	<div class="o-wrapper o-wrapper--small">
		<section class="c-section--more">
			<h2 class="visually-hidden">More articles</h2>
			<div class="c-section--more__content">
				<div class="c-section--more__item prev">
					
					<h3>Previous Article</h3>
					<a class="c-block--more__link prev" href="/article/prevent-scroll-chaining-overscroll-behavior/"> Prevent Scroll Chaining With Overscroll Behavior</a>
					
				</div>
				<div class="c-section--more__item next">
					
					<h3>Next Article</h3>
					<a class="c-block--more__link next" href="/article/position-sticky-css-grid/"> Using Position Sticky With CSS Grid </a>
					
				</div>
			</div>
		</section>

		<p class="rss-feed">Subscribe to my <a class="u-link" href="https://ishadeed.com/feed.xml">RSS feed</a></p>

		<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://ishadeed.us8.list-manage.com/subscribe/post?u=30743dd25d7a680eed0b535d3&amp;id=38d30cb86b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2 class="mc-title">Subscribe to the newsletter</h2>
	<p class="mc-desc">Get the latest CSS articles published by Ahmad Shadeed, a UX Designer and Front End Developer.</p>
	<div class="mc-input-group">
		<div class="mc-field-group">
			<label for="mce-EMAIL">Email Address</label>
			<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
		</div>
		<div class="mc-field-group">
			<label for="mce-FNAME">First Name </label>
			<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
		</div>
	</div>
	<div id="mce-responses">
		<div class="response" id="mce-error-response" style="display:none">erorr</div>
		<div class="response" id="mce-success-response" style="display:none">success</div>
	</div>
	<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_30743dd25d7a680eed0b535d3_38d30cb86b" tabindex="-1" value=""></div>
	<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
	
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->

	
	</div>

	

	<footer class="post-footer">
  <div class="post-author">
    <img src="../../assets/shadeed.jpg" alt="Avatar: Ahmad Shadeed" class="post-author__avatar">
    <div>
      <h2 class="post-author__name">Ahmad Shadeed</h2>
      <p class="post-author__bio">UI, UX Designer &amp; Front-End Developer. <strong>You can <a href="/hire-me">hire me</a></strong>. I Write about web accessibility on <a href="https://twitter.com/weba11ymatters">@weba11ymatters</a> and share articles on my blog.</p>
    </div>
  </div>
</footer>

</div>

<footer class="c-section c-section--footer full footer-simple">
  <div class="footer-row">
    <h3 class="c-section__title footer-copyrights">
      The online studio of Ahmad Shadeed.
      <span>¬© 2012‚Äì2021 Copyright Ahmad Shadeed. All rights reserved.</span>
    </h3>

    <div>
      <h3 class="social-title">Find me online</h3>
      <ul>
        <li>
          <a
            href="https://www.instagram.com/ishadeed"
            class="instagram"
            target="_blank"
            >Instagram</a
          >
        </li>
        <li>
          <a href="https://twitter.com/shadeed9" class="twitter">Twitter</a>
        </li>
        <li>
          <a href="https://www.behance.net/ishadeed" class="behance">Behance</a>
        </li>
        <li>
          <a href="https://codepen.io/shadeed/" class="linkedin">CodePen</a>
        </li>
        <li>
          <a href="https://github.com/shadeed" class="instagram">Github</a>
        </li>
        <li><a href="https://ishadeed.com/feed.xml">RSS Feed</a></li>
      </ul>
    </div>
  </div>

  <a href="#header" class="go-up" aria-label="Go up">
    <svg width="20" height="20" viewBox="0 0 24 24">
      <use xlink:href="#arrow-up"></use>
    </svg>
  </a>
</footer>


    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-42479265-2", "auto");
      ga("send", "pageview");
    </script>
    <script>
      var menuToggle = document.querySelector(".c-nav__toggle");
      var navWrapper = document.querySelector(".c-nav__wrapper");
      var closeNav = document.querySelector(".c-nav__close");

      menuToggle.addEventListener("click", function () {
        navWrapper.classList.add("is-active");
      });

      closeNav.addEventListener("click", function () {
        navWrapper.classList.remove("is-active");
      });

      /*let targetElement = document.querySelector('.c-section--footer');
    let cricketsAudio = document.querySelector('#crickets');

    const options = {
        root: null,
        rootMargin: '0px',
        threshold: 0
    };

    function callback (entries, observer) {
        //console.log(observer);
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                cricketsAudio.play();
            } else {
                cricketsAudio.pause();
            }
        });
    }

    let observer = new IntersectionObserver(callback, options);
    observer.observe(targetElement);*/
    </script>
  </body>
</html>
