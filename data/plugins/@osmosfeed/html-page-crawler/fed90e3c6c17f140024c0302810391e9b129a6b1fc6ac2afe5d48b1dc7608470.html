<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="robots" content="noodp">

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, viewport-fit=cover">

    <title>  The Focus-Indicated Pseudo-class :focus-visible | WebKit</title>

    <meta name="application-name" content="WebKit">

    <link rel="stylesheet" type="text/css" href="https://webkit.org/wp-content/themes/webkit/style.css?20200127" media="all">
    <link rel="stylesheet" href="https://www.apple.com/wss/fonts?families=SF+Pro,v1" type="text/css">
    <link rel="stylesheet" href="https://www.apple.com/wss/fonts?families=SF+Mono,v2" type="text/css">
    <meta name="supported-color-schemes" content="light dark">

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="https://webkit.org/feed/">
    <link rel="alternate" type="text/xml" title="RSS .92" href="https://webkit.org/feed/rss/">
    <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="https://webkit.org/feed/atom/">
    <link rel="pingback" href="https://webkit.org/wp/xmlrpc.php">

    <link rel="shortcut icon" sizes="32x32" type="image/x-icon" href="/favicon.ico">

    <meta name='robots' content='max-image-preview:large' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://webkit.org/wp/wp-includes/css/dist/block-library/style.min.css?ver=5.8.2' type='text/css' media='all' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://webkit.org/wp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://webkit.org/wp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.8.2" />
<link rel="canonical" href="https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/" />
<link rel='shortlink' href='https://webkit.org/?p=12179' />
<link rel="alternate" type="application/json+oembed" href="https://webkit.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwebkit.org%2Fblog%2F12179%2Fthe-focus-indicated-pseudo-class-focus-visible%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://webkit.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwebkit.org%2Fblog%2F12179%2Fthe-focus-indicated-pseudo-class-focus-visible%2F&#038;format=xml" />

    <!-- Schema.org markup -->
    <meta itemprop="name" content="The Focus-Indicated Pseudo-class :focus-visible">
    <meta itemprop="description" content="The &#8220;focus indicator&#8221;, as its name suggests, visually indicates (often with a kind of an outline) that an element has focus.">
    <meta itemprop="image" content="https://webkit.org/wp-content/uploads/focus-indicator.png">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:src" content="https://webkit.org/wp-content/uploads/focus-indicator.png">
    <meta name="twitter:site" content="@webkit">
    <meta name="twitter:title" content="The Focus-Indicated Pseudo-class :focus-visible">
    <meta name="twitter:description" content="The &#8220;focus indicator&#8221;, as its name suggests, visually indicates (often with a kind of an outline) that an element has focus.">
    <meta name="twitter:creator" content="@regocas">

    <!-- Open Graph data -->
    <meta property="og:title" content="The Focus-Indicated Pseudo-class :focus-visible">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/">
    <meta property="og:image" content="https://webkit.org/wp-content/uploads/focus-indicator.png">
    <meta property="og:description" content="The &#8220;focus indicator&#8221;, as its name suggests, visually indicates (often with a kind of an outline) that an element has focus.">
    <meta property="og:site_name" content="WebKit">
    <meta property="article:published_time" content="2022-01-31T09:00:42-08:00">
    <meta property="article:modified_time" content="2022-01-28T09:27:05-08:00">
    <meta property="article:section" content="CSS">
    <meta property="fb:admins" content="1085088865">
</head>
<body class="post-template-default single single-post postid-12179 single-format-standard">
    <!-- Copyright Â© 2020 Apple Inc. All rights reserved. -->
<svg xmlns="http://www.w3.org/2000/svg">
	<style> svg { display: block; width: 0; height: 0; } </style>
    <filter id="invertLightness" x="0" y="0" style="color-interpolation-filters: sRGB">
        <feColorMatrix type="matrix" in="SourceGraphic" result="red" values="1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 1" />
        <feColorMatrix type="matrix" in="SourceGraphic" result="green" values="0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1" />
        <feColorMatrix type="matrix" in="SourceGraphic" result="blue" values="0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 1" />
        <feBlend in="red" in2="green" mode="lighten" result="maxyellow" />
        <feBlend in="maxyellow" in2="blue" mode="lighten" result="max" />
        <feBlend in="red" in2="green" mode="darken" result="minyellow" />
        <feBlend in="minyellow" in2="blue" mode="darken" result="min" />
        <feComponentTransfer result="adjustment" in="min">
            <feFuncR type="linear" intercept="1" slope="-1" />
            <feFuncG type="linear" intercept="1" slope="-1" />
            <feFuncB type="linear" intercept="1" slope="-1" />
        </feComponentTransfer>
        <feComposite operator="arithmetic" in="SourceGraphic" in2="adjustment" k1="0" k2="1" k3="1" k4="-1" result="channelAdjustment" />
        <feComposite operator="arithmetic" in="channelAdjustment" in2="max" k1="0" k2="1" k3="-1" k4="1" result="finalColors" />
        <feComposite operator="in" in="finalColors" in2="SourceAlpha" />
    </filter>
</svg>    <header aria-label="WebKit.org Header" id="header">
        <div class="page-width">
        <a href="/"><div id="logo" class="site-logo">WebKit</div></a>
        <nav id="site-nav" aria-label="Site Menu">
<div class="menu-main-menu-container"><input type="checkbox" id="menu-main-menu-toggle" class="menu-toggle" /><label for="menu-main-menu-toggle" class="label-toggle main-menu" data-open="Main Menu" data-close="Close Menu"></label><ul id="menu-main-menu" class="menu" role="menubar"><li id="menu-item-4270" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-4270"><a href="https://webkit.org/blog/" role="menuitem">Blog</a></li>
<li id="menu-item-6091" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6091"><a href="https://webkit.org/downloads/" role="menuitem">Downloads</a></li>
<li id="menu-item-4272" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4272"><a href="https://webkit.org/status/" role="menuitem">Feature Status</a></li>
<li id="menu-item-9988" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-9988"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><a href="#nav-sub-menu" role="menuitem" aria-haspopup="true" aria-owns="sub-menu-for-9988" aria-controls="sub-menu-for-9988" aria-expanded="true"><label for="toggle-9988" class="label-toggle">Documentation</label></a>
<ul class="sub-menu sub-menu-layer" role="menu" id="sub-menu-for-9988">
	<li id="menu-item-4273" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4273"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><a href="https://webkit.org/reporting-bugs/" role="menuitem">How to Report Bugs</a></li>
	<li id="menu-item-9989" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9989"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><a href="/web-inspector" role="menuitem">Web Inspector</a></li>
	<li id="menu-item-10868" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10868"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><a href="https://webkit.org/tracking-prevention/" role="menuitem">Tracking Prevention</a></li>
</ul>
</li>
<li id="menu-item-4274" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-4274"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="#nav-sub-menu" role="menuitem" aria-haspopup="true" aria-owns="sub-menu-for-4274" aria-controls="sub-menu-for-4274" aria-expanded="true"><label for="toggle-4274" class="label-toggle">Contribute</label></a>
<ul class="sub-menu sub-menu-layer" role="menu" id="sub-menu-for-4274">
	<li id="menu-item-10037" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10037"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="https://webkit.org/project/" role="menuitem">Project Goals</a></li>
	<li id="menu-item-4277" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4277"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="https://webkit.org/getting-started/" role="menuitem">Getting Started</a></li>
	<li id="menu-item-4284" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4284"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="https://webkit.org/contributing-code/" role="menuitem">Contributing Code</a></li>
	<li id="menu-item-4281" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4281"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="https://webkit.org/testing-contributions/" role="menuitem">Testing Contributions</a></li>
	<li id="menu-item-4282" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4282"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="https://webkit.org/policy-and-guidelines/" role="menuitem">Policy and Guidelines</a></li>
	<li id="menu-item-4278" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4278"><input type="checkbox" id="toggle-9988" class="menu-toggle" /><input type="checkbox" id="toggle-4274" class="menu-toggle" /><a href="http://trac.webkit.org" role="menuitem">Trac Timeline</a></li>
</ul>
</li>
</ul></div></nav>
        </div>
    </header>

<main id="content">
    <div class="page-width">
    
        <article class="post-12179 post type-post status-publish format-standard hentry category-css" id="post-12179">
            <h1><a href="https://webkit.org/blog/12179/the-focus-indicated-pseudo-class-focus-visible/" rel="bookmark" title="Permanent Link: The Focus-Indicated Pseudo-class :focus-visible">The Focus-Indicated Pseudo-class :focus-visible</a></h1>
            <div class="byline">
                <p class="date">Jan 31, 2022</p>
                <p class="author">by <span>Manuel Rego</span></p>
                                <p class="twitter"><a href="https://twitter.com/regocas" target="_blank">@regocas</a></p>
                            </div>

            <div class="bodycopy">
                <p>The &#8220;focus indicator&#8221;, as its name suggests, visually indicates (often with a kind of an outline) that an element has focus. That sounds simple enough, and it perfectly describes what the old <code>:focus</code> selector makes possible. However, for decades now, whether a browser will actually display a focus indicator natively has been a considerably more complex affair.</p>
<figure class="widescreen mattewhite">
<img loading="lazy" src="https://webkit.org/wp-content/uploads/focus-indicator.png" alt="Focus indicator on different elements in Safari" width="675" height="450" class="wp-image-12183" srcset="https://webkit.org/wp-content/uploads/focus-indicator.png 675w, https://webkit.org/wp-content/uploads/focus-indicator-300x200.png 300w" sizes="(max-width: 675px) 100vw, 675px" /><figcaption>Focus indicator on different elements in Safari</figcaption></figure>
<p>Based on lots of feedback and study, browsers have long employed heuristics about both the type of element, and how it came to gain focus, in order to determine whether the focus indicator should be displayed. If the user is navigating the page <em>with the keyboard</em>, it should. In other situations, it depends. A text input, for example, will display an indicator regardless of how it received focus. This is important because all users need to know where their input data will be placed. Interfaces that do not employ those heuristics feel unnatural.</p>
<p>The goal of the old <code>:focus</code> selector was to allow authors to better style the focus indicator to be in tune with their overall design choices. The trouble is that using it meant losing the heuristics. The net result, unfortunately, has been that the most common use of the <code>:focus</code> selector has been to remove indicators altogether. This avoids the &#8220;false positive&#8221; focus styles that cause complaints from many users. The problem is that removing focus styling breaks website accessibility, causing trouble for people navigating the page using the keyboard.</p>
<p>Fortunately, a new CSS selector comes to the rescue, avoiding this kind of accessibility issue while providing the behavior web developers were looking for. The <a href="https://drafts.csswg.org/selectors/#the-focus-visible-pseudo"><code>:focus-visible</code> pseudo-class</a> matches elements based on the browsers heuristics. It allows web authors to style the focus indicator <em>only if it would be drawn natively</em>.</p>
<p>Despite being a new feature that has recently landed on the web platform, it&#8217;s already being used by almost 1% of web pages (according to the <a href="https://almanac.httparchive.org/en/2021/css#pseudo-classes-and--elements">Web Almanac by HTTP Archive</a>).</p>
<h2>Implementation</h2>
<p>As of <a href="https://developer.apple.com/safari/technology-preview/">Safari Technology Preview 138</a>, the <code>:focus-visible</code> selector has been added to WebKit, paying special attention to interoperability with other implementations. As part of the WebKit implementation, the Web Platform Tests test suite has been improved and expanded quite a lot, adding coverage to new cases and ensuring a better interop between the different implementations.</p>
<p>This work led to changes and improvements all around. Thanks to tests and discussions, all browsers now follow a common set of heuristics and have the same behavior in most situations. In WebKit, for example, clicking on a <code>&lt;div tabindex="0"&gt;</code> will no longer show a focus indicator by default (matching other browser engines).</p>
<p>In addition, the default User Agent style sheet in all browsers now uses the <code>:focus-visible</code> pseudo-class. This is a nice thing to have because it avoids the type of issues that happened with <code>:focus</code> in the first place, and circumvents the need of using some weird workarounds, like <code>:focus:not(:focus-visible)</code>, to style the default focus indicator painted by the browser.</p>
<p>If you&#8217;re curious about the implementation details, you can read a series of blog posts written along the path to development at <a href="https://blogs.igalia.com/mrego/tag/focus-visible/">blogs.igalia.com/mrego</a>, or watch <a href="https://www.youtube.com/watch?v=70_p3WmdZv8">this talk</a>.</p>
<h2>Examples</h2>
<p>The good news after all the changes that have happened around <code>:focus-visible</code> lately, is that now you&#8217;d just need to use <code>:focus-visible</code> selector to style the focus indicator drawn by the browser engines.</p>
<p>On top of that, browsers are no longer showing a focus indicator when the user isn&#8217;t expecting it, like focusing a regular element via mouse click.</p>
<p>Web authors won&#8217;t need any kind of workaround to achieve the goal of styling the focus indicator shown by the web engine.</p>
<p>For example, if you want your focus indicator to have a thick magenta outline with a small offset, you just need to use the following CSS on your website:</p>
<pre><code class="css"><span class="preprocessor">:focus-visible</span> {
    <span class="attribute">outline</span>: <span class="identifier">solid</span> <span class="identifier">thick</span> <span class="identifier">magenta</span>;
    <span class="attribute">outline-offset</span>: <span class="number">0.1em</span>;
}
</code></pre>
<figure class="mattewhite">
<img loading="lazy" src="https://webkit.org/wp-content/uploads/focus-visible-1.png" alt="Customized focus indicator outline using :focus-visible" width="675" height="150" class="wp-image-12188" srcset="https://webkit.org/wp-content/uploads/focus-visible-1.png 675w, https://webkit.org/wp-content/uploads/focus-visible-1-300x67.png 300w" sizes="(max-width: 675px) 100vw, 675px" /><br />
</figure>
<p>And you can use other properties, not only the outline related ones, to customize the focus indicator in your website. E.g.:</p>
<pre><code class="css"><span class="preprocessor">:focus-visible</span> {
    <span class="attribute">outline</span>: <span class="identifier">dotted</span> <span class="identifier">thick</span> <span class="identifier">green</span>;
    <span class="attribute">background</span>: <span class="identifier">lime</span>;
    <span class="attribute">box-shadow</span>: <span class="number">0.3em</span> <span class="number">0.3em</span> <span class="identifier">lightgrey</span>;
}
</code></pre>
<figure class="mattewhite">
<img loading="lazy" src="https://webkit.org/wp-content/uploads/focus-visible-2.png" alt="Customized focus indicator changing outline, background and box-shadow with :focus-visible" width="425" height="150" class="wp-image-12191" srcset="https://webkit.org/wp-content/uploads/focus-visible-2.png 425w, https://webkit.org/wp-content/uploads/focus-visible-2-300x106.png 300w" sizes="(max-width: 425px) 100vw, 425px" /></figure>
<h2>Open Prioritization</h2>
<p>It&#8217;s worth mentioning that this work was collectively chosen from among many, in numerous engines and partially funded by the public, through Igalia&#8217;s <a href="https://opencollective.com/focus-visible-in-webkit">Open Prioritization campaign</a>. This effort works to democratize the development of web platform features, giving groups of people and smaller organizations the chance to have a direct impact on the web ecosystem. If you want to learn more about this, <a href="https://www.youtube.com/watch?v=zhlw7_BoG9U">Eric Meyer gave a talk explaining it at the W3C&#8217;s TPAC</a>.</p>
<p>Thanks to many contributions, this experiment yielded not only <code>:focus-visible</code> development in WebKit, but a lot of interoperability work and alignment in other implementations and a sense that there was real demand for the feature. Thank you to everyone involved.</p>
<h2>Feedback</h2>
<p><code>:focus-visible</code> pseudo-class has been enabled by default in <a href="https://developer.apple.com/safari/technology-preview/">Safari Technology Preview 138</a>, please try it out and report any issues you might found on <a href="https://bugs.webkit.org/">bugs.webkit.org</a>. You can also send a tweet to <a href="https://twitter.com/regocas">@regocas</a> or <a href="https://twitter.com/webkit">@webkit</a> to share your thoughts about this feature.</p>

                            </div>
        </article>

        <aside class="nextrouter" aria-label="Next/Previous posts">
            <div class="bodycopy">
                                    </div>
        </aside>
        <aside class="nextrouter previous" aria-label="Next/Previous posts">
            <div class="bodycopy">
            <a class="page-numbers prev-post" href="https://webkit.org/blog/12193/release-notes-for-safari-technology-preview-139/" rel="prev"><div class="nextrouter-copy"><span class="label">Previously</span><span class="title">Release Notes for Safari Technology Preview 139</span><span class="link">Learn more</span></div></a>            </div>
        </aside>

    
    
    </div><!--.page-width-->
</main><!-- #content -->

<footer>
    <div class="page-width">
        <nav id="footer-nav" aria-label="Footer menu"><div class="menu-footer-menu-container"><ul id="menu-footer-menu" class="menu"><li id="menu-item-7617" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7617"><a href="https://twitter.com/webkit">@webkit</a></li>
<li id="menu-item-5365" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5365"><a href="https://webkit.org/sitemap/">Site Map</a></li>
<li id="menu-item-4185" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4185"><a href="http://www.apple.com/legal/privacy/">Privacy Policy</a></li>
<li id="menu-item-4287" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4287"><a href="https://webkit.org/licensing-webkit/">Licensing WebKit</a></li>
<li id="menu-item-4187" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4187"><a href="https://webkit.org/terms-of-use/">WebKit and the WebKit logo are trademarks of Apple Inc.</a></li>
</ul></div></nav>
    </div>
</footer>


<script type='text/javascript' src='https://webkit.org/wp-content/themes/webkit/scripts/global.js?ver=1.0' id='theme-global-js'></script>
<script type='text/javascript' src='https://webkit.org/wp/wp-includes/js/wp-embed.min.js?ver=5.8.2' id='wp-embed-js'></script>
</body>
</html>
<!-- Dynamic page generated in 0.202 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2022-01-31 16:11:33 -->

<!-- super cache -->