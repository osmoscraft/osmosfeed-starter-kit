

<!doctype html>
<html lang="en-US">
<head data-template-path="https://hacks.mozilla.org/wp-content/themes/Hax">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="w2ocEMd5yV9IsGCjhq-7ls67r4VH-Ob6oWdiZpqjN8U">

  
  <meta name="title" content="Improved Process Isolation in Firefox 100 – Mozilla Hacks - the Web developer blog">

    <meta property="og:site_name" content="Mozilla Hacks &#8211; the Web developer blog">
  <meta property="og:url" content="https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100">
  <meta property="og:title" content="Improved Process Isolation in Firefox 100 – Mozilla Hacks - the Web developer blog">
  <meta property="og:description" content="Firefox uses a multi-process model for additional security and stability while browsing. Web Content is rendered in separate processes.">
  <meta property="og:image" content="https://hacks.mozilla.org/files/2021/04/firefox-generic-hero-2.png">
  <meta property="og:image:width" content="1643">
  <meta property="og:image:height" content="924">

    <meta property="twitter:title" content="Improved Process Isolation in Firefox 100 – Mozilla Hacks - the Web developer blog">
  <meta property="twitter:description" content="Firefox uses a multi-process model for additional security and stability while browsing. Web Content is rendered in separate processes.">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="https://hacks.mozilla.org/files/2021/04/firefox-generic-hero-2.png">
  <meta name="twitter:site" content="@mozhacks">

  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/style.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.6.0/styles/solarized_light.min.css">

  <script type="text/javascript">
    window.hacks = {};
    // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
    var removeUtms  =   function(){
        var l = window.location;
        if( l.hash.indexOf( "utm" ) != -1 ){
            var anchor = l.hash.match(/#(?!utm)[^&]+/);
            anchor  =   anchor? anchor[0]: '';
            if(!anchor && window.history.replaceState){
                history.replaceState({},'', l.pathname + l.search);
            } else {
                l.hash = anchor;
            }
        };
    };

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35433268-8'],
              ['_setAllowAnchor', true]);
    _gaq.push (['_gat._anonymizeIp']);
    _gaq.push(['_trackPageview']);
    _gaq.push( removeUtms );
    (function(d, k) {
      var ga = d.createElement(k); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = d.getElementsByTagName(k)[0]; s.parentNode.insertBefore(ga, s);
    })(document, 'script');
  </script>

  <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />
<meta name="blog-name" content="Mozilla Hacks - the Web developer blog" />
<link rel="alternate" hreflang="en" href="https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/" />
<link rel="alternate" hreflang="x-default" href="https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/" />

	<!-- This site is optimized with the Yoast SEO plugin v18.8 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Improved Process Isolation in Firefox 100 - Mozilla Hacks - the Web developer blog</title>
	<meta name="description" content="Firefox uses a multi-process model for additional security and stability while browsing. Web Content is rendered in separate processes." />
	<link rel="canonical" href="https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="Gian-Carlo Pascutto" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="9 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://hacks.mozilla.org/#website","url":"https://hacks.mozilla.org/","name":"Mozilla Hacks - the Web developer blog","description":"hacks.mozilla.org","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://hacks.mozilla.org/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","inLanguage":"en-US","@id":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/#primaryimage","url":"https://hacks.mozilla.org/files/2021/04/firefox-generic-hero-2.png","contentUrl":"https://hacks.mozilla.org/files/2021/04/firefox-generic-hero-2.png","width":1643,"height":924},{"@type":"WebPage","@id":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/#webpage","url":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/","name":"Improved Process Isolation in Firefox 100 - Mozilla Hacks - the Web developer blog","isPartOf":{"@id":"https://hacks.mozilla.org/#website"},"primaryImageOfPage":{"@id":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/#primaryimage"},"datePublished":"2022-05-12T15:09:10+00:00","dateModified":"2022-05-12T16:00:48+00:00","author":{"@id":"https://hacks.mozilla.org/#/schema/person/1e1bec0d83b0bf990e1b5f56adad7451"},"description":"Firefox uses a multi-process model for additional security and stability while browsing. Web Content is rendered in separate processes.","breadcrumb":{"@id":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/"]}]},{"@type":"BreadcrumbList","@id":"https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://hacks.mozilla.org/"},{"@type":"ListItem","position":2,"name":"Articles","item":"https://hacks.mozilla.org/articles/"},{"@type":"ListItem","position":3,"name":"Improved Process Isolation in Firefox 100"}]},{"@type":"Person","@id":"https://hacks.mozilla.org/#/schema/person/1e1bec0d83b0bf990e1b5f56adad7451","name":"Gian-Carlo Pascutto","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://hacks.mozilla.org/#/schema/person/image/","url":"https://secure.gravatar.com/avatar/6ad7e6f8a605ca81446ea4c83d819fb2?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/6ad7e6f8a605ca81446ea4c83d819fb2?s=96&d=mm&r=g","caption":"Gian-Carlo Pascutto"},"url":"https://hacks.mozilla.org/author/gpascuttomozilla-com/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='//blog.mozilla.org' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Feed" href="https://hacks.mozilla.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Comments Feed" href="https://hacks.mozilla.org/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mozilla Hacks - the Web developer blog &raquo; Improved Process Isolation in Firefox 100 Comments Feed" href="https://hacks.mozilla.org/2022/05/improved-process-isolation-in-firefox-100/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/css/dist/block-library/style.min.css?ver=5.9.2' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='wpml-legacy-post-translations-0-css'  href='//blog.mozilla.org/hacks/wp-content/plugins/sitepress-multilingual-cms/templates/language-switchers/legacy-post-translations/style.min.css?ver=1' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/js/fc-checkcomment.js?ver=5.9.2' id='checkcomments-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/js/analytics.js?ver=5.9.2' id='analytics-js'></script>
<link rel="https://api.w.org/" href="https://hacks.mozilla.org/wp-json/" /><link rel="alternate" type="application/json" href="https://hacks.mozilla.org/wp-json/wp/v2/posts/47829" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hacks.mozilla.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hacks.mozilla.org/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://hacks.mozilla.org/?p=47829' />
<link rel="alternate" type="application/json+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2022%2F05%2Fimproved-process-isolation-in-firefox-100%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://hacks.mozilla.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhacks.mozilla.org%2F2022%2F05%2Fimproved-process-isolation-in-firefox-100%2F&#038;format=xml" />
<meta name="generator" content="WPML ver:4.5.6 stt:59,61,1,2;" />
<link rel="shortcut icon" type="image/x-icon" href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" /><style>#wpadminbar #wp-admin-bar-site-name>.ab-item:before { content: none !important;}li#wp-admin-bar-site-name a { background: url( "https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/favicon.ico" ) left center/20px no-repeat !important; padding-left: 21px !important; background-size: 20px !important; } li#wp-admin-bar-site-name { margin-left: 5px !important; } li#wp-admin-bar-site-name {} #wp-admin-bar-site-name div a { background: none !important; }
</style></head>
<body>
  <div class="outer-wrapper">
    <header class="section section--fullwidth header">
      <div class="masthead row">
        <div class="branding block block--3">
          <h1>
            <a href="https://hacks.mozilla.org">
              <img class="branding__logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/mdn-logo-mono.svg">
              <img class="branding__wordmark" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/wordmark.svg" alt="Mozilla">
              <span class="branding__title">Hac<span class="logo-askew">k</span>s</span>
            </a>
          </h1>
        </div>
        <div class="search block block--2">
          <form class="search__form" method="get" action="https://hacks.mozilla.org/">
            <input type="search" name="s" class="search__input" placeholder="Search Mozilla Hacks" value="">
            <i class="fa fa-search search__badge"></i>
          </form>
        </div>
        <nav class="social">
          <a class="social__link youtube" href="http://www.youtube.com/user/mozhacks" title="YouTube"><i class="fa fa-youtube" aria-hidden="true"></i><span>Hacks on YouTube</span></a>
          <a class="social__link twitter" href="https://twitter.com/mozhacks" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i><span>@mozhacks on Twitter</span></a>
          <a class="social__link rss" href="https://hacks.mozilla.org/feed/" title="RSS Feed"><i class="fa fa-rss" aria-hidden="true"></i><span>Hacks RSS Feed</span></a>
          <a class="fx-button" href="https://www.mozilla.org/firefox/download/thanks/?utm_source=hacks.mozilla.org&utm_medium=referral&utm_campaign=header-download-button&utm_content=header-download-button">Download Firefox</a>
        </nav>
      </div>
    </header>

  
<div id="content-head" class="section">
  <h1 class="post__title">Improved Process Isolation in Firefox 100</h1>
  <div class="byline">
    <h3 class="post__author">
                      <img alt='' src='https://secure.gravatar.com/avatar/6ad7e6f8a605ca81446ea4c83d819fb2?s=64&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/6ad7e6f8a605ca81446ea4c83d819fb2?s=128&#038;d=mm&#038;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' loading='lazy'/>        By
                                        <a class="url" href="https://hacks.mozilla.org/author/gpascuttomozilla-com/">Gian-Carlo Pascutto</a>                            </h2>
    <div class="post__meta">
      Posted on
      <abbr class="published" title="2022-05-12T08:09:10-07:00">
        May 12, 2022      </abbr>
      <span class="entry-cat">in
        <a href="https://hacks.mozilla.org/category/featured/" rel="category tag" title="View all posts in Featured Article" >Featured Article</a>, <a href="https://hacks.mozilla.org/category/firefox/" rel="category tag" title="View all posts in Firefox" >Firefox</a>, <a href="https://hacks.mozilla.org/category/firefox-os/" rel="category tag" title="View all posts in Firefox OS" >Firefox OS</a>, <a href="https://hacks.mozilla.org/category/html5/" rel="category tag" title="View all posts in HTML" >HTML</a>,  and <a href="https://hacks.mozilla.org/category/javascript/" rel="category tag" title="View all posts in JavaScript" >JavaScript</a>      </span>
            <div class="socialshare" data-type="bubbles"></div>
    </div>
  </div>
</div>

<main id="content-main" class="section article">
  <article class="post" role="article">
    <h2><strong>Introduction</strong></h2>
<p><span style="font-weight: 400;">Firefox uses a </span><a href="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/"><span style="font-weight: 400;">multi-process model</span></a><span style="font-weight: 400;"> for additional security and stability while browsing: Web Content (such as HTML/CSS and Javascript) is rendered in separate processes that are isolated from the rest of the operating system and managed by a privileged parent process. This way, the amount of control gained by an attacker that exploits a bug in a content process is limited. </span></p>
<p><span style="font-weight: 400;">Ever since we deployed this model, we have been working on improving the isolation of the content processes to further limit the attack surface. This is a challenging task since content processes need access to some operating system APIs to properly function: for example, they still need to be able to talk to the parent process. </span></p>
<p><span style="font-weight: 400;">In this article, we would like to dive a bit further into the latest major milestone we have reached: </span><i><span style="font-weight: 400;">Win32k Lockdown,</span></i><span style="font-weight: 400;"> which greatly reduces the capabilities of the content process when running on Windows. Together with two major earlier efforts (</span><a href="https://hacks.mozilla.org/2021/05/introducing-firefox-new-site-isolation-security-architecture/"><span style="font-weight: 400;">Fission</span></a><span style="font-weight: 400;"> and </span><a href="https://hacks.mozilla.org/2021/12/webassembly-and-back-again-fine-grained-sandboxing-in-firefox-95/"><span style="font-weight: 400;">RLBox</span></a><span style="font-weight: 400;">) that shipped before, this completes a sequence of large leaps forward that will significantly improve Firefox&#8217;s security.</span></p>
<p><span style="font-weight: 400;">Although </span><i><span style="font-weight: 400;">Win32k Lockdown</span></i><span style="font-weight: 400;"> is a Windows-specific technique, it became possible because of a significant re-architecting of the Firefox security boundaries that Mozilla has been working on for around four years, which allowed similar security advances to be made on other operating systems.</span></p>
<h2><strong>The Goal: Win32k Lockdown</strong></h2>
<p><span style="font-weight: 400;">Firefox runs the processes that render web content with quite a few restrictions on what they are allowed to do when running on Windows. Unfortunately, by default they still have access to the entire Windows API, which opens up a large attack surface: the Windows API consists of many parts, for example, a core part dealing with threads, processes, and memory management, but also networking and socket libraries, printing and multimedia APIs, and so on.</span></p>
<p><span style="font-weight: 400;">Of particular interest for us is the </span><i><span style="font-weight: 400;">win32k.sys API,</span></i><span style="font-weight: 400;"> which includes many graphical and widget related system calls that have a history of being exploitable. Going back further in Windows&#8217; origins, this situation is likely the result of Microsoft moving many operations that were originally running in user mode into the kernel in order to improve performance around the Windows 95 and NT4 timeframe. </span></p>
<p><span style="font-weight: 400;">Having likely never been originally designed to run in this sensitive context, these APIs have been a traditional target for hackers to break out of application sandboxes and into the kernel.</span></p>
<p><span style="font-weight: 400;">In Windows 8, Microsoft introduced a new mitigation named </span><a href="https://docs.microsoft.com/en-us/windows/win32/api/winnt/ns-winnt-process_mitigation_system_call_disable_policy"><span style="font-weight: 400;">PROCESS_MITIGATION_SYSTEM_CALL_DISABLE_POLICY</span></a><span style="font-weight: 400;"> that an application can use to disable access to win32k.sys system calls. That is a long name to keep repeating, so we&#8217;ll refer to it hereafter by our internal designation: &#8220;</span><i><span style="font-weight: 400;">Win32k Lockdown</span></i><span style="font-weight: 400;">&#8220;.</span></p>
<h2><strong>The Work Required</strong></h2>
<p><span style="font-weight: 400;">Flipping the Win32k Lockdown flag on the Web Content processes &#8211; the processes most vulnerable to potentially hostile web pages and JavaScript &#8211; means that those processes can no longer perform any graphical, window management, input processing, etc. operations themselves. </span></p>
<p><span style="font-weight: 400;">To accomplish these tasks, such operations must be remoted to a process that has the necessary permissions, typically the process that has access to the GPU and handles compositing and drawing (hereafter called the GPU Process), or the privileged parent process. </span></p>
<h3><span style="font-weight: 400;">Drawing web pages: WebRender</span></h3>
<p><span style="font-weight: 400;">For painting the web pages&#8217; contents, Firefox historically used various methods for interacting with the Windows APIs, ranging from using modern Direct3D based textures, to falling back to GDI surfaces, and eventually dropping into pure software mode. </span></p>
<p><span style="font-weight: 400;">These different options would have taken quite some work to remote, as most of the graphics API is off limits in Win32k Lockdown. The good news is that as of Firefox 92, our rendering stack has switched to </span><a href="https://hacks.mozilla.org/2017/10/the-whole-web-at-maximum-fps-how-webrender-gets-rid-of-jank/"><span style="font-weight: 400;">WebRender</span></a><span style="font-weight: 400;">, which moves all the actual drawing from the content processes to WebRender in the GPU Process.</span></p>
<p><span style="font-weight: 400;">Because with WebRender the content process no longer has a need to directly interact with the platform drawing APIs, this avoids any Win32k Lockdown related problems. WebRender itself has been designed partially to be </span><a href="https://github.com/servo/webrender/wiki/"><span style="font-weight: 400;">more similar to game engines, and thus, be less susceptible to driver bugs</span></a><span style="font-weight: 400;">. </span></p>
<p><span style="font-weight: 400;">For the remaining drivers that are just too broken to be of any use, it still has a </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1601053"><span style="font-weight: 400;">fully software-based mode</span></a><span style="font-weight: 400;">, which means we have no further fallbacks to consider.</span></p>
<h3><span style="font-weight: 400;">Webpages drawing: Canvas 2D and WebGL 3D</span></h3>
<p><span style="font-weight: 400;">The </span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API"><span style="font-weight: 400;">Canvas API</span></a><span style="font-weight: 400;"> provides web pages with the ability to draw 2D graphics. In the original Firefox implementation, these JavaScript APIs were executed in the Web Content processes and the calls to the Windows drawing APIs were made directly from the same processes. </span></p>
<p><span style="font-weight: 400;">In a Win32k Lockdown scenario, this is no longer possible, so </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1464032"><span style="font-weight: 400;">all drawing commands are remoted</span></a><span style="font-weight: 400;"> by recording and playing them back in the GPU process over IPC.</span></p>
<p><span style="font-weight: 400;">Although the initial implementation had good performance, there were nevertheless reports from some sites that experienced performance regressions (the web sites that became faster generally didn&#8217;t complain!). A particular pain point are applications that call </span><a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData"><span style="font-weight: 400;">getImageData()</span></a><span style="font-weight: 400;"> repeatedly: having the Canvas remoted means that GPU textures must now be obtained from another process and sent over IPC. </span></p>
<p><span style="font-weight: 400;">We compensated for this in the scenario where getImageData is called at the start of a frame, by detecting this and preparing the right surfaces proactively to make the copying from the GPU faster.</span></p>
<p><span style="font-weight: 400;">Besides the Canvas API to draw 2D graphics, the web platform also exposes an </span><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API"><span style="font-weight: 400;">API to do 3D drawing, called WebGL</span></a><span style="font-weight: 400;">. WebGL is a state-heavy API, so properly and efficiently synchronizing child and parent (as well as parent and driver) takes </span><a href="https://phabricator.services.mozilla.com/D54019"><span style="font-weight: 400;">great</span></a> <a href="https://phabricator.services.mozilla.com/D54019"><span style="font-weight: 400;">care</span></a><span style="font-weight: 400;">. </span></p>
<p><span style="font-weight: 400;">WebGL originally handled all validation in Content, but with access to the GPU and the associated attack surface removed from there, we needed to craft a robust validating API between child and parent as well to get the full security benefit.</span></p>
<h3><span style="font-weight: 400;">(Non-)Native Theming for Forms</span></h3>
<p><span style="font-weight: 400;">HTML web pages have the ability to display form controls. While the overwhelming majority of websites provide a </span><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Advanced_form_styling"><span style="font-weight: 400;">custom look and styling for those form controls</span></a><span style="font-weight: 400;">, not all of them do, and if they do not you get an input GUI widget that is styled like (and originally was!) a </span><a href="http://stephenhorlander.com/form-controls.html"><span style="font-weight: 400;">native element of the operating system</span></a><span style="font-weight: 400;">.</span></p>
<p><span style="font-weight: 400;"> Historically, these were drawn by calling the appropriate OS widget APIs from within the content process, but those are not available under Win32k Lockdown. </span></p>
<p><span style="font-weight: 400;">This cannot easily be fixed by remoting the calls, as the widgets themselves come in an infinite amount of sizes, shapes, and styles can be interacted with, and need to be responsive to user input and dispatch messages. We settled on having Firefox </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1381938"><span style="font-weight: 400;">draw the form controls itself</span></a><span style="font-weight: 400;">, in a cross-platform style. </span></p>
<p><span style="font-weight: 400;">While changing the look of form controls has web compatibility implications, and some people prefer the more native look &#8211; on the few pages that don&#8217;t apply their own styles to controls &#8211; Firefox’s approach is consistent with that taken by other browsers, probably because of very similar considerations.</span></p>
<p><span style="font-weight: 400;">Scrollbars were a particular pain point: we didn&#8217;t want to draw the main scrollbar of the content window in a different manner as the rest of the UX, since nested scrollbars would show up with different styles which would look awkward. But, unlike the rather rare non-styled form widgets, the main scrollbar is visible on most web pages, and because it conceptually belongs to the browser UX we really wanted it to look native. </span></p>
<p><span style="font-weight: 400;">We, therefore, decided to draw all scrollbars to match the system theme, although it&#8217;s a bit of an open question though how things should look if even </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1719427#c3"><span style="font-weight: 400;">the vendor of the operating system can&#8217;t seem to decide what the &#8220;native&#8221; look is</span></a><span style="font-weight: 400;">.</span></p>
<h2><strong>Final Hurdles</strong></h2>
<h3><span style="font-weight: 400;">Line Breaking</span></h3>
<p><span style="font-weight: 400;">With the above changes, we thought we had all the usual suspects that would access graphics and widget APIs in win32k.sys wrapped up, so we started running the full Firefox test suite with win32k syscalls disabled. This caused at least one unexpected failure: Firefox was </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1713973"><span style="font-weight: 400;">crashing when trying to find line breaks</span></a><span style="font-weight: 400;"> for some languages with complex scripts. </span></p>
<p><span style="font-weight: 400;">While Firefox is able to correctly determine word endings in multibyte character streams for most languages by itself, the support for Thai, Lao, Tibetan and Khmer is known to be imperfect, and </span><a href="https://searchfox.org/mozilla-central/rev/80f11ac5d938f6fce255c56279f46f13a49ea5c3/intl/lwbrk/LineBreaker.h#65"><span style="font-weight: 400;">in these cases, Firefox can ask the operating system to handle the line breaking</span></a><span style="font-weight: 400;"> for it. But at least on Windows, the functions to do so are covered by the Win32k Lockdown switch. Oops!</span></p>
<p><span style="font-weight: 400;">There are </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1684927"><span style="font-weight: 400;">efforts underway to incorporate ICU4X</span></a><span style="font-weight: 400;"> and base all i18n related functionality on that, meaning that Firefox will be able to handle all scripts perfectly without involving the OS, but this is a major effort and it was not clear if it would end up delaying the rollout of win32k lockdown. </span></p>
<p><span style="font-weight: 400;">We did some experimentation with trying to forward the line breaking over IPC. Initially, this had bad performance, but when we </span><a href="https://phabricator.services.mozilla.com/D129125"><span style="font-weight: 400;">added caching</span></a><span style="font-weight: 400;"> performance was satisfactory or sometimes even improved, since OS calls could be avoided in many cases now.</span></p>
<h3><span style="font-weight: 400;">DLL Loading &amp; Third Party Interactions</span></h3>
<p><span style="font-weight: 400;">Another complexity of disabling win32k.sys access is that so much Windows functionality assumes it is available by default, and specific effort must be taken to ensure the relevant DLLs do not get loaded on startup. Firefox itself for example won&#8217;t load the user32 DLL containing some win32k APIs, but </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1719212"><span style="font-weight: 400;">injected third party DLLs sometimes do</span></a><span style="font-weight: 400;">. This causes problems because </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1751367"><span style="font-weight: 400;">COM initialization in particular uses win32k calls to get the Window Station and Desktop</span></a><span style="font-weight: 400;"> if the DLL is present. Those calls will fail with Win32k Lockdown enabled, silently breaking COM and features that depend on it such as our accessibility support. </span></p>
<p><span style="font-weight: 400;">On Windows 10 Fall Creators Update and later we have a fix that blocks these calls and forces a fallback, which keeps everything working nicely. We measured that </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1750742#c9"><span style="font-weight: 400;">not loading the DLLs causes about a 15% performance gain</span></a><span style="font-weight: 400;"> when opening new tabs, adding a nice performance bonus on top of the security benefit.</span></p>
<h3><span style="font-weight: 400;">Remaining Work</span></h3>
<p><span style="font-weight: 400;">As hinted in the previous section, Win32k Lockdown will initially roll out on Windows 10 Fall Creators Update and later. On Windows 8, and unpatched Windows 10 (which unfortunately seems to be in use!), we are still testing a fix for the case where third party DLLs interfere, so support for those will come in a </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1759167#c7"><span style="font-weight: 400;">future release</span></a><span style="font-weight: 400;">.</span></p>
<p><span style="font-weight: 400;">For Canvas 2D support, we&#8217;re still </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1766402"><span style="font-weight: 400;">looking into improving the performance of applications</span></a><span style="font-weight: 400;"> that regressed when the processes were switched around. Simultaneously, there is experimentation underway to see if hardware acceleration for </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1739448"><span style="font-weight: 400;">Canvas 2D can be implemented through WebGL</span></a><span style="font-weight: 400;">, which would increase code sharing between the 2D and 3D implementations and take advantage of modern video drivers being better optimized for the 3D case.</span></p>
<h2><strong>Conclusion</strong></h2>
<p><span style="font-weight: 400;">Retrofitting a significant change in the separation of responsibilities in a large application like Firefox presents a large, multi-year engineering challenge, but it is absolutely required in order to advance browser security and to continue keeping our users safe. We&#8217;re pleased to have made it through and present you with the result in Firefox 100.</span></p>
<h3><span style="font-weight: 400;">Other Platforms</span></h3>
<p><span style="font-weight: 400;">If you&#8217;re a Mac user, you might wonder if there’s anything similar to Win32k Lockdown that can be done for macOS. You&#8217;d be right, and I have good news for you: we already quietly </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1467758"><span style="font-weight: 400;">shipped the changes that block access to the WindowServer</span></a><span style="font-weight: 400;"> in Firefox 95, improving security and speeding process startup by about 30-70%. This too became possible because of the Remote WebGL and Non-Native Theming work described above.</span></p>
<p><span style="font-weight: 400;">For Linux users, </span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1129492"><span style="font-weight: 400;">we removed the connection from content processes to the X11 Server</span></a><span style="font-weight: 400;">, which stops attackers from exploiting the unsecured X11 protocol. Although Linux distributions have been moving towards the more secure Wayland protocol as the default, we still see a lot of users that are using X11 or XWayland configurations, so this is definitely a nice-to-have, which shipped in Firefox 99.</span></p>
<h2><strong>We&#8217;re Hiring</strong></h2>
<p><span style="font-weight: 400;">If you found the technical background story above fascinating, I&#8217;d like to point out that our OS Integration &amp; Hardening team is going to be hiring soon. We&#8217;re especially looking for experienced C++ programmers with some interest in Rust and in-depth knowledge of Windows programming. </span></p>
<p><span style="font-weight: 400;">If you fit this description and are interested in taking the next leap in Firefox security together with us, </span><a href="https://www.mozilla.org/en-US/careers/"><span style="font-weight: 400;">we&#8217;d encourage you to keep an eye on our careers page</span></a><span style="font-weight: 400;">.</span></p>
<p><i>Thanks to Bob Owen, Chris Martin, and Stephen Pohl for their technical input to this article, and for all the heavy lifting they did together with Kelsey Gilbert and Jed Davis to make these security improvements ship.<br />
</i></p>
    <section class="about">
                                <h2 class="about__header">About
                          Gian-Carlo Pascutto                      </h3>
                                <p><a class="url" href="https://hacks.mozilla.org/author/gpascuttomozilla-com/">More articles by Gian-Carlo Pascutto&hellip;</a></p>
                  </section>
  </article>
  <section class="promo">
    <form id="newsletterForm" name="newsletter-form" class="newsletter block block--1 block--polite" action="https://www.mozilla.org/en-US/newsletter/" method="post">
  <h2 class="heading">Discover great resources for web development</h2>
  <p class="newsletter__description">Sign up for the Mozilla Developer Newsletter:</p>
  <input id="fmt" name="fmt" value="H" type="hidden">
  <input id="newsletterNewslettersInput" name="newsletters" value="app-dev" type="hidden">

  <div id="newsletterErrors" class="newsletter__errors"></div>

  <div id="newsletterEmail" class="form__row">
    <label for="newsletterEmailInput" class="offscreen">E-mail</label>
    <input id="newsletterEmailInput" name="email" class="newsletter__input" required="" placeholder="you@example.com" size="30" type="email">
  </div>

  <div id="newsletterPrivacy" class="form__row form__fineprint">
    <input id="newsletterPrivacyInput" name="privacy" required="" type="checkbox">
    <label for="newsletterPrivacyInput">
      I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
    </label>
  </div>
  <button id="newsletter-submit" type="submit" class="button positive">Sign up now</button>
</form>
<div id="newsletterThanks" class="newsletter newsletter--thanks block block--1 block--polite hidden">
  <h2 class="heading">Thanks! Please check your inbox to confirm your subscription.</h2>
  <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
  </p>
</div>
  </section>
  

<section class="discussion">
  <hr class="dino">
  <div class="comments">
    <header class="comments__head">
      <h3>No comments yet</h3>
    </header>

      </div>
  <div class="response" id="respond">
        <form id="comment-form" action="https://hacks.mozilla.org/wp-comments-post.php" method="post">
        <h3>Post Your Comment</h3>
        <p id="cancel-comment-reply"><a rel="nofollow" id="cancel-comment-reply-link" href="/2022/05/improved-process-isolation-in-firefox-100/#respond" style="display:none;">Cancel Reply</a></p>
              <div class="field" id="cmt-name">
          <label for="author">Your name <abbr title="(required)">*</abbr></label>
          <input type="text" name="author" id="author" size="25" required aria-required='true'>
        </div>
        <div class="field" id="cmt-email">
          <label for="email">Your e-mail <abbr title="(required)">*</abbr></label>
          <input type="email" name="email" id="email" size="25" required aria-required='true'>
        </div>
        <div id="cmt-ackbar">
          <label for="age">Spam robots, please fill in this field. Humans should leave it blank.</label>
          <input type="text" name="age" id="age" size="4" tabindex="-1">
        </div>
            <div class="field" id="cmt-cmt">
        <label for="comment">Your comment</label> <textarea name="comment" id="comment" cols="50" rows="10" required="required" aria-required="true"></textarea>
      </div>
      <div class="field" id="comment-submit">
        <button name="submit" type="submit">Submit Comment</button>
      </div>
      <input type='hidden' name='comment_post_ID' value='47829' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
      <p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="e922e31607" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="43"/><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></div>
    </form>
      </div></section><script>jQuery("#comment-form").submit(function() { return fc_checkform('req'); });</script>


</main><!-- /#content-main -->

  

    <footer class="footer section section--fullwidth">
      <div class="row">
        <p class="block block--1">
          Except where otherwise noted, content on this site is licensed
          under the
          <a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license external">Creative Commons Attribution Share-Alike License v3.0</a>
          or any later version.
        </p>
        <img class="footer__logo" alt="the Mozilla dino logo" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/themes/Hax/img/dino.svg">
      </div>
    </footer>
  </div>
  <link rel='stylesheet' id='hljstheme-css'  href='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/styles/solarized-light.css?ver=0.6.2' type='text/css' media='all' />
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-includes/js/comment-reply.min.js?ver=5.9.2' id='comment-reply-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.common.pack.js?ver=0.6.2' id='hljs_preload-js'></script>
<script type='text/javascript' src='https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/wp-content/plugins/wp-code-highlightjs/highlight.custom.pack.js?ver=0.6.2' id='hljs-js'></script>
    <style>pre.hljs {padding: 5px;}
pre.hljs code {}</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"    "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>
  <script>
    // External links should open in a new tab.
    (function () {
      var postLinks = document.querySelectorAll('#content-main a');

      var origin = location.origin;

      for (var i = 0; i < postLinks.length; i++) {
        var link = postLinks[i];
        if (link.origin !== origin && !link.getAttribute('target')) {
          link.setAttribute('target', '_blank');
        }
      }
    })();

    window.addEventListener('load', function () {
      if (document.querySelector('#newsletterForm')) {
        var script = document.createElement('script');
        var path = document.head.getAttribute('data-template-path');
        script.setAttribute('src', path + '/js/newsletter.js');
        document.head.appendChild(script);
      }
    });
  </script>
</body>
</html>
