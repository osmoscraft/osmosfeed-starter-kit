<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><title>Optimizing LCP using Signed Exchanges - Chrome Developers</title><link href=https://developer.chrome.com/blog/optimizing-lcp-using-signed-exchanges/ rel=canonical><meta content="Chrome Developers" property=og:site_name><meta content="Optimizing LCP using Signed Exchanges - Chrome Developers" property=og:title><meta content=website property=og:type><meta content=https://developer.chrome.com/blog/optimizing-lcp-using-signed-exchanges/ property=og:url><meta content=summary_large_image name=twitter:card><meta content="https://wd.imgix.net/image/foR0vJZKULb5AGJExlazy1xYDgI2/xvNiBdV0ZwwLUE4SEdbf.png?auto=format&w=1521" property=og:image><meta content="https://wd.imgix.net/image/foR0vJZKULb5AGJExlazy1xYDgI2/xvNiBdV0ZwwLUE4SEdbf.png?auto=format&w=1521" name=twitter:image><meta content="Signed exchanges are a means for web developers to drastically improve page loading speed coming from SXG referrers such as Google Search. They can provide benefit simply from being enabled by a checkbox, but you can take additional steps to get the most out of them.
" name=description><meta content="Signed exchanges are a means for web developers to drastically improve page loading speed coming from SXG referrers such as Google Search. They can provide benefit simply from being enabled by a checkbox, but you can take additional steps to get the most out of them.
" name=twitter:description><meta content="Signed exchanges are a means for web developers to drastically improve page loading speed coming from SXG referrers such as Google Search. They can provide benefit simply from being enabled by a checkbox, but you can take additional steps to get the most out of them.
" property=og:description><link href=/images/meta/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/images/meta/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/images/meta/favicon-16x16.png rel=icon sizes=16x16 type=image/png><meta content=#ffffff name=theme-color><link href=https://developer.chrome.com/feeds/blog.xml rel=alternate type=application/rss+xml title="Chrome Developers"><link href=/fonts/google-sans-v2003/regular/latin.woff2 rel=preload as=font crossorigin><link href=/fonts/google-sans-v2003/medium/latin.woff2 rel=preload as=font crossorigin><script src="/js/main.js?v=9aedf553" type=module></script><script src=https://www.google-analytics.com/analytics.js async></script><script>!function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41980257-1"),ga("set","transport","beacon"),ga("set","page",window.location.pathname),ga("set","dimension1","2.0"),ga("send","pageview");try{const e="https://policies.google.com/technologies/cookies";localStorage.getItem("user-cookies")===e&&document.documentElement.setAttribute("data-cookies-accepted","")}catch(e){}try{const e="";localStorage.getItem("user-banner")===e&&document.documentElement.setAttribute("data-banner-dismissed","")}catch(e){}}();</script><style>@charset "UTF-8";@keyframes rainbow{0%,to{background:violet}25%{background:orange}50%{background:#ff0}75%{background:#00f}}.align-start{align-items:start}.align-center{align-items:center}.decoration-none{text-decoration:none}.direction-column{flex-direction:column}.display-block{display:block}.display-flex{display:flex}.display-inline-flex{display:inline-flex}.display-grid{display:grid}.display-none{display:none}.flow-space-200{--flow-space: 0.5rem}.flow-space-300{--flow-space: 1rem}.flex-1{flex:1}.flex-shrink-none{flex-shrink:0}.gap-top-300{margin-top:1rem}.gap-top-500{margin-top:2rem}.gap-top-1000{margin-top:4.5rem}.gap-bottom-0{margin-bottom:0}.gap-bottom-300{margin-bottom:1rem}.gap-left-200{margin-left:.5rem}.gap-left-300{margin-left:1rem}.gap-left-400{margin-left:1.5rem}.height-600{height:2.5rem}.height-700{height:3rem}.justify-content-between{justify-content:space-between}.justify-content-center{justify-content:center}.measure-long{max-width:748px}.overflow-hidden{overflow:hidden}.pad-0{padding:0}.pad-200,top-nav{padding:.5rem}.pad-top-300{padding-top:1rem}.pad-top-600{padding-top:2.5rem}.pad-right-200{padding-right:.5rem}.pad-right-400{padding-right:1.5rem}.pad-bottom-300{padding-bottom:1rem}.pad-bottom-600{padding-bottom:2.5rem}.pad-left-200{padding-left:.5rem}.pad-left-400{padding-left:1.5rem}.rounded-lg{border-radius:.75rem}.user-select-none{user-select:none}.weight-regular{font-weight:400}.width-600{width:2.5rem}.width-700{width:3rem}.width-full,side-nav navigation-tree,video{width:100%}@media screen and (min-width:992px){.lg\:align-center{align-items:center}.lg\:direction-row{flex-direction:row}.lg\:display-flex{display:flex}.lg\:display-none{display:none}.lg\:flow-space-500{--flow-space: 2rem}.lg\:gap-top-0{margin-top:0}.lg\:gap-top-400{margin-top:1.5rem}.lg\:gap-left-400{margin-left:1.5rem}.lg\:gap-left-500{margin-left:2rem}.lg\:pad-right-0{padding-right:0}.lg\:pad-right-200{padding-right:.5rem}.lg\:pad-right-600{padding-right:2.5rem}.lg\:pad-left-0{padding-left:0}.lg\:pad-left-200{padding-left:.5rem}.lg\:pad-left-600{padding-left:2.5rem}}@media screen and (min-width:1440px){.xl\:display-block{display:block}.xl\:display-none{display:none}}.navigation-rail__link{align-items:center;border-radius:0 100px 100px 0;display:flex;padding:.375rem .5rem .375rem 0;text-align:left;text-decoration:none;user-select:none}.navigation-rail__link:hover{background:var(--color-side-nav-hover)}.navigation-rail__link:focus{z-index:1}.navigation-rail__icon{align-items:center;display:flex;justify-content:center;position:absolute}.navigation-rail__icon::before{content:"â€‹"}.navigation-rail__icon>svg{min-width:24px;transition:transform .2s}[data-state=active].navigation-rail__link{background:var(--color-secondary);color:var(--color-side-nav-active)}.footer__link,.material-button,.search-box__link,.skip-link,.surface{overflow:hidden;position:relative}.footer__link::before,.material-button::before,.search-box__link::before,.skip-link::before,.surface::before{background-color:var(--overlay-background-color, currentColor);border-radius:2px;content:"";height:100%;left:0;opacity:0;position:absolute;top:0;transition:.2s opacity;width:100%}.footer__link:hover::before,.material-button:hover::before,.search-box__link:hover::before,.skip-link:hover::before,.surface:hover::before{opacity:.08}.footer__link:focus-within::before,.material-button:focus-within::before,.search-box__link:focus-within::before,.skip-link:focus-within::before,.surface:focus-within::before{opacity:.12}.button-filled:hover::before,.footer__link:active::before,.material-button:active::before,.search-box__link:active::before,.skip-link:active::before,.surface:active::before{opacity:.16}.link,a:not([class]){color:var(--link-color, var(--color-primary))}.link:not(.no-visited):visited,a:not(.no-visited):visited:not([class]){color:var(--link-visited-color, var(--color-link-default-visited))}.link:hover,a:hover:not([class]){background-color:rgba(var(--link-rgb-background, var(--rgb-primary)),.08)}.link:not(.no-visited):visited:hover,a:not(.no-visited):visited:hover:not([class]){background-color:rgba(var(--link-rgb-background, var(--rgb-link-default-visited)),.08)}.link:focus,.link:focus-within,a:focus-within:not([class]),a:focus:not([class]){background-color:rgba(var(--link-rgb-background, var(--rgb-primary)),.12)}.link:active,a:active:not([class]){background-color:rgba(var(--link-rgb-background, var(--rgb-primary)),.16)}.aside__label>span,.type h1:not([class^=type--var]),.type h2:not([class^=type--var]),.type h3:not([class^=type--var]),.type h4:not([class^=type--var]),.type--footer,.type--h2,.type--h5,.type--h6{font-family:"Google Sans",sans-serif;font-weight:400;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeSpeed}.type h1:not([class^=type--var]),.type--h2{font-size:2.5rem;line-height:1.2}@supports (font-size:clamp(1.75em,4.6875vw,3em)){.type h1:not([class^=type--var]),.type--h2{font-size:clamp(1.75em,4.6875vw,3em);line-height:1.1666666667}}.type h2:not([class^=type--var]){font-size:2rem;line-height:1.25}@supports (font-size:clamp(1.5em,3.515625vw,2.25em)){.type h2:not([class^=type--var]){font-size:clamp(1.5em,3.515625vw,2.25em);line-height:1.2222222222}}.type h3:not([class^=type--var]){font-size:1.75rem;line-height:1.2857142857}@supports (font-size:clamp(1.125em,2.734375vw,1.75em)){.type h3:not([class^=type--var]){font-size:clamp(1.125em,2.734375vw,1.75em);line-height:1.2857142857}}.type h4:not([class^=type--var]),.type--h5{font-size:1.25rem;line-height:1.4}@supports (font-size:clamp(1em,1.953125vw,1.25em)){.type h4:not([class^=type--var]),.type--h5{font-size:clamp(1em,1.953125vw,1.25em);line-height:1.4}}.type--h6{font-weight:500;font-size:1rem;line-height:1.75}@supports (font-size:clamp(.875em,1.5625vw,1em)){.type--h6{font-size:clamp(.875em,1.5625vw,1em);line-height:1.75}}.aside__label>span,.type--footer{font-weight:500;font-size:1rem;line-height:1.75}.banner,.material-button,.skip-link,.toc__wrapper a,.type,.type ol:not([class])>li::before,.type--caption,.type--label,.type--small,:root{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-weight:400;font-size:1rem;line-height:1.75;text-rendering:optimizeSpeed}.banner,.material-button,.skip-link,.toc__wrapper a,.type--small{font-size:.875rem;line-height:1.4285714286}.type ol:not([class])>li::before,.type--caption{font-size:.875rem;line-height:1.7142857143}.type--label{font-weight:500;font-size:.75rem;line-height:1.3333333333}.type ul:not([class]){list-style:none;margin-left:3rem;padding:0;position:relative}@media (min-width:992px){.type ul:not([class]){max-width:calc(100% - 6rem)}}.type ul:not([class])>li{margin-top:.5em}.type ol:not([class])>li:first-of-type,.type ul:not([class])>li:first-of-type{margin-top:0}.type ol:not([class])>li::before,.type ul:not([class])>li::before{border-radius:50%;display:inline-flex;margin-right:1rem;position:absolute}.type ul:not([class])>li::before{background:#5f6368;content:"";height:.5rem;margin-left:-1.5rem;transform:translateY(.625rem);width:.5rem}.type ol:not([class]){list-style:none;margin-left:3.5rem;padding:0;position:relative;counter-reset:ol-step-counter}@media (min-width:992px){.type ol:not([class]){max-width:calc(100% - 7rem)}}.type ol:not([class])>li{counter-increment:ol-step-counter;margin-top:.5em}.type ol:not([class])>li::before{background:#f1f3f4;content:counter(ol-step-counter);flex-shrink:0;height:1.5rem;justify-content:center;margin-left:-2.5rem;transform:translateY(.1875rem);width:1.5rem}.type code,.type pre{font-family:ui-monospace,Menlo,Consolas,Monaco,"Roboto Mono","Source Code Pro","Liberation Mono","Lucida Console",monospace;font-size:.9375em;line-height:1.7333333333}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:400;src:url(/fonts/google-sans-v2003/regular/cyrillic.woff2) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:400;src:url(/fonts/google-sans-v2003/regular/greek.woff2) format("woff2");unicode-range:U+0370-03FF}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:400;src:url(/fonts/google-sans-v2003/regular/vietnamese.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+1EA0-1EF9,U+20AB}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:400;src:url(/fonts/google-sans-v2003/regular/latin-ext.woff2) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:400;src:url(/fonts/google-sans-v2003/regular/latin.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:500;src:url(/fonts/google-sans-v2003/medium/cyrillic.woff2) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:500;src:url(/fonts/google-sans-v2003/medium/greek.woff2) format("woff2");unicode-range:U+0370-03FF}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:500;src:url(/fonts/google-sans-v2003/medium/vietnamese.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:500;src:url(/fonts/google-sans-v2003/medium/latin-ext.woff2) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-display:swap;font-family:"Google Sans";font-style:normal;font-weight:500;src:url(/fonts/google-sans-v2003/medium/latin.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}:root{--color-mode: "light";--color-bg: #fff;--color-bg-shade: #f1f3f4;--color-text: #3c4043;--color-secondary-text: #5f6368;--color-primary: #1a73e8;--rgb-primary: 26, 115, 232;--color-primary-shade: #1967d2;--color-secondary: #e8f0fe;--color-hairline: #dadce0;--color-footer-bg: #f8f9fa;--color-side-nav-hover: #f1f3f4;--color-side-nav-active: #1a73e8;--color-link-default-visited: #681da8;--rgb-link-default-visited: 103, 29, 168;--rgb-button-overlay: 60, 64, 67;--color-code-bg: #f8f9fa;--color-code-comment: #9aa0a6;--color-code-string: #174ea6;--color-code-tag: #1e8e3e;--color-code-number: #1967d2;--color-code-attr: #d01884;--color-code-highlight: #fde293;--color-code-add: #a8dab5;--color-code-remove: #f6aea9;--color-project-default: #1967d2;--color-project-handbook: #c5221f;--color-project-workbox: #fa903e;--color-blue-lightest: rgba(232, 240, 254, 0.4);--color-blue-lighter: rgba(232, 240, 254, 0.54);--color-blue-medium: #1967d2;--color-blue-darkest: #174ea6;--rgb-blue-darkest: 23, 78, 166;--color-yellow-lightest: rgba(254, 247, 224, 0.4);--color-yellow-lighter: rgba(254, 247, 224, 0.5);--color-yellow-medium: #f29900;--color-yellow-darkest: #b05a00;--rgb-yellow-darkest: 227, 117, 0;--color-red-lightest: rgba(252, 232, 230, 0.4);--color-red-lighter: rgba(252, 232, 230, 0.5);--color-red-medium: #c5221f;--color-red-darkest: #a50e0e;--rgb-red-darkest: 165, 14, 14;--color-green-lightest: rgba(230, 244, 234, 0.4);--color-green-lighter: rgba(230, 244, 234, 0.5);--color-green-medium: #188038;--color-green-darkest: #0d652d;--rgb-green-darkest: 13, 101, 45;--color-purple-lightest: rgba(243, 232, 253, 0.4);--color-purple-lighter: rgba(243, 232, 253, 0.5);--color-purple-medium: #8430ce;--color-purple-darkest: #681da8;--rgb-purple-darkest: 104, 29, 168;--color-pink-lightest: rgba(253, 231, 243, 0.4);--color-pink-lighter: rgba(253, 231, 243, 0.5);--color-pink-medium: #d01884;--color-pink-darkest: #9c166b;--rgb-pink-darkest: 156, 22, 107;--color-cyan-lightest: rgba(228, 247, 251, 0.4);--color-cyan-lighter: rgba(228, 247, 251, 0.5);--color-cyan-medium: #129eaf;--color-cyan-darkest: #007b83;--rgb-cyan-darkest: 0, 122, 131;--flow-space: 2rem;font-size:100%}*,::after,::before{box-sizing:border-box}body,figure,h1,h2,h3,h4,p,pre{margin:0}body{min-height:100vh;background-color:var(--color-bg);color:var(--color-text);overflow-wrap:break-word;transition:background 500ms ease-in-out,color 200ms ease}ol[role=list],ul[role=list]{list-style:none}ol,ul{list-style-position:inside}a:not([class]){text-decoration-skip-ink:auto}img{display:block;height:auto;max-width:100%}li img,p img{display:inline-block;vertical-align:sub}button,input,select{font:inherit;letter-spacing:inherit;word-spacing:inherit}img:not([alt]){filter:blur(10px)}@media (prefers-reduced-motion:reduce){*{animation-duration:.01s!important;animation-iteration-count:1!important;scroll-behavior:auto!important;transition-duration:.01s!important}}.details>summary:focus,main:focus,navigation-tree:focus{outline:0}.details,.type{position:relative}.type pre code{font-size:inherit}.details{border:1px solid var(--color-hairline);border-width:1px 0;padding:calc(var(--flow-space)/2) 0}.details>summary{cursor:pointer;list-style:none;-webkit-tap-highlight-color:transparent}.details>summary::-webkit-details-marker,.details>summary::marker{display:none}.details .heading-link{display:none}.button,.material-button,.search-box__btn,.skip-link{background:0 0;border:0;cursor:pointer;text-decoration:none}.button svg,.material-button svg,.search-box__btn svg,.skip-link svg{vertical-align:middle}.material-button,.skip-link{font-family:"Google Sans",sans-serif;border-radius:.25rem;color:var(--button-color, inherit);padding:.5rem 1.5rem;white-space:nowrap}.button-text{margin-left:-.5rem;margin-top:-.5rem;padding:.5rem}.button-text+.button-text{margin-left:1rem}.button-filled{position:relative;transition:box-shadow .1s;z-index:1}.button-filled::before{background:rgba(var(--rgb-button-overlay),1);border-radius:inherit;bottom:0;content:"";left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity .1s;z-index:-1}.button-filled:hover{box-shadow:rgba(var(--rgb-button-overlay),.3) 0 1px 2px 0,rgba(var(--rgb-button-overlay),.15) 0 1px 3px 1px}.button-filled:active{box-shadow:rgba(var(--rgb-button-overlay),.3) 0 1px 2px 0,rgba(var(--rgb-button-overlay),.15) 0 2px 6px 2px}.button-filled:focus::before{opacity:.24}.button-filled:active::before{opacity:.36}.banner{background:var(--color-bg-shade);display:flex;justify-content:center;padding:1rem}.toc__wrapper li::before,[data-banner-dismissed] .banner,announcement-banner[hidden]{display:none}.icon{fill:currentColor}like-icon{height:20px}like-icon a{color:#000;text-decoration:none}like-icon a:active,like-icon a:hover,like-icon a:visited{color:#000}like-icon [data-liked=false] svg,like-icon svg{color:#000;fill:none;height:20px;margin-top:-3px;vertical-align:middle;width:20px}like-icon [data-liked=true] svg{color:#fff;fill:red}like-icon span{display:inline-block;margin:0 .5em;width:3em}code,pre,pre[class*=language-]{background:var(--color-code-bg);border:1px solid var(--color-hairline);border-radius:3px}pre,pre[class*=language-]{color:var(--color-text);overflow:auto;padding:.5em}code{padding:.125em .25em}pre>code{background:initial;border:initial;border-radius:initial;padding:initial}.token.comment{color:var(--color-code-comment)}.token.punctuation,.token.string{color:var(--color-code-string)}.token.property,.token.tag{color:var(--color-code-tag)}.token.boolean,.token.number{color:var(--color-code-number)}.token.attr-name,.token.important,.token.operator,.token.regex,.token.url{color:var(--color-code-attr)}.namespace{opacity:.7}.scaffold{display:grid;height:100vh;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"header header" "sidebar main" "sidebar footer"}.scaffold>*{min-width:0}.scaffold>top-nav{grid-area:header}.scaffold>navigation-rail,.scaffold>side-nav{grid-area:sidebar}.scaffold>main{grid-area:main}.scaffold>footer{grid-area:footer}.search-box__results,.stack{display:flex;flex-direction:column;justify-content:flex-start;min-width:0}.search-box__results>*,.stack>*{margin-bottom:0;margin-top:0}.search-box__results>*+*,.stack>*+*{margin-top:var(--flow-space)}.stack--block{display:block}.stack-exception-600,.stack-exception-600+*{margin-top:2.5rem}.stack-recursive *+*,web-tab>*+*{margin-top:var(--flow-space)}.cluster{overflow:hidden}.cluster>*{display:flex;flex-wrap:wrap;margin:calc(var(--flow-space)/2*-1)}.cluster>*>*{margin:calc(var(--flow-space)/2)}.breadcrumbs{align-items:center;display:flex;flex-flow:row wrap;justify-content:center}.breadcrumbs>a,.breadcrumbs>svg{fill:var(--color-secondary-text);margin:0 var(--flow-space)}@media (min-width:992px){top-nav{padding:.625rem 1.5rem}}top-nav nav{gap:1rem;grid-template-columns:min-content auto min-content;position:relative}@media (min-width:992px){top-nav nav{gap:3.5rem;grid-template-columns:1fr 2fr 1fr}}@media (max-width:991px){top-nav[data-search-active] nav{grid-template-columns:1fr;padding:0 1.5rem}top-nav[data-search-active] .top-nav__hamburger,top-nav[data-search-active] .top-nav__logo{display:none}}top-nav[data-search-active] nav::before{z-index:20;margin-left:calc(50% - 50vw);width:100vw;background-color:var(--color-hairline);content:"";display:block;height:1px;position:absolute;top:calc(2.75rem + .625rem)}top-nav[data-search-active] nav::after{z-index:10;margin-left:calc(50% - 50vw);width:100vw;background:var(--color-bg);content:"";height:100vh;left:0;position:absolute;top:0}navigation-rail{display:none;outline:0}@media (min-width:992px){navigation-rail{border-right:1px solid var(--color-hairline);display:block}}.navigation-rail__link{font-size:.875rem;line-height:2;color:var(--color-secondary-text);padding-bottom:.75rem;padding-top:.75rem}@media (min-width:992px){.navigation-rail__link{flex-direction:column;padding:0;position:relative}.navigation-rail__link .navigation-rail__icon{position:static}.navigation-rail__link+.navigation-rail__link{--flow-space: 1.5rem;margin-top:var(--flow-space)}.navigation-rail__link:hover{background:0 0;z-index:0}.navigation-rail__link:hover::before{background:var(--color-side-nav-hover);border-radius:50%;content:"";height:40px;position:absolute;top:-6px;width:40px;z-index:-1}}.navigation-rail__link[data-state=active]{color:var(--color-side-nav-active)}@media (min-width:992px){.navigation-rail__link[data-state=active]{background:0 0}}.navigation-rail__link>:last-child{margin-left:4rem}@media (min-width:992px){.navigation-rail__link>:last-child{margin-left:0}}.navigation-rail__icon{width:4rem}navigation-tree{display:none;width:15.625rem}@media (min-width:992px){navigation-tree{display:block}}side-nav,side-nav::before{height:100%;left:0;top:0;width:100%}side-nav{z-index:40;pointer-events:none;position:fixed;visibility:hidden}@media (min-width:992px){side-nav{display:none}}side-nav::before{background:rgba(0,0,0,.4);content:"";display:block;opacity:0;position:absolute;transition:opacity .2s cubic-bezier(.4,0,.2,1)}@media (min-width:992px){side-nav::before{display:none}}side-nav navigation-rail,side-nav navigation-tree{display:block;height:100%}side-nav[expanded]{pointer-events:auto;visibility:visible}side-nav[expanded]::before{opacity:1}side-nav[expanded] .side-nav__container{transform:translate(0,0)}.side-nav__container{box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 2px 6px 2px rgba(60,64,67,.15);background:var(--color-bg);height:100%;max-width:22.5rem;overflow:hidden;transform:translate(-102%,0);transition:none;width:85vw}.side-nav__container>*{transition:none}side-nav[animating]{visibility:visible}side-nav[animating] .side-nav__container{transition:transform .2s cubic-bezier(.4,0,.2,1)}side-nav[animating] .side-nav__container>*{transition:transform .2s cubic-bezier(.4,0,.2,1),opacity .2s cubic-bezier(.4,0,.2,1);visibility:visible}side-nav[view=project] navigation-rail{opacity:0;transform:translate(100%,0);visibility:hidden}side-nav[view=project] navigation-tree{opacity:1;transform:translate(0,-100%)}side-nav[view=site] navigation-rail{opacity:1;transform:translate(0,0)}side-nav[view=site] navigation-tree{opacity:0;transform:translate(-100%,-100%);visibility:hidden}.post-authors{display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(13.75rem,1fr))}.card-authors__image>img{border:2px solid var(--color-bg);border-radius:100%;box-sizing:content-box;height:40px;max-width:40px;width:40px}.card-authors__image:not(:first-of-type){margin-left:-.5rem}.aside{--link-color: var(--color-blue-darkest);--link-visited-color: var(--color-blue-darkest);--link-rgb-background: var(--rgb-blue-darkest);background-color:var(--color-blue-lightest);border-radius:6px;color:var(--color-blue-darkest);padding:1.5rem}.aside>*+*{margin-top:1rem}.aside--caution{--link-color: var(--color-yellow-darkest);--link-visited-color: var(--color-yellow-darkest);--link-rgb-background: var(--rgb-yellow-darkest);background-color:var(--color-yellow-lightest);color:var(--color-yellow-darkest)}.aside__label{align-items:center;display:flex}.aside__label>svg{fill:currentColor}.aside__label>*+*{margin-left:.75rem}.tag-pill{padding:.25rem .75rem}.tag-pill[title]{cursor:help}footer{--flow-space: 0.75rem;background-color:var(--color-footer-bg)}.footer__stack+.footer__stack{margin-top:2rem}@media (min-width:992px){.footer__stack+.footer__stack{margin-top:0}}.footer__link{color:var(--color-secondary-text)}.toc-container{max-width:100%;width:20rem}.toc>summary{list-style:none}.toc>summary::-webkit-details-marker{display:none}.toc__icon{display:inline-flex;margin-left:.5rem}.toc__icon>svg{display:flex;transform:rotate(90deg)}.toc[open] .toc__icon>svg{transform:rotate(270deg)}toc-active{max-height:calc(100vh - .5rem*2);overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain;position:sticky;top:.5rem}toc-active [toc--active]{font-weight:600;letter-spacing:-.35px}.toc__wrapper a{text-decoration:none}.toc__wrapper li{line-height:1.2}.toc__wrapper li+li{margin-top:.5rem}.toc__wrapper ol,.toc__wrapper ul{list-style-type:none;margin:.5rem 0;padding:0}.toc__wrapper ol ol,.toc__wrapper ol ul,.toc__wrapper ul ol,.toc__wrapper ul ul{border-left:1px solid var(--color-hairline);padding-left:1rem}search-box{min-height:2.75rem;position:relative}search-box[active]{z-index:20;background-color:var(--color-bg)}announcement-banner,search-box[active] .search-box__input,toc-active{display:block}.search-box__inner{align-items:center;display:grid;height:100%}.search-box__inner>*{grid-column:1;grid-row:1}.search-box__btn{z-index:10;align-items:center;display:flex;height:100%;justify-content:center;width:3rem}.search-box__btn>svg{fill:currentColor}.search-box__input{background:var(--color-bg-shade);border:0;border-radius:6.25rem;display:none;font:inherit;margin:0;padding:.5rem 1rem .5rem 3rem}@media (min-width:992px){.search-box__input{display:block;width:100%}}.search-box__input::placeholder{color:var(--color-secondary-text)}.search-box__results{--flow-space: 1.5rem;height:calc(100vh - 2.75rem);max-width:100%;overflow-x:hidden;padding-bottom:4.5rem;position:absolute;top:calc(2.75rem + .625rem + 1.5rem);word-break:break-word}.search-box__results strong{color:var(--color-primary)}.search-box__result-heading{color:var(--color-secondary-text)}.search-box__result-heading~.search-box__result-heading{border-top:1px solid var(--color-hairline);padding-top:1.5rem}.search-box__link{--overlay-background-color: var(--color-primary);align-items:center;display:inline-flex;text-decoration:none}.search-box__link[aria-selected=true]::before{opacity:.1}.search-box__title{color:var(--color-text)}.heading-link::after,.search-box__snippet{color:var(--color-secondary-text)}.search-box__thumbnail{margin-left:.5rem}@media (min-width:592px){.search-box__thumbnail{margin-left:1rem}}.youtube{padding-top:56.25%;position:relative;width:100%}.heading-link{color:transparent;float:left;margin-left:-1.5rem;opacity:.4;position:relative;text-align:center;text-decoration:none;width:1.5rem}.heading-link:hover{opacity:1}.heading-link::after{bottom:0;content:"#";left:0;position:absolute;right:0;top:0;transform:scale(.666);transform-origin:75% 50%}@media (min-width:992px){.heading-link::after{transform-origin:25% 50%}}announcement-banner [data-banner-close-btn]{opacity:0;pointer-events:none}announcement-banner[active] [data-banner-close-btn]{opacity:1;pointer-events:auto}[data-cookies-accepted] .cookie-banner{display:none}.cookie-banner{z-index:40;background-color:var(--color-bg);bottom:0;display:flex;flex-direction:column;padding:1.5rem;position:fixed;width:100%}@media (min-width:592px){.cookie-banner{align-items:center;flex-direction:row}}.cookie-banner__controls{margin-top:1rem}@media (min-width:592px){.cookie-banner__controls{margin-left:1.5rem;margin-top:0}}.cookie-banner__controls>:last-child{margin-left:1rem}.skip-link{background-color:var(--color-bg)}.skip-link:focus{clip:auto;padding:inherit;width:auto;z-index:1}.compare{position:relative}share-button{border-radius:50%;display:block;height:32px;margin:-12px 0;width:32px}share-button:hover{background:var(--color-bg-shade)}share-button .share-button__link{display:inline-block;height:32px;padding-left:5px;width:100%}share-button .share-button__link:hover{background-color:transparent}share-button svg{vertical-align:middle}web-tabs{display:block;margin-top:var(--flow-space) 0;width:100%}web-tabs [role=tablist]{align-items:flex-end;border-bottom:1px solid var(--color-hairline);display:flex;min-height:50px;overflow-x:auto;scroll-behavior:smooth;width:100%}web-tabs [role=tab]{background:0 0;border:0;flex:1 0 auto;height:3rem;margin:0;min-width:fit-content;opacity:.6;position:relative;transition:background .2s,opacity .2s,color .2s}web-tabs [aria-selected=true]{color:var(--color-primary);opacity:1}web-tabs [role=tab]::after{background:0 0;bottom:0;content:"";display:block;height:2px;left:0;opacity:1;position:absolute;right:0;transition:background .2s}web-tabs [aria-selected=true]::after{background:var(--color-primary)}select{-webkit-appearance:none;appearance:none;background-color:#fff;background-image:url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10L12 15L17 10H7Z' fill='%235F6368'/%3E%3C/svg%3E%0A");background-position:right .5em top 50%;background-repeat:no-repeat;background-size:1.5em;border:1px solid var(--color-hairline);border-radius:1px;box-sizing:border-box;display:block;font-size:1em;line-height:1.5;margin:0;max-width:100%;padding:.6em 3em .5em .8em}select::-ms-expand{display:none}select:hover{border-color:var(--color-text)}.logo__text{display:inline-flex;margin-left:12px;overflow:hidden}@media (max-width:591px){.logo__text>svg{margin-left:-82px}}.logo__text.logo__text-small>svg{margin-left:-82px}select-loader:not(:defined){visibility:hidden}figure{display:block;width:100%}figure>:not(figcaption){display:block;margin-left:auto;margin-right:auto}.center-images img{margin-left:auto;margin-right:auto}.hairline{border:1px solid var(--color-hairline)}.hairline-top{border-top:1px solid var(--color-hairline)}.hairline-bottom{border-bottom:1px solid var(--color-hairline)}.color-blue-medium{color:var(--color-blue-medium)}.color-bg{color:var(--color-bg)}.color-text{color:var(--color-text)}.color-secondary-text{color:var(--color-secondary-text)}.color-primary{color:var(--color-primary)}.bg-primary{background-color:var(--color-primary)}.scrollbar{scrollbar-color:#9aa0a6 transparent;scrollbar-width:thin}.scrollbar::-webkit-scrollbar{height:10px;width:10px}.scrollbar::-webkit-scrollbar-thumb{background:#9aa0a6;background-clip:padding-box;border:2.5px solid transparent;border-radius:5px}.scrollbar::-webkit-scrollbar-thumb:hover{background-color:#798189}.scrollbar::-webkit-scrollbar-thumb:active{background-color:#61686e}.scrollbar::-webkit-scrollbar-track{background:0 0}.footer__link,.surface{text-decoration:none}.footer__link:focus,.footer__link:hover,.surface:focus,.surface:hover{text-decoration:underline}.visually-hidden{border:0;clip:rect(0 0 0 0);height:auto;margin:0;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}</style></head><body><div class=scaffold><top-nav class="display-block hairline-bottom" data-side-nav-inert role=banner><a href=#main-content class="color-primary skip-link visually-hidden">Skip to content</a><nav aria-label="Chrome Developers" class="align-center display-grid" role=search><button class="display-flex align-center button height-700 justify-content-center width-700 lg:display-none top-nav__hamburger" aria-label=menu><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon><path d="M0 0h24v24H0z" fill=none /><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></button><div class="display-flex justify-content-start top-nav__logo"><a href=/ class=display-inline-flex aria-label=developer.chrome.com><svg height=36 width=36 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="2 2 36 36" class=icon fill=none id=chromeLogo><mask height=32 id=mask0_665 mask-type=alpha maskunits=userSpaceOnUse width=32 x=4 y=4><ellipse cx=20 cy=20 fill=#C4C4C4 rx=16 ry=16 /></mask><g mask=url(#mask0_665)><path d="M4.00006 4V23.6364H13.7018L20 12.7273H36V4H4.00006Z" fill=#DB4437 /><path d="M4 36H19.2309L26.3 28.9309V23.6364H13.7018L4 6.99636V36Z" fill=#0F9D58 /><path d="M4 36H19.2309L26.3 28.9309V23.6364H13.7018L4 6.99636V36Z" fill=url(#paint0_linear_665) /><path d="M19.9998 12.7273L26.2998 23.6364L19.2307 36H35.9998V12.7273H19.9998Z" fill=#FFCD40 /><path d="M19.9998 12.7273L26.2998 23.6364L19.2307 36H35.9998V12.7273H19.9998Z" fill=url(#paint1_linear_665) /><path d="M13.8744 23.5727L6.63258 11.1527L6.52712 11.3345L13.7162 23.6618L13.8744 23.5727Z" fill=#3E2723 fill-opacity=0.15 /><path d="M26.1526 23.8782L26.0017 23.7909L19.0217 36H19.2308L26.1581 23.8836L26.1526 23.8782Z" fill=#263238 fill-opacity=0.15 /><path d="M6.53993 11.3545L16.949 21.7618L13.7017 23.6364L6.53993 11.3545Z" fill=url(#paint2_radial_665) /><path d="M19.2418 35.98L23.0527 21.7618L26.2999 23.6364L19.2418 35.98Z" fill=url(#paint3_radial_665) /><path d="M20 12.7273V16.5364L34.2545 12.7273H20Z" fill=url(#paint4_radial_665) /><path d="M19.9999 27.2727C24.0166 27.2727 27.2727 24.0166 27.2727 20C27.2727 15.9834 24.0166 12.7273 19.9999 12.7273C15.9833 12.7273 12.7272 15.9834 12.7272 20C12.7272 24.0166 15.9833 27.2727 19.9999 27.2727Z" fill=#F1F1F1 /><path d="M20 25.8182C23.2133 25.8182 25.8181 23.2133 25.8181 20C25.8181 16.7867 23.2133 14.1818 20 14.1818C16.7867 14.1818 14.1818 16.7867 14.1818 20C14.1818 23.2133 16.7867 25.8182 20 25.8182Z" fill=#4285F4 /><path d="M19.9999 12.5455C15.9836 12.5455 12.7272 15.8018 12.7272 19.8182V20C12.7272 15.9836 15.9836 12.7273 19.9999 12.7273H35.9999V12.5455H19.9999Z" fill=#3E2723 fill-opacity=0.2 /><path d="M26.2909 23.6364C25.0327 25.8073 22.6891 27.2727 20 27.2727C17.3091 27.2727 14.9655 25.8073 13.7073 23.6364H13.7L4 6.99636V7.17818L13.7018 23.8182H13.7091C14.9673 25.9891 17.3109 27.4545 20.0018 27.4545C22.6909 27.4545 25.0345 25.9909 26.2927 23.8182H26.3018V23.6364H26.2909Z" fill=white fill-opacity=0.1 /><path d="M20.1818 12.7273C20.1509 12.7273 20.1218 12.7309 20.0909 12.7327C24.0655 12.7818 27.2727 16.0145 27.2727 20C27.2727 23.9855 24.0655 27.2182 20.0909 27.2673C20.1218 27.2673 20.1509 27.2727 20.1818 27.2727C24.1982 27.2727 27.4546 24.0164 27.4546 20C27.4546 15.9836 24.1982 12.7273 20.1818 12.7273Z" fill=#3E2723 opacity=0.1 /><path d="M26.3636 23.8782C26.9818 22.8091 27.34 21.5727 27.34 20.2491C27.34 19.4818 27.22 18.7436 27 18.0509C27.1727 18.6727 27.2727 19.3255 27.2727 20.0018C27.2727 21.3255 26.9145 22.5618 26.2964 23.6309L26.3 23.6382L19.2309 36.0018H19.4418L26.3673 23.8855L26.3636 23.8782Z" fill=white fill-opacity=0.2 /><path d="M20 4.18182C28.8055 4.18182 35.9491 11.2964 35.9982 20.0909C35.9982 20.06 36 20.0309 36 20C36 11.1636 28.8364 4 20 4C11.1636 4 4 11.1636 4 20C4 20.0309 4.00182 20.06 4.00182 20.0909C4.05091 11.2964 11.1945 4.18182 20 4.18182Z" fill=white fill-opacity=0.2 /><path d="M20 35.8182C28.8055 35.8182 35.9491 28.7036 35.9982 19.9091C35.9982 19.94 36 19.9691 36 20C36 28.8364 28.8364 36 20 36C11.1636 36 4 28.8364 4 20C4 19.9691 4.00181 19.94 4.00181 19.9091C4.05091 28.7036 11.1945 35.8182 20 35.8182Z" fill=#3E2723 fill-opacity=0.15 /><path d="M20 36C28.8366 36 36 28.8366 36 20C36 11.1634 28.8366 4 20 4C11.1634 4 4 11.1634 4 20C4 28.8366 11.1634 36 20 36Z" fill=url(#paint5_radial_665) /></g><defs><lineargradient gradientunits=userSpaceOnUse id=paint0_linear_665 x1=22.704 x2=12.0978 y1=32.4536 y2=26.2416><stop stop-color=#055524 stop-opacity=0.4 /><stop stop-color=#055524 stop-opacity=0 offset=0.33 /></lineargradient><lineargradient gradientunits=userSpaceOnUse id=paint1_linear_665 x1=24.7012 x2=27.372 y1=11.6007 y2=23.2964><stop stop-color=#EA6100 stop-opacity=0.3 /><stop stop-color=#EA6100 stop-opacity=0 offset=0.66 /></lineargradient><radialgradient cx=0 cy=0 gradienttransform="translate(6.52266 11.3673) scale(14.1898)" gradientunits=userSpaceOnUse id=paint2_radial_665 r=1><stop stop-color=#3E2723 stop-opacity=0.2 /><stop stop-color=#3E2723 stop-opacity=0 offset=1 /></radialgradient><radialgradient cx=0 cy=0 gradienttransform="translate(19.9716 20.0251) scale(15.9764)" gradientunits=userSpaceOnUse id=paint3_radial_665 r=1><stop stop-color=#263238 stop-opacity=0.2 /><stop stop-color=#263238 stop-opacity=0 offset=1 /></radialgradient><radialgradient cx=0 cy=0 gradienttransform="translate(19.3047 12.7178) scale(15.2869)" gradientunits=userSpaceOnUse id=paint4_radial_665 r=1><stop stop-color=#3E2723 stop-opacity=0.2 /><stop stop-color=#3E2723 stop-opacity=0 offset=1 /></radialgradient><radialgradient cx=0 cy=0 gradienttransform="translate(8.77927 8.36618) scale(32.1356)" gradientunits=userSpaceOnUse id=paint5_radial_665 r=1><stop stop-color=white stop-opacity=0.1 /><stop stop-color=white stop-opacity=0 offset=1 /></radialgradient></defs></svg><div class=logo__text><svg height=36 width=190 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="52 2 190 36" class=icon fill=none id=chromeDevelopersText><defs/><path d="M61 28.35A7.92 7.92 0 0155.17 26a7.97 7.97 0 01-2.36-5.88c0-2.34.79-4.3 2.36-5.87A7.92 7.92 0 0161 11.9c2.37 0 4.3.85 5.78 2.57l-1.4 1.36a5.31 5.31 0 00-4.38-2 6 6 0 00-4.36 1.74 6.12 6.12 0 00-1.76 4.55c0 1.88.59 3.4 1.76 4.56A6 6 0 0061 26.42c1.89 0 3.5-.77 4.84-2.3l1.4 1.42a7.79 7.79 0 01-2.7 2.06c-1.09.5-2.27.75-3.54.75zm10.07-16.1v4.97l-.09 1.5h.09c.3-.52.75-.95 1.38-1.3.64-.37 1.31-.55 2.03-.55 1.33 0 2.35.4 3.06 1.23a4.9 4.9 0 011.05 3.3V28h-2.02v-6.3c0-1.99-.89-2.98-2.66-2.98-.84 0-1.52.33-2.05 1-.53.67-.8 1.44-.8 2.32V28h-2.02V12.25h2.03zM82.99 28h-2.02V17.22h1.93v1.76h.1c.2-.59.62-1.07 1.25-1.45a3.68 3.68 0 013.38-.31l-.77 1.9c-.26-.11-.62-.16-1.07-.16-.74 0-1.39.3-1.96.88a3.1 3.1 0 00-.84 2.26V28zm6.25-9.48a5.24 5.24 0 013.98-1.65c1.62 0 2.94.55 3.98 1.65a5.67 5.67 0 011.57 4.09c0 1.64-.52 3.01-1.57 4.11a5.28 5.28 0 01-3.98 1.63 5.28 5.28 0 01-3.98-1.63 5.75 5.75 0 01-1.56-4.11c0-1.64.52-3 1.56-4.1zm1.5 6.93a3.4 3.4 0 004.95 0 3.88 3.88 0 001.05-2.84 3.8 3.8 0 00-1.05-2.82 3.37 3.37 0 00-4.95 0 3.85 3.85 0 00-1.04 2.82c0 1.17.35 2.12 1.04 2.84zm9.65 2.55V17.22h1.94v1.5h.08c.31-.52.78-.95 1.41-1.3a3.86 3.86 0 011.92-.55c1.67 0 2.8.69 3.4 2.07a4.21 4.21 0 013.77-2.07c1.27 0 2.23.4 2.88 1.23.65.8.97 1.9.97 3.3V28h-2.03v-6.3c0-1.08-.2-1.85-.59-2.3-.4-.46-1-.68-1.8-.68s-1.46.33-1.98 1a3.72 3.72 0 00-.77 2.32V28h-2.03v-6.3c0-1.08-.2-1.85-.6-2.3-.39-.46-.99-.68-1.8-.68-.79 0-1.45.33-1.98 1a3.72 3.72 0 00-.77 2.32V28h-2.02zm23.62.35a5.23 5.23 0 01-3.98-1.63 5.8 5.8 0 01-1.52-4.11c0-1.57.49-2.92 1.47-4.05 1-1.13 2.27-1.7 3.8-1.7 1.6 0 2.88.53 3.84 1.57a5.9 5.9 0 011.45 4.18l-.02.37h-8.52a3.68 3.68 0 001.08 2.58c.67.63 1.46.94 2.36.94 1.45 0 2.43-.61 2.94-1.84l1.8.74a4.9 4.9 0 01-1.73 2.12c-.8.55-1.8.83-2.97.83zm2.9-7.04a2.85 2.85 0 00-.85-1.76c-.52-.56-1.29-.83-2.31-.83-.75 0-1.4.23-1.96.7-.55.47-.92 1.1-1.13 1.9h6.25zm9.2 6.69V12.25h4.81c2.42 0 4.36.73 5.81 2.2a7.68 7.68 0 012.18 5.67c0 2.34-.73 4.24-2.18 5.7-1.45 1.45-3.39 2.18-5.8 2.18h-4.83zm2.02-1.94h2.8c1.81 0 3.25-.52 4.3-1.56 1.08-1.04 1.61-2.5 1.61-4.38 0-1.86-.53-3.31-1.6-4.35a5.83 5.83 0 00-4.32-1.59h-2.8v11.88zm17.4 2.3a5.24 5.24 0 01-3.99-1.64 5.8 5.8 0 01-1.51-4.11c0-1.57.49-2.92 1.47-4.05 1-1.13 2.27-1.7 3.8-1.7 1.6 0 2.88.53 3.83 1.57a5.9 5.9 0 011.46 4.18l-.03.37h-8.51a3.68 3.68 0 001.08 2.58c.67.63 1.46.94 2.35.94 1.45 0 2.44-.61 2.95-1.84l1.8.74a4.9 4.9 0 01-1.73 2.12c-.81.55-1.8.83-2.97.83zm2.9-7.05a2.85 2.85 0 00-.86-1.76c-.51-.56-1.28-.83-2.3-.83-.76 0-1.4.23-1.97.7-.54.47-.91 1.1-1.12 1.9h6.25zm7 6.69l-4.35-10.78h2.2l3.17 8.36h.04l3.21-8.36h2.16L167.46 28h-2.03zm12.31.35a5.24 5.24 0 01-3.98-1.63 5.8 5.8 0 01-1.52-4.11c0-1.57.5-2.92 1.47-4.05 1-1.13 2.27-1.7 3.81-1.7 1.6 0 2.88.53 3.83 1.57a5.9 5.9 0 011.45 4.18l-.02.37h-8.52a3.68 3.68 0 001.08 2.58c.68.63 1.46.94 2.36.94 1.45 0 2.43-.61 2.95-1.84l1.8.74a4.9 4.9 0 01-1.74 2.12c-.8.55-1.8.83-2.97.83zm2.9-7.04a2.85 2.85 0 00-.85-1.76c-.52-.56-1.29-.83-2.31-.83-.75 0-1.4.23-1.96.7-.54.47-.92 1.1-1.12 1.9h6.25zm6.04 6.69h-2.03V12.25h2.03V28zm3.3-9.48a5.24 5.24 0 013.98-1.65c1.62 0 2.94.55 3.98 1.65a5.68 5.68 0 011.57 4.09c0 1.64-.52 3.01-1.56 4.11a5.28 5.28 0 01-3.99 1.63 5.28 5.28 0 01-3.98-1.63 5.75 5.75 0 01-1.56-4.11c0-1.64.52-3 1.56-4.1zm1.5 6.93a3.4 3.4 0 002.48 1.05c.96 0 1.78-.35 2.47-1.05a3.88 3.88 0 001.05-2.84 3.8 3.8 0 00-1.05-2.82 3.37 3.37 0 00-4.95 0 3.85 3.85 0 00-1.04 2.82c0 1.17.35 2.12 1.04 2.84zm15.37 2.9c-.82 0-1.56-.17-2.22-.53a3.76 3.76 0 01-1.46-1.32h-.08l.08 1.5v4.75h-2.02V17.22h1.94v1.5h.08c.33-.53.81-.97 1.46-1.32.66-.36 1.4-.53 2.22-.53 1.4 0 2.6.55 3.6 1.65a5.82 5.82 0 011.52 4.09c0 1.63-.5 3-1.51 4.1a4.74 4.74 0 01-3.61 1.64zm-.33-1.85c.94 0 1.74-.35 2.42-1.05a3.98 3.98 0 001.01-2.84 3.9 3.9 0 00-1.01-2.82 3.2 3.2 0 00-2.42-1.07c-.96 0-1.77.35-2.44 1.05-.66.7-1 1.65-1 2.84s.34 2.13 1 2.84c.67.7 1.48 1.05 2.44 1.05zm12.2 1.85a5.23 5.23 0 01-3.99-1.63 5.8 5.8 0 01-1.52-4.11c0-1.57.5-2.92 1.48-4.05 1-1.13 2.26-1.7 3.8-1.7 1.6 0 2.88.53 3.83 1.57a5.9 5.9 0 011.45 4.18l-.02.37h-8.51a3.68 3.68 0 001.07 2.58c.68.63 1.46.94 2.36.94 1.45 0 2.43-.61 2.95-1.84l1.8.74a4.9 4.9 0 01-1.74 2.12c-.8.55-1.8.83-2.97.83zm2.9-7.04a2.85 2.85 0 00-.86-1.76c-.52-.56-1.29-.83-2.31-.83-.75 0-1.4.23-1.96.7-.54.47-.92 1.1-1.12 1.9h6.25zm6.03 6.69h-2.03V17.22h1.94v1.76h.09c.2-.59.62-1.07 1.25-1.45a3.67 3.67 0 013.39-.31l-.77 1.9c-.27-.11-.63-.16-1.08-.16-.73 0-1.38.3-1.96.88a3.1 3.1 0 00-.83 2.26V28zm9.54.35c-1.2 0-2.2-.3-3-.88a5.25 5.25 0 01-1.7-2.2l1.8-.75c.57 1.35 1.54 2.03 2.92 2.03.63 0 1.14-.14 1.54-.42.41-.28.62-.65.62-1.1 0-.7-.5-1.18-1.48-1.43l-2.17-.53a5.27 5.27 0 01-1.96-.99 2.44 2.44 0 01-.93-2c0-.95.42-1.72 1.26-2.31.85-.6 1.85-.9 3.01-.9.95 0 1.8.22 2.55.66a3.6 3.6 0 011.6 1.85l-1.75.72c-.4-.95-1.22-1.43-2.47-1.43-.6 0-1.1.13-1.51.38-.41.25-.62.58-.62 1 0 .62.48 1.04 1.43 1.26l2.13.5c1.02.24 1.76.65 2.25 1.22a3 3 0 01-.46 4.36c-.8.64-1.81.96-3.06.96z" fill=#5F6368 /></svg></div></a></div><search-box bloglabel=Blog buttonlabel="open search" class="align-center display-grid" docslabel=Documentation locale=en placeholder="Search docs, blogs and more"></search-box></nav></top-nav><navigation-rail aria-label=primary class="lg:pad-left-200 lg:pad-right-200" role=navigation tabindex=-1><div class="display-flex align-center lg:display-none hairline-bottom pad-200"><button class="display-flex align-center button height-700 justify-content-center width-700 navigation-rail__close" aria-label=Close><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></button><div class="display-flex pad-right-200 pad-left-200"><svg height=36 width=36 xmlns=http://www.w3.org/2000/svg aria-hidden=true><use href=#chromeLogo /></svg><div class="logo__text logo__text-small"><svg height=36 width=190 xmlns=http://www.w3.org/2000/svg aria-hidden=true><use href=#chromeDevelopersText /></svg></div></div></div><div class="display-flex direction-column lg:pad-right-0 pad-right-200 pad-top-300"><a href=/ class=navigation-rail__link><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M4 9l8-6 8 6v12H4V9zm11 10h3v-9l-6-4.5L6 10v9h3v-6h6v6z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Home</span> </a><a href=/docs/ class=navigation-rail__link><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M17 2H7v2h10V2zm3 3H4v2h16V5zm0 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM4 20h16V10H4v10z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Docs</span> </a><a href=/blog/ class=navigation-rail__link data-state=active><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M22 5a3 3 0 00-3-3H5a3 3 0 00-3 3v10a3 3 0 003 3h4.33L12 22l2.67-4H19a3 3 0 003-3V5zM6 7v2h12V7H6zm9 4H6v2h9v-2z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Blog</span></a></div></navigation-rail><side-nav type=site><div class="lg:display-flex side-nav__container"><navigation-rail aria-label=primary class="lg:pad-left-200 lg:pad-right-200" role=navigation tabindex=-1><div class="display-flex align-center lg:display-none hairline-bottom pad-200"><button class="display-flex align-center button height-700 justify-content-center width-700 navigation-rail__close" aria-label=Close><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></button><div class="display-flex pad-right-200 pad-left-200"><svg height=36 width=36 xmlns=http://www.w3.org/2000/svg aria-hidden=true><use href=#chromeLogo /></svg><div class="logo__text logo__text-small"><svg height=36 width=190 xmlns=http://www.w3.org/2000/svg aria-hidden=true><use href=#chromeDevelopersText /></svg></div></div></div><div class="display-flex direction-column lg:pad-right-0 pad-right-200 pad-top-300"><a href=/ class=navigation-rail__link><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M4 9l8-6 8 6v12H4V9zm11 10h3v-9l-6-4.5L6 10v9h3v-6h6v6z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Home</span> </a><a href=/docs/ class=navigation-rail__link><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M17 2H7v2h10V2zm3 3H4v2h16V5zm0 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM4 20h16V10H4v10z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Docs</span> </a><a href=/blog/ class=navigation-rail__link data-state=active><div class=navigation-rail__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M22 5a3 3 0 00-3-3H5a3 3 0 00-3 3v10a3 3 0 003 3h4.33L12 22l2.67-4H19a3 3 0 003-3V5zM6 7v2h12V7H6zm9 4H6v2h9v-2z" clip-rule=evenodd fill-rule=evenodd /></svg></div><span>Blog</span></a></div></navigation-rail></div></side-nav><main data-search-inert data-side-nav-inert id=main-content tabindex=-1><div class="display-flex align-center justify-content-between pad-bottom-300 pad-left-400 pad-right-400 pad-top-300 title-bar"><nav aria-label=breadcrumbs class="flow-space-200 breadcrumbs"><a href=.. class="type--h6 decoration-none link no-visited">Blog</a></nav><share-button message="Optimizing LCP using Signed Exchanges"><a href="https://twitter.com/share?url=https://developer.chrome.com/blog/optimizing-lcp-using-signed-exchanges/&text=Optimizing LCP using Signed Exchanges" class=share-button__link target=_blank><svg height=20 width=18 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 18 20" fill=none><path d="M12.97 14.81C13.5 14.31 14.21 14 15 14C16.66 14 18 15.34 18 17C18 18.66 16.66 20 15 20C13.34 20 12 18.66 12 17C12 16.76 12.04 16.53 12.09 16.31L5.04 12.19C4.5 12.69 3.79 13 3 13C1.34 13 0 11.66 0 10C0 8.34 1.34 7 3 7C3.79 7 4.5 7.31 5.04 7.81L12.09 3.7C12.04 3.48 12 3.24 12 3C12 1.34 13.34 0 15 0C16.66 0 18 1.34 18 3C18 4.66 16.66 6 15 6C14.21 6 13.49 5.69 12.96 5.19L5.91 9.3C5.96 9.53 6 9.76 6 10C6 10.24 5.96 10.47 5.91 10.7L12.97 14.81ZM16 3C16 2.45 15.55 2 15 2C14.45 2 14 2.45 14 3C14 3.55 14.45 4 15 4C15.55 4 16 3.55 16 3ZM3 11C2.45 11 2 10.55 2 10C2 9.45 2.45 9 3 9C3.55 9 4 9.45 4 10C4 10.55 3.55 11 3 11ZM14 17C14 17.55 14.45 18 15 18C15.55 18 16 17.55 16 17C16 16.45 15.55 16 15 16C14.45 16 14 16.45 14 17Z" fill=#5F6368 clip-rule=evenodd fill-rule=evenodd /></svg></a></share-button></div><div class="display-flex gap-top-300 lg:gap-top-400"><div class="display-flex justify-content-center width-full"><article class="pad-right-400 pad-left-400 measure-long post stack width-full"><div class="flow-space-200 stack"><h1 class=type--h2>Optimizing LCP using Signed Exchanges</h1><p class=type--h5>How to measure and optimize signed exchanges to get the most improvement out of them</p><p class="color-secondary-text type--caption">Published on <time>Thursday, April 21, 2022</time></p></div><div class="lg:stack-exception-700 stack-exception-600"><div class=post-authors><div class="display-flex align-start"><a href=/authors/twifkak/ class=card-authors__image><img alt="Devin Mullins" decoding=async height=40 loading=lazy sizes="(min-width: 40px) 40px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=40 40w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=46 46w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=52 52w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=59 59w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=68 68w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=77 77w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=88 88w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=100 100w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=114 114w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fDaDWpuKLKDm4mjnt0jV.jpg?auto=format&w=120 120w" width=40 class="flex-shrink-none height-600 width-600"></a><div class="display-flex direction-column align-start gap-left-300 type--small"><a href=/authors/twifkak/ class="display-inline-flex color-text surface">Devin Mullins</a><p class=color-secondary-text>Software engineer at Google, signed exchanges integration lead in Search</p></div></div></div></div><div class="display-block toc-container xl:display-none"><details aria-label="Table of contents" class=toc role=navigation><summary class="color-secondary-text surface user-select-none"><div class="align-center display-inline-flex"><div class=type--h6>Table of contents</div><span class=toc__icon><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-label=arrow-right class=icon role=img><path d="M10 17l5-5-5-5v10z"/><path d="M0 24V0h24v24H0z" fill=none /></svg></span></div></summary><div class=toc__wrapper><ul><li><a href=#introduction>Introduction</a></li><li><a href=#analyze>Analyze</a></li><li><a href=#debug>Debug</a><ul><li><a href=#publishing>Publishing</a></li><li><a href=#indexing>Indexing</a></li><li><a href=#ingestion>Ingestion</a></li></ul></li><li><a href=#optimize>Optimize</a><ul><li><a href=#max-age>max-age</a></li><li><a href=#user-agent>user-agent</a></li><li><a href=#subresources>Subresources</a></li></ul></li><li><a href=#measure>Measure</a><ul><li><a href=#server-side-metrics>Server-side metrics</a></li><li><a href=#client-side-metrics>Client-side metrics</a></li><li><a href=#contemporary-study>Contemporary study</a></li><li><a href=#beforeafter-study>Before/after study</a></li><li><a href=#opt-out-some-urls>Opt-out some URLs</a></li><li><a href=#holdback-study>Holdback study</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></div></details></div><div class="stack center-images stack--block type"><p>Signed exchanges (SXGs) are a means to improve your page speedâ€”mainly <a href=https://web.dev/lcp/ >Largest Contentful Paint (LCP)</a>. When referring sites (currently Google Search) link to a page, they can <a href=https://developers.google.com/search/docs/advanced/experience/signed-exchange>prefetch it</a> into the browser cache before the user clicks on the link.</p><p>It's possible to make web pages that, when prefetched, require no network on the <a href=https://developer.mozilla.org/docs/Web/Performance/Critical_rendering_path>critical path to rendering the page</a>! On a 4G connection, this page load <a href="https://www.webpagetest.org/video/compare.php?tests=220329_AiDcB7_HB0-l:Before,220329_BiDc1V_FJG-l:After&medianMetric=LCP">goes from 6s to 0.9s</a> (the remaining 0.9s being mostly by CPU usage):</p><figure><video controls poster="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/PKUIECQWQwpDzGRUzL86.jpg?auto=format"><source src=https://storage.googleapis.com/web-dev-uploads/video/rULxC7pPw3PFS4o9xr7v8isFmCv1/KATYwVUsB7yG3sxtFkJI.mp4 type=video/mp4></video></figure><p>Most people publishing SXGs today are using Cloudflare's easy-to-use <a href=https://support.cloudflare.com/hc/articles/4411075595661-Automatic-Signed-Exchanges-SXGs-Beta>Automatic Signed Exchanges</a> (ASX) feature (though <a href=https://web.dev/signed-exchanges/#tooling>open source options</a> exist too):</p><figure><img alt="Cloudflare settings panel with checkbox to enable Automatic Signed Exchanges" decoding=async height=373 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Jok2O4SHNgW5d9y20YQP.png?auto=format&w=1600 1600w" width=800></figure><p>In many cases, checking the box to enable this feature is enough to get the kind of substantial improvement shown above. Sometimes, there are a few more steps to ensure these SXGs are working as intended at each stage of the pipeline, and to optimize pages to take full advantage of prefetch.</p><p>In the past couple of months since Cloudflare's launch, I've been reading and responding to questions on <a href="https://support.google.com/webmasters/threads?hl=en&thread_filter=(%27%22signed%20exchange%22%27)">various</a> <a href=https://community.cloudflare.com/t/automatic-signed-exchanges-sxgs-beta-launch/312634>forums</a> and learning how to advise sites on how to make sure they're getting the most out of their SXG deployments. This post is a collection of my advice. I'll walk through the steps to analyze SXG performance, find ways to improve it, and finally measure its real world impact.</p><h2 id=introduction tabindex=-1><a href=#introduction class=heading-link aria-hidden=true>#</a> Introduction</h2><p>An SXG is a file containing a URL, a set of HTTP response headers, and a response bodyâ€”all cryptographically signed by a Web PKI certificate. When the browser loads an SXG, it verifies all of these:</p><ul><li>The SXG hasn't expired.</li><li>The signature matches the URL, headers, body, and certificate.</li><li>The certificate is valid and matches the URL.</li></ul><p>If verification fails, the browser abandons the SXG and instead fetches the signed URL. If verification succeeds, the browser loads the signed response, treating it as if it came directly from the signed URL. This allows SXGs to be rehosted on any server as long as it isn't expired or modified since being signed.</p><p>In the case of Google Search, SXG <a href=https://wicg.github.io/webpackage/draft-yasskin-wpack-use-cases.html#name-privacy-preserving-prefetch>enables</a> prefetching of pages in its search results. For pages supporting SXGs, Google Search can prefetch its cached copy of the page, hosted on webpkgcache.com. These webpkgcache.com URLs don't affect the display or behavior of the page, because the browser respects the original, signed URL. Prefetching can enable your page to load much faster.</p><div class="aside aside--note"><p>SXGs are potentially useful for other use cases not covered in this article. For instance, they could enable connection resilience: a chat app could pre-download a link sent to the user if the page supports SXG, so they could later view it while offline. See this larger list of <a href=https://wicg.github.io/webpackage/draft-yasskin-wpack-use-cases.html>potential use cases</a>.</p></div><h2 id=analyze tabindex=-1><a href=#analyze class=heading-link aria-hidden=true>#</a> Analyze</h2><p>To see the benefit of SXGs, start by using a lab tool to analyze SXG performance in repeatable conditions. You can use <a href=https://www.webpagetest.org/ >WebPageTest</a> to compare waterfallsâ€”and LCPâ€”with and without SXG prefetch.</p><div class="aside aside--caution"><div class="aside__label gap-bottom-300"><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg fill=none viewbox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z" clip-rule=evenodd fill-rule=evenodd /></svg><span>Caution</span></div><p><a href=https://web.dev/lab-and-field-data-differences/ >Lab results may differ</a> from real user experiences, but they are a useful tool to diagnose where to optimize and to iterate quickly. We'll cover how to measure the resultant real user metrics in the <a href=#measure>Measure section</a>.</p></div><p>Generate a test without SXG as follows:</p><ul><li>Go to <a href=https://www.webpagetest.org/ >WebPageTest</a> and sign in. Signing in saves your test history for easier comparison later.</li><li>Enter the URL you want to test.</li><li>Go to <strong>Advanced Configuration</strong>. (You will need Advanced Configuration for the SXG test, so using it here helps ensure the test options are the same.)</li><li>Under <strong>Browser</strong>, choose an Android phone under "Chrome Device Emulation". (This is also for parity with the "with SXG" test. Currently, Google Search only supports SXG on Android.)</li><li>In the <strong>Test Settings</strong> tab, it may be helpful to set Connection to 4G and increase "Number of Tests to Run" to 7.</li><li>Click <strong>Start Test</strong>.</li></ul><p>Generate a test <em>with</em> SXG by using the same steps as above, but before clicking <strong>Start Test</strong>, go to the <strong>Script</strong> tab, paste in the following <a href=https://docs.webpagetest.org/scripting/ >WebPageTest script</a>, and modify the two <code>navigate</code> URLs as directed:</p><pre class=language-clike><code class=language-clike><span class="token comment">// Disable log collection for the first step. We only want the waterfall for the target navigation.</span><br>logData <span class="token number">0</span><br><br><span class="token comment">// Visit a search result page that includes your page.</span><br>navigate https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>google<span class="token punctuation">.</span>com<span class="token operator">/</span>search<span class="token operator">?</span>q<span class="token operator">=</span>site<span class="token operator">%</span><span class="token number">3</span>Asigned<span class="token operator">-</span>exchange<span class="token operator">-</span>testing<span class="token punctuation">.</span>dev<span class="token operator">+</span>image<br><br><span class="token comment">// Wait for the prefetch to succeed.</span><br>sleep <span class="token number">10</span><br><br><span class="token comment">// Re-enable log collection.</span><br>logData <span class="token number">1</span><br><br><span class="token comment">// Navigate to the prefetched SXG on the Google SXG Cache.</span><br>navigate https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>signed<span class="token operator">--</span>exchange<span class="token operator">--</span>testing<span class="token operator">-</span>dev<span class="token punctuation">.</span>webpkgcache<span class="token punctuation">.</span>com<span class="token operator">/</span>doc<span class="token operator">/</span><span class="token operator">-</span><span class="token operator">/</span>s<span class="token operator">/</span>signed<span class="token operator">-</span>exchange<span class="token operator">-</span>testing<span class="token punctuation">.</span>dev<span class="token operator">/</span>sxgs<span class="token operator">/</span>valid<span class="token operator">-</span>image<span class="token operator">-</span>subresource<span class="token punctuation">.</span>html</code></pre><p>For the first <code>navigate</code> URL, if your page doesn't appear in any Google Search results yet, you can use <a href=https://signed-exchange-testing.dev/prefetch/ >this prefetch page</a> to generate a pretend search results page for this purpose.</p><p>To determine the second <code>navigate</code> URL, visit your page using the <a href=https://chrome.google.com/webstore/detail/sxg-validator/hiijcdgcphjeljafieaejfhodfbpmgoe>SXG Validator Chrome extension</a>, and click the extension icon to see the cache URL:</p><figure><img alt="SXG Validator showing cache information including URL" decoding=async height=229 loading=lazy sizes="(min-width: 506px) 506px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/DbkcylGpILjOzOnxREXl.png?auto=format&w=1012 1012w" width=506></figure><p>Once these tests are complete, go to <a href=https://app.webpagetest.org/ui/wpt/testhistory>Test History</a>, select the two tests, and click <strong>Compare</strong>:</p><figure><img alt="Test History with two tests checked and the Compare button highlighted" decoding=async height=202 loading=lazy sizes="(min-width: 509px) 509px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/ElSV7nAWCWV0Yjf7VC2o.png?auto=format&w=1018 1018w" width=509></figure><p>Append <code>&medianMetric=LCP</code> to the compare URL so WebPageTest selects the run with median LCP for each side of the comparison. (The default is median by Speed Index.)</p><p>To compare waterfalls, expand the <strong>Waterfall Opacity</strong> section and drag the slider. To view the video, click <strong>Adjust Filmstrip Settings</strong>, scroll down inside that dialog, and click <strong>View Video</strong>.</p><p>If the SXG prefetch is successful, you will see that the "with SXG" waterfall doesn't include a row for the HTML, and the fetches for subresources start sooner. For example, compare "Before" and "After" here:</p><web-tabs><web-tab title=Before><img alt="Network waterfall without SXG prefetch; first row is HTML fetch which takes 1050ms" decoding=async height=327 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LwbWyWbcX3oHnM8lSwDA.png?auto=format&w=1600 1600w" width=800></web-tab><web-tab title=After><img alt="Network waterfall with SXG prefetch; the HTML has been prefetched, allowing all subresources to start fetching 1050ms earlier" decoding=async height=327 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/JPmTMO0WYMJ7aY008L4V.png?auto=format&w=1600 1600w" width=800></web-tab></web-tabs><h2 id=debug tabindex=-1><a href=#debug class=heading-link aria-hidden=true>#</a> Debug</h2><p>If the WebPageTest is showing that the SXG is being prefetched, then it has succeeded in all the steps of the pipeline; you may skip to the <a href=#optimize>Optimize</a> section to learn how to further improve LCP. Otherwise, you'll need to find out where in the pipeline it failed and why; read on to learn how.</p><h3 id=publishing tabindex=-1><a href=#publishing class=heading-link aria-hidden=true>#</a> Publishing</h3><p>Make sure your pages are being generated as SXGs. To do so, you need to pretend to be a crawler. The easiest way is to use the <a href=https://chrome.google.com/webstore/detail/sxg-validator/hiijcdgcphjeljafieaejfhodfbpmgoe>SXG Validator Chrome extension</a>:</p><figure><img alt="SXG Validator showing a check mark (âœ…) and a Content Type of application/signed-exchange;v=b3" decoding=async height=281 loading=lazy sizes="(min-width: 600px) 600px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/zUqSkRSLNkF26gjyymEo.png?auto=format&w=1200 1200w" width=600></figure><div class="aside aside--note"><p>SXGs are meant for SXG-capable crawlers, to enable prefetching. When users visit your site directly, you should not serve SXGs to them, since they will not be prefetchedâ€”doing so only adds overhead. Cloudflare ASX performs this <a href=https://github.com/google/webpackager/blob/main/cmd/webpkgserver/README.md#content-negotiation>content negotiation</a> automatically.</p></div><p>The extension fetches the current URL with an <code>Accept</code> request header that says it prefers the SXG version. If you see a check mark (âœ…) next to Origin, that means an SXG was returned; you can skip to the <a href=#indexing>Indexing</a> section.</p><p>If you see a cross mark (âŒ), that means an SXG wasn't returned:</p><figure><img alt="SXG Validator showing a cross mark (âŒ) and a Content Type of text/html" decoding=async height=162 loading=lazy sizes="(min-width: 483px) 483px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/4T3la9HtoRDz8SK7lWGi.png?auto=format&w=966 966w" width=483></figure><p>If Cloudflare ASX is enabled, then the most likely reason for a cross mark (âŒ) is because a cache control response header prevents it. ASX looks at headers with the following names:</p><ul><li><code>Cache-Control</code></li><li><code>CDN-Cache-Control</code></li><li><code>Surrogate-Control</code></li><li><code>Cloudflare-CDN-Cache-Control</code></li></ul><p>If any of these headers contains any of the following header values, it will prevent an SXG from being generated:</p><ul><li><code>private</code></li><li><code>no-store</code></li><li><code>no-cache</code></li><li><code>max-age</code> less than 120, unless overridden by <code>s-maxage</code> greater than or equal to 120</li></ul><p>ASX doesn't create an SXG in these cases because SXGs may be <a href=https://developers.google.com/search/docs/advanced/experience/signed-exchange#additional-requirements-for-google-search>cached and reused</a> for multiple visits and multiple visitors.</p><p>Another possible reason for a cross mark (âŒ) is the presence of one of <a href=https://wicg.github.io/webpackage/draft-yasskin-httpbis-origin-signed-exchanges-impl.html#name-stateful-header-fields>these stateful response headers</a>, except for <code>Set-Cookie</code>. ASX removes the <code>Set-Cookie</code> header to comply with the SXG specification.</p><div class="aside aside--note"><p>These restrictions can be seen in more detail in the ASX code. For instance, cache control headers are inspected by the code that <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/sxg_rs/src/headers.rs#L105-L116>determines when to sign</a> and <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/sxg_rs/src/headers.rs#L252-L272>what the signature duration should be</a>. Other headers are removed before signing <a href=https://github.com/google/sxg-rs/blob/130fec932e100b1f9949903bc6c5a61452b9f042/cloudflare_worker/wrangler.example.toml#L42>by this configuration</a> or <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/sxg_rs/src/headers.rs#L279-L292>by this code</a>. Other headers <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/sxg_rs/src/headers.rs#L325-L345>prevent signing</a> if not otherwise stripped.</p></div><p>Another possible reason is the presence of a <a href=https://developer.mozilla.org/docs/Web/HTTP/Headers/Vary><code>Vary: Cookie</code></a> response header. Googlebot fetches SXGs without user credentials and may serve them to multiple visitors. If you serve different HTML to different users based on their cookie, then they could see an incorrect experience such as a logged out view.</p><div class="aside aside--note"><p>In the future, pages using <code>Vary: Cookie</code> will be supported by SXG, by being shown only to visitors without cookies for your site. This is <a href=https://crbug.com/1250532>implemented in Chromium</a>, and will be enabled in Google Search once that has rolled out more fully.</p></div><p>Alternatively to the Chrome extension, you can use a tool like <a href=https://curl.se/ ><code>curl</code></a>:</p><pre class=language-bash><code class=language-bash><span class="token function">curl</span> -siH <span class="token string">"Accept: application/signed-exchange;v=b3"</span> <span class="token variable">$URL</span> <span class="token operator">|</span> <span class="token function">less</span></code></pre><p>or <a href=https://github.com/WICG/webpackage/blob/main/go/signedexchange/README.md#dump-a-signed-exchange-file><code>dump-signedexchange</code></a>:</p><pre class=language-bash><code class=language-bash>dump-signedexchange -verify -uri <span class="token variable">$URL</span></code></pre><p>If the SXG is present and valid, you will see a human readable printout of the SXG. Otherwise, you will see an error message.</p><h3 id=indexing tabindex=-1><a href=#indexing class=heading-link aria-hidden=true>#</a> Indexing</h3><p>Make sure your SXGs are successfully <a href=https://support.google.com/webmasters/answer/7645831>indexed</a> by Google Search. Open Chrome DevTools, enable mobile-emulation mode and select an Android device. Then, perform a Google Search for your page. If it has been indexed as an SXG, Google will link to webpkgcache.com's copy of your page:</p><figure><img alt="Google Search results with DevTools showing an <a> that points to webpkgcache.com" decoding=async height=635 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Qu2qWl2LES3N8tiqnskP.png?auto=format&w=1600 1600w" width=800></figure><p>If Google Search thinks the user is likely to click on the result, it will also prefetch it:</p><figure><img alt="Google Search results with DevTools showing a <link rel=prefetch> for webpkgcache.com" decoding=async height=147 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/uhchyec7uo4rgcQsteaE.png?auto=format&w=1600 1600w" width=800></figure><p>The <code>&lt;link></code> element instructs the browser to download the SXG into its prefetch cache. When the user clicks on the <code>&lt;a></code> element, the browser will use that cached SXG to render the page.</p><p>You can also see evidence of the prefetch by going to the Network tab in DevTools and searching for URLs containing <code>webpkgcache</code>.</p><p>If the <code>&lt;a></code> points to webpkgcache.com, this means Google Search indexing of the signed exchange is working. You can skip forward to the <a href=#ingestion>Ingestion</a> section.</p><p>Otherwise, it could be that Google hasn't recrawled your page yet since you enabled SXG. Try the <a href=https://support.google.com/webmasters/answer/9012289>Google Search Console URL Inspection Tool</a>:</p><figure><img alt="Search Console URL Inspection tool, clicking View Crawled Page and then More Info" decoding=async height=302 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/vaPuQ3k315xVxdn9elPe.png?auto=format&w=1600 1600w" width=800></figure><p>The presence of a <code>digest: mi-sha256-03=...</code> header indicates that Google successfully crawled the SXG version.</p><p>If a <code>digest</code> header is not present, this could be an indication that an SXG was not served to Googlebot or that the index hasn't been updated since you enabled SXGs.</p><p>If an SXG is successfully crawled, but it still isn't being linked to, then it may be a failure to meet SXG cache requirements. These are covered in the next section.</p><h3 id=ingestion tabindex=-1><a href=#ingestion class=heading-link aria-hidden=true>#</a> Ingestion</h3><p>When Google Search indexes an SXG, it sends its copy to the Google SXG Cache, which validates it against the <a href=https://github.com/google/webpackager/blob/main/docs/cache_requirements.md>cache requirements</a>. The Chrome extension shows the result:</p><figure><img alt="SXG Validator showing a check mark (âœ…) and no warning message" decoding=async height=159 loading=lazy sizes="(min-width: 390px) 390px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/pB76K9ocvcooeZIpVxIq.png?auto=format&w=780 780w" width=390></figure><p>If you see a check mark (âœ…), then you can skip ahead to <a href=#optimize>Optimize</a>.</p><p>If it fails to meet the requirements, you will see a cross mark (âŒ) and a warning message indicating why:</p><figure><img alt='SXG Validator showing a cross mark (âŒ) and a warning message saying "errorâ€¦ parsing signature"' decoding=async height=258 loading=lazy sizes="(min-width: 359px) 359px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/fdNg8KIIXGsfSBpVCaVB.png?auto=format&w=718 718w" width=359></figure><p>In this event, the page will work just as it did before enabling SXG. Google will link to the page on its original host without an SXG prefetch.</p><p>In the event that the cached copy has expired and is being re-fetched in the background, you will see an hourglass (âŒ›):</p><figure><img alt="SXG Validator showing an hourglass (âŒ›) and no warning message" decoding=async height=188 loading=lazy sizes="(min-width: 377px) 377px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/BG0EYkGJOH9U391725he.png?auto=format&w=754 754w" width=377></figure><p>The Google developer document on SXG also has instructions for <a href=https://developers.google.com/search/docs/advanced/experience/signed-exchange#debug-the-google-sxg-cache>querying the cache manually</a>.</p><h2 id=optimize tabindex=-1><a href=#optimize class=heading-link aria-hidden=true>#</a> Optimize</h2><p>If the SXG Validator Chrome extension shows all check marks (âœ…), you have a SXG that can be served to users! Read on to find out how to optimize your web page so that you get the <em>most</em> LCP improvement from SXG.</p><h3 id=max-age tabindex=-1><a href=#max-age class=heading-link aria-hidden=true>#</a> max-age</h3><p>When SXGs expire, the Google SXG Cache will fetch a new copy in the background. While waiting for that fetch, users are directed to the page on its original host, which is not prefetched. The longer you set <code>Cache-Control: max-age</code>, the less often this background fetch happens, and thus the more often that LCP can be reduced by prefetch.</p><p>This is a tradeoff between performance and freshness, and the cache allows site owners to provide SXGs with a max-age anywhere between 2 minutes and 7 days, to fit each page's particular needs. Anecdotally, we find that:</p><ul><li><code>max-age=86400</code> (1 day) or longer works well for performance</li><li><code>max-age=120</code> (2 minutes) does not</li></ul><p>We hope to learn more about values in between those two, as we study the data more.</p><div class="aside aside--note"><p>We plan to make this tradeoff easier to manage in the future, by adding a cache purge API. It will be announced on <a href=https://groups.google.com/g/webpackaging-announce>webpackaging-announce</a>.</p></div><h3 id=user-agent tabindex=-1><a href=#user-agent class=heading-link aria-hidden=true>#</a> user-agent</h3><p>One time, I saw LCP <em>increase</em> when using a prefetched SXG. I ran <a href=https://www.webpagetest.org/ >WebPageTest</a>, comparing median results without and with SXG prefetch. Clicking on <strong>After</strong> below:</p><web-tabs><web-tab title=Before><img alt="Network waterfall without SXG prefetch; LCP is 2 seconds" decoding=async height=1026 loading=lazy sizes="(min-width: 680px) 680px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1360 1360w" width=680></web-tab><web-tab title=After><img alt="Network waterfall with SXG prefetch; the HTML has been prefetched, allowing all subresources to start fetching 800ms earlier, but LCP is 2.1 seconds" decoding=async height=1026 loading=lazy sizes="(min-width: 680px) 680px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/Z7Ws1ddxgOxhnpJvfzRP.png?auto=format&w=1360 1360w" width=680></web-tab></web-tabs><p>I saw that prefetch was working. The HTML is removed from the critical path and, thus, all of the subresources are able to load earlier. But LCPâ€”that green dashed lineâ€”<strong>increased from 2s to 2.1s</strong>.</p><p>To diagnose this, I looked at the film strips. I found that the page rendered differently in SXG. In plain HTML, Chrome determined that the "largest element" for LCP was the headline. However, in the SXG version, the page added a lazy-loaded banner, which pushed the headline below the fold and caused the new largest element to be the lazy-loaded cookie consent dialog. Everything rendered faster than before, but a change in layout caused the metric to report it as slower.</p><p>I dug deeper and discovered the reason for the difference in layout is that the page varies by <code>User-Agent</code>, and there was an error in the logic. It was serving a desktop page even though the SXG crawl header indicated mobile. After this was fixed, the browser correctly identified the page's headline as its largest element again.</p><p>Now, clicking on "After", I saw that the prefetched LCP <strong>drops to 1.3s</strong>:</p><web-tabs><web-tab title=Before><img alt="Network waterfall without SXG prefetch; LCP is 2 seconds" decoding=async height=1026 loading=lazy sizes="(min-width: 680px) 680px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/EoR1qbmGb9bK8l7OmD7x.png?auto=format&w=1360 1360w" width=680></web-tab><web-tab title=After><img alt="Network waterfall with SXG prefetch; LCP is 1.3 seconds" decoding=async height=1026 loading=lazy sizes="(min-width: 680px) 680px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/gjfeKIq18vAAnZqEVkhj.png?auto=format&w=1360 1360w" width=680></web-tab></web-tabs><p>Right now, SXGs are only enabled for Android, but we will soon enable them for desktop OSes. To prepare for the future, ensure that one of these is true:</p><ul><li>Your page doesn't <code>Vary</code> by <code>User-Agent</code> (e.g. it uses <a href=https://developers.google.com/search/mobile-sites/mobile-seo/responsive-design>responsive design</a> or <a href=https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls>separate mobile/desktop URLs</a>).</li><li>If your page uses <a href=https://developers.google.com/search/mobile-sites/mobile-seo/dynamic-serving>dynamic serving</a>, it annotates itself as mobile- or desktop-only using <a href=https://github.com/google/webpackager/blob/main/docs/supported_media.md><code>&lt;meta name=supported-media content=...></code></a>.</li></ul><h3 id=subresources tabindex=-1><a href=#subresources class=heading-link aria-hidden=true>#</a> Subresources</h3><p>SXGs can be used to prefetch subresources (including images) along with the HTML. Cloudflare ASX will scan the HTML for same-origin (first-party) <code>&lt;link rel=preload></code> elements and convert them into <a href=https://github.com/WICG/webpackage/blob/main/explainers/signed-exchange-subresource-substitution.md>SXG-compatible Link headers</a>. Details in the source code <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/cloudflare_worker/worker/src/index.ts#L250-L275>here</a> and <a href=https://github.com/google/sxg-rs/blob/d16e66a2b8d5e0c069ec70af198dd95f640321d8/sxg_rs/src/link.rs>here</a>.</p><p>If it's working, you'll see additional prefetches from Google Search:</p><figure><img alt="Google Search results with DevTools Network tab, showing a prefetch of /sub/â€¦/image.jpg" decoding=async height=493 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/e09y5ZGYE93zgPi2pyFk.png?auto=format&w=1600 1600w" width=800></figure><p>To optimize for LCP, look closely at your waterfall, and figure out which resources are on the critical path to rendering the largest element. If they can't be prefetched, consider if they can be <a href=https://web.dev/render-blocking-resources/#how-to-eliminate-render-blocking-scripts>taken off the critical path</a>. Be on the lookout for scripts that hide the page until they are done loading.</p><p>The Google SXG Cache allows <a href="https://github.com/google/webpackager/blob/main/docs/cache_requirements.md#:~:text=There%20may%20be%20no%20more%20than%2020%20rel%3Dpreloads.">up to 20</a> subresource preloads and ASX <a href=https://github.com/google/sxg-rs/blob/33fa49bbd1f156ce92de0e3b6af9e352b1ba8d9f/sxg_rs/src/link.rs#L60>ensures</a> that this limit isn't exceeded. However, there is a risk in adding too many subresource preloads. The browser will only use preloaded subresources <a href="https://github.com/WICG/webpackage/blob/main/explainers/signed-exchange-subresource-substitution.md#:~:text=If%20every%20member,their%20original%20URLs.">if all of them have finished fetching</a>, in order to <a href="https://wicg.github.io/webpackage/loading.html#:~:text=This%20is%20intended%20to%20prevent%20the%20referrer%20page%20from%20encoding%20a%20tracking%20ID%20into%20the%20set%20of%20subresources%20it%20prefetches.">prevent cross-site tracking</a>. The more subresources there are, the less likely all of them will have finished prefetching before the user clicks through to your page.</p><div class="aside aside--note"><p>ASX currently only supports prefetch for same-origin (first-party) subresources. If you know of third-party subresource providers who support SXG, let us know on <a href=https://github.com/google/sxg-rs/issues/82>this bug</a> so we can prioritize adding cross-origin support.</p></div><p>SXG Validator does not currently check subresources; to debug, use <code>curl</code> or <code>dump-signedexchange</code> in the meantime.</p><h2 id=measure tabindex=-1><a href=#measure class=heading-link aria-hidden=true>#</a> Measure</h2><p>After optimizing the LCP improvement under WebPageTest, it's useful to measure the impact of SXG prefetching on the overall performance of your site.</p><h3 id=server-side-metrics tabindex=-1><a href=#server-side-metrics class=heading-link aria-hidden=true>#</a> Server-side metrics</h3><p>When measuring server-side metrics such as <a href=https://web.dev/ttfb/ >Time to First Byte (TTFB)</a>, it's important to note that your site only serves SXGs to crawlers that accept the format. Limit your measurement of TTFB to requests coming from real users, and not bots. You may find that generating SXGs increases the TTFB for crawler requests, but this has no impact on your visitors' experience.</p><h3 id=client-side-metrics tabindex=-1><a href=#client-side-metrics class=heading-link aria-hidden=true>#</a> Client-side metrics</h3><p>SXGs produce the most speed benefit for client-side metrics, especially LCP. When measuring their impact, you could simply enable Cloudflare ASX, wait for it to be re-crawled by Googlebot, wait an additional 28 days for Core Web Vitals (CWV) aggregation, and then look at your new CWV numbers. However, the change might be hard to spot when mixed in among all the other changes during this time frame.</p><p>Instead, I find it helpful to "zoom in" on the potentially affected page loads, and frame it as, "SXGs affect X% of page views, improving their LCP by Y milliseconds at the 75th percentile."</p><p>Currently, SXG prefetch only happens under certain conditions:</p><ul><li>Chromium browser (e.g. Chrome or Edge except on <a href=https://chromium.googlesource.com/chromium/src.git/+/HEAD/docs/ios/user_agent.md>iOS</a>), version M87 or higher</li><li>Android OS</li><li><code>Referer: google.com</code> or other <a href="https://source.chromium.org/chromium/chromium/src/+/main:components/google/core/common/google_tld_list.h;l=13-42;drc=bea0acf022da996a8ff1dbdee378667a66c768e4">Google search domains</a>. (Note that in Google Analytics, a referral tag applies to <a href="https://support.google.com/analytics/answer/6205762?hl=en#flowchart&zippy=%2Cin-this-article">all page views in the session</a>, whereas SXG prefetch only applies to the first page view, directly linked from Google Search.)</li></ul><div class="aside aside--note"><p>Google Search is planning to expand the contexts where SXG prefetch can occur, including desktop OSes and more. This may increase the X% over time, and also means you may want to update your metrics to accommodate the change. When that happens, it should be announced on <a href=https://groups.google.com/g/webpackaging-announce>webpackaging-announce</a>.</p></div><p>Read the <a href=#contemporary-study>Contemporary study section</a> for how to measure "X% of page views" and "improving their LCP by Y milliseconds".</p><h3 id=contemporary-study tabindex=-1><a href=#contemporary-study class=heading-link aria-hidden=true>#</a> Contemporary study</h3><p>When looking at real user monitoring (RUM) data, you should split page loads into SXG and non-SXG. When doing so, it is essential to limit the set of page loads you look at, so the non-SXG side matches the eligibility conditions for SXG, in order to avoid selection bias. Otherwise, all of the following would exist <em>only</em> in the set of non-SXG page loads, which may have innately different LCP:</p><ul><li><strong>iOS devices:</strong> due to differences in hardware or network speed among the users who have these devices.</li><li><strong>Older Chromium browsers:</strong> for the same reasons.</li><li><strong>Desktop devices:</strong> for the same reasons or because the page layout causes a different "largest element" to be chosen.</li><li><strong>Same-site navigations (visitors following links within the site):</strong> because they can reuse cached subresources from the previous page load.</li></ul><p>In Google Analytics (UA), <a href=https://support.google.com/analytics/answer/2709829>create two custom dimensions</a> with scope "Hit", one named "isSXG" and one named "referrer". (The built-in "Source" dimension has <a href="https://support.google.com/analytics/answer/2709828?hl=en#example-session&zippy=%2Cin-this-article">session scope</a>, so it doesn't exclude same-site navigations.)</p><figure><img alt="Google Analytics dimension editor with recommended settings" decoding=async height=432 loading=lazy sizes="(min-width: 619px) 619px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/GartToDEdIzMEXN8sktm.png?auto=format&w=1238 1238w" width=619></figure><p>Create a custom segment named "SXG counterfactual" with the following filters ANDed together:</p><ul><li><code>referrer</code> starts with <code>https://www.google.</code></li><li><code>Browser</code> exactly matches <code>Chrome</code></li><li><code>Browser</code> Version matches regex <code>^(8[7-9]|9[0-9]|[0-9]{3})</code></li><li><code>Operating System</code> exactly matches <code>Android</code></li><li><code>isSXG</code> exactly matches <code>false</code></li></ul><figure><img alt="Google Analytics segment editor with recommended filters" decoding=async height=441 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tqpW8Jy95f1jYJeV5Opx.png?auto=format&w=1600 1600w" width=800></figure><p>Create a copy of this segment, named "SXG", except with <code>isSXG</code> exactly matches <code>true</code>.</p><p>In your site template, add the following snippet above the Google Analytics snippet. This is a <a href=https://github.com/google/sxg-rs#sxg-only-behavior>special syntax</a> that ASX will change <code>false</code> to <code>true</code> when generating a SXG:</p><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">data-issxg-var</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">window<span class="token punctuation">.</span>isSXG<span class="token operator">=</span><span class="token boolean">false</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>Customize your Google Analytics reporting script <a href=https://github.com/GoogleChrome/web-vitals#send-the-results-to-google-analytics>as recommended</a> to record LCP. If you're using gtag.js, modify the <code>'config'</code> command to set the custom dimension (replacing <code>'dimension1'</code> and <code>'dimension2'</code> with the names that Google Analytics says to use):</p><pre class=language-js><code class=language-js><span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token string">'YOUR_TRACKING_ID'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  <span class="token string">'dimension1'</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>isSXG<span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token string">'dimension2'</span><span class="token operator">:</span> document<span class="token punctuation">.</span>referrer<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If you're using analytics.js, modify the <code>'create'</code> command as <a href=https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers>documented here</a>.</p><p>After waiting a few days to collect some data, go to the Google Analytics Events report and add a drilldown for the SXG segment. This should fill in the X for "SXGs affect X% of page views":</p><figure><img alt="Google Analytics Events report with SXG segment, showing 12.5% Unique Events" decoding=async height=111 loading=lazy sizes="(min-width: 363px) 363px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/MNaYo8ZjOxto57txJvwf.png?auto=format&w=726 726w" width=363></figure><p>Finally, go to the <a href=https://web-vitals-report.web.app/ >Web Vitals Report</a>, select "Choose segments", and select "SXG counterfactual" and "SXG".</p><figure><img alt="Web Vitals Report with selections for SXG counterfactual and SXG" decoding=async height=164 loading=lazy sizes="(min-width: 657px) 657px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/tIsSMUofs9lMv3C0ncwe.png?auto=format&w=1314 1314w" width=657></figure><p>Click "Submit", and you should see LCP distributions for the two segments. This should fill in the Y for "improving their LCP by Y milliseconds at the 75th percentile":</p><figure><img alt="Web Vitals Report showing LCP distributions for SXG counterfactual and SXG" decoding=async height=363 loading=lazy sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format" srcset="https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=200 200w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=228 228w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=260 260w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=296 296w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=338 338w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=385 385w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=439 439w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=500 500w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=571 571w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=650 650w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=741 741w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=845 845w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=964 964w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=1098 1098w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=1252 1252w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=1428 1428w, https://wd.imgix.net/image/rULxC7pPw3PFS4o9xr7v8isFmCv1/LTiuLf05jVOH2xe9RMOg.png?auto=format&w=1600 1600w" width=800></figure><h4 id=caveats tabindex=-1><a href=#caveats class=heading-link aria-hidden=true>#</a> Caveats</h4><p>Once you've applied all of the above filters, SXG counterfactual page loads should consist of things like these:</p><ul><li><strong>Cache misses:</strong> If the Google SXG Cache doesn't have a fresh copy of the SXG for a given URL, it will redirect to the original URL at your site.</li><li><strong>Other result types:</strong> Currently, Google Search only supports SXG for standard web results and a few other types. Others, like Featured Snippets and Top Stories Carousel, will link to the original URL at your site.</li><li><strong>Ineligible URLs:</strong> If some pages on your site are not eligible for SXG (e.g. because they are not cacheable), they could appear in this set.</li></ul><p>There may be remaining bias between the SXG page loads and the above set of non-SXG page loads, but it should be smaller in magnitude than the biases mentioned at the top of the <a href=#contemporary-study>Contemporary study section</a>. For example, perhaps your non-cacheable pages are slower or faster than your cacheable pages. If you suspect this could be an issue, consider looking at the data limited to a specific SXG-eligible URL to see if its results match the overall study.</p><p>If your site has some <a href=https://amp.dev/ >AMP</a> pages, they probably won't see performance improvements from enabling SXG, as they can already be prefetched from Google Search. Consider adding a filter to exclude such pages, to further "zoom in" on the relevant changes.</p><p>Lastly, even addressing all selection biases, there is risk that survivorship bias makes LCP improvements look like degradations in RUM statistics. <a href=https://simonhearne.com/2022/survorship-bias-in-webperf/ >This article</a> does a great job of explaining that risk, and suggests looking at some form of abandonment metric to detect whether this is happening.</p><h3 id=beforeafter-study tabindex=-1><a href=#beforeafter-study class=heading-link aria-hidden=true>#</a> Before/after study</h3><p>To corroborate results from the contemporary study, it may be useful to do a comparison of LCP before and after enabling SXG. Don't limit to SXG page views, to eliminate the potential biases noted above. Instead, look at SXG-eligible resultsâ€”the above segment definitions but without the <code>isSXG</code> constraint.</p><p>Note that Google Search may take up to several weeks to recrawl all pages on your site, in order to identify that SXG has been enabled for them. In those several weeks, there are other potential biases that may occur:</p><ul><li>New browser releases or improvements in users' hardware may speed up page loads.</li><li>A significant event like a holiday may skew traffic from normal.</li></ul><p>It also is helpful to look at overall 75th percentile LCP before and after, to confirm the above studies. Learning about a subset of the population doesn't necessarily tell us about the overall population. For instance, let's say SXG improves 10% of page loads by 800ms.</p><ul><li>If these were already the 10% fastest page loads, then it won't affect the 75th percentile at all.</li><li>If they were the 10% slowest page loads, but they were more than 800ms slower than the 75th percentile LCP to begin with, then it won't affect the 75th percentile at all.</li></ul><p>These are extreme examples, likely not reflective of reality, but hopefully illustrate the issue. In practice, it's likely that SXG will affect the 75th percentile for most sites. Cross-site navigations tend to be some of the slowest, and improvements from prefetching tend to be significant.</p><h3 id=opt-out-some-urls tabindex=-1><a href=#opt-out-some-urls class=heading-link aria-hidden=true>#</a> Opt-out some URLs</h3><p>Lastly, one way to compare SXG performance could be to disable SXG for some subset of URLs on your site. For instance, you could set a <code>CDN-Cache-Control: no-store</code> header to prevent Cloudflare ASX from generating an SXG. I recommend against this.</p><p>It likely has a bigger risk of selection bias than the other study methods. For instance, it may make a big difference whether your site's home page or a similarly popular URL is selected into the control group or the experiment group.</p><h3 id=holdback-study tabindex=-1><a href=#holdback-study class=heading-link aria-hidden=true>#</a> Holdback study</h3><p>The ideal way to measure impact would be to conduct a holdback study. Unfortunately, you can't do this kind of test currently. We're planning to add support for such a test in the future.</p><p>A holdback study has the following properties:</p><ul><li>In the experiment group, some random fraction of page views that <em>would</em> be SXG are "held back", and served as non-SXG instead. This allows for an "apples-to-apples" comparison between equivalent users, devices, scenarios, and pages.</li><li>Those held-back (aka counterfactual) page views are labeled as such in the analytics. This allows for a "zoomed-in" view of the data, where we can compare SXG page loads in the control to SXG counterfactuals in the experiment. This, in turn, reduces noise from the other page loads that would be unaffected by SXG prefetch.</li></ul><p>This would eliminate the aforementioned possible sources of selection bias, although it wouldn't eliminate the risk of LCP survivorship bias. Both of these properties require either the browser or the referrer to enable.</p><h2 id=conclusion tabindex=-1><a href=#conclusion class=heading-link aria-hidden=true>#</a> Conclusion</h2><p>Phew! That was a lot. Hopefully it paints a more complete picture of how to test SXG performance in a lab test, how to optimize its performance in a tight feedback loop with the lab test, and finally how to measure its performance in the real world. Putting all of this together should help you make the most out of SXGs, and ensure that they are benefiting your site and your users.</p><p>If you have additional advice on how to capture SXG performance, please let us know! <a href=https://github.com/GoogleChrome/developer.chrome.com>File a bug against developer.chrome.com</a> with your suggested improvements.</p><p>For more information on signed exchanges, take a look at the <a href=https://web.dev/signed-exchanges/ >web.dev documentation</a> and the <a href=https://developers.google.com/search/docs/advanced/experience/signed-exchange>Google Search documentation</a>.</p></div><div><div class="flow-space-200 cluster gap-top-300"><div><a href=/tags/performance/ class="color-secondary-text surface decoration-none hairline rounded-lg tag-pill type--label weight-regular">Performance</a></div></div></div><p class="color-secondary-text type--caption">Last updated: <time>Thursday, April 21, 2022</time> <span>â€¢</span> <a href=https://github.com/GoogleChrome/developer.chrome.com//blob/main/site/en/blog/optimizing-lcp-using-signed-exchanges/index.md>Improve article</a></p></article><div class="pad-right-400 display-none toc-container xl:display-block"><toc-active class=scrollbar><div class="color-secondary-text type--h6">Table of contents</div><div class=toc__wrapper><ul><li><a href=#introduction>Introduction</a></li><li><a href=#analyze>Analyze</a></li><li><a href=#debug>Debug</a><ul><li><a href=#publishing>Publishing</a></li><li><a href=#indexing>Indexing</a></li><li><a href=#ingestion>Ingestion</a></li></ul></li><li><a href=#optimize>Optimize</a><ul><li><a href=#max-age>max-age</a></li><li><a href=#user-agent>user-agent</a></li><li><a href=#subresources>Subresources</a></li></ul></li><li><a href=#measure>Measure</a><ul><li><a href=#server-side-metrics>Server-side metrics</a></li><li><a href=#client-side-metrics>Client-side metrics</a></li><li><a href=#contemporary-study>Contemporary study</a></li><li><a href=#beforeafter-study>Before/after study</a></li><li><a href=#opt-out-some-urls>Opt-out some URLs</a></li><li><a href=#holdback-study>Holdback study</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></div></toc-active></div></div></div></main><footer class="gap-top-1000 lg:pad-left-600 lg:pad-right-600 type--footer" data-search-inert data-side-nav-inert><div class="pad-right-400 pad-left-400 lg:pad-left-0 lg:pad-right-0 pad-bottom-600 pad-top-600 hairline-bottom"><div class="display-flex direction-column lg:direction-row lg:align-center"><div class=footer__heading>Follow us</div><div class="display-flex gap-top-300 color-secondary-text lg:gap-top-0"><a href=https://www.youtube.com/user/ChromeDevelopers class="color-secondary-text display-inline-flex lg:gap-left-400" aria-label=YouTube><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"/></svg> </a><a href=https://twitter.com/ChromiumDev class="color-secondary-text display-inline-flex gap-left-400" aria-label=Twitter><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewbox="0 0 24 24" class=icon fill=none><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 20c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2.29 7.33c-.06 4.62-3.02 7.78-7.42 7.98-1.82.08-3.14-.5-4.28-1.23 1.34.21 3.01-.32 3.9-1.09-1.32-.13-2.1-.8-2.46-1.88.38.07.78.05 1.14-.03-1.19-.4-2.04-1.13-2.08-2.67.33.15.68.29 1.14.32-.9-.5-1.55-2.35-.8-3.57 1.32 1.45 2.91 2.63 5.52 2.79-.65-2.8 3.06-4.32 4.61-2.44.66-.13 1.19-.38 1.7-.65-.21.65-.62 1.1-1.12 1.47.54-.07 1.03-.21 1.44-.41-.25.53-.81 1.01-1.29 1.41z"/></svg></a></div></div></div><div class="pad-right-400 pad-left-400 lg:pad-left-0 lg:pad-right-0 pad-bottom-600 pad-top-600 hairline-bottom"><div class="display-flex direction-column lg:direction-row justify-content-between"><div class="flex-1 footer__stack stack-recursive"><div class=footer__heading>Contribute</div><ul class="gap-bottom-0 pad-0" role=list><li><a href="https://github.com/GoogleChrome/developer.chrome.com/issues/new?assignees=&labels=bug&template=bug_report.md&title=" class=footer__link>File a bug</a></li><li><a href=https://github.com/GoogleChrome/developer.chrome.com/ class=footer__link>View source</a></li></ul></div><div class="flex-1 footer__stack stack-recursive"><div class=footer__heading>Related content</div><ul class="gap-bottom-0 pad-0" role=list><li><a href=https://web.dev/ class=footer__link>web.dev</a></li><li><a href=https://developers.google.com/web/ class=footer__link>Web Fundamentals</a></li><li><a href=https://web.dev/tags/case-study/ class=footer__link>Case studies</a></li><li><a href=https://web.dev/podcasts/ class=footer__link>Podcasts</a></li></ul></div><div class="flex-1 footer__stack stack-recursive"><div class=footer__heading>Connect</div><ul class="gap-bottom-0 pad-0" role=list><li><a href=https://twitter.com/chromiumdev/ class=footer__link>Twitter</a></li><li><a href=https://www.youtube.com/user/ChromeDevelopers class=footer__link>YouTube</a></li><li><a href=https://github.com/googlechrome class=footer__link>GitHub</a></li></ul></div></div></div><div class="pad-right-400 pad-left-400 lg:pad-left-0 lg:pad-right-0 pad-bottom-600 pad-top-600"><div class="display-flex direction-column lg:direction-row lg:align-center align-start"><svg height=20 width=180 xmlns=http://www.w3.org/2000/svg fill=none aria-label="Google Developers"><path d="M8.36 15.32a7.465 7.465 0 01-3.76-.98 7.287 7.287 0 01-2.72-2.68c-.667-1.147-1-2.42-1-3.82s.333-2.667 1-3.8a7.243 7.243 0 012.72-2.7A7.464 7.464 0 018.36.36c1.08 0 2.087.193 3.02.58.933.387 1.713.927 2.34 1.62l-1.56 1.56a4.78 4.78 0 00-1.66-1.2c-.64-.28-1.353-.42-2.14-.42-.933 0-1.8.22-2.6.66-.8.44-1.44 1.067-1.92 1.88-.467.813-.7 1.747-.7 2.8 0 1.053.24 1.987.72 2.8.48.813 1.12 1.44 1.92 1.88.8.44 1.667.66 2.6.66.84 0 1.547-.127 2.12-.38a5.434 5.434 0 001.54-1.02c.293-.28.54-.64.74-1.08.213-.453.36-.94.44-1.46H8.34v-2h6.98c.08.453.12.84.12 1.16a7.89 7.89 0 01-.44 2.62 5.63 5.63 0 01-1.32 2.16c-1.36 1.427-3.133 2.14-5.32 2.14zm14.05 0c-.987 0-1.873-.227-2.66-.68a5.087 5.087 0 01-1.86-1.9c-.44-.8-.66-1.7-.66-2.7 0-1 .22-1.9.66-2.7a4.939 4.939 0 011.86-1.88c.787-.467 1.673-.7 2.66-.7 1 0 1.893.233 2.68.7.787.453 1.4 1.08 1.84 1.88.44.8.66 1.7.66 2.7 0 1-.22 1.9-.66 2.7a4.939 4.939 0 01-1.84 1.9c-.787.453-1.68.68-2.68.68zm0-2.02c.533 0 1.027-.133 1.48-.4.453-.267.82-.647 1.1-1.14.28-.493.42-1.067.42-1.72 0-.667-.14-1.247-.42-1.74a2.868 2.868 0 00-1.1-1.12 2.867 2.867 0 00-1.48-.4c-.52 0-1.013.133-1.48.4-.453.253-.82.627-1.1 1.12-.267.493-.4 1.073-.4 1.74 0 .653.14 1.227.42 1.72.28.493.647.873 1.1 1.14.453.267.94.4 1.46.4zm12.019 2.02c-.987 0-1.874-.227-2.66-.68a5.087 5.087 0 01-1.86-1.9c-.44-.8-.66-1.7-.66-2.7 0-1 .22-1.9.66-2.7a4.939 4.939 0 011.86-1.88c.786-.467 1.673-.7 2.66-.7 1 0 1.893.233 2.68.7.786.453 1.4 1.08 1.84 1.88.44.8.66 1.7.66 2.7 0 1-.22 1.9-.66 2.7a4.94 4.94 0 01-1.84 1.9c-.787.453-1.68.68-2.68.68zm0-2.02c.533 0 1.026-.133 1.48-.4.453-.267.82-.647 1.1-1.14.28-.493.42-1.067.42-1.72 0-.667-.14-1.247-.42-1.74a2.868 2.868 0 00-1.1-1.12 2.868 2.868 0 00-1.48-.4c-.52 0-1.014.133-1.48.4-.454.253-.82.627-1.1 1.12-.267.493-.4 1.073-.4 1.74 0 .653.14 1.227.42 1.72.28.493.646.873 1.1 1.14.453.267.94.4 1.46.4zm11.878 6.34c-1.24 0-2.266-.293-3.08-.88-.8-.573-1.34-1.247-1.62-2.02l2.08-.86c.2.547.534.98 1 1.3.467.32 1.007.48 1.62.48.92 0 1.64-.28 2.16-.84.534-.56.8-1.333.8-2.32v-.86h-.12c-.32.467-.76.84-1.32 1.12-.546.28-1.173.42-1.88.42-.826 0-1.6-.22-2.32-.66-.706-.44-1.28-1.053-1.72-1.84-.426-.8-.64-1.7-.64-2.7 0-1 .214-1.893.64-2.68.44-.8 1.014-1.42 1.72-1.86a4.276 4.276 0 012.32-.68c.707 0 1.334.14 1.88.42.56.28 1 .653 1.32 1.12h.12V5.08h2.1v9.36c0 1.093-.22 2.033-.66 2.82a4.215 4.215 0 01-1.8 1.78c-.76.4-1.626.6-2.6.6zm.06-6.46c.52 0 1-.127 1.44-.38a2.81 2.81 0 001.06-1.1c.267-.493.4-1.067.4-1.72 0-.667-.133-1.24-.4-1.72-.266-.493-.62-.867-1.06-1.12-.44-.253-.92-.38-1.44-.38-.52 0-1 .133-1.44.4-.44.253-.793.627-1.06 1.12-.266.48-.4 1.047-.4 1.7s.134 1.227.4 1.72c.267.48.62.847 1.06 1.1.44.253.92.38 1.44.38zM54.14.68h2.2V15h-2.2V.68zm9.45 14.64c-.973 0-1.853-.227-2.64-.68a4.838 4.838 0 01-1.82-1.88c-.44-.813-.66-1.72-.66-2.72 0-.96.207-1.84.62-2.64a4.848 4.848 0 011.78-1.92c.76-.48 1.627-.72 2.6-.72 1 0 1.867.22 2.6.66a4.28 4.28 0 011.7 1.84c.387.773.58 1.667.58 2.68 0 .12-.007.24-.02.36a4.16 4.16 0 00-.02.2h-7.64c.067.907.393 1.607.98 2.1.587.493 1.253.74 2 .74 1.147 0 2.027-.533 2.64-1.6l1.88.9a5.195 5.195 0 01-1.84 1.96c-.773.48-1.687.72-2.74.72zm2.52-6.5a2.419 2.419 0 00-.32-.98c-.187-.333-.48-.613-.88-.84-.387-.24-.873-.36-1.46-.36-.653 0-1.22.2-1.7.6-.467.4-.787.927-.96 1.58h5.32zm9.7-8.14h4.6c1.48 0 2.767.3 3.86.9a6.137 6.137 0 012.54 2.54c.6 1.08.9 2.32.9 3.72 0 1.4-.3 2.647-.9 3.74a6.168 6.168 0 01-2.54 2.52c-1.093.6-2.38.9-3.86.9h-4.6V.68zm4.54 12.18c1.6 0 2.847-.44 3.74-1.32.907-.893 1.36-2.127 1.36-3.7 0-1.56-.453-2.787-1.36-3.68-.893-.893-2.14-1.34-3.74-1.34h-2.3v10.04h2.3zm14.042 2.46c-.973 0-1.853-.227-2.64-.68a4.839 4.839 0 01-1.82-1.88c-.44-.813-.66-1.72-.66-2.72 0-.96.207-1.84.62-2.64a4.849 4.849 0 011.78-1.92c.76-.48 1.627-.72 2.6-.72 1 0 1.867.22 2.6.66a4.28 4.28 0 011.7 1.84c.387.773.58 1.667.58 2.68 0 .12-.006.24-.02.36-.013.12-.02.187-.02.2h-7.64c.067.907.394 1.607.98 2.1.587.493 1.254.74 2 .74 1.147 0 2.027-.533 2.64-1.6l1.88.9a5.195 5.195 0 01-1.84 1.96c-.773.48-1.686.72-2.74.72zm2.52-6.5a2.417 2.417 0 00-.32-.98c-.186-.333-.48-.613-.88-.84-.386-.24-.873-.36-1.46-.36-.653 0-1.22.2-1.7.6-.466.4-.786.927-.96 1.58h5.32zm3.136-3.74h2.46l2.72 7.08h.08l2.76-7.08h2.42l-4.14 9.92h-2.2l-4.1-9.92zm16.37 10.24c-.973 0-1.853-.227-2.64-.68a4.84 4.84 0 01-1.82-1.88c-.44-.813-.66-1.72-.66-2.72 0-.96.207-1.84.62-2.64a4.851 4.851 0 011.78-1.92c.76-.48 1.627-.72 2.6-.72 1 0 1.867.22 2.6.66a4.274 4.274 0 011.7 1.84c.387.773.58 1.667.58 2.68 0 .12-.006.24-.02.36-.013.12-.02.187-.02.2h-7.64c.067.907.394 1.607.98 2.1.587.493 1.254.74 2 .74 1.147 0 2.027-.533 2.64-1.6l1.88.9a5.192 5.192 0 01-1.84 1.96c-.773.48-1.686.72-2.74.72zm2.52-6.5a2.402 2.402 0 00-.32-.98c-.186-.333-.48-.613-.88-.84-.386-.24-.873-.36-1.46-.36-.653 0-1.22.2-1.7.6-.466.4-.786.927-.96 1.58h5.32zm4.451-8.14h2.2V15h-2.2V.68zm9.509 14.64c-.986 0-1.873-.227-2.66-.68a5.098 5.098 0 01-1.86-1.9c-.44-.8-.66-1.7-.66-2.7 0-1 .22-1.9.66-2.7a4.949 4.949 0 011.86-1.88c.787-.467 1.674-.7 2.66-.7 1 0 1.894.233 2.68.7.787.453 1.4 1.08 1.84 1.88.44.8.66 1.7.66 2.7 0 1-.22 1.9-.66 2.7a4.937 4.937 0 01-1.84 1.9c-.786.453-1.68.68-2.68.68zm0-2.02c.534 0 1.027-.133 1.48-.4.454-.267.82-.647 1.1-1.14.28-.493.42-1.067.42-1.72 0-.667-.14-1.247-.42-1.74a2.864 2.864 0 00-1.1-1.12 2.865 2.865 0 00-1.48-.4c-.52 0-1.013.133-1.48.4a2.87 2.87 0 00-1.1 1.12c-.266.493-.4 1.073-.4 1.74 0 .653.14 1.227.42 1.72.28.493.647.873 1.1 1.14.454.267.94.4 1.46.4zm7.222-8.22h2.08v1.28h.12c.28-.453.7-.833 1.26-1.14.573-.307 1.22-.46 1.94-.46.853 0 1.64.227 2.36.68.733.453 1.313 1.087 1.74 1.9.44.8.66 1.7.66 2.7 0 1-.22 1.9-.66 2.7a4.992 4.992 0 01-1.74 1.9c-.72.453-1.507.68-2.36.68-.72 0-1.367-.153-1.94-.46-.56-.307-.98-.693-1.26-1.16h-.12l.12 1.4v4.22h-2.2V5.08zm5.02 8.22c.52 0 1-.133 1.44-.4a2.88 2.88 0 001.08-1.14c.28-.507.42-1.08.42-1.72 0-.64-.14-1.207-.42-1.7a2.849 2.849 0 00-1.08-1.16c-.44-.267-.92-.4-1.44-.4a2.83 2.83 0 00-1.46.4c-.44.267-.8.647-1.08 1.14-.267.493-.4 1.067-.4 1.72s.133 1.227.4 1.72c.28.493.64.873 1.08 1.14.453.267.94.4 1.46.4zm11.912 2.02c-.974 0-1.854-.227-2.64-.68a4.834 4.834 0 01-1.82-1.88c-.44-.813-.66-1.72-.66-2.72 0-.96.206-1.84.62-2.64a4.844 4.844 0 011.78-1.92c.76-.48 1.626-.72 2.6-.72 1 0 1.866.22 2.6.66a4.286 4.286 0 011.7 1.84c.386.773.58 1.667.58 2.68 0 .12-.007.24-.02.36a3.41 3.41 0 00-.02.2h-7.64c.066.907.393 1.607.98 2.1a3.02 3.02 0 002 .74c1.146 0 2.026-.533 2.64-1.6l1.88.9a5.2 5.2 0 01-1.84 1.96c-.774.48-1.687.72-2.74.72zm2.52-6.5a2.433 2.433 0 00-.32-.98c-.187-.333-.48-.613-.88-.84-.387-.24-.874-.36-1.46-.36-.654 0-1.22.2-1.7.6-.467.4-.787.927-.96 1.58h5.32zm4.45-3.74h2.08v1.48h.12c.214-.507.6-.927 1.16-1.26.56-.347 1.134-.52 1.72-.52.48 0 .874.067 1.18.2v2.3a3.35 3.35 0 00-1.52-.34c-.72 0-1.326.28-1.82.84-.48.547-.72 1.22-.72 2.02V15h-2.2V5.08zm11.441 10.24c-1.134 0-2.074-.26-2.82-.78-.734-.533-1.254-1.2-1.56-2l1.96-.84c.226.547.553.96.98 1.24.44.28.92.42 1.44.42.546 0 .993-.1 1.34-.3.346-.213.52-.487.52-.82 0-.32-.14-.58-.42-.78-.28-.213-.74-.4-1.38-.56l-1.36-.32a4.5 4.5 0 01-1.94-.96c-.534-.48-.8-1.1-.8-1.86 0-.92.38-1.647 1.14-2.18.76-.547 1.693-.82 2.8-.82.92 0 1.733.193 2.44.58.72.387 1.24.947 1.56 1.68l-1.94.82a1.87 1.87 0 00-.86-.92c-.387-.2-.807-.3-1.26-.3-.44 0-.827.1-1.16.3-.334.187-.5.44-.5.76 0 .28.113.507.34.68.24.173.613.32 1.12.44l1.48.36c1 .253 1.746.64 2.24 1.16.493.507.74 1.12.74 1.84 0 .587-.18 1.12-.54 1.6-.347.48-.834.86-1.46 1.14-.614.28-1.314.42-2.1.42z" fill=#5F6368 /></svg><div class="flex-1 cluster flow-space-300 footer__cluster gap-top-300 lg:flow-space-500 lg:gap-left-500 lg:gap-top-0"><div role=list><a href=https://www.google.com/chrome/ class=footer__link role=listitem>Chrome</a> <a href=https://firebase.google.com class=footer__link role=listitem>Firebase</a> <a href=https://developers.google.com/products class=footer__link role=listitem>All products</a> <a href=https://policies.google.com/privacy class=footer__link role=listitem>Privacy</a> <a href=https://policies.google.com/terms class=footer__link role=listitem>Terms</a></div></div><language-select current=en supported=en,es,pt,ko,zh,ru,ja,fr,de></language-select></div><div class="color-secondary-text type--caption gap-top-500">Content available under the CC-BY-SA-4.0 license</div></div></footer></div><announcement-banner class="cookie-banner hairline-top" storage-key=user-cookies><div class=type--small>We serve cookies on this site to analyze traffic, remember your preferences, and optimize your experience.</div><div class=cookie-banner__controls><a href=https://policies.google.com/technologies/cookies class="align-center display-inline-flex button-text color-blue-medium material-button">More details <svg height=18px width=18px xmlns=http://www.w3.org/2000/svg fill=black viewbox="0 0 24 24" class="icon gap-left-200" aria-label="External link" role=img><path d="M0 0h24v24H0z" fill=none /><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg> </a><button class="bg-primary button-filled color-bg material-button" data-banner-close-btn>Ok, Got it.</button></div></announcement-banner></body></html>