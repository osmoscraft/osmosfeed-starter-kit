<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/assets/favicon-32x32.png" />
  <title>
    Defensive CSS -
    Ahmad Shadeed
  </title>

  
  <meta name="description" content="A list of defensive CSS techniques to avoid potential future issues" />
   
  <meta name="keywords" content="defensive, css, future proof" />
  

  <meta name="author" content="iShadeed" />
  <meta property="og:title" content="Defensive CSS - Ahmad Shadeed" />
  
  <meta property="og:url" content="http://ishadeed.com/article/defensive-css/" />
  
  <meta property="og:type" content="website" />

  
  <meta property="og:image" content="https://ishadeed.com/assets/defensive-css/twitter-card.jpg" />
  

  <meta property="og:description" content="A list of defensive CSS techniques to avoid potential future issues" />
  <meta property="og:site_name" content="Ahmad Shadeed Blog" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@shadeed9" />
  <meta name="twitter:title" content="Defensive CSS - Ahmad Shadeed" />

  
  <meta name="twitter:url" content="http://ishadeed.com/article/defensive-css/" />
  

  <meta name="twitter:description" content="A list of defensive CSS techniques to avoid potential future issues" />

  
  <meta name="twitter:image" content="https://ishadeed.com/assets/defensive-css/twitter-card.jpg" />
   <link rel="stylesheet" href="/css/main.css?v=1.0.7">
  <link href="//plus.google.com/+AhmadShadeed" rel="author" />
  <link
    href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <link rel="alternate" type="application/rss+xml" title="Ahmad Shadeed Blog"
  href="http://ishadeed.com/feed.xml" />
</head>


<body>
  <div class="c-banner">
    <p>
      <span aria-hidden="true">🎉</span>I published a book about debugging
      CSS.
      <a class="c-link" href="https://debuggingcss.com/">Buy now<svg width="20" height="20" viewBox="0 0 24 24"
          style="margin-right: 3px">
          <use xlink:href="#arrow-right"></use>
        </svg></a>
    </p>
  </div>
  <svg style="display: none">
    <symbol id="arrow-right" width="23.114" height="23.114" viewBox="0 0 23.114 23.114">
      <g id="np_arrow_1921082_000000" transform="translate(-2.5 -2.5)">
        <path id="Path_18" data-name="Path 18"
          d="M25.614,14.057A11.557,11.557,0,1,0,14.057,25.614,11.568,11.568,0,0,0,25.614,14.057Zm-21.46,0a9.9,9.9,0,1,1,9.9,9.9,9.927,9.927,0,0,1-9.9-9.9Z" />
        <path id="Path_19" data-name="Path 19"
          d="M45.262,34.182a.821.821,0,0,0,0-1.167L40.81,28.562a.826.826,0,0,0-1.168,1.168L43.486,33.6l-3.845,3.845a.791.791,0,0,0-.243.584.754.754,0,0,0,.243.584.837.837,0,0,0,1.168,0Z"
          transform="translate(-27.921 -19.541)" />
      </g>
    </symbol>
    <symbol id="link-external" width="16.067" height="16.078" viewBox="0 0 16.067 16.078">
      <g fill="#3863d9">
        <path data-name="Path 20"
          d="M14.137 1.15h-3.159a.774.774 0 0 1-.093-.013.551.551 0 0 1-.2-.09.565.565 0 0 1-.235-.488.531.531 0 0 1 .031-.153.543.543 0 0 1 .091-.164.552.552 0 0 1 .167-.141.572.572 0 0 1 .177-.062c.028 0 .035 0 .063-.007q2.262-.063 4.524 0h.049a.491.491 0 0 1 .082.016l.035.01h.011l.019.007h.006a.523.523 0 0 1 .078.041.563.563 0 0 1 .175.174.512.512 0 0 1 .044.084.553.553 0 0 1 .032.108v.075c.042 1.5 0 3.006 0 4.51a.459.459 0 0 1 0 .063.579.579 0 0 1-.052.18.56.56 0 0 1-.131.174.531.531 0 0 1-.131.087.565.565 0 0 1-.567-.048.558.558 0 0 1-.228-.363.517.517 0 0 1-.007-.093V1.943L7.663 9.198a.5.5 0 0 1-.063.054.56.56 0 0 1-.147.078.549.549 0 0 1-.205.031.566.566 0 0 1-.453-.261.574.574 0 0 1-.067-.153.554.554 0 0 1-.019-.166.562.562 0 0 1 .086-.277.656.656 0 0 1 .078-.1l7.255-7.255z"
          fill-rule="evenodd" />
        <path data-name="Path 21"
          d="M7.331 1.526a.505.505 0 0 1 .1.021.557.557 0 0 1 .265.17.522.522 0 0 1 .086.134.554.554 0 0 1 .045.153.565.565 0 0 1-.131.446.548.548 0 0 1-.166.131.556.556 0 0 1-.2.06H6.1c-.634 0-1.269.008-1.9.043a10.457 10.457 0 0 0-1.052.1q-.141.022-.283.05-.1.02-.19.045a1.954 1.954 0 0 0-.816.389 1.26 1.26 0 0 0-.121.123 1.6 1.6 0 0 0-.263.452 3.281 3.281 0 0 0-.17.607 7.787 7.787 0 0 0-.112.883c-.04.5-.053 1-.062 1.5-.007.45-.008.9-.008 1.35v1.224c0 .569 0 1.139.017 1.709.013.5.033 1 .09 1.495a8.5 8.5 0 0 0 .054.39 3.713 3.713 0 0 0 .179.7 1.646 1.646 0 0 0 .3.516 1.9 1.9 0 0 0 1.021.522 6.066 6.066 0 0 0 .534.096 14.66 14.66 0 0 0 1.54.1c.606.017 1.214.019 1.82.019H7.89c.49 0 .979 0 1.469-.011s.982-.024 1.47-.068a7.177 7.177 0 0 0 .857-.119 2.844 2.844 0 0 0 .7-.228 1.445 1.445 0 0 0 .355-.247 1.921 1.921 0 0 0 .474-.95 6.313 6.313 0 0 0 .092-.491 9.4 9.4 0 0 0 .049-.411c.043-.439.061-.881.072-1.323.02-.771.017-1.542.017-2.314v-.053c0-.018 0-.035.007-.053a.547.547 0 0 1 .079-.2.536.536 0 0 1 .1-.12.563.563 0 0 1 .446-.131.545.545 0 0 1 .153.045.561.561 0 0 1 .317.4.579.579 0 0 1 .01.106v1.18c0 .387-.006.774-.015 1.161-.007.264-.016.528-.031.792q-.017.305-.046.61a9.298 9.298 0 0 1-.083.639 3.761 3.761 0 0 1-.581 1.571 2.38 2.38 0 0 1-.451.48 2.633 2.633 0 0 1-.5.315 4.49 4.49 0 0 1-1.275.368c-.315.049-.634.079-.952.1s-.668.035-1 .043c-.481.012-.961.015-1.442.017H6.675c-.577 0-1.154 0-1.732-.017a18.4 18.4 0 0 1-1.592-.094 8.742 8.742 0 0 1-.362-.049 3.862 3.862 0 0 1-1.658-.592 2.552 2.552 0 0 1-.2-.159 2.431 2.431 0 0 1-.256-.263 2.234 2.234 0 0 1-.154-.206 3.836 3.836 0 0 1-.539-1.51 8.474 8.474 0 0 1-.092-.737 14.337 14.337 0 0 1-.042-.62c-.016-.31-.024-.62-.031-.929-.007-.4-.01-.8-.011-1.2v-1.51c0-.538 0-1.077.013-1.614.007-.3.016-.609.033-.913a14.246 14.246 0 0 1 .099-1.075c.012-.088.026-.174.042-.261a3.673 3.673 0 0 1 .562-1.485 2.38 2.38 0 0 1 .451-.48 2.664 2.664 0 0 1 .534-.33 4.435 4.435 0 0 1 1.153-.336c.277-.047.557-.077.837-.1s.57-.037.857-.047c.413-.015.828-.021 1.241-.023h1.509z" />
      </g>
    </symbol>
    <symbol id="send" width="36.258" height="35.835" viewBox="0 0 36.258 35.835">
      <path
        d="M25.339 13.557a.836.836 0 0 0-1.2-1.153L9.151 25.155l-7.915-3.062a1.925 1.925 0 0 1-.223-3.492L33.871.194a1.619 1.619 0 0 1 2.38 1.579l-2.882 30.045a1.989 1.989 0 0 1-2.72 1.66l-9.633-3.729-6.048 5.665a1.561 1.561 0 0 1-2.628-1.153v-4.45z" />
    </symbol>
    <symbol id="arrow-up" width="24.737" height="23.502" viewBox="0 0 24.737 23.502">
      <path data-name="Path 25"
        d="M13.244.362a1.236 1.236 0 0 0-1.749 0L.363 11.494a1.237 1.237 0 1 0 1.749 1.749l9.019-9.019v18.041a1.237 1.237 0 1 0 2.474 0V4.224l9.019 9.019a1.237 1.237 0 1 0 1.751-1.747z"
        fill="#fff" />
    </symbol>
  </svg>

  <header id="header" class="c-header" role="banner">
    <a href="/" class="c-logo">
        <img src="../../assets/shadeed.jpg" alt="Photo of Ahmad Shadeed">
        <span>Ahmad <strong>Shadeed</strong></span>
        <div class="c-lamp"></div>
    </a>
    <nav class="c-nav">
        <div class="c-nav__wrapper">
            <ul>
                
                
                <li class="c-nav__item">
                    <a href="/">Home</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/articles">Articles</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/snippets">Snippets</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/journal">Journal</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/about">About</a>
                </li>
                
                
                
                <li class="c-nav__item">
                    <a href="/hire-me">Hire me</a>
                </li>
                
                

                <button class="c-nav__close">
                    <svg width="17" height="17" viewBox="0 0 17 17">
                        <path d="M16.91 2.663a1.487 1.487 0 0 0 0-2.1l-.131-.131a1.483 1.483 0 0 0-2.1 0L8.936 6.179a.371.371 0 0 1-.528 0L2.663.434a1.487 1.487 0 0 0-2.1 0L.432.565a1.483 1.483 0 0 0 0 2.1L6.177 8.41a.371.371 0 0 1 0 .528L.432 14.683a1.487 1.487 0 0 0 0 2.1l.131.131a1.483 1.483 0 0 0 2.1 0l5.745-5.745a.371.371 0 0 1 .528 0l5.745 5.745a1.487 1.487 0 0 0 2.1 0l.131-.131a1.483 1.483 0 0 0 0-2.1l-5.747-5.747a.371.371 0 0 1 0-.528z" fill="#60c46f"/>
                    </svg>
                </button>
            </ul>
            <div class="c-nav__overlay"></div>
        </div>
        <button class="c-nav__toggle">
            <span></span>
        </button>
    </nav>
    <a class="c-header__follow" target="_blank" href="https://twitter.com/shadeed9">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="22.75" viewBox="0 0 28 22.75">
            <g data-name="Group 1">
                <path data-name="Path 1" d="M28 2.693a11.968 11.968 0 0 1-3.307.907A5.708 5.708 0 0 0 27.218.427a11.472 11.472 0 0 1-3.64 1.389 5.74 5.74 0 0 0-9.93 3.925 5.911 5.911 0 0 0 .133 1.309 16.248 16.248 0 0 1-11.832-6 5.742 5.742 0 0 0 1.764 7.672 5.669 5.669 0 0 1-2.594-.707v.063a5.767 5.767 0 0 0 4.6 5.64 5.729 5.729 0 0 1-1.5.189 5.075 5.075 0 0 1-1.087-.1 5.8 5.8 0 0 0 5.364 4 11.534 11.534 0 0 1-7.117 2.448A10.755 10.755 0 0 1 0 20.174a16.16 16.16 0 0 0 8.806 2.576c10.563 0 16.338-8.75 16.338-16.335 0-.254-.009-.5-.021-.742A11.451 11.451 0 0 0 28 2.693z"/>
            </g>
        </svg>
        <span>@shadeed9</span>
    </a>
</header>
 <div class="c-section c-section--article">
	<header class="post-header">
		<h1 class="post-header__title">Defensive CSS</h1>
		<div class="post-header__date">07 Dec 2021</div>
		<div class="post-header__reading-time" style="display: none;">
			

			
			Reading time: ~ 21 mins
		</div>
	</header>

	<div class="post-content">
		<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DV277&placement=wwwishadeedcom" id="_carbonads_js"></script>
		<p>Oftentimes, we wish that there was a way to avoid a certain CSS issue or behaviors from happening. You know, content is dynamic, and things can change on a web page, thus increasing the possibility of a CSS issue or a weird behavior.</p>

<p>Defensive CSS is a collection of snippets that can help you in writing CSS that is protected. In other words, you will have fewer issues in the future. If you follow my blog, you might read an <a href="https://ishadeed.com/article/the-just-in-case-mindset-css/">article</a> I wrote a while back which is called “The just in case mindset”. This is built upon it, and will be an ongoing list of snippets. If you have any suggestions, please feel free to let me know about it.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
    <li><a href="#flexbox-wrapping">Flexbox wrapping</a></li>
    <li><a href="#spacing">Spacing</a></li>
    <li><a href="#long-content">Long content</a></li>
    <li><a href="#prevent-an-image-from-being-stretched-or-compressed">Prevent an image from being stretched or
            compressed</a></li>
    <li><a href="#lock-scroll-chaining">Lock scroll chaining</a></li>
    <li><a href="#css-variable-fallback">CSS variable fallback</a></li>
    <li><a href="#using-fixed-width-or-height">Using fixed width or height</a>

        <ul>
            <li><a href="#the-fixed-height">The fixed height</a></li>
            <li><a href="#the-fixed-width">The fixed width</a></li>
        </ul>
    </li>
    <li><a href="#forgetting-background-repeat">Forgetting <code>background-repeat</code></a></li>
    <li><a href="#vertical-media-queries">Vertical media queries</a></li>
    <li><a href="#using-justify-content-space-between">Using <code>justify-content: space-between</code></a>
    </li>
    <li><a href="#text-over-images">Text over images</a></li>
    <li><a href="#be-careful-with-fixed-values-in-a-css-grid">Be careful with fixed values in a CSS grid</a>
    </li>
    <li><a href="#show-a-scrollbar-only-when-its-needed">Show a scrollbar only when it's needed</a></li>
    <li><a href="#scrollbar-gutter">Scrollbar gutter</a></li>
    <li><a href="#minimum-content-size-in-css-flexbox">Minimum content size in CSS flexbox</a></li>
    <li><a href="#minimum-content-size-in-css-grid">Minimum content size in CSS grid</a></li>
    <li><a href="#auto-fit-vs-auto-fill">Auto fit vs auto fill</a></li>
    <li><a href="#image-maximum-width">Image maximum width</a></li>
    <li><a href="#position-sticky-css-grid">position: sticky css grid</a></li>
    <li><a href="#grouping-selectors">Grouping selectors</a></li>
</ul>

<h2 id="flexbox-wrapping">Flexbox wrapping</h2>
<p>CSS flexbox is one of the most useful CSS layout features nowadays. It’s tempting to add <code class="highlighter-rouge">display: flex</code> to a wrapper and have the child items ordered next to each other.</p>

<p>The thing is when there is not enough space, those child items won’t wrap into a new line by default. We need to change that behavior with <code class="highlighter-rouge">flex-wrap: wrap</code>.</p>

<p>Here is a typical example. We have a group of options that should be displayed next to each other.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.options-list</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>When there is less space, horizontal scrolling will occur. That’s should be expected and isn’t actually a “problem”.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-1-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice how the items are still next to each other. To fix that, we need to allow flex wrapping.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.options-list</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-1-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>A general rule of thumb when using flexbox is to allow wrapping unless you want a scrolling wrapper. That’s another thing, but try to use <code class="highlighter-rouge">flex-wrap</code> to avoid unexpected layout behaviors (horizontal scrolling, in our case).</p>

<h2 id="spacing">Spacing</h2>
<p>We developers need to account for different content lengths. That means, spacing should be added to a component, even though it seems like not needed.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-2-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In this example, we have a section title and an action button on the right side. Currently, it looks okay. But let’s see what happens when the title is longer.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-2-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice how the text is too close to the action button? You might be thinking about multi-line wrapping, but I will come to that in another section. For now, let’s focus on the spacing.</p>

<p>If the title has spacing and text truncation, we won’t see such an issue.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.section__title</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-2-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="long-content">Long content</h2>
<p>Accounting for long content is important when building layout. As you might saw in the previous, the section title is truncated when it’s too long. That is optional, but for some UIs it’s important to account for that.</p>

<p>For me, this is a defensive CSS approach. It’s nice to get to fix the “problem” before it actually happens.</p>

<p>Here is a list of people’s names and it looks perfect for now.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-3-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>However, since this is user-generated content, we need to be careful about how to <strong>defense</strong> the layout in case of something too long.</p>

<p>See the following figure:</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-3-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In such layouts, consistency is important. To achieve that, we can simply truncate the name by using <code class="highlighter-rouge">text-overflow</code> and its friends.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.username</span> <span class="p">{</span>
    <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">text-overflow</span><span class="p">:</span> <span class="n">ellipsis</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-3-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you’re interested to sharpen your skills in handling long content in CSS, I <a href="https://ishadeed.com/article/css-short-long-content/">wrote a detailed article</a> on that topic.</p>

<h2 id="prevent-an-image-from-being-stretched-or-compressed">Prevent an image from being stretched or compressed</h2>
<p>When we don’t have control over an image’s aspect ratio on a web page, it’s better to think ahead and provide a solution when a user uploads an image that isn’t aligned with the aspect ratio.</p>

<p>In the following example, we have a card component with a photo. It looks good.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-4-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>When the user uploads an image of a different size, it will be stretched. This isn’t good. Look at how the image is stretched!</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-4-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The simplest fix for that is to use CSS <code class="highlighter-rouge">object-fit</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card__thumb</span> <span class="p">{</span>
    <span class="nl">object-fit</span><span class="p">:</span> <span class="n">cover</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-4-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>On a project level, I prefer to add <code class="highlighter-rouge">object-fit</code> to <strong>all images</strong> to avoid unexpected image results.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">img</span> <span class="p">{</span>
    <span class="nl">object-fit</span><span class="p">:</span> <span class="n">cover</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Learn more about <code class="highlighter-rouge">object-fit</code> in <a href="https://www.smashingmagazine.com/2021/10/object-fit-background-size-css/">this article</a> on Smashing Magazine.</p>

<h2 id="lock-scroll-chaining">Lock scroll chaining</h2>
<p>Have you ever opened a modal and started scrolling, and then when you reach the end and keep scrolling, the content underneath the modal (the body element) will scroll? This is called <strong>scroll chaining</strong>.</p>

<p>There have been a few hacks to make this work in the past years, but now, we can do that with CSS only, thanks to the <code class="highlighter-rouge">‌overscroll-behavior</code> CSS property.</p>

<p>In the following figure, you see the default scroll chaining behavior.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-5-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To avoid that ahead of time, we can add that to any component that needs to scroll (e.g: chat component, mobile menu.. etc). The nice thing about this property is that it won’t have an effect until there is scrolling.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.modal__content</span> <span class="p">{</span>
    <span class="py">overscroll-behavior-y</span><span class="p">:</span> <span class="n">contain</span><span class="p">;</span>
    <span class="nl">overflow-y</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-5-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In case you want to learn more about it, I wrote <a href="https://ishadeed.com/article/prevent-scroll-chaining-overscroll-behavior/">a detailed article</a> on that.</p>

<h2 id="css-variable-fallback">CSS variable fallback</h2>
<p>CSS variables are gaining more and more usage in web design. There is a method that we can apply to use them in a way that doesn’t break the experience, in case the CSS variable value was empty for some reason.</p>

<p>This is particularly useful when feeding the value of a CSS variable via Javascript. Here is an example:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">100%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--actions-width</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The variable <code class="highlighter-rouge">--actions-width</code> is being used within the <code class="highlighter-rouge">calc()</code> function and its value is coming from Javascript. Let’s suppose that Javascript failed for some reason, what will happen? The <code class="highlighter-rouge">max-width</code> will compute to <code class="highlighter-rouge">none</code>.</p>

<p>We can avoid that ahead of time and add a fallback value to the <code class="highlighter-rouge">var()</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.message__bubble</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">100%</span> <span class="n">-</span> <span class="n">var</span><span class="p">(</span><span class="n">--actions-width</span><span class="p">,</span> <span class="m">70px</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That way, if the variable isn’t defined, the fallback (<code class="highlighter-rouge">70px</code>) will be used. This approach can be used in case there is a possibility that the variable might fail (e.g: coming from Javascript). Otherwise, it’s not needed.</p>

<h2 id="using-fixed-width-or-height">Using fixed width or height</h2>
<p>One of the common things that break a layout is using a fixed width or height with an element that has content in different lengths.</p>

<h3 id="the-fixed-height">The fixed height</h3>
<p>I often see a hero section with a fixed height and content that is larger than that height, which results in a broken layout. Not sure how that looks? Here it is.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.hero</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">350px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-6-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To avoid the content leaking out of the hero, we need to use <code class="highlighter-rouge">min-height</code> instead of <code class="highlighter-rouge">height</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.hero</span> <span class="p">{</span>
    <span class="nl">min-height</span><span class="p">:</span> <span class="m">350px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-6-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>That way, if the content gets larger, the layout won’t break.</p>

<h3 id="the-fixed-width">The fixed width</h3>
<p>Have you ever seen a button that has its label too close to the left and right edges? This is due to using a fixed width.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.button</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If the button’s label is longer than <code class="highlighter-rouge">100px</code>, it will be close to the edges. If it’s too long, the text will leak out of it. This isn’t good!</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-7-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To fix that, we can simply replace <code class="highlighter-rouge">width</code> with <code class="highlighter-rouge">min-width</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.button</span> <span class="p">{</span>
    <span class="nl">min-width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="forgetting-background-repeat">Forgetting <code class="highlighter-rouge">background-repeat</code></h2>
<p>Oftentimes, when using a large image as a background, we tend to forget to account for the case when the design is viewed on a large screen. That background will <strong>repeat</strong> by default.</p>

<p>This mostly won’t be visible on a laptop screen, but it can be seen clearly on larger screens.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-8-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To avoid that behavior in advance, make sure to reset <code class="highlighter-rouge">background-repeat</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.hero</span> <span class="p">{</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="sx">url('..')</span><span class="p">;</span>
    <span class="nl">background-repeat</span><span class="p">:</span> <span class="nb">no-repeat</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="vertical-media-queries">Vertical media queries</h2>
<p>Sometimes, it’s so tempting to build a component and only test by resizing the browser’s width. Testing against the browser’s height can reveal some interesting problems.</p>

<p>Here is one that I’ve seen multiple times. We have an aside component with main and secondary links. The secondary links should be positioned at the very bottom of the aside section.</p>

<p>Consider the following example. The main and secondary navigation looks okay. In the example that I saw, the developer added <code class="highlighter-rouge">position: sticky</code> to the secondary navigation so that it can stick to the bottom.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-9-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>However, if the browser height is smaller, things will break. Notice how the two navigations are overlapped.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-9-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>By using CSS vertical media queries, we can avoid that issue.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@media</span> <span class="p">(</span><span class="n">min-height</span><span class="p">:</span> <span class="m">600px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.aside__secondary</span> <span class="p">{</span>
        <span class="nl">position</span><span class="p">:</span> <span class="n">sticky</span><span class="p">;</span>
        <span class="nl">bottom</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That way, the secondary navigation will only be sticked to the bottom <strong>if the viewport height is larger than or equals 600px</strong>. Much better, right?</p>

<p>There are probably better ways to implement that behavior (like using <code class="highlighter-rouge">margin-auto</code>) but I’m focusing on the vertical query for this example.</p>

<p>If I want to explain using CSS vertical media query, I need to write a full article about it. The good news is that I already <a href="https://ishadeed.com/article/responsive-design-height/">wrote one</a>, in case you’re interested.</p>

<h2 id="using-justify-content-space-between">Using <code class="highlighter-rouge">justify-content: space-between</code></h2>
<p>In a flex container, you might use <code class="highlighter-rouge">justify-content</code> to space the child items from each other. With a certain number of child items, the layout will look okay. However, when they increase or decrease, the layout will look odd.</p>

<p>Consider the following example.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-10-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>We have a flex container with four items. The spacing between each item isn’t a <code class="highlighter-rouge">gap</code> or <code class="highlighter-rouge">margin</code>, it’s there because the container has <code class="highlighter-rouge">justify-content: space-between</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
    <span class="nl">justify-content</span><span class="p">:</span> <span class="n">space-between</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When the number of items is less than four, here is what will happen.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-10-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>This isn’t good. There are different solutions to this:</p>
<ul>
  <li>Margin</li>
  <li>Flexbox gap (Use with caution)</li>
  <li>Padding (Can be applied to the parent of each child element)</li>
  <li>Adding <a href="https://ishadeed.com/article/new-facebook-css/#empty-elements-for-flexbox-grids">empty elements</a> to act as a spacer.</li>
</ul>

<p>For simplicity, I will use <code class="highlighter-rouge">gap</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
    <span class="py">gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-10-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="text-over-images">Text over images</h2>
<p>When using the text over an imaging approach, it’s important to account for the case where the image fails to load. How the text will look like?</p>

<p>Here is an example.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-11-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>The text looks readable, but when the image fails to load, it won’t.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-11-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>We fix that easily by adding a background color to the <code class="highlighter-rouge">&lt;img&gt;</code> element. This background will only be visible if the image fails to load. Isn’t that cool?</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card__img</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">grey</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-11-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="be-careful-with-fixed-values-in-a-css-grid">Be careful with fixed values in a CSS grid</h2>
<p>Say we have a grid that contains an aside and main. The CSS looks like this:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
    <span class="py">grid-template-columns</span><span class="p">:</span> <span class="m">250px</span> <span class="m">1</span><span class="n">fr</span><span class="p">;</span>
    <span class="py">gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This will break on small viewport sizes due to the lack of space. To avoid such an issue, always use a media query when using CSS grid like the above.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@media</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">600px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.wrapper</span> <span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
        <span class="py">grid-template-columns</span><span class="p">:</span> <span class="m">250px</span> <span class="m">1</span><span class="n">fr</span><span class="p">;</span>
        <span class="py">gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="show-a-scrollbar-only-when-its-needed">Show a scrollbar only when it’s needed</h2>
<p>Luckily, we can control to show a scrollbar or not only in the case of having a long content. That being said, it’s highly recommended to use <code class="highlighter-rouge">auto</code> as a value for <code class="highlighter-rouge">overflow</code>.</p>

<p>Consider the following example.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-12-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice how even if the content is short, there is a scrollbar visible. This isn’t good for a UI. As a designer, it’s just confusing to see a scrollbar when it’s not needed.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.element</span> <span class="p">{</span>
    <span class="nl">overflow-y</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With <code class="highlighter-rouge">overflow-y: auto</code>, the scrollbar will only be visible if the content is long. Otherwise, it won’t be there. Here is an updated figure.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-12-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="scrollbar-gutter">Scrollbar gutter</h2>
<p>Another thing that is related to scrolling is the <a href="https://ishadeed.com/article/custom-scrollbars-css/#scrollbar-gutter">scrollbar gutter</a>. Taking the previous example, when the content gets longer, adding a scrollbar will cause a layout shift. The reason the layout shift happens is to reserve a space for the scrollbar.</p>

<p>Consider the following figure.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-13-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice how the content shifted when it became longer as a result of showing a scrollbar. We can avoid that behavior by using the <code class="highlighter-rouge">scrollbar-gutter</code> property.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.element</span> <span class="p">{</span>
    <span class="py">scrollbar-gutter</span><span class="p">:</span> <span class="n">stable</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-13-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="minimum-content-size-in-css-flexbox">Minimum content size in CSS flexbox</h2>
<p>If a flex item has a text element or an image that is bigger than is longer than the item itself, the browser won’t shrink them. That is the default behavior for flexbox.</p>

<p>Consider the following example.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When the title has a very long word, it won’t wrap into a new line.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-14-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Even if we use <code class="highlighter-rouge">overflow-wrap: break-word</code>, it won’t work.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card__title</span> <span class="p">{</span>
    <span class="nl">overflow-wrap</span><span class="p">:</span> <span class="n">break-word</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To change that default behavior, we need to set the <code class="highlighter-rouge">min-width</code> of the flex item to <code class="highlighter-rouge">0</code>. That’s because the <code class="highlighter-rouge">min-width</code> default value is <code class="highlighter-rouge">auto</code>, the overflow happens.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.card__title</span> <span class="p">{</span>
    <span class="nl">overflow-wrap</span><span class="p">:</span> <span class="n">break-word</span><span class="p">;</span>
    <span class="nl">min-width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The same thing applies to a column flex wrapper, but we will use <code class="highlighter-rouge">min-height: 0</code> instead.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-14-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="minimum-content-size-in-css-grid">Minimum content size in CSS grid</h2>
<p>Similar to flexbox, CSS grid has a default minimum content size for its child items which is <code class="highlighter-rouge">auto</code>. That means, if there is an element that is larger than the grid item, it will overflow.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-15-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>In the example above, we have a carousel within the main section. For context, here is the HTML and CSS.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;main&gt;</span>
        <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"carousel"</span><span class="nt">&gt;&lt;/section&gt;</span>
    <span class="nt">&lt;/main&gt;</span>
    <span class="nt">&lt;aside&gt;&lt;/aside&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@media</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">1020px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.wrapper</span> <span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
        <span class="py">grid-template-columns</span><span class="p">:</span> <span class="m">1</span><span class="n">fr</span> <span class="m">248px</span><span class="p">;</span>
        <span class="py">grid-gap</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nc">.carousel</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">overflow-x</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Since the carousel is a flex container that doesn’t wrap, its width is larger than the main section, and thus the grid item respected that. As a result, there is horizontal scrolling.</p>

<p>To fix that, we have three different solutions:</p>
<ul>
  <li>Using <code class="highlighter-rouge">minmax()</code></li>
  <li>Applying <code class="highlighter-rouge">min-width</code> to the grid item</li>
  <li>Adding <code class="highlighter-rouge">overflow: hidden</code> to the grid item</li>
</ul>

<p>As a defensive CSS mechanism, I would go for the first one which is using the <code class="highlighter-rouge">minmax()</code> function.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@media</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">1020px</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">.wrapper</span> <span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
        <span class="py">grid-template-columns</span><span class="p">:</span> <span class="n">minmax</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="n">fr</span><span class="p">)</span> <span class="m">248px</span><span class="p">;</span>
        <span class="py">grid-gap</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-15-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>I wrote <a href="https://ishadeed.com/article/min-content-size-css-grid/">about that</a> early this year. I also highly recommend checking <a href="https://css-tricks.com/preventing-a-grid-blowout/">“Preventing a Grid Blowout”</a> and <a href="https://css-tricks.com/you-want-minmax10px-1fr-not-1fr">“You want minmax(10px, 1fr) not 1fr”</a> by Chris Coyier.</p>

<h2 id="auto-fit-vs-auto-fill">Auto fit vs auto fill</h2>
<p>When using CSS grid <code class="highlighter-rouge">minmax()</code> function, it’s important to decide between using the <code class="highlighter-rouge">auto-fit</code> or <code class="highlighter-rouge">auto-fill</code> keywords. When used incorrectly, it can lead to unexpected results.</p>

<p>When using <code class="highlighter-rouge">minmax()</code> function, the <code class="highlighter-rouge">auto-fit</code> keyword will expand the grid items to fill the available space. While <code class="highlighter-rouge">auto-fill</code> will keep the available space reserved without altering the grid items width.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-16-1.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>That being said, using <code class="highlighter-rouge">auto-fit</code> might lead to grid items being too wide, especially when they are less than expected. Consider the following example.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
    <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fit</span><span class="p">,</span> <span class="n">minmax</span><span class="p">(</span><span class="m">250px</span><span class="p">,</span> <span class="m">1</span><span class="n">fr</span><span class="p">));</span>
    <span class="py">grid-gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If there is only one grid item and <code class="highlighter-rouge">auto-fit</code> is used, the item will expand to fill the container width.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-16-2.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>Most of the time, such behavior isn’t needed, so using <code class="highlighter-rouge">auto-fill</code> is better in my opinion.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.wrapper</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">grid</span><span class="p">;</span>
    <span class="py">grid-template-columns</span><span class="p">:</span> <span class="nb">repeat</span><span class="p">(</span><span class="n">auto-fill</span><span class="p">,</span> <span class="n">minmax</span><span class="p">(</span><span class="m">250px</span><span class="p">,</span> <span class="m">1</span><span class="n">fr</span><span class="p">));</span>
    <span class="py">grid-gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-16-3.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="image-maximum-width">Image maximum width</h2>
<p>As a general rule them, don’t forget to set <code class="highlighter-rouge">max-width: 100%</code> to <strong>all</strong> images. This can be added to the CSS reset that you use.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">img</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">object-fit</span><span class="p">:</span> <span class="n">cover</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="position-sticky-css-grid">position: sticky css grid</h2>
<p>Have you ever tried using <code class="highlighter-rouge">position: sticky</code> with a child of a grid container? The default behavior for grid items is to <strong>stretch</strong>. As a result, the aside element in the example below is equal to the main section height.</p>

<figure>
    
        <img src="../../assets/defensive-css/defensive-17-1.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>To make it work as expected, you need to reset <code class="highlighter-rouge">align-self</code> property.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">aside</span> <span class="p">{</span>
    <span class="nl">align-self</span><span class="p">:</span> <span class="n">start</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="n">sticky</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
    
        <img src="../../assets/defensive-css/defensive-17-2.jpg" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>I wrote about <a href="https://ishadeed.com/article/position-sticky-css-grid/">that topic</a> in detail on my blog, if you’re interested.</p>

<h2 id="grouping-selectors">Grouping selectors</h2>
<p>It’s not recommended to group selectors that are meant to work with different browsers. For example, styling an input’s placeholder needs multiple selectors per the browser. If we group the selectors, the entire rule will be invalid, according to <a href="https://www.w3.org/TR/selectors/#grouping">w3c</a>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* Don't do this, please */</span>
<span class="nt">input</span><span class="nd">::-webkit-input-placeholder</span><span class="o">,</span>
<span class="nt">input</span><span class="nd">:-moz-placeholder</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#222</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Instead, do this.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">input</span><span class="nd">::-webkit-input-placeholder</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#222</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="nd">:-moz-placeholder</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#222</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="its-not-the-end">It’s not the end!</h2>
<p>That’s not the end, but I really enjoyed documenting all these techniques. This is an ongoing list of defensive CSS techniques that I personally use depending on the project I’m working on. If you have anything to suggest, please get in touch via Twitter @shadeed9.</p>

<h2 id="interested-in-more-content-like-that">Interested in more content like that?</h2>

<p>I wrote an ebook on everything about Debugging CSS.</p>

<figure>
    
        <img src="../../assets/css-mistakes/debugging-css.png" alt="" />
    
    
        <figcaption></figcaption>
    
</figure>

<p>If you’re interested, head over to <a href="https://debuggingcss.com/">debuggingcss.com</a> for a free preview.</p>

	</div>

	<div class="o-wrapper o-wrapper--small">
		<div class="coffee" style="padding: 2rem;
		background: #f7f7f7;
		margin-bottom: 2rem;
		border-radius: 5px;
		line-height: 1.4;">
			Do you like my content? You can support and <a href="https://www.buymeacoffee.com/EmbDfQoF6" style="color: #3863d9;">buy me a coffee</a>. Thank you so much!
		</div>
	</div>

	<div class="o-wrapper o-wrapper--small">
		<section class="c-section--more">
			<h2 class="visually-hidden">More articles</h2>
			<div class="c-section--more__content">
				<div class="c-section--more__item prev">
					
					<h3>Previous Article</h3>
					<a class="c-block--more__link prev" href="/article/position-sticky-css-grid/"> Using Position Sticky With CSS Grid</a>
					
				</div>
				<div class="c-section--more__item next">
					
				</div>
			</div>
		</section>

		<p class="rss-feed">Subscribe to my <a class="u-link" href="https://ishadeed.com/feed.xml">RSS feed</a></p>

		<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://ishadeed.us8.list-manage.com/subscribe/post?u=30743dd25d7a680eed0b535d3&amp;id=38d30cb86b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2 class="mc-title">Subscribe to the newsletter</h2>
	<p class="mc-desc">Get the latest CSS articles published by Ahmad Shadeed, a UX Designer and Front End Developer.</p>
	<div class="mc-input-group">
		<div class="mc-field-group">
			<label for="mce-EMAIL">Email Address</label>
			<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
		</div>
		<div class="mc-field-group">
			<label for="mce-FNAME">First Name </label>
			<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
		</div>
	</div>
	<div id="mce-responses">
		<div class="response" id="mce-error-response" style="display:none">erorr</div>
		<div class="response" id="mce-success-response" style="display:none">success</div>
	</div>
	<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_30743dd25d7a680eed0b535d3_38d30cb86b" tabindex="-1" value=""></div>
	<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
	
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->

	
	</div>

	

	<footer class="post-footer">
  <div class="post-author">
    <img src="../../assets/shadeed.jpg" alt="Avatar: Ahmad Shadeed" class="post-author__avatar">
    <div>
      <h2 class="post-author__name">Ahmad Shadeed</h2>
      <p class="post-author__bio">UI, UX Designer &amp; Front-End Developer. <strong>You can <a href="/hire-me">hire me</a></strong>. I Write about web accessibility on <a href="https://twitter.com/weba11ymatters">@weba11ymatters</a> and share articles on my blog.</p>
    </div>
  </div>
</footer>

</div>

<footer class="c-section c-section--footer full footer-simple">
  <div class="footer-row">
    <h3 class="c-section__title footer-copyrights">
      The online studio of Ahmad Shadeed.
      <span>© 2012–2021 Copyright Ahmad Shadeed. All rights reserved.</span>
    </h3>

    <div>
      <h3 class="social-title">Find me online</h3>
      <ul>
        <li>
          <a
            href="https://www.instagram.com/ishadeed"
            class="instagram"
            target="_blank"
            >Instagram</a
          >
        </li>
        <li>
          <a href="https://twitter.com/shadeed9" class="twitter">Twitter</a>
        </li>
        <li>
          <a href="https://www.behance.net/ishadeed" class="behance">Behance</a>
        </li>
        <li>
          <a href="https://codepen.io/shadeed/" class="linkedin">CodePen</a>
        </li>
        <li>
          <a href="https://github.com/shadeed" class="instagram">Github</a>
        </li>
        <li><a href="https://ishadeed.com/feed.xml">RSS Feed</a></li>
      </ul>
    </div>
  </div>

  <a href="#header" class="go-up" aria-label="Go up">
    <svg width="20" height="20" viewBox="0 0 24 24">
      <use xlink:href="#arrow-up"></use>
    </svg>
  </a>
</footer>


  <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "//www.google-analytics.com/analytics.js",
      "ga"
    );

    ga("create", "UA-42479265-2", "auto");
    ga("send", "pageview");
  </script>
  <script>
    var menuToggle = document.querySelector(".c-nav__toggle");
    var navWrapper = document.querySelector(".c-nav__wrapper");
    var closeNav = document.querySelector(".c-nav__close");

    menuToggle.addEventListener("click", function () {
      navWrapper.classList.add("is-active");
    });

    closeNav.addEventListener("click", function () {
      navWrapper.classList.remove("is-active");
    });

    /*let targetElement = document.querySelector('.c-section--footer');
  let cricketsAudio = document.querySelector('#crickets');

  const options = {
      root: null,
      rootMargin: '0px',
      threshold: 0
  };

  function callback (entries, observer) {
      //console.log(observer);
      entries.forEach(entry => {
          if (entry.isIntersecting) {
              cricketsAudio.play();
          } else {
              cricketsAudio.pause();
          }
      });
  }

  let observer = new IntersectionObserver(callback, options);
  observer.observe(targetElement);*/
  </script>
</body>

</html>